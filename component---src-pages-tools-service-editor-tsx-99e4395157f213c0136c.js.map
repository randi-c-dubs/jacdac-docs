{"version":3,"file":"component---src-pages-tools-service-editor-tsx-99e4395157f213c0136c.js","mappings":"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A;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,cAAc;AACd,UAAU,kBAAQ;AAClB,UAAU,kBAAQ;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH,UAAU,iBAAO;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,EAAE,yBAAe;AACjB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH,EAAE,yBAAe;AACjB;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB,kBAAkB;AAC3C;;AAEA,gDAAgD,QAAQ;AACxD;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;;;;;;;;;;;;;;;;AC1UA;;AACA;AACA;CAMA;;CAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAM4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","sources":["webpack://jacdac-docs/./node_modules/@material-ui/icons/Check.js","webpack://jacdac-docs/./src/components/RandomGenerator.tsx","webpack://jacdac-docs/./src/components/EnumSpecification.tsx","webpack://jacdac-docs/./src/components/ServiceSpecification.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardDeviceItem.tsx","webpack://jacdac-docs/./node_modules/use-editable/dist/use-editable.es.js","webpack://jacdac-docs/./src/components/ui/HighlightTextField.tsx","webpack://jacdac-docs/./src/components/tools/ServiceSpecificationEditor.tsx","webpack://jacdac-docs/./src/pages/tools/service-editor.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"\n}), 'Check');\n\nexports.default = _default;","import React, { useState } from \"react\"\nimport {\n    deviceSpecificationFromProductIdentifier,\n    serviceSpecificationFromClassIdentifier,\n} from \"../../jacdac-ts/src/jdom/spec\"\nimport {\n    Card,\n    makeStyles,\n    CardContent,\n    CardActions,\n    Typography,\n    createStyles,\n    Input,\n} from \"@material-ui/core\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport CheckIcon from \"@material-ui/icons/Check\"\n// tslint:disable-next-line: no-submodule-imports\nimport Alert from \"./ui/Alert\"\nimport { Button } from \"gatsby-theme-material-ui\"\nimport { NoSsr } from \"@material-ui/core\"\nimport { useId } from \"react-use-id-hook\"\nimport { cryptoRandomUint32 } from \"../../jacdac-ts/src/jdom/random\"\nimport { toFullHex } from \"../../jacdac-ts/src/jdom/utils\"\n\nfunction looksRandom(n: number) {\n    const s = n.toString(16)\n    const h = \"0123456789abcdef\"\n    for (let i = 0; i < h.length; ++i) {\n        const hh = h[i]\n        if (s.indexOf(hh + hh + hh) >= 0) return false\n    }\n    if (/f00d|dead|deaf|beef/.test(s)) return false\n    return true\n}\n\nfunction genServId() {\n    const n = cryptoRandomUint32(1)\n    if (n === undefined) return undefined\n    return (n[0] & 0xfff_ffff) | 0x1000_0000\n}\n\nfunction genFirmwareId() {\n    const n = cryptoRandomUint32(1)\n    if (n === undefined) return undefined\n    return (n[0] & 0xfff_ffff) | 0x3000_0000\n}\n\nexport function uniqueServiceId() {\n    let id = genServId()\n    while (\n        id !== undefined &&\n        (!looksRandom(id) || serviceSpecificationFromClassIdentifier(id))\n    ) {\n        id = genServId()\n    }\n    return id !== undefined && toFullHex([id])\n}\n\nexport function uniqueDeviceId() {\n    const n = cryptoRandomUint32(2)\n    return n !== undefined && toFullHex([n[0], n[1]])\n}\n\nexport function uniqueFirmwareId() {\n    let id = genFirmwareId()\n    while (\n        id !== undefined &&\n        (!looksRandom(id) || deviceSpecificationFromProductIdentifier(id))\n    ) {\n        id = genFirmwareId()\n    }\n    return id !== undefined && toFullHex([id])\n}\n\nconst useStyles = makeStyles(\n    createStyles({\n        root: {\n            minWidth: 275,\n            marginBottom: \"1rem\",\n        },\n        title: {\n            fontSize: 14,\n        },\n    })\n)\n\nexport default function RandomGenerator(props: {\n    device?: boolean\n    firmware?: boolean\n}) {\n    const { device, firmware } = props\n    const labelId = useId()\n    const fieldId = useId()\n    const classes = useStyles()\n    const [value, setValue] = useState(\n        device ? uniqueDeviceId() : uniqueServiceId()\n    )\n    const [copySuccess, setCopySuccess] = useState(false)\n\n    const handleRegenerate = () => {\n        const v = device\n            ? uniqueDeviceId()\n            : firmware\n            ? uniqueFirmwareId()\n            : uniqueServiceId()\n        setValue(v)\n        setCopySuccess(false)\n    }\n    const handleCopy = async () => {\n        try {\n            await navigator.clipboard.writeText(value)\n            setCopySuccess(true)\n        } catch (err) {\n            setCopySuccess(false)\n        }\n    }\n    const title = device\n        ? \"Random Device Identifier\"\n        : firmware\n        ? \"Random Product Identifier\"\n        : \"Random Service Identifier\"\n    return (\n        <NoSsr>\n            <Card className={classes.root}>\n                <CardContent>\n                    <Typography\n                        id={labelId}\n                        className={classes.title}\n                        color=\"textSecondary\"\n                        gutterBottom\n                    >\n                        {title}\n                    </Typography>\n                    {value !== undefined && (\n                        <Typography variant=\"h5\" component=\"h2\">\n                            <Input\n                                id={fieldId}\n                                value={value}\n                                readOnly={true}\n                                inputProps={{\n                                    \"aria-labelledby\": labelId,\n                                }}\n                            />\n                            {copySuccess && <CheckIcon />}\n                        </Typography>\n                    )}\n                    {value === undefined && (\n                        <Alert severity=\"error\">\n                            Oops, unable to generate a strong random number.\n                        </Alert>\n                    )}\n                </CardContent>\n                <CardActions>\n                    <Button\n                        aria-label=\"copy random number to clipboard\"\n                        size=\"small\"\n                        variant=\"contained\"\n                        onClick={handleCopy}\n                    >\n                        Copy\n                    </Button>\n                    <Button\n                        aria-label=\"regenerate random number\"\n                        size=\"small\"\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={handleRegenerate}\n                    >\n                        Regenerate\n                    </Button>\n                </CardActions>\n            </Card>\n        </NoSsr>\n    )\n}\n","import React, { Fragment } from \"react\"\nimport { serviceSpecificationFromClassIdentifier } from \"../../jacdac-ts/src/jdom/spec\"\nimport { Chip } from \"@material-ui/core\"\n\nexport default function EnumSpecification(props: { serviceClass: number }) {\n    const { serviceClass } = props\n    const spec = serviceSpecificationFromClassIdentifier(serviceClass)\n    const enums = Object.values(spec?.enums || {}).filter(en => !en.derived)\n    if (!enums.length)\n        return <></>\n\n    return <Fragment>\n        <h2>Enums</h2>\n        {enums.map(e => <Fragment key={e.name}>\n            <h3>{e.name} {e.isFlags && <Chip label=\"flags\" size=\"small\" />}</h3>\n            <ul>\n                {Object.keys(e.members).map(en => <li key={en}>{en}: <code>0x{e.members[en].toString(16)}</code></li>)}\n            </ul>\n        </Fragment>)}\n    </Fragment>\n}\n","import React, { Fragment, useContext } from \"react\"\nimport { Link } from \"gatsby-theme-material-ui\"\nimport {\n    serviceSpecificationFromName,\n    isRegister,\n    isEvent,\n    isCommand,\n    isPipeReport,\n    isReportOf,\n    isPipeReportOf,\n} from \"../../jacdac-ts/src/jdom/spec\"\nimport PacketSpecification from \"../components/PacketSpecification\"\nimport IDChip from \"./IDChip\"\nimport Markdown from \"./ui/Markdown\"\nimport EnumSpecification from \"./EnumSpecification\"\nimport { Box, Grid } from \"@material-ui/core\"\nimport ServiceSpecificationStatusAlert from \"./ServiceSpecificationStatusAlert\"\nimport useServiceProviderFromServiceClass from \"./hooks/useServiceProviderFromServiceClass\"\nimport JacdacContext, { JacdacContextProps } from \"../jacdac/Context\"\nimport useChange from \"../jacdac/useChange\"\nimport DashbardDeviceItem from \"./dashboard/DashboardDeviceItem\"\n\nfunction DashboardServiceDevices(props: { serviceClass: number }) {\n    const { serviceClass } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const devices = useChange(bus, b => b.devices({ serviceClass }))\n    return (\n        <Grid container spacing={1}>\n            {devices.map(device => (\n                <DashbardDeviceItem\n                    key={device.id}\n                    device={device}\n                    showAvatar={true}\n                    showHeader={true}\n                />\n            ))}\n        </Grid>\n    )\n}\n\nexport default function ServiceSpecification(props: {\n    service: jdspec.ServiceSpec\n    showDerived?: boolean\n}) {\n    const { service: node, showDerived } = props\n    const { shortId, name, classIdentifier } = node\n    const packets = node.packets.filter(pkt => showDerived || !pkt.derived)\n    const registers = packets.filter(isRegister)\n    const events = packets.filter(isEvent)\n    const commands = packets.filter(isCommand)\n    const reports = packets.filter(r => r.secondary)\n    const pipeReports = packets.filter(isPipeReport)\n    const others = packets.filter(\n        r =>\n            registers.indexOf(r) < 0 &&\n            events.indexOf(r) < 0 &&\n            commands.indexOf(r) < 0 &&\n            reports.indexOf(r) < 0 &&\n            pipeReports.indexOf(r) < 0\n    )\n    // spin up provider on demand\n    useServiceProviderFromServiceClass(node.classIdentifier)\n\n    const reportOf = (pkt: jdspec.PacketInfo) =>\n        reports.find(rep => isReportOf(pkt, rep))\n    const pipeReportOf = (pkt: jdspec.PacketInfo) =>\n        pipeReports.find(rep => isPipeReportOf(pkt, rep))\n\n    return (\n        <Fragment key={`servicespec${shortId}`}>\n            <h1 key=\"title\">\n                {name}\n                <Box ml={1} component=\"span\">\n                    <IDChip\n                        id={node.classIdentifier}\n                        filter={`srv:${shortId}`}\n                    />\n                </Box>\n            </h1>\n            <ServiceSpecificationStatusAlert specification={node} />\n            <Markdown key=\"notesshort\" source={node.notes.short} />\n            {!!node.extends?.length && (\n                <p key=\"extends\">\n                    <span>Extends </span>\n                    {node.extends.map((extend, i) => (\n                        <Fragment key={`extend${extend}`}>\n                            {i > 0 && <span>, </span>}\n                            <Link\n                                key={`extend${extend}`}\n                                to={`/services/${extend}/`}\n                            >\n                                {serviceSpecificationFromName(extend).name}\n                            </Link>\n                        </Fragment>\n                    ))}\n                    .\n                </p>\n            )}\n            <Markdown key=\"noteslong\" source={node.notes.long || \"\"} />\n            <DashboardServiceDevices serviceClass={classIdentifier} />\n            <EnumSpecification key=\"enums\" serviceClass={classIdentifier} />\n            {[\n                {\n                    name: \"Registers\",\n                    packets: registers,\n                    note: node.notes[\"registers\"],\n                },\n                { name: \"Events\", packets: events, note: node.notes[\"events\"] },\n                {\n                    name: \"Commands\",\n                    packets: commands,\n                    note: node.notes[\"commands\"],\n                },\n                { name: \"Others\", packets: others, note: node.notes[\"others\"] },\n            ]\n                .filter(group => group.packets.length)\n                .map(group => (\n                    <Fragment key={`group${group.name}`}>\n                        <h2>{group.name}</h2>\n                        {group.note && (\n                            <Markdown\n                                key={`node${group.name}`}\n                                source={group.note}\n                            />\n                        )}\n                        {group.packets\n                            .sort(\n                                (l, r) =>\n                                    (l.derived ? 1 : -1) - (r.derived ? 1 : -1)\n                            )\n                            .map((pkt, i) => (\n                                <PacketSpecification\n                                    key={`pkt${pkt.name}`}\n                                    serviceClass={node.classIdentifier}\n                                    packetInfo={pkt}\n                                    reportInfo={reportOf(pkt)}\n                                    pipeReportInfo={pipeReportOf(pkt)}\n                                    showDevices={true}\n                                />\n                            ))}\n                    </Fragment>\n                ))}\n        </Fragment>\n    )\n}\n","import { Grid } from \"@material-ui/core\";\nimport React, { useContext } from \"react\";\nimport JDDevice from \"../../../jacdac-ts/src/jdom/device\";\nimport DashboardDevice from \"./DashboardDevice\";\nimport { GridBreakpoints } from \"../useGridBreakpoints\";\nimport { DashboardDeviceProps } from \"./Dashboard\";\nimport useChange from \"../../jacdac/useChange\";\nimport { dashboardServiceWeight } from \"./DashboardServiceWidget\";\nimport AppContext, { DrawerType } from \"../AppContext\";\n\nexport default function DashboardDeviceItem(props: {\n    device: JDDevice,\n    expanded?: boolean,\n    toggleExpanded?: () => void,\n    variant?: \"icon\" | \"\"\n} & DashboardDeviceProps) {\n    const { device, expanded, toggleExpanded, variant, ...other } = props;\n    const { drawerType } = useContext(AppContext)\n    const breakpoints: GridBreakpoints = useChange(device, () => {\n        const breakpointWeight = device.services()\n            .map(srv => {\n                return dashboardServiceWeight(srv)\n                    || (srv.readingRegister || srv.valueRegister || srv.intensityRegister ? 1 : 0)\n            })\n            .reduce((c: number, v) => c + v, 0);\n\n        if (breakpointWeight > 3 || drawerType !== DrawerType.None)\n            return { xs: 12, sm: 12, md: 12, lg: 6, xl: 6 };\n        else if (breakpointWeight == 3)\n            return { xs: 12, sm: 12, md: 4, lg: 4, xl: 4 };\n        else if (breakpointWeight == 2)\n            return { xs: 12, sm: 6, md: 4, lg: 3, xl: 4 };\n        else\n            return { xs: expanded ? 12 : 6, sm: 4, md: 3, lg: 2, xl: \"auto\" };\n    }, [expanded, drawerType]);\n\n    // based on size, expanded or reduce widget size\n    return <Grid item {...breakpoints}>\n        <DashboardDevice\n            device={device}\n            expanded={expanded}\n            toggleExpanded={toggleExpanded}\n            variant={variant}\n            {...other}\n        />\n    </Grid>\n}","import { useState, useMemo, useLayoutEffect } from \"react\";\nvar m = {\n  characterData: !0,\n  characterDataOldValue: !0,\n  childList: !0,\n  subtree: !0\n};\n\nfunction p(c) {\n  var a = window.getSelection();\n  a.empty();\n  a.addRange(c);\n}\n\nfunction q(c) {\n  return (c.metaKey || c.ctrlKey) && !c.altKey && \"KeyZ\" === c.code;\n}\n\nfunction r(c) {\n  c = [c.firstChild];\n\n  for (var b, a = \"\"; b = c.pop();) {\n    b.nodeType === Node.TEXT_NODE ? a += b.textContent : b.nodeType === Node.ELEMENT_NODE && \"BR\" === b.nodeName && (a += \"\\n\"), b.nextSibling && c.push(b.nextSibling), b.firstChild && c.push(b.firstChild);\n  }\n\n  \"\\n\" !== a[a.length - 1] && (a += \"\\n\");\n  return a;\n}\n\nfunction w(c) {\n  var a = window.getSelection().getRangeAt(0),\n      b = a.collapsed ? 0 : a.toString().length,\n      f = document.createRange();\n  f.setStart(c, 0);\n  f.setEnd(a.startContainer, a.startOffset);\n  return {\n    position: c = (f = f.toString()).length,\n    extent: b,\n    content: f = (f = f.split(\"\\n\"))[a = f.length - 1],\n    line: a\n  };\n}\n\nfunction C(c, a, b) {\n  0 >= a && (a = 0);\n\n  if (!b || 0 > b) {\n    b = a;\n  }\n\n  var f = document.createRange();\n  c = [c.firstChild];\n\n  for (var d, l = 0, g = a; d = c[c.length - 1];) {\n    if (d.nodeType === Node.TEXT_NODE) {\n      if (l + d.textContent.length >= g) {\n        var h = g - l;\n\n        if (g === a) {\n          if (g = f, h < d.textContent.length ? g.setStart(d, h) : g.setStartAfter(d), b !== a) {\n            g = b;\n            continue;\n          } else {\n            break;\n          }\n        } else {\n          a = f;\n          h < (b = d).textContent.length ? a.setEnd(b, h) : a.setEndAfter(b);\n          break;\n        }\n      }\n\n      l += d.textContent.length;\n    } else if (d.nodeType === Node.ELEMENT_NODE && \"BR\" === d.nodeName) {\n      if (l + 1 >= g) {\n        if (g === a) {\n          if (h = f, 0 < d.textContent.length ? h.setStart(d, 0) : h.setStartAfter(d), b !== a) {\n            g = b;\n            continue;\n          } else {\n            break;\n          }\n        } else {\n          a = f;\n          0 < (b = d).textContent.length ? a.setEnd(b, 0) : a.setEndAfter(b);\n          break;\n        }\n      }\n\n      l++;\n    }\n\n    c.pop();\n    d.nextSibling && c.push(d.nextSibling);\n    d.firstChild && c.push(d.firstChild);\n  }\n\n  return f;\n}\n\nexport function useEditable(c, a, b) {\n  function f(k) {\n    var b = c.current;\n\n    if (b) {\n      var a = w(b);\n      b = r(b);\n      a.position += k.length - b.length;\n      e.position = a;\n      e.onChange(k, a);\n    }\n  }\n\n  function l(k, b) {\n    var e = c.current;\n\n    if (e) {\n      var a = window.getSelection().getRangeAt(0);\n      a.deleteContents();\n      a.collapse();\n      var d = b || 0;\n      (a = C(e, b = (a = w(e)).position + (0 > d ? d : 0), a.position + (0 < d ? d : 0))).deleteContents();\n      k && a.insertNode(document.createTextNode(k));\n      p(C(e, b + k.length));\n    }\n  }\n\n  function d(b) {\n    var a = c.current;\n\n    if (a) {\n      a.focus();\n      var e = 0;\n\n      if (\"number\" == typeof b) {\n        e = b;\n      } else {\n        var k = r(a).split(\"\\n\").slice(0, b.row);\n        b.row && (e += k.join(\"\\n\").length + 1);\n        e += b.column;\n      }\n\n      p(C(a, e));\n    }\n  }\n\n  function g() {\n    var b = c.current;\n    return {\n      text: r(b),\n      position: b = w(b)\n    };\n  }\n\n  function h() {\n    e.observer.disconnect();\n  }\n\n  b || (b = {});\n  var D = useState([])[1],\n      e = useState(function () {\n    var e = {\n      observer: null,\n      disconnected: !1,\n      onChange: a,\n      queue: [],\n      history: [],\n      historyAt: -1,\n      position: null\n    };\n    \"undefined\" != typeof MutationObserver && (e.observer = new MutationObserver(function b(b) {\n      var a;\n      (a = e.queue).push.apply(a, b);\n    }));\n    return e;\n  })[0],\n      n = useMemo(function () {\n    return {\n      update: f,\n      insert: l,\n      move: d,\n      getState: g\n    };\n  }, []);\n\n  if (\"object\" != typeof navigator) {\n    return n;\n  }\n\n  useLayoutEffect(function () {\n    e.onChange = a;\n\n    if (c.current && !b.disabled) {\n      e.disconnected = !1;\n      e.observer.observe(c.current, m);\n\n      if (e.position) {\n        var k = e.position,\n            d = k.position;\n        p(C(c.current, d, d + k.extent));\n      }\n\n      return h;\n    }\n  });\n  useLayoutEffect(function () {\n    if (!c.current || b.disabled) {\n      e.history.length = 0, e.historyAt = -1;\n    } else {\n      var a = c.current;\n\n      if (e.position) {\n        a.focus();\n        var d = e.position,\n            f = d.position;\n        p(C(a, f, f + d.extent));\n      }\n\n      var g = a.style.whiteSpace,\n          h = a.contentEditable,\n          l = !0;\n\n      try {\n        a.contentEditable = \"plaintext-only\";\n      } catch (u) {\n        a.contentEditable = \"true\", l = !1;\n      }\n\n      \"pre\" !== g && (a.style.whiteSpace = \"pre-wrap\");\n      b.indentation && (a.style.tabSize = a.style.MozTabSize = \"\" + b.indentation);\n      d = \"\" + \" \".repeat(b.indentation || 0);\n\n      var x,\n          E = new RegExp(\"^(?:\" + d + \")\"),\n          F = new RegExp(\"^(?:\" + d + \")*(\" + d + \")$\"),\n          t = function t(b) {\n        if (c.current && e.position) {\n          var u = r(a),\n              d = w(a),\n              f = new Date().valueOf(),\n              g = e.history[e.historyAt];\n          !b && 500 > f - x || g && g[1] === u ? x = f : (b = ++e.historyAt, e.history[b] = [d, u], e.history.splice(b + 1), 500 < b && (e.historyAt--, e.history.shift()));\n        }\n      },\n          v = function v() {\n        var b;\n        (b = e.queue).push.apply(b, e.observer.takeRecords());\n        b = w(a);\n\n        if (e.queue.length) {\n          e.observer.disconnect();\n          e.disconnected = !0;\n          var d = r(a);\n          e.position = b;\n\n          for (var c, f; c = e.queue.pop();) {\n            null !== c.oldValue && (c.target.textContent = c.oldValue);\n\n            for (f = c.removedNodes.length - 1; 0 <= f; f--) {\n              c.target.insertBefore(c.removedNodes[f], c.nextSibling);\n            }\n\n            for (f = c.addedNodes.length - 1; 0 <= f; f--) {\n              c.addedNodes[f].parentNode && c.target.removeChild(c.addedNodes[f]);\n            }\n          }\n\n          e.onChange(d, b);\n        }\n      },\n          y = function y(c) {\n        if (!c.defaultPrevented && c.target === a) {\n          if (e.disconnected) {\n            return c.preventDefault(), D([]);\n          }\n\n          if (q(c)) {\n            c.preventDefault(), c.shiftKey ? (c = ++e.historyAt, (c = e.history[c]) || (e.historyAt = e.history.length - 1)) : (c = --e.historyAt, (c = e.history[c]) || (e.historyAt = 0)), c && (e.observer.disconnect(), e.disconnected = !0, e.position = c[0], e.onChange(c[1], c[0]));\n          } else {\n            t();\n\n            if (\"Enter\" === c.key) {\n              c.preventDefault();\n              var d = w(a),\n                  f = /\\S/g.exec(d.content);\n              d = \"\\n\" + d.content.slice(0, f ? f.index : d.content.length);\n              n.insert(d);\n            } else if ((!l || b.indentation) && \"Backspace\" === c.key) {\n              c.preventDefault(), window.getSelection().getRangeAt(0).collapsed ? (d = w(a), d = F.exec(d.content), n.insert(\"\", d ? -d[1].length : -1)) : n.insert(\"\", 0);\n            } else if (b.indentation && \"Tab\" === c.key) {\n              c.preventDefault();\n              f = (d = w(a)).position - d.content.length;\n              var g = r(a);\n              d = c.shiftKey ? g.slice(0, f) + d.content.replace(E, \"\") + g.slice(f + d.content.length) : g.slice(0, f) + (b.indentation ? \" \".repeat(b.indentation) : \"\\t\") + g.slice(f);\n              n.update(d);\n            }\n\n            c.repeat && v();\n          }\n        }\n      },\n          z = function z(b) {\n        b.defaultPrevented || b.isComposing || (q(b) || t(), v(), a.focus());\n      },\n          A = function A(b) {\n        e.position = window.getSelection().rangeCount && b.target === a ? w(a) : null;\n      },\n          B = function B(a) {\n        a.preventDefault();\n        t(!0);\n        n.insert(a.clipboardData.getData(\"text/plain\"));\n        t(!0);\n        v();\n      };\n\n      document.addEventListener(\"selectstart\", A);\n      window.addEventListener(\"keydown\", y);\n      a.addEventListener(\"paste\", B);\n      a.addEventListener(\"keyup\", z);\n      return function () {\n        document.removeEventListener(\"selectstart\", A);\n        window.removeEventListener(\"keydown\", y);\n        a.removeEventListener(\"paste\", B);\n        a.removeEventListener(\"keyup\", z);\n        a.style.whiteSpace = g;\n        a.contentEditable = h;\n      };\n    }\n  }, [c.current, b.disabled, b.indentation]);\n  return n;\n}","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable react/jsx-key */\nimport React, { useContext, useRef, lazy } from \"react\"\nimport Highlight, {\n    defaultProps,\n    Language,\n    PrismTheme,\n} from \"prism-react-renderer\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport LIGHT_THEME from \"prism-react-renderer/themes/github\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DARK_THEME from \"prism-react-renderer/themes/vsDark\"\nimport DarkModeContext from \"./DarkModeContext\"\nimport { useEditable } from \"use-editable\"\nimport { Alert } from \"@material-ui/lab\"\nimport { Grid, Tooltip, withStyles } from \"@material-ui/core\"\nimport Suspense from \"../ui/Suspense\";\nconst GithubPullRequestButton = lazy(() => import('../buttons/GithubPullRequestButton'));\n\nconst AnnotationTooltip = withStyles(theme => ({\n    arrow: {\n        color: theme.palette.error.main,\n    },\n    tooltip: {\n        backgroundColor: theme.palette.error.main,\n        color: theme.palette.common.white,\n        boxShadow: theme.shadows[1],\n        fontSize: theme.typography.body2.fontSize,\n    },\n}))(Tooltip)\n\nexport default function HighlightTextField(props: {\n    language: string\n    code: string\n    onChange: (newValue: string) => void\n    annotations?: jdspec.Diagnostic[]\n    pullRequestTitle?: string\n    pullRequestPath?: string\n    pullRequestDescription?: string\n}) {\n    const {\n        code,\n        onChange,\n        language,\n        annotations,\n        pullRequestTitle,\n        pullRequestPath,\n        pullRequestDescription,\n    } = props\n    const { darkMode } = useContext(DarkModeContext)\n    const theme = (darkMode === \"dark\" ? DARK_THEME : LIGHT_THEME) as PrismTheme\n    const editorRef = useRef(null)\n\n    useEditable(editorRef, onChange, {\n        disabled: false,\n        indentation: 4,\n    })\n    return (\n        <Grid container spacing={1} direction=\"row\">\n            <Grid item xs={12}>\n                <Highlight\n                    {...defaultProps}\n                    code={code}\n                    language={language as Language}\n                    theme={theme}\n                >\n                    {({ className, style, tokens, getTokenProps }) => (\n                        <pre\n                            ref={editorRef}\n                            className={className}\n                            spellCheck={false}\n                            style={{\n                                ...style,\n                                ...{\n                                    minHeight: \"12rem\",\n                                    whiteSpace: \"pre-wrap\",\n                                },\n                            }}\n                        >\n                            {tokens.map((line, i) => {\n                                const annotation = annotations?.find(\n                                    a => a.line === i + 1\n                                )\n                                const title = annotation?.message\n                                const el = (\n                                    <span\n                                        key={i}\n                                        style={\n                                            annotation && {\n                                                borderBottom: \"dashed 1px red\",\n                                            }\n                                        }\n                                    >\n                                        {line\n                                            .filter(token => !token.empty)\n                                            .map((token, key) => (\n                                                <span\n                                                    {...getTokenProps({\n                                                        token,\n                                                        key,\n                                                    })}\n                                                />\n                                            ))}\n                                        {i < tokens.length - 1 ? \"\\n\" : null}\n                                    </span>\n                                )\n                                return title ? (\n                                    <AnnotationTooltip\n                                        title={title}\n                                        arrow\n                                        key={i}\n                                    >\n                                        {el}\n                                    </AnnotationTooltip>\n                                ) : (\n                                    el\n                                )\n                            })}\n                        </pre>\n                    )}\n                </Highlight>\n            </Grid>\n            {!!annotations?.length && (\n                <Grid item xs={12}>\n                    <Alert severity=\"error\">\n                        <ul>\n                            {annotations.map((a, i) => (\n                                <li key={i}>\n                                    line {a.line}: {a.message}\n                                </li>\n                            ))}\n                        </ul>\n                    </Alert>\n                </Grid>\n            )}\n            {pullRequestTitle && pullRequestPath && (\n                <Grid item>\n                    <Suspense>\n                        <GithubPullRequestButton\n                            title={pullRequestTitle}\n                            head={pullRequestPath}\n                            description={pullRequestDescription}\n                            files={{\n                                [pullRequestPath + \".md\"]: code,\n                            }}\n                        />\n                    </Suspense>\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n","import React, { useMemo } from \"react\"\nimport { Grid } from \"@material-ui/core\"\nimport { parseServiceSpecificationMarkdownToJSON } from \"../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\nimport { serviceMap } from \"../../../jacdac-ts/src/jdom/spec\"\nimport RandomGenerator from \"../RandomGenerator\"\nimport useLocalStorage from \"../hooks/useLocalStorage\"\nimport HighlightTextField from \"../ui/HighlightTextField\"\nimport ServiceSpecification from \"../ServiceSpecification\"\n\nconst SERVICE_SPECIFICATION_STORAGE_KEY =\n    \"jacdac:servicespecificationeditorsource\"\n\nexport default function ServiceSpecificationEditor() {\n    const [source, setSource] = useLocalStorage(\n        SERVICE_SPECIFICATION_STORAGE_KEY,\n        \"\"\n    )\n    const json = useMemo(\n        () => parseServiceSpecificationMarkdownToJSON(source, serviceMap()),\n        [source]\n    )\n    const servicePath =\n        json &&\n        `services/${(\n            json.camelName ||\n            json.shortId ||\n            `0x${json.classIdentifier.toString(16)}`\n        ).toLowerCase()}`\n    return (\n        <Grid spacing={1} container>\n            <Grid item xs={12}>\n                <HighlightTextField\n                    code={source}\n                    language={\"markdown\"}\n                    onChange={setSource}\n                    annotations={json?.errors}\n                    pullRequestTitle={json && `Service: ${json.name}`}\n                    pullRequestPath={servicePath}\n                    pullRequestDescription={`This pull request defines a new service.`}\n                />\n            </Grid>\n            <Grid item>\n                <RandomGenerator device={false} />\n                {json && <ServiceSpecification service={json} />}\n            </Grid>\n        </Grid>\n    )\n}\n","import { Link } from \"gatsby-theme-material-ui\"\nimport React from \"react\"\nimport ServiceSpecificationEditor from '../../components/tools/ServiceSpecificationEditor'\n\nexport default function Page() {\n    return <>\n        <h1>Service Specification Editor</h1>\n        <p>\n\n            Read the <Link to=\"/reference/service-specification\">service specifiation</Link> documentation.\nUse the packet console to monitor packets from your devices.\n        </p>\n        <ServiceSpecificationEditor />\n    </>\n}"],"names":["React","useState","deviceSpecificationFromProductIdentifier","serviceSpecificationFromClassIdentifier","Card","makeStyles","CardContent","CardActions","Typography","createStyles","Input","CheckIcon","Alert","Button","NoSsr","useId","cryptoRandomUint32","toFullHex","looksRandom","n","s","toString","h","i","length","hh","indexOf","test","genServId","undefined","genFirmwareId","uniqueServiceId","id","uniqueDeviceId","uniqueFirmwareId","useStyles","root","minWidth","marginBottom","title","fontSize","RandomGenerator","props","device","firmware","labelId","fieldId","classes","value","setValue","copySuccess","setCopySuccess","handleRegenerate","v","handleCopy","navigator","clipboard","writeText","err","Fragment","Chip","EnumSpecification","serviceClass","spec","enums","Object","values","filter","en","derived","map","e","name","isFlags","keys","members","useContext","Link","serviceSpecificationFromName","isRegister","isEvent","isCommand","isPipeReport","isReportOf","isPipeReportOf","PacketSpecification","IDChip","Markdown","Box","Grid","ServiceSpecificationStatusAlert","useServiceProviderFromServiceClass","JacdacContext","useChange","DashbardDeviceItem","DashboardServiceDevices","bus","devices","b","ServiceSpecification","service","node","showDerived","shortId","classIdentifier","packets","pkt","registers","events","commands","reports","r","secondary","pipeReports","others","reportOf","find","rep","pipeReportOf","notes","short","extends","extend","long","note","group","sort","l","DashboardDevice","dashboardServiceWeight","AppContext","DrawerType","DashboardDeviceItem","expanded","toggleExpanded","variant","other","drawerType","breakpoints","breakpointWeight","services","srv","readingRegister","valueRegister","intensityRegister","reduce","c","None","xs","sm","md","lg","xl","useRef","lazy","Highlight","defaultProps","LIGHT_THEME","DARK_THEME","DarkModeContext","useEditable","Tooltip","withStyles","Suspense","GithubPullRequestButton","AnnotationTooltip","theme","arrow","color","palette","error","main","tooltip","backgroundColor","common","white","boxShadow","shadows","typography","body2","HighlightTextField","code","onChange","language","annotations","pullRequestTitle","pullRequestPath","pullRequestDescription","darkMode","editorRef","disabled","indentation","className","style","tokens","getTokenProps","minHeight","whiteSpace","line","annotation","a","message","el","borderBottom","token","empty","key","useMemo","parseServiceSpecificationMarkdownToJSON","serviceMap","useLocalStorage","SERVICE_SPECIFICATION_STORAGE_KEY","ServiceSpecificationEditor","source","setSource","json","servicePath","camelName","toLowerCase","errors","Page"],"sourceRoot":""}