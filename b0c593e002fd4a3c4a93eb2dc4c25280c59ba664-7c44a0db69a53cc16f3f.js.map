{"version":3,"file":"b0c593e002fd4a3c4a93eb2dc4c25280c59ba664-7c44a0db69a53cc16f3f.js","mappings":"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ACA;AACA;AACA,iBAAiB,6BAA6B;AAC9C;AACA;AACA,gBAAgB,+BAA+B;AAC/C,gBAAgB,+BAA+B;AAC/C,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,yBAAyB;AACzC,gBAAgB,yBAAyB;AACzC,GAAG;AACH;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C,GAAG;AACH;AACA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,yBAAyB;AACzC,gBAAgB,yBAAyB;AACzC,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,0DAA0D,qBAAqB;AAC/E;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA,mBAAmB,4BAA4B;AAC/C;AACA;;AAEA,kBAAkB,qBAAqB;AACvC;AACA;AACA;;AAEA;AACA;;AAEA,kBAAkB,qBAAqB;AACvC;AACA;AACA,KAAK;AACL;AACA;;AAEA,sBAAsB,EAAE;AACxB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,sBAAsB,qBAAqB;AAC3C;AACA;AACA;AACA;AACA;;AAEA,aAAa,yBAAyB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB,gBAAgB,wBAAwB;AACnF,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C,GAAG;AACH;AACA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA;AACA,GAAG;AACH;AACA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA,KAAK;AACL,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,yBAAyB;AACzC,gBAAgB,wBAAwB;AACxC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB,wBAAwB,eAAe,uBAAuB;AAClF,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,4BAA4B;AAC5C;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,yBAAyB;AACzC,gBAAgB,yBAAyB;AACzC,GAAG;AACH;AACA,iBAAiB,eAAe;AAChC;AACA;AACA,gBAAgB,uBAAuB;AACvC,gBAAgB,uBAAuB;AACvC,GAAG;AACH;AACA,iBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,2BAA2B;AAC5C;AACA;AACA;AACA,KAAK;AACL,iBAAiB,4BAA4B;AAC7C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA;AACA,iBAAiB,4BAA4B;AAC7C;AACA;AACA;AACA,gBAAgB,2BAA2B;AAC3C,GAAG;AACH;AACA,iBAAiB,oCAAoC;AACrD;AACA;AACA;AACA;AACA,gBAAgB,+BAA+B;AAC/C,GAAG;AACH;AACA,iBAAiB,gCAAgC;AACjD;AACA;AACA;AACA,gBAAgB,6BAA6B;AAC7C,GAAG;AACH;AACA,WAAW,6BAA6B;AACxC,YAAY,8BAA8B;AAC1C,WAAW,6BAA6B;AACxC,YAAY,8BAA8B;AAC1C,WAAW,6BAA6B;AACxC,YAAY,8BAA8B;AAC1C,YAAY,gCAAgC;AAC5C,WAAW,+BAA+B;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,4CAA4C,wBAAwB;AACpE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,iDAAiD,4BAA4B;AAC7E;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA,sBAAsB,EAAE;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,sBAAsB,wBAAwB;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA,sBAAsB,wBAAwB;AAC9C;AACA;;AAEA,kBAAkB,wBAAwB;AAC1C;AACA;;AAEA;AACA,KAAK;AACL;AACA,sBAAsB,wBAAwB;AAC9C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,OAAO;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,8BAA8B;AAC/C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,4BAA4B;AAC5C,gBAAgB,4BAA4B;AAC5C,GAAG;AACH;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,8BAA8B;AAC/C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,4BAA4B;AAC5C,gBAAgB,4BAA4B;AAC5C,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,uCAAuC,iBAAiB,uCAAuC;AACnH,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,iBAAiB,8BAA8B;AAC/C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,gCAAgC;AAChD;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,8BAA8B;AAC/C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,gBAAgB,yBAAyB;AACzC;AACA,GAAG;AACH;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,iBAAiB,8BAA8B;AAC/C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,6BAA6B;AAC7C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,4CAA4C,iBAAiB,+CAA+C;AAChI,KAAK;AACL;AACA;AACA,gBAAgB,qCAAqC;AACrD;AACA,GAAG;AACH;AACA,cAAc,sCAAsC;AACpD,cAAc,sCAAsC;AACpD;AACA;AACA;AACA,cAAc,2CAA2C;AACzD,iBAAiB,8CAA8C;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sGAAsG,yBAAyB;AAC/H,0GAA0G,6BAA6B;AACvI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB,wBAAwB;AACxC;AACA,gBAAgB,wBAAwB;AACxC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB,yBAAyB,eAAe,4BAA4B,iBAAiB,+BAA+B,oBAAoB,yBAAyB,kBAAkB,sBAAsB;AAC7N,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,4BAA4B;AAC5C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,wBAAwB,gBAAgB,4BAA4B;AACxF,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB,eAAe,kBAAkB,eAAe,kBAAkB,eAAe,mBAAmB,gBAAgB,mBAAmB,gBAAgB,mBAAmB;AAChN,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB,iBAAiB,gBAAgB,gBAAgB,eAAe,kBAAkB,iBAAiB,kBAAkB,iBAAiB,qBAAqB,oBAAoB,qBAAqB,oBAAoB,yBAAyB;AACrQ,KAAK;AACL;AACA;AACA;AACA,gBAAgB,oBAAoB;AACpC;AACA,GAAG;AACH;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,8BAA8B,iBAAiB,gCAAgC,mBAAmB,kCAAkC;AACxJ,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,uBAAuB;AACvC,gBAAgB,uBAAuB;AACvC,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,6BAA6B,eAAe,6BAA6B,eAAe,6BAA6B,eAAe,iCAAiC,mBAAmB,gCAAgC,kBAAkB,8BAA8B,gBAAgB,iCAAiC,mBAAmB,gCAAgC;AAChY,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA;AACA,GAAG;AACH;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,wBAAwB;AACxC,gBAAgB,wBAAwB;AACxC,GAAG;AACH;AACA,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,2BAA2B;AAC3C,gBAAgB,2BAA2B;AAC3C,GAAG;AACH;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,4BAA4B;AAC5C,gBAAgB,4BAA4B;AAC5C,GAAG;AACH;AACA,iBAAiB,mCAAmC;AACpD;AACA;AACA,gBAAgB,8BAA8B;AAC9C,gBAAgB,8BAA8B;AAC9C,GAAG;AACH;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,uBAAuB;AACvC,gBAAgB,uBAAuB;AACvC,GAAG;AACH;AACA,YAAY,gCAAgC;AAC5C,cAAc,kCAAkC;AAChD,iBAAiB,qCAAqC;AACtD,eAAe,mCAAmC;AAClD,cAAc,kCAAkC;AAChD,aAAa,6BAA6B;AAC1C,YAAY,4BAA4B;AACxC,YAAY,4BAA4B;AACxC,WAAW,2BAA2B;AACtC,cAAc,8BAA8B;AAC5C,YAAY,4BAA4B;AACxC,cAAc,8BAA8B;AAC5C,YAAY,0BAA0B;AACtC,YAAY,0BAA0B;AACtC,YAAY,0BAA0B;AACtC,aAAa,2BAA2B;AACxC,aAAa,2BAA2B;AACxC,aAAa,2BAA2B;AACxC,YAAY,4BAA4B;AACxC,YAAY,4BAA4B;AACxC,YAAY,4BAA4B;AACxC,gBAAgB,gCAAgC;AAChD,eAAe,+BAA+B;AAC9C,aAAa,6BAA6B;AAC1C,gBAAgB,gCAAgC;AAChD,eAAe,+BAA+B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,qGAAqG,wBAAwB;AAC7H;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,sBAAsB,oCAAoC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,yBAAyB,qBAAqB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB,4BAA4B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,mDAAmD,4BAA4B;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2MAA2M;AAC3M;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA,gCAAgC,oCAAoC;AACpE;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,0CAA0C,oCAAoC;AAC9E;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,qHAAqH,UAAU;AAC/H;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6CAA6C,oCAAoC;AACjF;AACA;AACA,WAAW;AACX;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,8GAA8G,cAAc;AAC5H;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,6BAA6B,mCAAmC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,uCAAuC;AACvC,gFAAgF;AAChF;AACA;AACA,sDAAsD;AACtD;AACA;;AAEA,wBAAwB,4BAA4B;AACpD;AACA;AACA;;AAEA;AACA;;AAEA,oBAAoB,4BAA4B;AAChD;AACA;;AAEA;AACA,4CAA4C,4BAA4B;AACxE;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,sBAAsB,4BAA4B;AAClD;;AAEA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA,UAAU;AACV;;AAEA,aAAa,yBAAyB;AACtC;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;;AAEA,sBAAsB,4BAA4B;AAClD;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,iCAAiC,qBAAqB;AACtD;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;;AAEV;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,sBAAsB;AACtC,gBAAgB,sBAAsB;AACtC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,sBAAsB;AACtC,gBAAgB,sBAAsB;AACtC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC,gBAAgB,sBAAsB;AACtC;AACA,GAAG;AACH;AACA,iBAAiB,iCAAiC;AAClD;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,gBAAgB,6BAA6B;AAC7C;AACA,GAAG;AACH;AACA,iBAAiB,qCAAqC;AACtD;AACA;AACA;AACA,gBAAgB,kCAAkC;AAClD;AACA,GAAG;AACH;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,mBAAmB,yBAAyB;AAC5C,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,wBAAwB;AACxC,gBAAgB,wBAAwB;AACxC,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,yBAAyB;AACzC,gBAAgB,yBAAyB;AACzC,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB,gCAAgC,iBAAiB,+BAA+B;AACpG,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,yBAAyB;AACzC;AACA;AACA,GAAG;AACH;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB,2BAA2B,sBAAsB,yBAAyB,oBAAoB,sBAAsB,iBAAiB,qBAAqB,gBAAgB,uBAAuB;AACrN,KAAK;AACL;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,8CAA8C;AAC9C,+CAA+C;AAC/C;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD,2BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,0DAA0D,qBAAqB;AAC/E;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA,mBAAmB,4BAA4B;AAC/C;AACA;;AAEA,kBAAkB,qBAAqB;AACvC;AACA;AACA;;AAEA;AACA;;AAEA,kBAAkB,qBAAqB;AACvC;AACA;AACA,KAAK;AACL;AACA;;AAEA,sBAAsB,EAAE;AACxB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,sBAAsB,qBAAqB;AAC3C;AACA;AACA;AACA;AACA;;AAEA,aAAa,yBAAyB;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,qGAAqG,wBAAwB;;AAE7H;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;;AAEV;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;AC//ED;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAgB,EAAE,0BAAU,EAAE,0BAAU,EAAE,0BAAc,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAC/E,IAAI,KAAK,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;;;;;;ACrCD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAW,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAClC,IAAI,KAAK,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,CAAC;;;;;;;ACrCD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAW,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAClC,IAAI,KAAK,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;;;;;;;AC7BD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAQ,EAAE,0BAA4B,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAC7D,IAAI,KAAK,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;AC9BD,0HAA0B;;AAE1B;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAyB,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAChD,IAAI,KAAK,EAMN;AACH,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,4EAA4E,cAAc;AAC1F;AACA;;AAEA;;AAEA,gBAAgB,cAAc;AAC9B;AACA;;AAEA,yEAAyE;AACzE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAsB,wBAAwB;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,oIAAoI,4DAA4D,2DAA2D,KAAK;AAChQ;;AAEA;AACA;AACA;AACA;AACA,wIAAwI,uDAAuD,uDAAuD,uDAAuD,8DAA8D,8DAA8D,8DAA8D,6BAA6B,KAAK;AACzgB;;AAEA;AACA;AACA;AACA;AACA,gJAAgJ,sDAAsD,gDAAgD,gDAAgD,gDAAgD,gDAAgD,gDAAgD,gDAAgD,wDAAwD,wDAAwD,wDAAwD,kDAAkD,kDAAkD,kDAAkD,6BAA6B,KAAK;AACt0B;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,6CAA6C,kBAAkB;AAC/D;AACA;;AAEA;AACA;;AAEA;AACA,2IAA2I,qBAAqB,sBAAsB,OAAO,MAAM,yBAAyB,OAAO,mBAAmB,KAAK;AAC3P;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;;AAEA;AACA;AACA;AACA,8CAA8C;AAC9C;;AAEA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;;AAEA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;;AAEA;AACA,sJAAsJ,sDAAsD,mBAAmB,oCAAoC,QAAQ,MAAM,uBAAuB,OAAO,KAAK;AACpT;AACA,wCAAwC;AACxC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,oDAAoD;AACpD,2DAA2D;AAC3D;;AAEA;AACA,qFAAqF;AACrF,wDAAwD;AACxD;;AAEA;AACA;AACA,4DAA4D;AAC5D,wEAAwE;AACxE;;AAEA;AACA;AACA;AACA,oFAAoF;AACpF,gGAAgG;AAChG;;AAEA;AACA;AACA;AACA,2EAA2E;AAC3E,iEAAiE;AACjE,6EAA6E;AAC7E;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4QAA4Q,kDAAkD,oDAAoD,wCAAwC,KAAK;AAC/Z;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0JAA0J,0BAA0B,mCAAmC,2CAA2C,iCAAiC,0DAA0D,wCAAwC,sFAAsF,SAAS,uCAAuC,8BAA8B,mCAAmC,KAAK;AACjlB;AACA;;AAEA;AACA;AACA;AACA;AACA,mDAAmD,kDAAkD;AACrG;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sDAAsD,YAAY;AAClE;AACA,MAAM;;AAEN,oTAAoT,YAAY;AAChU;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8KAA8K;AAC9K,yCAAyC,uBAAuB,cAAc,YAAY;AAC1F;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,YAAY;AAC3C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uCAAuC,uCAAuC;AAC9E;AACA,oFAAoF,YAAY;AAChG,MAAM,8LAA8L,qLAAqL,0KAA0K,iCAAiC,4CAA4C,uDAAuD,aAAa,uCAAuC,kEAAkE,yBAAyB,YAAY;;AAEl0B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sJAAsJ;AACtJ;AACA,iEAAiE;AACjE,mDAAmD,YAAY;AAC/D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B;;AAE1B;AACA,6BAA6B;AAC7B;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,sJAAsJ,gGAAgG,oBAAoB,OAAO,iLAAiL,qBAAqB,OAAO,qFAAqF,uBAAuB,SAAS,mDAAmD,uBAAuB,SAAS,OAAO,kBAAkB,KAAK;;AAEpsB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,8EAA8E;AAC9E;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sCAAsC,cAAc;AACpD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,sIAAsI,2CAA2C,cAAc,kBAAkB,KAAK;AACtN;AACA;AACA;;AAEA;AACA,wIAAwI,kDAAkD,6BAA6B,EAAE,yCAAyC,qCAAqC,cAAc,EAAE,sCAAsC,2FAA2F,QAAQ,MAAM,qDAAqD,OAAO,KAAK;AACvgB;AACA;AACA;;AAEA;AACA,uIAAuI,qBAAqB,sBAAsB,uBAAuB,sBAAsB,mBAAmB,MAAM,8BAA8B,0BAA0B,sBAAsB,wBAAwB,mBAAmB,MAAM,uCAAuC,uCAAuC,yBAAyB,kBAAkB,WAAW,SAAS,qBAAqB,kCAAkC,wBAAwB,SAAS,iDAAiD,OAAO,sBAAsB,mBAAmB,MAAM,uCAAuC,qCAAqC,SAAS,OAAO,mBAAmB,KAAK;AACvzB;AACA;AACA;;AAEA;AACA,oJAAoJ,6BAA6B,0BAA0B,gDAAgD,cAAc,MAAM,uBAAuB,sBAAsB,OAAO,MAAM,mDAAmD,OAAO,8BAA8B,iCAAiC,KAAK;AACvc;AACA;AACA;;AAEA;AACA,0IAA0I,sDAAsD,qBAAqB,KAAK;AAC1N;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yIAAyI,kBAAkB,iEAAiE,cAAc,cAAc,OAAO,yDAAyD,KAAK;AAC7T;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;;AAE5D,6CAA6C,cAAc;AAC3D;AACA;;AAEA,mDAAmD,4BAA4B;AAC/E;AACA;AACA;AACA;;AAEA;;AAEA;AACA,+IAA+I,cAAc;AAC7J;AACA;;AAEA;AACA;;AAEA;AACA,8DAA8D;AAC9D;;AAEA;AACA,sHAAsH;AACtH;AACA,qKAAqK,gDAAgD;AACrN,iBAAiB;AACjB;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wBAAwB,kBAAkB;AAC1C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uEAAuE;AACvE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,gJAAgJ,sDAAsD,qBAAqB,KAAK;AAChO;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4QAA4Q,kDAAkD,oDAAoD,wCAAwC,KAAK;AAC/Z;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,sJAAsJ,0DAA0D,8DAA8D,EAAE,KAAK;AACrR;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,qHAAqH;AACrH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,iJAAiJ,gCAAgC,mCAAmC,QAAQ,MAAM,iDAAiD,OAAO,KAAK;AAC/R;;AAEA;AACA;AACA;AACA;AACA,gKAAgK,4CAA4C,kFAAkF,oEAAoE,KAAK;AACvW;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sHAAsH;AACtH;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;ACv/BD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAS,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAChC,IAAI,KAAK,EAMN;AACH,CAAC;AACD;AACA,oBAAoB;;AAEpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gIAAgI;AAChI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;AClcD;AACA,EAAE,KAAuD,0BAA0B,CAA8H;AACjN,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;;AAEX,sDAAsD,OAAO;AAC7D;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA,SAAS;AACT;AACA;AACA;;AAEA,sBAAsB,cAAc;AACpC;AACA;;AAEA;AACA,SAAS;AACT;AACA;;AAEA,oCAAoC,OAAO;AAC3C;AACA;AACA;AACA,SAAS;AACT,+FAA+F,OAAO;AACtG;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA,oCAAoC,OAAO;AAC3C;AACA;;AAEA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT,OAAO;;AAEP;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8CAA8C;AAC9C;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,WAAW;AACX;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,WAAW;AACX;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,WAAW;AACX;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,WAAW;AACX;AACA,SAAS;AACT;AACA,SAAS;AACT,oCAAoC;AACpC,SAAS;AACT;AACA,oBAAoB;AACpB;AACA,oBAAoB;AACpB;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO;;AAEP;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH,CAAC;;;;;;;;ACj2CY;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,eAAe;;AAEf,oCAAoC,mBAAO,CAAC,KAAO;;AAEnD,wCAAwC,mBAAO,CAAC,KAAY;;AAE5D,mDAAmD,mBAAO,CAAC,KAAuB;;AAElF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,eAAe;;;;;;;;AC1FF;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,eAAe;;AAEf;AACA;AACA;;AAEA;AACA,wEAAwE,aAAa;AACrF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;ACjCa;;AAEb,6BAA6C;AAC7C;AACA,CAAC,CAAC;AACF,sCAAsD;AACtD;AACA;AACA;AACA;AACA,CAAC,EAAC;AACF,6BAAmD;AACnD;AACA;AACA;AACA;AACA,CAAC,CAAC;;AAEF,kDAAkD,mBAAO,CAAC,KAAuB;;AAEjF,+CAA+C,mBAAO,CAAC,IAAoB;;AAE3E;AACA;AACA;AACA;AACA;;;;;;;;AC1Ba;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,eAAe;;AAEf,oCAAoC,mBAAO,CAAC,KAAO;;AAEnD,sCAAsC,mBAAO,CAAC,KAAS;;AAEvD,wCAAwC,mBAAO,CAAC,KAAY;;AAE5D;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB,sBAAsB;AACxC;;AAEA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,8CAA8C,+BAA+B;AAC7E;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sDAAsD;AACtD;;;AAGA;;AAEA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG,wBAAwB;;;AAG3B;AACA,0FAA0F,wCAAwC;AAClI;AACA,KAAK;;AAEL;AACA,gCAAgC;;AAEhC,qCAAqC;;AAErC;AACA;AACA;;AAEA,kDAAkD;;AAElD;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG,UAAU;;;AAGb;AACA;AACA;AACA;AACA,GAAG,+DAA+D;;;AAGlE;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG,wCAAwC;;;AAG3C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG,qBAAqB;;;AAGxB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;;;;;;;;;;;;;AC7RuC;AACI;;AAE1D;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA,WAAW,+CAAQ;AACnB;AACA;;AAEA,+BAA+B,kDAAW;AAC1C;AACA,GAAG;AACH;AACA;;AAEe;AACf;;AAEA;AACA;AACA;;AAEA,kBAAkB,uEAAoB,CAAC,kDAAW;AAClD;AACA,GAAG;AACH,sBAAsB,6CAAM;;AAE5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;AC9CmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,yCAAyC;AACzC;AACA,WAAW,QAAQ,WAAW;AAC9B;AACA,WAAW,SAAS;AACpB;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,SAAS;AACpB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,oBAAoB,aAAa;AACjC;AACA;AACA,2DAA2D,iBAAiB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;AACf;;AAEA,qBAAqB,6CAAM;AAC3B,uBAAuB,6CAAM;AAC7B,gBAAgB,6CAAM;AACtB,iBAAiB,6CAAM;AACvB,iBAAiB,6CAAM;AACvB,eAAe,6CAAM;AACrB,gBAAgB,6CAAM;AACtB,gBAAgB,6CAAM;AACtB,0BAA0B;;AAE1B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,oEAAoE;;AAEpE;AACA;AACA,EAAE,gDAAS;AACX;AACA;AACA;AACA;AACA,GAAG,OAAO;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,8CAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEA;AACA;;AAEA;AACA,8BAA8B;AAC9B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAQ;;;AAGR;AACA;AACA,QAAQ;;;AAGR;AACA;AACA;AACA,uGAAuG;;AAEvG;AACA;;AAEA;AACA;;AAEA,uBAAuB,uBAAuB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EA;AACA;AACA;AACA;AACwC;AACxC,qCAAmC;AACnC;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA,oBAAoB,kCAAgC;AACpD;AACA,8CAA8C,2CAAyC;AACvF;AACA;AACA,oBAAoB,kCAAgC;AACpD,GAAG;;AAEH;AACA;AACA,cAAc,UAAU;AACxB,YAAY;AACZ;AACA;AACA,oBAAoB,oCAA+B;AACnD;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,UAAU;AACvB,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAoC,2CAAyC;AAC7E;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,qBAAqB;AAClC;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,oBAAoB,2BAA2B;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;;;AAGN;AACA,GAAG;;AAEH;AACA;AACA,aAAa,qBAAqB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA,kEAAkE;AAClE;;AAEA;AACA,sCAAsC,2CAAyC;AAC/E;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACwC;AACxC,uCAAqC;AACrC;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA,oBAAoB,0CAAwC;AAC5D;AACA,8CAA8C,6CAA2C;AACzF;AACA;AACA,oBAAoB,0CAAwC;AAC5D,GAAG;;AAEH;AACA;AACA,cAAc,UAAU;AACxB,YAAY;AACZ;AACA;AACA,oBAAoB,oCAA+B;AACnD;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,UAAU;AACvB,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAoC,6CAA2C;AAC/E;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,qBAAqB;AAClC;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,oBAAoB,2BAA2B;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;;;AAGN;AACA,GAAG;;AAEH;AACA;AACA,aAAa,qBAAqB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA,kEAAkE;AAClE;;AAEA;AACA,sCAAsC,6CAA2C;AACjF;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACiD;AACxB;AACO;AACE;AAC3B;AACP;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA,0BAA0B,iDAA4C;AACtE;;AAEA;AACA,eAAe,oCAAoC;AACnD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,0BAA0B,iDAA4C;AACtE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,YAAY,SAAS;AACrB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AC5EA;AACA;AACA;AACA;CAGA;;AAEe,SAASW,iBAAT,CAA2BjH,SAA3B,EAA4D;AACvE;AACAhP,EAAAA,mBAAS,CAAC,MAAM;AA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C,CAApC,CALL,CAFJ,CADJ,eAWI,iDAAC,+DAAD;AAAM,QAAI,MAAV;AAAW,MAAE,EAAE;AAAf,kBACI,iDAAC,+DAAD;AAAY,WAAO,EAAC;AAApB,mBADJ,eAEI,iDAAC,+CAAD;AAAW,aAAS,EAAC;AAArB,KAA4BD,YAA5B,CAFJ,CAXJ,CADJ;AAkBH;;;;;;;;;;;;;;;;;;;;;;ACzBD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACmC;AACnC,wCAAe,wCAAyB;AACxC,UAAU,uCAAsB;AAChC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH,uBAAuB;AACvB,iBAAiB;AACjB;AACA,CAAC,CAAC;;ACjGF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACmC,CAAC;AACpC;;AAEA,0CAA2B;AAC3B;AACA;AACA;;AAEA,mDAAe,wCAAyB;AACxC,UAAU,uCAAsB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC;;;;;;;;;;;;;;;;;;;ACjCF;AAOA;AACA;AACA;AACA;AAEe,SAAS+E,mBAAT,GAA+B;AAC1C,MAAM;AAAA,OAACC,UAAD;AAAA,OAAaC;AAAb,MAA8B/X,kBAAQ,EAA5C;AAGA,MA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;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACtFO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AC9GA,6BAAe,SAAS,aAAC;AACzB;AACA;;ACFsC;AACD;AACtB;AACf,yFAAyF,aAAa;AACtG;AACA;;AAEA,sBAAsB,YAAQ,EAAE,YAAQ;AACxC;AACO;AACP,6FAA6F,eAAe;AAC5G;AACA;;AAEA;AACA;AACO;AACP,6FAA6F,eAAe;AAC5G;AACA;;AAEA;AACA;AACO;AACP,6FAA6F,eAAe;AAC5G;AACA;;AAEA;AACA;AACO;AACP,6FAA6F,eAAe;AAC5G;AACA;;AAEA;AACA;AACO;AACP,6FAA6F,eAAe;AAC5G;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,SAAS;AAC9B;AACA;;AAEA;AACA;;AAEA;;AAEA,qCAAqC;AACrC;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;;;ACvEmD;;AAEnD;AACA;AACA;AACA;AACA;;;;ACNA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;;;ACfqD;;AAErD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE,cAAc;AAChB;AACA;;;;AClBA,IAAI,iBAAQ;;;;ACAZ,SAAS,2BAAa;AACtB;AACA;;;;ACFgK;AACtH;;AAE1C,2CAA2C,gCAAgC,oCAAoC,oDAAoD,sBAAsB,0CAA0C,iEAAiE,KAAK,kCAAkC;;AAE3U,iCAAiC,gBAAgB,sBAAsB,OAAO,uDAAuD,aAAa,uDAAuD,iCAAe,6BAA6B,KAAK,6CAA6C,6EAA6E,OAAO,iDAAiD,mFAAmF,OAAO;;AAEre;AAC8B;AACd;AACY;AACZ;AACU;;AAE3D,SAAS,eAAO;AAChB;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qEAAqE,cAAc;AACnF;AACA;AACA,WAAW;;AAEX;AACA,qEAAqE,cAAc;AACnF;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,eAAO,oDAAoD,cAAc;AACzE;AACA,CAAC;;AAED,eAAO,oDAAoD,cAAc;AACzE;AACA,CAAC;;AAED,eAAO,0DAA0D,cAAc;AAC/E;AACA,CAAC;;AAED,eAAO,mDAAmD,cAAc;AACxE;AACA,CAAC;;AAED,eAAO,gDAAgD,cAAc;AACrE;AACA,CAAC;;AAED,eAAO,iDAAiD,cAAc;AACtE;AACA,CAAC;;AAED,eAAO,mDAAmD,cAAc;AACxE;AACA,CAAC;;AAED,eAAO,mDAAmD,cAAc;AACxE;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA,sDAAsD,eAAe;AACrE;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,oBAAoB,2BAAa;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH,gBAAgB,KAAK;AACrB;AACA;;AAEA;AACA;AACA,EAAE,cAAc,qBAAqB,iBAAQ;AAC7C;;AAEA;AACA,oCAAoC,eAAe;AACnD;;AAEA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAc,iBAAQ;AACtB,gBAAgB,iBAAQ;AACxB;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA,iEAAiE,eAAe,oFAAoF,eAAe;AACnL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,eAAe,iBAAQ;AACvB,IAAI;AACJ;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,aAAa;AACb;AACA,WAAW;;AAEX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS,cAAc;AACvB;;;;ACpT6C;AACN;AACU;AACd;AACF;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;;;;;;;AClBgK;;AAEhK,SAAS,iBAAO,2BAA2B,gCAAgC,oCAAoC,oDAAoD,sBAAsB,0CAA0C,iEAAiE,KAAK,kCAAkC;;AAE3U,SAAS,sBA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","sources":["webpack://jacdac-docs/./node_modules/@material-ui/core/esm/DialogContentText/DialogContentText.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/AddCircleOutline.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Autorenew.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Done.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/FileCopy.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Fullscreen.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Launch.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/OpenInBrowser.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/RemoveCircleOutline.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/ReportProblem.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Visibility.js","webpack://jacdac-docs/./node_modules/blockly/blockly.js","webpack://jacdac-docs/./node_modules/blockly/blocks.js","webpack://jacdac-docs/./node_modules/blockly/blocks_compressed.js","webpack://jacdac-docs/./node_modules/blockly/browser.js","webpack://jacdac-docs/./node_modules/blockly/core-browser.js","webpack://jacdac-docs/./node_modules/blockly/index.js","webpack://jacdac-docs/./node_modules/blockly/javascript.js","webpack://jacdac-docs/./node_modules/blockly/javascript_compressed.js","webpack://jacdac-docs/./node_modules/blockly/msg/en.js","webpack://jacdac-docs/./node_modules/bowser/es5.js","webpack://jacdac-docs/./node_modules/react-blockly/dist/BlocklyWorkspace.js","webpack://jacdac-docs/./node_modules/react-blockly/dist/debounce.js","webpack://jacdac-docs/./node_modules/react-blockly/dist/index.js","webpack://jacdac-docs/./node_modules/react-blockly/dist/useBlocklyWorkspace.js","webpack://jacdac-docs/./node_modules/use-debounce/esm/useDebounce.js","webpack://jacdac-docs/./node_modules/use-debounce/esm/useDebouncedCallback.js","webpack://jacdac-docs/./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://jacdac-docs/./node_modules/core-js/internals/add-to-unscopables.js","webpack://jacdac-docs/./node_modules/core-js/internals/array-species-constructor.js","webpack://jacdac-docs/./node_modules/core-js/internals/array-species-create.js","webpack://jacdac-docs/./node_modules/core-js/internals/classof.js","webpack://jacdac-docs/./node_modules/core-js/internals/create-property.js","webpack://jacdac-docs/./node_modules/core-js/internals/flatten-into-array.js","webpack://jacdac-docs/./node_modules/core-js/internals/function-bind-context.js","webpack://jacdac-docs/./node_modules/core-js/internals/get-iterator-method.js","webpack://jacdac-docs/./node_modules/core-js/internals/html.js","webpack://jacdac-docs/./node_modules/core-js/internals/is-array-iterator-method.js","webpack://jacdac-docs/./node_modules/core-js/internals/is-array.js","webpack://jacdac-docs/./node_modules/core-js/internals/iterate.js","webpack://jacdac-docs/./node_modules/core-js/internals/iterator-close.js","webpack://jacdac-docs/./node_modules/core-js/internals/iterators.js","webpack://jacdac-docs/./node_modules/core-js/internals/object-create.js","webpack://jacdac-docs/./node_modules/core-js/internals/object-define-properties.js","webpack://jacdac-docs/./node_modules/core-js/internals/object-keys.js","webpack://jacdac-docs/./node_modules/core-js/internals/to-string-tag-support.js","webpack://jacdac-docs/./node_modules/core-js/modules/es.array.flat-map.js","webpack://jacdac-docs/./node_modules/core-js/modules/es.array.flat.js","webpack://jacdac-docs/./node_modules/core-js/modules/es.array.unscopables.flat-map.js","webpack://jacdac-docs/./node_modules/core-js/modules/es.object.from-entries.js","webpack://jacdac-docs/./jacdac-ts/src/vm/events.ts","webpack://jacdac-docs/./src/components/hooks/useWindowEvent.ts","webpack://jacdac-docs/./src/components/makecode/useMakeCodeRenderer.ts","webpack://jacdac-docs/./src/components/makecode/MakeCodeSimulator.tsx","webpack://jacdac-docs/./src/components/makecode/MakeCodeSnippet.tsx","webpack://jacdac-docs/./src/components/CodeBlock.tsx","webpack://jacdac-docs/./jacdac-ts/src/jdom/rolemanager.ts","webpack://jacdac-docs/./src/components/hooks/useRoleManager.ts","webpack://jacdac-docs/./src/components/blockly/blockwarning.ts","webpack://jacdac-docs/./src/components/blockly/dsl/datasolver.ts","webpack://jacdac-docs/./src/components/blockly/jsongenerator.ts","webpack://jacdac-docs/./src/components/blockly/useBlocklyEvents.ts","webpack://jacdac-docs/./node_modules/@blockly/field-slider/src/field_slider.js","webpack://jacdac-docs/./node_modules/@blockly/field-slider/src/index.js","webpack://jacdac-docs/./node_modules/@blockly/block-dynamic-connection/src/insertion_marker_manager_monkey_patch.js","webpack://jacdac-docs/./node_modules/@blockly/block-dynamic-connection/src/dynamic_if.js","webpack://jacdac-docs/./node_modules/@blockly/block-dynamic-connection/src/dynamic_text_join.js","webpack://jacdac-docs/./node_modules/@blockly/block-dynamic-connection/src/dynamic_list_create.js","webpack://jacdac-docs/./node_modules/@blockly/block-dynamic-connection/src/index.js","webpack://jacdac-docs/./node_modules/@blockly/disable-top-blocks/src/index.js","webpack://jacdac-docs/./src/components/blockly/useBlocklyPlugins.ts","webpack://jacdac-docs/./src/components/blockly/useToolbox.ts","webpack://jacdac-docs/./src/components/blockly/BlockContext.tsx","webpack://jacdac-docs/./src/components/blockly/BlockDiagnostics.tsx","webpack://jacdac-docs/./node_modules/@blockly/theme-modern/src/index.js","webpack://jacdac-docs/./node_modules/@blockly/theme-dark/src/index.js","webpack://jacdac-docs/./src/components/blockly/BlocklyModalDialogs.tsx","webpack://jacdac-docs/./src/components/blockly/BlockMinimap.tsx","webpack://jacdac-docs/./src/components/ui/BrowserCompatibilityAlert.tsx","webpack://jacdac-docs/./src/components/blockly/BlockEditor.tsx","webpack://jacdac-docs/./src/components/blockly/WorkspaceContext.tsx","webpack://jacdac-docs/./src/components/blockly/dsl/chartdsl.ts","webpack://jacdac-docs/./src/components/blockly/dsl/dsl.ts","webpack://jacdac-docs/./src/components/blockly/dsl/fieldsdsl.ts","webpack://jacdac-docs/./src/components/blockly/dsl/palette.ts","webpack://jacdac-docs/./src/components/blockly/dsl/workers/csv.proxy.ts","webpack://jacdac-docs/./src/components/blockly/dsl/workers/data.proxy.ts","webpack://jacdac-docs/./src/components/blockly/dsl/workspacevisitor.ts","webpack://jacdac-docs/./src/components/blockly/fields/BuiltinDataSetField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/DataColumnChooserField.ts","webpack://jacdac-docs/./src/components/blockly/fields/DataPreviewField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/DataTableField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/DataTableWidget.tsx","webpack://jacdac-docs/./src/components/blockly/fields/FileOpenField.ts","webpack://jacdac-docs/./src/components/blockly/fields/FileSaveField.ts","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/tidy.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/summarize.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/node_modules/internmap/src/index.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/node_modules/d3-array/src/identity.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/node_modules/d3-array/src/group.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/helpers/assignGroupKeys.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/helpers/groupTraversal.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/helpers/groupMap.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/helpers/identity.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/helpers/singleOrArray.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/groupBy.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/count.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/innerJoin.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/leftJoin.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/fullJoin.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/pivotWider.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/complete.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/node_modules/d3-array/src/min.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/summary/min.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/node_modules/d3-array/src/max.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/summary/max.js","webpack://jacdac-docs/./node_modules/@tidyjs/tidy/dist/es/index.js","webpack://jacdac-docs/./src/components/blockly/fields/GaugeWidgetField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/JDomTreeField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/JSONSettingsField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/KeyboardKeyField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/LEDColorField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/ReactImageField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/LEDMatrixField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/LogViewField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/NoServiceAlert.tsx","webpack://jacdac-docs/./src/components/blockly/fields/NoteField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/PointerBoundary.tsx","webpack://jacdac-docs/./src/components/blockly/fields/ReactField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/ReactFieldBase.ts","webpack://jacdac-docs/./src/components/blockly/fields/ReactInlineField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/SliderField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/ServoAngleField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/TwinField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/UseModelField.ts","webpack://jacdac-docs/./src/components/blockly/fields/ValueContext.tsx","webpack://jacdac-docs/./src/components/blockly/fields/VariablesFields.tsx","webpack://jacdac-docs/./src/components/blockly/fields/WatchValueField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/chart/BarField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/chart/BoxPlotField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/chart/HeatMapField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/chart/HistogramField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/chart/LinePlotField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/chart/ScatterPlotField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/chart/VegaChartField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/chart/VegaLiteWidget.tsx","webpack://jacdac-docs/./src/components/blockly/fields/fields.ts","webpack://jacdac-docs/./src/components/blockly/fields/mb/ConvLayerBlockField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/mb/DataSetBlockButton.tsx","webpack://jacdac-docs/./src/components/blockly/fields/mb/DataSetBlockField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/mb/DenseLayerBlockField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/mb/DropoutLayerBlockField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/mb/ExpandModelBlockField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/mb/FlattenLayerBlockField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/mb/NeuralNetworkBlockButtons.tsx","webpack://jacdac-docs/./src/components/blockly/fields/mb/NeuralNetworkBlockField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/mb/PoolingLayerBlockField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/mb/RecordingBlockField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/mb/TrainedModelBlockField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/tidy.ts","webpack://jacdac-docs/./src/components/blockly/toolbox.ts","webpack://jacdac-docs/./node_modules/use-debounce/esm/useThrottledCallback.js","webpack://jacdac-docs/./src/jacdac/useChangeThrottled.ts","webpack://jacdac-docs/./src/components/blockly/useDragDebounce.ts","webpack://jacdac-docs/./src/components/blockly/useBlockData.ts","webpack://jacdac-docs/./src/components/blockly/useWorkspaceEvent.ts","webpack://jacdac-docs/./src/components/fs/FileSystemChip.tsx","webpack://jacdac-docs/./src/components/fs/FileNewFileChip.tsx","webpack://jacdac-docs/./src/components/fs/FileSystemNodeChip.tsx","webpack://jacdac-docs/./src/components/fs/FileTabs.tsx","webpack://jacdac-docs/./src/components/hooks/useArrowKeys.ts","webpack://jacdac-docs/./src/components/hooks/useKeyboardNavigation.ts","webpack://jacdac-docs/./src/components/hooks/useKeyboardNavigationProps.ts","webpack://jacdac-docs/./src/components/hooks/useServices.ts","webpack://jacdac-docs/./src/components/model-editor/modelblockdsl.ts","webpack://jacdac-docs/./src/components/ui/AppTheme.tsx","webpack://jacdac-docs/./src/components/ui/CopyButton.tsx","webpack://jacdac-docs/./src/components/ui/PaperBox.tsx","webpack://jacdac-docs/./src/components/widgets/svg.ts"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    marginBottom: 12\n  }\n};\nvar DialogContentText = /*#__PURE__*/React.forwardRef(function DialogContentText(props, ref) {\n  return /*#__PURE__*/React.createElement(Typography, _extends({\n    component: \"p\",\n    variant: \"body1\",\n    color: \"textSecondary\",\n    ref: ref\n  }, props));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiDialogContentText'\n})(DialogContentText);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"\n}), 'AddCircleOutline');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z\"\n}), 'Autorenew');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"\n}), 'Done');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z\"\n}), 'FileCopy');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"\n}), 'Fullscreen');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z\"\n}), 'Launch');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm-7 6l-4 4h3v6h2v-6h3l-4-4z\"\n}), 'OpenInBrowser');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"\n}), 'RemoveCircleOutline');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"\n}), 'ReportProblem');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\"\n}), 'Visibility');\n\nexports.default = _default;","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./blockly_compressed'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./blockly_compressed'));\n  } else {\n    // Browser\n    root.Blockly = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  /**\n   * @license\n   * Copyright 2020 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview Blockly module.\n   */\n\n  /* eslint-disable */\n  'use strict';\n\n  return Blockly;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./blocks_compressed'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./blocks_compressed'));\n  } else {\n    // Browser\n    root.Blockly.Blocks = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  /**\n   * @license\n   * Copyright 2020 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview Blockly Blocks module.\n   */\n\n  /* eslint-disable */\n  'use strict';\n\n  Blockly.Blocks = {};\n  return Blockly.Blocks;\n});","// Do not edit this file; automatically generated by gulp.\n\n/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./blockly_compressed.js'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./blockly_compressed.js'));\n  } else {\n    // Browser\n    root.Blockly.Blocks = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  'use strict';\n\n  Blockly.Blocks.colour = {};\n  Blockly.Constants = {};\n  Blockly.Constants.Colour = {};\n  Blockly.Constants.Colour.HUE = 20;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"colour_picker\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_colour\",\n      name: \"COLOUR\",\n      colour: \"#ff0000\"\n    }],\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_PICKER_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_PICKER_TOOLTIP}\",\n    extensions: [\"parent_tooltip_when_inline\"]\n  }, {\n    type: \"colour_random\",\n    message0: \"%{BKY_COLOUR_RANDOM_TITLE}\",\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_RANDOM_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_RANDOM_TOOLTIP}\"\n  }, {\n    type: \"colour_rgb\",\n    message0: \"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"RED\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"GREEN\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"BLUE\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }],\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_RGB_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_RGB_TOOLTIP}\"\n  }, {\n    type: \"colour_blend\",\n    message0: \"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"COLOUR1\",\n      check: \"Colour\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"COLOUR2\",\n      check: \"Colour\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"RATIO\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }],\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_BLEND_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_BLEND_TOOLTIP}\"\n  }]);\n  Blockly.Constants.Lists = {};\n  Blockly.Constants.Lists.HUE = 260;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"lists_create_empty\",\n    message0: \"%{BKY_LISTS_CREATE_EMPTY_TITLE}\",\n    output: \"Array\",\n    style: \"list_blocks\",\n    tooltip: \"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_LISTS_CREATE_EMPTY_HELPURL}\"\n  }, {\n    type: \"lists_repeat\",\n    message0: \"%{BKY_LISTS_REPEAT_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"ITEM\"\n    }, {\n      type: \"input_value\",\n      name: \"NUM\",\n      check: \"Number\"\n    }],\n    output: \"Array\",\n    style: \"list_blocks\",\n    tooltip: \"%{BKY_LISTS_REPEAT_TOOLTIP}\",\n    helpUrl: \"%{BKY_LISTS_REPEAT_HELPURL}\"\n  }, {\n    type: \"lists_reverse\",\n    message0: \"%{BKY_LISTS_REVERSE_MESSAGE0}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"LIST\",\n      check: \"Array\"\n    }],\n    output: \"Array\",\n    inputsInline: !0,\n    style: \"list_blocks\",\n    tooltip: \"%{BKY_LISTS_REVERSE_TOOLTIP}\",\n    helpUrl: \"%{BKY_LISTS_REVERSE_HELPURL}\"\n  }, {\n    type: \"lists_isEmpty\",\n    message0: \"%{BKY_LISTS_ISEMPTY_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: [\"String\", \"Array\"]\n    }],\n    output: \"Boolean\",\n    style: \"list_blocks\",\n    tooltip: \"%{BKY_LISTS_ISEMPTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_LISTS_ISEMPTY_HELPURL}\"\n  }, {\n    type: \"lists_length\",\n    message0: \"%{BKY_LISTS_LENGTH_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: [\"String\", \"Array\"]\n    }],\n    output: \"Number\",\n    style: \"list_blocks\",\n    tooltip: \"%{BKY_LISTS_LENGTH_TOOLTIP}\",\n    helpUrl: \"%{BKY_LISTS_LENGTH_HELPURL}\"\n  }]);\n  Blockly.Blocks.lists_create_with = {\n    init: function init() {\n      this.setHelpUrl(Blockly.Msg.LISTS_CREATE_WITH_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.itemCount_ = 3;\n      this.updateShape_();\n      this.setOutput(!0, \"Array\");\n      this.setMutator(new Blockly.Mutator([\"lists_create_with_item\"]));\n      this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP);\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"items\", this.itemCount_);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.itemCount_ = parseInt(a.getAttribute(\"items\"), 10);\n      this.updateShape_();\n    },\n    decompose: function decompose(a) {\n      var b = a.newBlock(\"lists_create_with_container\");\n      b.initSvg();\n\n      for (var c = b.getInput(\"STACK\").connection, d = 0; d < this.itemCount_; d++) {\n        var e = a.newBlock(\"lists_create_with_item\");\n        e.initSvg();\n        c.connect(e.previousConnection);\n        c = e.nextConnection;\n      }\n\n      return b;\n    },\n    compose: function compose(a) {\n      var b = a.getInputTargetBlock(\"STACK\");\n\n      for (a = []; b && !b.isInsertionMarker();) {\n        a.push(b.valueConnection_), b = b.nextConnection && b.nextConnection.targetBlock();\n      }\n\n      for (b = 0; b < this.itemCount_; b++) {\n        var c = this.getInput(\"ADD\" + b).connection.targetConnection;\n        c && -1 == a.indexOf(c) && c.disconnect();\n      }\n\n      this.itemCount_ = a.length;\n      this.updateShape_();\n\n      for (b = 0; b < this.itemCount_; b++) {\n        Blockly.Mutator.reconnect(a[b], this, \"ADD\" + b);\n      }\n    },\n    saveConnections: function saveConnections(a) {\n      a = a.getInputTargetBlock(\"STACK\");\n\n      for (var b = 0; a;) {\n        var c = this.getInput(\"ADD\" + b);\n        a.valueConnection_ = c && c.connection.targetConnection;\n        b++;\n        a = a.nextConnection && a.nextConnection.targetBlock();\n      }\n    },\n    updateShape_: function updateShape_() {\n      this.itemCount_ && this.getInput(\"EMPTY\") ? this.removeInput(\"EMPTY\") : this.itemCount_ || this.getInput(\"EMPTY\") || this.appendDummyInput(\"EMPTY\").appendField(Blockly.Msg.LISTS_CREATE_EMPTY_TITLE);\n\n      for (var a = 0; a < this.itemCount_; a++) {\n        if (!this.getInput(\"ADD\" + a)) {\n          var b = this.appendValueInput(\"ADD\" + a).setAlign(Blockly.ALIGN_RIGHT);\n          0 == a && b.appendField(Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH);\n        }\n      }\n\n      for (; this.getInput(\"ADD\" + a);) {\n        this.removeInput(\"ADD\" + a), a++;\n      }\n    }\n  };\n  Blockly.Blocks.lists_create_with_container = {\n    init: function init() {\n      this.setStyle(\"list_blocks\");\n      this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD);\n      this.appendStatementInput(\"STACK\");\n      this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP);\n      this.contextMenu = !1;\n    }\n  };\n  Blockly.Blocks.lists_create_with_item = {\n    init: function init() {\n      this.setStyle(\"list_blocks\");\n      this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE);\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP);\n      this.contextMenu = !1;\n    }\n  };\n  Blockly.Blocks.lists_indexOf = {\n    init: function init() {\n      var a = [[Blockly.Msg.LISTS_INDEX_OF_FIRST, \"FIRST\"], [Blockly.Msg.LISTS_INDEX_OF_LAST, \"LAST\"]];\n      this.setHelpUrl(Blockly.Msg.LISTS_INDEX_OF_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.setOutput(!0, \"Number\");\n      this.appendValueInput(\"VALUE\").setCheck(\"Array\").appendField(Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST);\n      this.appendValueInput(\"FIND\").appendField(new Blockly.FieldDropdown(a), \"END\");\n      this.setInputsInline(!0);\n      var b = this;\n      this.setTooltip(function () {\n        return Blockly.Msg.LISTS_INDEX_OF_TOOLTIP.replace(\"%1\", b.workspace.options.oneBasedIndex ? \"0\" : \"-1\");\n      });\n    }\n  };\n  Blockly.Blocks.lists_getIndex = {\n    init: function init() {\n      var a = [[Blockly.Msg.LISTS_GET_INDEX_GET, \"GET\"], [Blockly.Msg.LISTS_GET_INDEX_GET_REMOVE, \"GET_REMOVE\"], [Blockly.Msg.LISTS_GET_INDEX_REMOVE, \"REMOVE\"]];\n      this.WHERE_OPTIONS = [[Blockly.Msg.LISTS_GET_INDEX_FROM_START, \"FROM_START\"], [Blockly.Msg.LISTS_GET_INDEX_FROM_END, \"FROM_END\"], [Blockly.Msg.LISTS_GET_INDEX_FIRST, \"FIRST\"], [Blockly.Msg.LISTS_GET_INDEX_LAST, \"LAST\"], [Blockly.Msg.LISTS_GET_INDEX_RANDOM, \"RANDOM\"]];\n      this.setHelpUrl(Blockly.Msg.LISTS_GET_INDEX_HELPURL);\n      this.setStyle(\"list_blocks\");\n      a = new Blockly.FieldDropdown(a, function (c) {\n        c = \"REMOVE\" == c;\n        this.getSourceBlock().updateStatement_(c);\n      });\n      this.appendValueInput(\"VALUE\").setCheck(\"Array\").appendField(Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST);\n      this.appendDummyInput().appendField(a, \"MODE\").appendField(\"\", \"SPACE\");\n      this.appendDummyInput(\"AT\");\n      Blockly.Msg.LISTS_GET_INDEX_TAIL && this.appendDummyInput(\"TAIL\").appendField(Blockly.Msg.LISTS_GET_INDEX_TAIL);\n      this.setInputsInline(!0);\n      this.setOutput(!0);\n      this.updateAt_(!0);\n      var b = this;\n      this.setTooltip(function () {\n        var c = b.getFieldValue(\"MODE\"),\n            d = b.getFieldValue(\"WHERE\"),\n            e = \"\";\n\n        switch (c + \" \" + d) {\n          case \"GET FROM_START\":\n          case \"GET FROM_END\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;\n            break;\n\n          case \"GET FIRST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;\n            break;\n\n          case \"GET LAST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;\n            break;\n\n          case \"GET RANDOM\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;\n            break;\n\n          case \"GET_REMOVE FROM_START\":\n          case \"GET_REMOVE FROM_END\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;\n            break;\n\n          case \"GET_REMOVE FIRST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;\n            break;\n\n          case \"GET_REMOVE LAST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;\n            break;\n\n          case \"GET_REMOVE RANDOM\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;\n            break;\n\n          case \"REMOVE FROM_START\":\n          case \"REMOVE FROM_END\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;\n            break;\n\n          case \"REMOVE FIRST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;\n            break;\n\n          case \"REMOVE LAST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;\n            break;\n\n          case \"REMOVE RANDOM\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM;\n        }\n\n        if (\"FROM_START\" == d || \"FROM_END\" == d) e += \"  \" + (\"FROM_START\" == d ? Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP : Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace(\"%1\", b.workspace.options.oneBasedIndex ? \"#1\" : \"#0\");\n        return e;\n      });\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"statement\", !this.outputConnection);\n      var b = this.getInput(\"AT\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at\", b);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      var b = \"true\" == a.getAttribute(\"statement\");\n      this.updateStatement_(b);\n      a = \"false\" != a.getAttribute(\"at\");\n      this.updateAt_(a);\n    },\n    updateStatement_: function updateStatement_(a) {\n      a != !this.outputConnection && (this.unplug(!0, !0), a ? (this.setOutput(!1), this.setPreviousStatement(!0), this.setNextStatement(!0)) : (this.setPreviousStatement(!1), this.setNextStatement(!1), this.setOutput(!0)));\n    },\n    updateAt_: function updateAt_(a) {\n      this.removeInput(\"AT\");\n      this.removeInput(\"ORDINAL\", !0);\n      a ? (this.appendValueInput(\"AT\").setCheck(\"Number\"), Blockly.Msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\");\n      var b = new Blockly.FieldDropdown(this.WHERE_OPTIONS, function (c) {\n        var d = \"FROM_START\" == c || \"FROM_END\" == c;\n\n        if (d != a) {\n          var e = this.getSourceBlock();\n          e.updateAt_(d);\n          e.setFieldValue(c, \"WHERE\");\n          return null;\n        }\n      });\n      this.getInput(\"AT\").appendField(b, \"WHERE\");\n      Blockly.Msg.LISTS_GET_INDEX_TAIL && this.moveInputBefore(\"TAIL\", null);\n    }\n  };\n  Blockly.Blocks.lists_setIndex = {\n    init: function init() {\n      var a = [[Blockly.Msg.LISTS_SET_INDEX_SET, \"SET\"], [Blockly.Msg.LISTS_SET_INDEX_INSERT, \"INSERT\"]];\n      this.WHERE_OPTIONS = [[Blockly.Msg.LISTS_GET_INDEX_FROM_START, \"FROM_START\"], [Blockly.Msg.LISTS_GET_INDEX_FROM_END, \"FROM_END\"], [Blockly.Msg.LISTS_GET_INDEX_FIRST, \"FIRST\"], [Blockly.Msg.LISTS_GET_INDEX_LAST, \"LAST\"], [Blockly.Msg.LISTS_GET_INDEX_RANDOM, \"RANDOM\"]];\n      this.setHelpUrl(Blockly.Msg.LISTS_SET_INDEX_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.appendValueInput(\"LIST\").setCheck(\"Array\").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST);\n      this.appendDummyInput().appendField(new Blockly.FieldDropdown(a), \"MODE\").appendField(\"\", \"SPACE\");\n      this.appendDummyInput(\"AT\");\n      this.appendValueInput(\"TO\").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_TO);\n      this.setInputsInline(!0);\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setTooltip(Blockly.Msg.LISTS_SET_INDEX_TOOLTIP);\n      this.updateAt_(!0);\n      var b = this;\n      this.setTooltip(function () {\n        var c = b.getFieldValue(\"MODE\"),\n            d = b.getFieldValue(\"WHERE\"),\n            e = \"\";\n\n        switch (c + \" \" + d) {\n          case \"SET FROM_START\":\n          case \"SET FROM_END\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;\n            break;\n\n          case \"SET FIRST\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;\n            break;\n\n          case \"SET LAST\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;\n            break;\n\n          case \"SET RANDOM\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;\n            break;\n\n          case \"INSERT FROM_START\":\n          case \"INSERT FROM_END\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;\n            break;\n\n          case \"INSERT FIRST\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;\n            break;\n\n          case \"INSERT LAST\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;\n            break;\n\n          case \"INSERT RANDOM\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM;\n        }\n\n        if (\"FROM_START\" == d || \"FROM_END\" == d) e += \"  \" + Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace(\"%1\", b.workspace.options.oneBasedIndex ? \"#1\" : \"#0\");\n        return e;\n      });\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\"),\n          b = this.getInput(\"AT\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at\", b);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      a = \"false\" != a.getAttribute(\"at\");\n      this.updateAt_(a);\n    },\n    updateAt_: function updateAt_(a) {\n      this.removeInput(\"AT\");\n      this.removeInput(\"ORDINAL\", !0);\n      a ? (this.appendValueInput(\"AT\").setCheck(\"Number\"), Blockly.Msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\");\n      var b = new Blockly.FieldDropdown(this.WHERE_OPTIONS, function (c) {\n        var d = \"FROM_START\" == c || \"FROM_END\" == c;\n\n        if (d != a) {\n          var e = this.getSourceBlock();\n          e.updateAt_(d);\n          e.setFieldValue(c, \"WHERE\");\n          return null;\n        }\n      });\n      this.moveInputBefore(\"AT\", \"TO\");\n      this.getInput(\"ORDINAL\") && this.moveInputBefore(\"ORDINAL\", \"TO\");\n      this.getInput(\"AT\").appendField(b, \"WHERE\");\n    }\n  };\n  Blockly.Blocks.lists_getSublist = {\n    init: function init() {\n      this.WHERE_OPTIONS_1 = [[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_START, \"FROM_START\"], [Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_END, \"FROM_END\"], [Blockly.Msg.LISTS_GET_SUBLIST_START_FIRST, \"FIRST\"]];\n      this.WHERE_OPTIONS_2 = [[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_START, \"FROM_START\"], [Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_END, \"FROM_END\"], [Blockly.Msg.LISTS_GET_SUBLIST_END_LAST, \"LAST\"]];\n      this.setHelpUrl(Blockly.Msg.LISTS_GET_SUBLIST_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.appendValueInput(\"LIST\").setCheck(\"Array\").appendField(Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);\n      this.appendDummyInput(\"AT1\");\n      this.appendDummyInput(\"AT2\");\n      Blockly.Msg.LISTS_GET_SUBLIST_TAIL && this.appendDummyInput(\"TAIL\").appendField(Blockly.Msg.LISTS_GET_SUBLIST_TAIL);\n      this.setInputsInline(!0);\n      this.setOutput(!0, \"Array\");\n      this.updateAt_(1, !0);\n      this.updateAt_(2, !0);\n      this.setTooltip(Blockly.Msg.LISTS_GET_SUBLIST_TOOLTIP);\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\"),\n          b = this.getInput(\"AT1\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at1\", b);\n      b = this.getInput(\"AT2\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at2\", b);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      var b = \"true\" == a.getAttribute(\"at1\");\n      a = \"true\" == a.getAttribute(\"at2\");\n      this.updateAt_(1, b);\n      this.updateAt_(2, a);\n    },\n    updateAt_: function updateAt_(a, b) {\n      this.removeInput(\"AT\" + a);\n      this.removeInput(\"ORDINAL\" + a, !0);\n      b ? (this.appendValueInput(\"AT\" + a).setCheck(\"Number\"), Blockly.Msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\" + a).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\" + a);\n      var c = new Blockly.FieldDropdown(this[\"WHERE_OPTIONS_\" + a], function (d) {\n        var e = \"FROM_START\" == d || \"FROM_END\" == d;\n\n        if (e != b) {\n          var f = this.getSourceBlock();\n          f.updateAt_(a, e);\n          f.setFieldValue(d, \"WHERE\" + a);\n          return null;\n        }\n      });\n      this.getInput(\"AT\" + a).appendField(c, \"WHERE\" + a);\n      1 == a && (this.moveInputBefore(\"AT1\", \"AT2\"), this.getInput(\"ORDINAL1\") && this.moveInputBefore(\"ORDINAL1\", \"AT2\"));\n      Blockly.Msg.LISTS_GET_SUBLIST_TAIL && this.moveInputBefore(\"TAIL\", null);\n    }\n  };\n  Blockly.Blocks.lists_sort = {\n    init: function init() {\n      this.jsonInit({\n        message0: Blockly.Msg.LISTS_SORT_TITLE,\n        args0: [{\n          type: \"field_dropdown\",\n          name: \"TYPE\",\n          options: [[Blockly.Msg.LISTS_SORT_TYPE_NUMERIC, \"NUMERIC\"], [Blockly.Msg.LISTS_SORT_TYPE_TEXT, \"TEXT\"], [Blockly.Msg.LISTS_SORT_TYPE_IGNORECASE, \"IGNORE_CASE\"]]\n        }, {\n          type: \"field_dropdown\",\n          name: \"DIRECTION\",\n          options: [[Blockly.Msg.LISTS_SORT_ORDER_ASCENDING, \"1\"], [Blockly.Msg.LISTS_SORT_ORDER_DESCENDING, \"-1\"]]\n        }, {\n          type: \"input_value\",\n          name: \"LIST\",\n          check: \"Array\"\n        }],\n        output: \"Array\",\n        style: \"list_blocks\",\n        tooltip: Blockly.Msg.LISTS_SORT_TOOLTIP,\n        helpUrl: Blockly.Msg.LISTS_SORT_HELPURL\n      });\n    }\n  };\n  Blockly.Blocks.lists_split = {\n    init: function init() {\n      var a = this,\n          b = new Blockly.FieldDropdown([[Blockly.Msg.LISTS_SPLIT_LIST_FROM_TEXT, \"SPLIT\"], [Blockly.Msg.LISTS_SPLIT_TEXT_FROM_LIST, \"JOIN\"]], function (c) {\n        a.updateType_(c);\n      });\n      this.setHelpUrl(Blockly.Msg.LISTS_SPLIT_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.appendValueInput(\"INPUT\").setCheck(\"String\").appendField(b, \"MODE\");\n      this.appendValueInput(\"DELIM\").setCheck(\"String\").appendField(Blockly.Msg.LISTS_SPLIT_WITH_DELIMITER);\n      this.setInputsInline(!0);\n      this.setOutput(!0, \"Array\");\n      this.setTooltip(function () {\n        var c = a.getFieldValue(\"MODE\");\n        if (\"SPLIT\" == c) return Blockly.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;\n        if (\"JOIN\" == c) return Blockly.Msg.LISTS_SPLIT_TOOLTIP_JOIN;\n        throw Error(\"Unknown mode: \" + c);\n      });\n    },\n    updateType_: function updateType_(a) {\n      if (this.getFieldValue(\"MODE\") != a) {\n        var b = this.getInput(\"INPUT\").connection;\n        b.setShadowDom(null);\n        var c = b.targetBlock();\n        c && (b.disconnect(), c.isShadow() ? c.dispose() : this.bumpNeighbours());\n      }\n\n      \"SPLIT\" == a ? (this.outputConnection.setCheck(\"Array\"), this.getInput(\"INPUT\").setCheck(\"String\")) : (this.outputConnection.setCheck(\"String\"), this.getInput(\"INPUT\").setCheck(\"Array\"));\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"mode\", this.getFieldValue(\"MODE\"));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.updateType_(a.getAttribute(\"mode\"));\n    }\n  };\n  Blockly.Blocks.logic = {};\n  Blockly.Constants.Logic = {};\n  Blockly.Constants.Logic.HUE = 210;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"logic_boolean\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"BOOL\",\n      options: [[\"%{BKY_LOGIC_BOOLEAN_TRUE}\", \"TRUE\"], [\"%{BKY_LOGIC_BOOLEAN_FALSE}\", \"FALSE\"]]\n    }],\n    output: \"Boolean\",\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_LOGIC_BOOLEAN_TOOLTIP}\",\n    helpUrl: \"%{BKY_LOGIC_BOOLEAN_HELPURL}\"\n  }, {\n    type: \"controls_if\",\n    message0: \"%{BKY_CONTROLS_IF_MSG_IF} %1\",\n    args0: [{\n      type: \"input_value\",\n      name: \"IF0\",\n      check: \"Boolean\"\n    }],\n    message1: \"%{BKY_CONTROLS_IF_MSG_THEN} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO0\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"logic_blocks\",\n    helpUrl: \"%{BKY_CONTROLS_IF_HELPURL}\",\n    mutator: \"controls_if_mutator\",\n    extensions: [\"controls_if_tooltip\"]\n  }, {\n    type: \"controls_ifelse\",\n    message0: \"%{BKY_CONTROLS_IF_MSG_IF} %1\",\n    args0: [{\n      type: \"input_value\",\n      name: \"IF0\",\n      check: \"Boolean\"\n    }],\n    message1: \"%{BKY_CONTROLS_IF_MSG_THEN} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO0\"\n    }],\n    message2: \"%{BKY_CONTROLS_IF_MSG_ELSE} %1\",\n    args2: [{\n      type: \"input_statement\",\n      name: \"ELSE\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKYCONTROLS_IF_TOOLTIP_2}\",\n    helpUrl: \"%{BKY_CONTROLS_IF_HELPURL}\",\n    extensions: [\"controls_if_tooltip\"]\n  }, {\n    type: \"logic_compare\",\n    message0: \"%1 %2 %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"A\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"=\", \"EQ\"], [\"\\u2260\", \"NEQ\"], [\"\\u200f<\", \"LT\"], [\"\\u200f\\u2264\", \"LTE\"], [\"\\u200f>\", \"GT\"], [\"\\u200f\\u2265\", \"GTE\"]]\n    }, {\n      type: \"input_value\",\n      name: \"B\"\n    }],\n    inputsInline: !0,\n    output: \"Boolean\",\n    style: \"logic_blocks\",\n    helpUrl: \"%{BKY_LOGIC_COMPARE_HELPURL}\",\n    extensions: [\"logic_compare\", \"logic_op_tooltip\"]\n  }, {\n    type: \"logic_operation\",\n    message0: \"%1 %2 %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"A\",\n      check: \"Boolean\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_LOGIC_OPERATION_AND}\", \"AND\"], [\"%{BKY_LOGIC_OPERATION_OR}\", \"OR\"]]\n    }, {\n      type: \"input_value\",\n      name: \"B\",\n      check: \"Boolean\"\n    }],\n    inputsInline: !0,\n    output: \"Boolean\",\n    style: \"logic_blocks\",\n    helpUrl: \"%{BKY_LOGIC_OPERATION_HELPURL}\",\n    extensions: [\"logic_op_tooltip\"]\n  }, {\n    type: \"logic_negate\",\n    message0: \"%{BKY_LOGIC_NEGATE_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"BOOL\",\n      check: \"Boolean\"\n    }],\n    output: \"Boolean\",\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_LOGIC_NEGATE_TOOLTIP}\",\n    helpUrl: \"%{BKY_LOGIC_NEGATE_HELPURL}\"\n  }, {\n    type: \"logic_null\",\n    message0: \"%{BKY_LOGIC_NULL}\",\n    output: null,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_LOGIC_NULL_TOOLTIP}\",\n    helpUrl: \"%{BKY_LOGIC_NULL_HELPURL}\"\n  }, {\n    type: \"logic_ternary\",\n    message0: \"%{BKY_LOGIC_TERNARY_CONDITION} %1\",\n    args0: [{\n      type: \"input_value\",\n      name: \"IF\",\n      check: \"Boolean\"\n    }],\n    message1: \"%{BKY_LOGIC_TERNARY_IF_TRUE} %1\",\n    args1: [{\n      type: \"input_value\",\n      name: \"THEN\"\n    }],\n    message2: \"%{BKY_LOGIC_TERNARY_IF_FALSE} %1\",\n    args2: [{\n      type: \"input_value\",\n      name: \"ELSE\"\n    }],\n    output: null,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_LOGIC_TERNARY_TOOLTIP}\",\n    helpUrl: \"%{BKY_LOGIC_TERNARY_HELPURL}\",\n    extensions: [\"logic_ternary\"]\n  }]);\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"controls_if_if\",\n    message0: \"%{BKY_CONTROLS_IF_IF_TITLE_IF}\",\n    nextStatement: null,\n    enableContextMenu: !1,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_CONTROLS_IF_IF_TOOLTIP}\"\n  }, {\n    type: \"controls_if_elseif\",\n    message0: \"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}\",\n    previousStatement: null,\n    nextStatement: null,\n    enableContextMenu: !1,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}\"\n  }, {\n    type: \"controls_if_else\",\n    message0: \"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}\",\n    previousStatement: null,\n    enableContextMenu: !1,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}\"\n  }]);\n  Blockly.Constants.Logic.TOOLTIPS_BY_OP = {\n    EQ: \"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}\",\n    NEQ: \"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}\",\n    LT: \"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}\",\n    LTE: \"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}\",\n    GT: \"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}\",\n    GTE: \"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}\",\n    AND: \"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}\",\n    OR: \"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}\"\n  };\n  Blockly.Extensions.register(\"logic_op_tooltip\", Blockly.Extensions.buildTooltipForDropdown(\"OP\", Blockly.Constants.Logic.TOOLTIPS_BY_OP));\n  Blockly.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN = {\n    elseifCount_: 0,\n    elseCount_: 0,\n    suppressPrefixSuffix: !0,\n    mutationToDom: function mutationToDom() {\n      if (!this.elseifCount_ && !this.elseCount_) return null;\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      this.elseifCount_ && a.setAttribute(\"elseif\", this.elseifCount_);\n      this.elseCount_ && a.setAttribute(\"else\", 1);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.elseifCount_ = parseInt(a.getAttribute(\"elseif\"), 10) || 0;\n      this.elseCount_ = parseInt(a.getAttribute(\"else\"), 10) || 0;\n      this.rebuildShape_();\n    },\n    decompose: function decompose(a) {\n      var b = a.newBlock(\"controls_if_if\");\n      b.initSvg();\n\n      for (var c = b.nextConnection, d = 1; d <= this.elseifCount_; d++) {\n        var e = a.newBlock(\"controls_if_elseif\");\n        e.initSvg();\n        c.connect(e.previousConnection);\n        c = e.nextConnection;\n      }\n\n      this.elseCount_ && (a = a.newBlock(\"controls_if_else\"), a.initSvg(), c.connect(a.previousConnection));\n      return b;\n    },\n    compose: function compose(a) {\n      a = a.nextConnection.targetBlock();\n      this.elseCount_ = this.elseifCount_ = 0;\n\n      for (var b = [null], c = [null], d = null; a && !a.isInsertionMarker();) {\n        switch (a.type) {\n          case \"controls_if_elseif\":\n            this.elseifCount_++;\n            b.push(a.valueConnection_);\n            c.push(a.statementConnection_);\n            break;\n\n          case \"controls_if_else\":\n            this.elseCount_++;\n            d = a.statementConnection_;\n            break;\n\n          default:\n            throw TypeError(\"Unknown block type: \" + a.type);\n        }\n\n        a = a.nextConnection && a.nextConnection.targetBlock();\n      }\n\n      this.updateShape_();\n      this.reconnectChildBlocks_(b, c, d);\n    },\n    saveConnections: function saveConnections(a) {\n      a = a.nextConnection.targetBlock();\n\n      for (var b = 1; a;) {\n        switch (a.type) {\n          case \"controls_if_elseif\":\n            var c = this.getInput(\"IF\" + b),\n                d = this.getInput(\"DO\" + b);\n            a.valueConnection_ = c && c.connection.targetConnection;\n            a.statementConnection_ = d && d.connection.targetConnection;\n            b++;\n            break;\n\n          case \"controls_if_else\":\n            d = this.getInput(\"ELSE\");\n            a.statementConnection_ = d && d.connection.targetConnection;\n            break;\n\n          default:\n            throw TypeError(\"Unknown block type: \" + a.type);\n        }\n\n        a = a.nextConnection && a.nextConnection.targetBlock();\n      }\n    },\n    rebuildShape_: function rebuildShape_() {\n      var a = [null],\n          b = [null],\n          c = null;\n      this.getInput(\"ELSE\") && (c = this.getInput(\"ELSE\").connection.targetConnection);\n\n      for (var d = 1; this.getInput(\"IF\" + d);) {\n        var e = this.getInput(\"IF\" + d),\n            f = this.getInput(\"DO\" + d);\n        a.push(e.connection.targetConnection);\n        b.push(f.connection.targetConnection);\n        d++;\n      }\n\n      this.updateShape_();\n      this.reconnectChildBlocks_(a, b, c);\n    },\n    updateShape_: function updateShape_() {\n      this.getInput(\"ELSE\") && this.removeInput(\"ELSE\");\n\n      for (var a = 1; this.getInput(\"IF\" + a);) {\n        this.removeInput(\"IF\" + a), this.removeInput(\"DO\" + a), a++;\n      }\n\n      for (a = 1; a <= this.elseifCount_; a++) {\n        this.appendValueInput(\"IF\" + a).setCheck(\"Boolean\").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSEIF), this.appendStatementInput(\"DO\" + a).appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN);\n      }\n\n      this.elseCount_ && this.appendStatementInput(\"ELSE\").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSE);\n    },\n    reconnectChildBlocks_: function reconnectChildBlocks_(a, b, c) {\n      for (var d = 1; d <= this.elseifCount_; d++) {\n        Blockly.Mutator.reconnect(a[d], this, \"IF\" + d), Blockly.Mutator.reconnect(b[d], this, \"DO\" + d);\n      }\n\n      Blockly.Mutator.reconnect(c, this, \"ELSE\");\n    }\n  };\n  Blockly.Extensions.registerMutator(\"controls_if_mutator\", Blockly.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN, null, [\"controls_if_elseif\", \"controls_if_else\"]);\n\n  Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION = function () {\n    this.setTooltip(function () {\n      if (this.elseifCount_ || this.elseCount_) {\n        if (!this.elseifCount_ && this.elseCount_) return Blockly.Msg.CONTROLS_IF_TOOLTIP_2;\n        if (this.elseifCount_ && !this.elseCount_) return Blockly.Msg.CONTROLS_IF_TOOLTIP_3;\n        if (this.elseifCount_ && this.elseCount_) return Blockly.Msg.CONTROLS_IF_TOOLTIP_4;\n      } else return Blockly.Msg.CONTROLS_IF_TOOLTIP_1;\n\n      return \"\";\n    }.bind(this));\n  };\n\n  Blockly.Extensions.register(\"controls_if_tooltip\", Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION);\n  Blockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN = {\n    onchange: function onchange(a) {\n      this.prevBlocks_ || (this.prevBlocks_ = [null, null]);\n      var b = this.getInputTargetBlock(\"A\"),\n          c = this.getInputTargetBlock(\"B\");\n      b && c && !this.workspace.connectionChecker.doTypeChecks(b.outputConnection, c.outputConnection) && (Blockly.Events.setGroup(a.group), a = this.prevBlocks_[0], a !== b && (b.unplug(), !a || a.isDisposed() || a.isShadow() || this.getInput(\"A\").connection.connect(a.outputConnection)), b = this.prevBlocks_[1], b !== c && (c.unplug(), !b || b.isDisposed() || b.isShadow() || this.getInput(\"B\").connection.connect(b.outputConnection)), this.bumpNeighbours(), Blockly.Events.setGroup(!1));\n      this.prevBlocks_[0] = this.getInputTargetBlock(\"A\");\n      this.prevBlocks_[1] = this.getInputTargetBlock(\"B\");\n    }\n  };\n\n  Blockly.Constants.Logic.LOGIC_COMPARE_EXTENSION = function () {\n    this.mixin(Blockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN);\n  };\n\n  Blockly.Extensions.register(\"logic_compare\", Blockly.Constants.Logic.LOGIC_COMPARE_EXTENSION);\n  Blockly.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN = {\n    prevParentConnection_: null,\n    onchange: function onchange(a) {\n      var b = this.getInputTargetBlock(\"THEN\"),\n          c = this.getInputTargetBlock(\"ELSE\"),\n          d = this.outputConnection.targetConnection;\n      if ((b || c) && d) for (var e = 0; 2 > e; e++) {\n        var f = 1 == e ? b : c;\n        f && !f.workspace.connectionChecker.doTypeChecks(f.outputConnection, d) && (Blockly.Events.setGroup(a.group), d === this.prevParentConnection_ ? (this.unplug(), d.getSourceBlock().bumpNeighbours()) : (f.unplug(), f.bumpNeighbours()), Blockly.Events.setGroup(!1));\n      }\n      this.prevParentConnection_ = d;\n    }\n  };\n  Blockly.Extensions.registerMixin(\"logic_ternary\", Blockly.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN);\n  Blockly.Blocks.loops = {};\n  Blockly.Constants.Loops = {};\n  Blockly.Constants.Loops.HUE = 120;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"controls_repeat_ext\",\n    message0: \"%{BKY_CONTROLS_REPEAT_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"TIMES\",\n      check: \"Number\"\n    }],\n    message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"loop_blocks\",\n    tooltip: \"%{BKY_CONTROLS_REPEAT_TOOLTIP}\",\n    helpUrl: \"%{BKY_CONTROLS_REPEAT_HELPURL}\"\n  }, {\n    type: \"controls_repeat\",\n    message0: \"%{BKY_CONTROLS_REPEAT_TITLE}\",\n    args0: [{\n      type: \"field_number\",\n      name: \"TIMES\",\n      value: 10,\n      min: 0,\n      precision: 1\n    }],\n    message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"loop_blocks\",\n    tooltip: \"%{BKY_CONTROLS_REPEAT_TOOLTIP}\",\n    helpUrl: \"%{BKY_CONTROLS_REPEAT_HELPURL}\"\n  }, {\n    type: \"controls_whileUntil\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"MODE\",\n      options: [[\"%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}\", \"WHILE\"], [\"%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}\", \"UNTIL\"]]\n    }, {\n      type: \"input_value\",\n      name: \"BOOL\",\n      check: \"Boolean\"\n    }],\n    message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"loop_blocks\",\n    helpUrl: \"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}\",\n    extensions: [\"controls_whileUntil_tooltip\"]\n  }, {\n    type: \"controls_for\",\n    message0: \"%{BKY_CONTROLS_FOR_TITLE}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: null\n    }, {\n      type: \"input_value\",\n      name: \"FROM\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"TO\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"BY\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }],\n    message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO\"\n    }],\n    inputsInline: !0,\n    previousStatement: null,\n    nextStatement: null,\n    style: \"loop_blocks\",\n    helpUrl: \"%{BKY_CONTROLS_FOR_HELPURL}\",\n    extensions: [\"contextMenu_newGetVariableBlock\", \"controls_for_tooltip\"]\n  }, {\n    type: \"controls_forEach\",\n    message0: \"%{BKY_CONTROLS_FOREACH_TITLE}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: null\n    }, {\n      type: \"input_value\",\n      name: \"LIST\",\n      check: \"Array\"\n    }],\n    message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"loop_blocks\",\n    helpUrl: \"%{BKY_CONTROLS_FOREACH_HELPURL}\",\n    extensions: [\"contextMenu_newGetVariableBlock\", \"controls_forEach_tooltip\"]\n  }, {\n    type: \"controls_flow_statements\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"FLOW\",\n      options: [[\"%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}\", \"BREAK\"], [\"%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}\", \"CONTINUE\"]]\n    }],\n    previousStatement: null,\n    style: \"loop_blocks\",\n    helpUrl: \"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}\",\n    extensions: [\"controls_flow_tooltip\", \"controls_flow_in_loop_check\"]\n  }]);\n  Blockly.Constants.Loops.WHILE_UNTIL_TOOLTIPS = {\n    WHILE: \"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}\",\n    UNTIL: \"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}\"\n  };\n  Blockly.Extensions.register(\"controls_whileUntil_tooltip\", Blockly.Extensions.buildTooltipForDropdown(\"MODE\", Blockly.Constants.Loops.WHILE_UNTIL_TOOLTIPS));\n  Blockly.Constants.Loops.BREAK_CONTINUE_TOOLTIPS = {\n    BREAK: \"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}\",\n    CONTINUE: \"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}\"\n  };\n  Blockly.Extensions.register(\"controls_flow_tooltip\", Blockly.Extensions.buildTooltipForDropdown(\"FLOW\", Blockly.Constants.Loops.BREAK_CONTINUE_TOOLTIPS));\n  Blockly.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN = {\n    customContextMenu: function customContextMenu(a) {\n      if (!this.isInFlyout) {\n        var b = this.getField(\"VAR\").getVariable(),\n            c = b.name;\n\n        if (!this.isCollapsed() && null != c) {\n          var d = {\n            enabled: !0\n          };\n          d.text = Blockly.Msg.VARIABLES_SET_CREATE_GET.replace(\"%1\", c);\n          b = Blockly.Variables.generateVariableFieldDom(b);\n          c = Blockly.utils.xml.createElement(\"block\");\n          c.setAttribute(\"type\", \"variables_get\");\n          c.appendChild(b);\n          d.callback = Blockly.ContextMenu.callbackFactory(this, c);\n          a.push(d);\n        }\n      }\n    }\n  };\n  Blockly.Extensions.registerMixin(\"contextMenu_newGetVariableBlock\", Blockly.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN);\n  Blockly.Extensions.register(\"controls_for_tooltip\", Blockly.Extensions.buildTooltipWithFieldText(\"%{BKY_CONTROLS_FOR_TOOLTIP}\", \"VAR\"));\n  Blockly.Extensions.register(\"controls_forEach_tooltip\", Blockly.Extensions.buildTooltipWithFieldText(\"%{BKY_CONTROLS_FOREACH_TOOLTIP}\", \"VAR\"));\n  Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN = {\n    LOOP_TYPES: [\"controls_repeat\", \"controls_repeat_ext\", \"controls_forEach\", \"controls_for\", \"controls_whileUntil\"],\n    suppressPrefixSuffix: !0,\n    getSurroundLoop: function getSurroundLoop(a) {\n      do {\n        if (-1 != Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(a.type)) return a;\n        a = a.getSurroundParent();\n      } while (a);\n\n      return null;\n    },\n    onchange: function onchange(a) {\n      if (this.workspace.isDragging && !this.workspace.isDragging() && a.type == Blockly.Events.BLOCK_MOVE) {\n        var b = Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);\n        this.setWarningText(b ? null : Blockly.Msg.CONTROLS_FLOW_STATEMENTS_WARNING);\n\n        if (!this.isInFlyout) {\n          var c = Blockly.Events.getGroup();\n          Blockly.Events.setGroup(a.group);\n          this.setEnabled(b);\n          Blockly.Events.setGroup(c);\n        }\n      }\n    }\n  };\n  Blockly.Extensions.registerMixin(\"controls_flow_in_loop_check\", Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN);\n  Blockly.Blocks.math = {};\n  Blockly.Constants.Math = {};\n  Blockly.Constants.Math.HUE = 230;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"math_number\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_number\",\n      name: \"NUM\",\n      value: 0\n    }],\n    output: \"Number\",\n    helpUrl: \"%{BKY_MATH_NUMBER_HELPURL}\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_NUMBER_TOOLTIP}\",\n    extensions: [\"parent_tooltip_when_inline\"]\n  }, {\n    type: \"math_arithmetic\",\n    message0: \"%1 %2 %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"A\",\n      check: \"Number\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_MATH_ADDITION_SYMBOL}\", \"ADD\"], [\"%{BKY_MATH_SUBTRACTION_SYMBOL}\", \"MINUS\"], [\"%{BKY_MATH_MULTIPLICATION_SYMBOL}\", \"MULTIPLY\"], [\"%{BKY_MATH_DIVISION_SYMBOL}\", \"DIVIDE\"], [\"%{BKY_MATH_POWER_SYMBOL}\", \"POWER\"]]\n    }, {\n      type: \"input_value\",\n      name: \"B\",\n      check: \"Number\"\n    }],\n    inputsInline: !0,\n    output: \"Number\",\n    style: \"math_blocks\",\n    helpUrl: \"%{BKY_MATH_ARITHMETIC_HELPURL}\",\n    extensions: [\"math_op_tooltip\"]\n  }, {\n    type: \"math_single\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_MATH_SINGLE_OP_ROOT}\", \"ROOT\"], [\"%{BKY_MATH_SINGLE_OP_ABSOLUTE}\", \"ABS\"], [\"-\", \"NEG\"], [\"ln\", \"LN\"], [\"log10\", \"LOG10\"], [\"e^\", \"EXP\"], [\"10^\", \"POW10\"]]\n    }, {\n      type: \"input_value\",\n      name: \"NUM\",\n      check: \"Number\"\n    }],\n    output: \"Number\",\n    style: \"math_blocks\",\n    helpUrl: \"%{BKY_MATH_SINGLE_HELPURL}\",\n    extensions: [\"math_op_tooltip\"]\n  }, {\n    type: \"math_trig\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_MATH_TRIG_SIN}\", \"SIN\"], [\"%{BKY_MATH_TRIG_COS}\", \"COS\"], [\"%{BKY_MATH_TRIG_TAN}\", \"TAN\"], [\"%{BKY_MATH_TRIG_ASIN}\", \"ASIN\"], [\"%{BKY_MATH_TRIG_ACOS}\", \"ACOS\"], [\"%{BKY_MATH_TRIG_ATAN}\", \"ATAN\"]]\n    }, {\n      type: \"input_value\",\n      name: \"NUM\",\n      check: \"Number\"\n    }],\n    output: \"Number\",\n    style: \"math_blocks\",\n    helpUrl: \"%{BKY_MATH_TRIG_HELPURL}\",\n    extensions: [\"math_op_tooltip\"]\n  }, {\n    type: \"math_constant\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"CONSTANT\",\n      options: [[\"\\u03c0\", \"PI\"], [\"e\", \"E\"], [\"\\u03c6\", \"GOLDEN_RATIO\"], [\"sqrt(2)\", \"SQRT2\"], [\"sqrt(\\u00bd)\", \"SQRT1_2\"], [\"\\u221e\", \"INFINITY\"]]\n    }],\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_CONSTANT_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_CONSTANT_HELPURL}\"\n  }, {\n    type: \"math_number_property\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"input_value\",\n      name: \"NUMBER_TO_CHECK\",\n      check: \"Number\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"PROPERTY\",\n      options: [[\"%{BKY_MATH_IS_EVEN}\", \"EVEN\"], [\"%{BKY_MATH_IS_ODD}\", \"ODD\"], [\"%{BKY_MATH_IS_PRIME}\", \"PRIME\"], [\"%{BKY_MATH_IS_WHOLE}\", \"WHOLE\"], [\"%{BKY_MATH_IS_POSITIVE}\", \"POSITIVE\"], [\"%{BKY_MATH_IS_NEGATIVE}\", \"NEGATIVE\"], [\"%{BKY_MATH_IS_DIVISIBLE_BY}\", \"DIVISIBLE_BY\"]]\n    }],\n    inputsInline: !0,\n    output: \"Boolean\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_IS_TOOLTIP}\",\n    mutator: \"math_is_divisibleby_mutator\"\n  }, {\n    type: \"math_change\",\n    message0: \"%{BKY_MATH_CHANGE_TITLE}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_MATH_CHANGE_TITLE_ITEM}\"\n    }, {\n      type: \"input_value\",\n      name: \"DELTA\",\n      check: \"Number\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"variable_blocks\",\n    helpUrl: \"%{BKY_MATH_CHANGE_HELPURL}\",\n    extensions: [\"math_change_tooltip\"]\n  }, {\n    type: \"math_round\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_MATH_ROUND_OPERATOR_ROUND}\", \"ROUND\"], [\"%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}\", \"ROUNDUP\"], [\"%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}\", \"ROUNDDOWN\"]]\n    }, {\n      type: \"input_value\",\n      name: \"NUM\",\n      check: \"Number\"\n    }],\n    output: \"Number\",\n    style: \"math_blocks\",\n    helpUrl: \"%{BKY_MATH_ROUND_HELPURL}\",\n    tooltip: \"%{BKY_MATH_ROUND_TOOLTIP}\"\n  }, {\n    type: \"math_on_list\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_MATH_ONLIST_OPERATOR_SUM}\", \"SUM\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MIN}\", \"MIN\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MAX}\", \"MAX\"], [\"%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}\", \"AVERAGE\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}\", \"MEDIAN\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MODE}\", \"MODE\"], [\"%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}\", \"STD_DEV\"], [\"%{BKY_MATH_ONLIST_OPERATOR_RANDOM}\", \"RANDOM\"]]\n    }, {\n      type: \"input_value\",\n      name: \"LIST\",\n      check: \"Array\"\n    }],\n    output: \"Number\",\n    style: \"math_blocks\",\n    helpUrl: \"%{BKY_MATH_ONLIST_HELPURL}\",\n    mutator: \"math_modes_of_list_mutator\",\n    extensions: [\"math_op_tooltip\"]\n  }, {\n    type: \"math_modulo\",\n    message0: \"%{BKY_MATH_MODULO_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"DIVIDEND\",\n      check: \"Number\"\n    }, {\n      type: \"input_value\",\n      name: \"DIVISOR\",\n      check: \"Number\"\n    }],\n    inputsInline: !0,\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_MODULO_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_MODULO_HELPURL}\"\n  }, {\n    type: \"math_constrain\",\n    message0: \"%{BKY_MATH_CONSTRAIN_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: \"Number\"\n    }, {\n      type: \"input_value\",\n      name: \"LOW\",\n      check: \"Number\"\n    }, {\n      type: \"input_value\",\n      name: \"HIGH\",\n      check: \"Number\"\n    }],\n    inputsInline: !0,\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_CONSTRAIN_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_CONSTRAIN_HELPURL}\"\n  }, {\n    type: \"math_random_int\",\n    message0: \"%{BKY_MATH_RANDOM_INT_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"FROM\",\n      check: \"Number\"\n    }, {\n      type: \"input_value\",\n      name: \"TO\",\n      check: \"Number\"\n    }],\n    inputsInline: !0,\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_RANDOM_INT_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_RANDOM_INT_HELPURL}\"\n  }, {\n    type: \"math_random_float\",\n    message0: \"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}\",\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_RANDOM_FLOAT_HELPURL}\"\n  }, {\n    type: \"math_atan2\",\n    message0: \"%{BKY_MATH_ATAN2_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"X\",\n      check: \"Number\"\n    }, {\n      type: \"input_value\",\n      name: \"Y\",\n      check: \"Number\"\n    }],\n    inputsInline: !0,\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_ATAN2_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_ATAN2_HELPURL}\"\n  }]);\n  Blockly.Constants.Math.TOOLTIPS_BY_OP = {\n    ADD: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}\",\n    MINUS: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}\",\n    MULTIPLY: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}\",\n    DIVIDE: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}\",\n    POWER: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}\",\n    ROOT: \"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}\",\n    ABS: \"%{BKY_MATH_SINGLE_TOOLTIP_ABS}\",\n    NEG: \"%{BKY_MATH_SINGLE_TOOLTIP_NEG}\",\n    LN: \"%{BKY_MATH_SINGLE_TOOLTIP_LN}\",\n    LOG10: \"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}\",\n    EXP: \"%{BKY_MATH_SINGLE_TOOLTIP_EXP}\",\n    POW10: \"%{BKY_MATH_SINGLE_TOOLTIP_POW10}\",\n    SIN: \"%{BKY_MATH_TRIG_TOOLTIP_SIN}\",\n    COS: \"%{BKY_MATH_TRIG_TOOLTIP_COS}\",\n    TAN: \"%{BKY_MATH_TRIG_TOOLTIP_TAN}\",\n    ASIN: \"%{BKY_MATH_TRIG_TOOLTIP_ASIN}\",\n    ACOS: \"%{BKY_MATH_TRIG_TOOLTIP_ACOS}\",\n    ATAN: \"%{BKY_MATH_TRIG_TOOLTIP_ATAN}\",\n    SUM: \"%{BKY_MATH_ONLIST_TOOLTIP_SUM}\",\n    MIN: \"%{BKY_MATH_ONLIST_TOOLTIP_MIN}\",\n    MAX: \"%{BKY_MATH_ONLIST_TOOLTIP_MAX}\",\n    AVERAGE: \"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}\",\n    MEDIAN: \"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}\",\n    MODE: \"%{BKY_MATH_ONLIST_TOOLTIP_MODE}\",\n    STD_DEV: \"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}\",\n    RANDOM: \"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}\"\n  };\n  Blockly.Extensions.register(\"math_op_tooltip\", Blockly.Extensions.buildTooltipForDropdown(\"OP\", Blockly.Constants.Math.TOOLTIPS_BY_OP));\n  Blockly.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN = {\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\"),\n          b = \"DIVISIBLE_BY\" == this.getFieldValue(\"PROPERTY\");\n      a.setAttribute(\"divisor_input\", b);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      a = \"true\" == a.getAttribute(\"divisor_input\");\n      this.updateShape_(a);\n    },\n    updateShape_: function updateShape_(a) {\n      var b = this.getInput(\"DIVISOR\");\n      a ? b || this.appendValueInput(\"DIVISOR\").setCheck(\"Number\") : b && this.removeInput(\"DIVISOR\");\n    }\n  };\n\n  Blockly.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION = function () {\n    this.getField(\"PROPERTY\").setValidator(function (a) {\n      a = \"DIVISIBLE_BY\" == a;\n      this.getSourceBlock().updateShape_(a);\n    });\n  };\n\n  Blockly.Extensions.registerMutator(\"math_is_divisibleby_mutator\", Blockly.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN, Blockly.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION);\n  Blockly.Extensions.register(\"math_change_tooltip\", Blockly.Extensions.buildTooltipWithFieldText(\"%{BKY_MATH_CHANGE_TOOLTIP}\", \"VAR\"));\n  Blockly.Constants.Math.LIST_MODES_MUTATOR_MIXIN = {\n    updateType_: function updateType_(a) {\n      \"MODE\" == a ? this.outputConnection.setCheck(\"Array\") : this.outputConnection.setCheck(\"Number\");\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"op\", this.getFieldValue(\"OP\"));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.updateType_(a.getAttribute(\"op\"));\n    }\n  };\n\n  Blockly.Constants.Math.LIST_MODES_MUTATOR_EXTENSION = function () {\n    this.getField(\"OP\").setValidator(function (a) {\n      this.updateType_(a);\n    }.bind(this));\n  };\n\n  Blockly.Extensions.registerMutator(\"math_modes_of_list_mutator\", Blockly.Constants.Math.LIST_MODES_MUTATOR_MIXIN, Blockly.Constants.Math.LIST_MODES_MUTATOR_EXTENSION);\n  Blockly.Blocks.procedures = {};\n  Blockly.Blocks.procedures_defnoreturn = {\n    init: function init() {\n      var a = Blockly.Procedures.findLegalName(\"\", this);\n      a = new Blockly.FieldTextInput(a, Blockly.Procedures.rename);\n      a.setSpellcheck(!1);\n      this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(a, \"NAME\").appendField(\"\", \"PARAMS\");\n      this.setMutator(new Blockly.Mutator([\"procedures_mutatorarg\"]));\n      (this.workspace.options.comments || this.workspace.options.parentWorkspace && this.workspace.options.parentWorkspace.options.comments) && Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT && this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip(Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP);\n      this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.setStatements_(!0);\n      this.statementConnection_ = null;\n    },\n    setStatements_: function setStatements_(a) {\n      this.hasStatements_ !== a && (a ? (this.appendStatementInput(\"STACK\").appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_DO), this.getInput(\"RETURN\") && this.moveInputBefore(\"STACK\", \"RETURN\")) : this.removeInput(\"STACK\", !0), this.hasStatements_ = a);\n    },\n    updateParams_: function updateParams_() {\n      var a = \"\";\n      this.arguments_.length && (a = Blockly.Msg.PROCEDURES_BEFORE_PARAMS + \" \" + this.arguments_.join(\", \"));\n      Blockly.Events.disable();\n\n      try {\n        this.setFieldValue(a, \"PARAMS\");\n      } finally {\n        Blockly.Events.enable();\n      }\n    },\n    mutationToDom: function mutationToDom(a) {\n      var b = Blockly.utils.xml.createElement(\"mutation\");\n      a && b.setAttribute(\"name\", this.getFieldValue(\"NAME\"));\n\n      for (var c = 0; c < this.argumentVarModels_.length; c++) {\n        var d = Blockly.utils.xml.createElement(\"arg\"),\n            e = this.argumentVarModels_[c];\n        d.setAttribute(\"name\", e.name);\n        d.setAttribute(\"varid\", e.getId());\n        a && this.paramIds_ && d.setAttribute(\"paramId\", this.paramIds_[c]);\n        b.appendChild(d);\n      }\n\n      this.hasStatements_ || b.setAttribute(\"statements\", \"false\");\n      return b;\n    },\n    domToMutation: function domToMutation(a) {\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n\n      for (var b = 0, c; c = a.childNodes[b]; b++) {\n        if (\"arg\" == c.nodeName.toLowerCase()) {\n          var d = c.getAttribute(\"name\");\n          c = c.getAttribute(\"varid\") || c.getAttribute(\"varId\");\n          this.arguments_.push(d);\n          c = Blockly.Variables.getOrCreateVariablePackage(this.workspace, c, d, \"\");\n          null != c ? this.argumentVarModels_.push(c) : console.log(\"Failed to create a variable with name \" + d + \", ignoring.\");\n        }\n      }\n\n      this.updateParams_();\n      Blockly.Procedures.mutateCallers(this);\n      this.setStatements_(\"false\" !== a.getAttribute(\"statements\"));\n    },\n    decompose: function decompose(a) {\n      var b = Blockly.utils.xml.createElement(\"block\");\n      b.setAttribute(\"type\", \"procedures_mutatorcontainer\");\n      var c = Blockly.utils.xml.createElement(\"statement\");\n      c.setAttribute(\"name\", \"STACK\");\n      b.appendChild(c);\n\n      for (var d = 0; d < this.arguments_.length; d++) {\n        var e = Blockly.utils.xml.createElement(\"block\");\n        e.setAttribute(\"type\", \"procedures_mutatorarg\");\n        var f = Blockly.utils.xml.createElement(\"field\");\n        f.setAttribute(\"name\", \"NAME\");\n        var g = Blockly.utils.xml.createTextNode(this.arguments_[d]);\n        f.appendChild(g);\n        e.appendChild(f);\n        f = Blockly.utils.xml.createElement(\"next\");\n        e.appendChild(f);\n        c.appendChild(e);\n        c = f;\n      }\n\n      a = Blockly.Xml.domToBlock(b, a);\n      \"procedures_defreturn\" == this.type ? a.setFieldValue(this.hasStatements_, \"STATEMENTS\") : a.removeInput(\"STATEMENT_INPUT\");\n      Blockly.Procedures.mutateCallers(this);\n      return a;\n    },\n    compose: function compose(a) {\n      this.arguments_ = [];\n      this.paramIds_ = [];\n      this.argumentVarModels_ = [];\n\n      for (var b = a.getInputTargetBlock(\"STACK\"); b && !b.isInsertionMarker();) {\n        var c = b.getFieldValue(\"NAME\");\n        this.arguments_.push(c);\n        c = this.workspace.getVariable(c, \"\");\n        this.argumentVarModels_.push(c);\n        this.paramIds_.push(b.id);\n        b = b.nextConnection && b.nextConnection.targetBlock();\n      }\n\n      this.updateParams_();\n      Blockly.Procedures.mutateCallers(this);\n      a = a.getFieldValue(\"STATEMENTS\");\n      if (null !== a && (a = \"TRUE\" == a, this.hasStatements_ != a)) if (a) this.setStatements_(!0), Blockly.Mutator.reconnect(this.statementConnection_, this, \"STACK\"), this.statementConnection_ = null;else {\n        a = this.getInput(\"STACK\").connection;\n        if (this.statementConnection_ = a.targetConnection) a = a.targetBlock(), a.unplug(), a.bumpNeighbours();\n        this.setStatements_(!1);\n      }\n    },\n    getProcedureDef: function getProcedureDef() {\n      return [this.getFieldValue(\"NAME\"), this.arguments_, !1];\n    },\n    getVars: function getVars() {\n      return this.arguments_;\n    },\n    getVarModels: function getVarModels() {\n      return this.argumentVarModels_;\n    },\n    renameVarById: function renameVarById(a, b) {\n      var c = this.workspace.getVariableById(a);\n\n      if (\"\" == c.type) {\n        c = c.name;\n        b = this.workspace.getVariableById(b);\n\n        for (var d = !1, e = 0; e < this.argumentVarModels_.length; e++) {\n          this.argumentVarModels_[e].getId() == a && (this.arguments_[e] = b.name, this.argumentVarModels_[e] = b, d = !0);\n        }\n\n        d && (this.displayRenamedVar_(c, b.name), Blockly.Procedures.mutateCallers(this));\n      }\n    },\n    updateVarName: function updateVarName(a) {\n      for (var b = a.name, c = !1, d = 0; d < this.argumentVarModels_.length; d++) {\n        if (this.argumentVarModels_[d].getId() == a.getId()) {\n          var e = this.arguments_[d];\n          this.arguments_[d] = b;\n          c = !0;\n        }\n      }\n\n      c && (this.displayRenamedVar_(e, b), Blockly.Procedures.mutateCallers(this));\n    },\n    displayRenamedVar_: function displayRenamedVar_(a, b) {\n      this.updateParams_();\n      if (this.mutator && this.mutator.isVisible()) for (var c = this.mutator.workspace_.getAllBlocks(!1), d = 0, e; e = c[d]; d++) {\n        \"procedures_mutatorarg\" == e.type && Blockly.Names.equals(a, e.getFieldValue(\"NAME\")) && e.setFieldValue(b, \"NAME\");\n      }\n    },\n    customContextMenu: function customContextMenu(a) {\n      if (!this.isInFlyout) {\n        var b = {\n          enabled: !0\n        },\n            c = this.getFieldValue(\"NAME\");\n        b.text = Blockly.Msg.PROCEDURES_CREATE_DO.replace(\"%1\", c);\n        var d = Blockly.utils.xml.createElement(\"mutation\");\n        d.setAttribute(\"name\", c);\n\n        for (c = 0; c < this.arguments_.length; c++) {\n          var e = Blockly.utils.xml.createElement(\"arg\");\n          e.setAttribute(\"name\", this.arguments_[c]);\n          d.appendChild(e);\n        }\n\n        c = Blockly.utils.xml.createElement(\"block\");\n        c.setAttribute(\"type\", this.callType_);\n        c.appendChild(d);\n        b.callback = Blockly.ContextMenu.callbackFactory(this, c);\n        a.push(b);\n        if (!this.isCollapsed()) for (c = 0; c < this.argumentVarModels_.length; c++) {\n          b = {\n            enabled: !0\n          }, d = this.argumentVarModels_[c], b.text = Blockly.Msg.VARIABLES_SET_CREATE_GET.replace(\"%1\", d.name), d = Blockly.Variables.generateVariableFieldDom(d), e = Blockly.utils.xml.createElement(\"block\"), e.setAttribute(\"type\", \"variables_get\"), e.appendChild(d), b.callback = Blockly.ContextMenu.callbackFactory(this, e), a.push(b);\n        }\n      }\n    },\n    callType_: \"procedures_callnoreturn\"\n  };\n  Blockly.Blocks.procedures_defreturn = {\n    init: function init() {\n      var a = Blockly.Procedures.findLegalName(\"\", this);\n      a = new Blockly.FieldTextInput(a, Blockly.Procedures.rename);\n      a.setSpellcheck(!1);\n      this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(a, \"NAME\").appendField(\"\", \"PARAMS\");\n      this.appendValueInput(\"RETURN\").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);\n      this.setMutator(new Blockly.Mutator([\"procedures_mutatorarg\"]));\n      (this.workspace.options.comments || this.workspace.options.parentWorkspace && this.workspace.options.parentWorkspace.options.comments) && Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT && this.setCommentText(Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip(Blockly.Msg.PROCEDURES_DEFRETURN_TOOLTIP);\n      this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFRETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.setStatements_(!0);\n      this.statementConnection_ = null;\n    },\n    setStatements_: Blockly.Blocks.procedures_defnoreturn.setStatements_,\n    updateParams_: Blockly.Blocks.procedures_defnoreturn.updateParams_,\n    mutationToDom: Blockly.Blocks.procedures_defnoreturn.mutationToDom,\n    domToMutation: Blockly.Blocks.procedures_defnoreturn.domToMutation,\n    decompose: Blockly.Blocks.procedures_defnoreturn.decompose,\n    compose: Blockly.Blocks.procedures_defnoreturn.compose,\n    getProcedureDef: function getProcedureDef() {\n      return [this.getFieldValue(\"NAME\"), this.arguments_, !0];\n    },\n    getVars: Blockly.Blocks.procedures_defnoreturn.getVars,\n    getVarModels: Blockly.Blocks.procedures_defnoreturn.getVarModels,\n    renameVarById: Blockly.Blocks.procedures_defnoreturn.renameVarById,\n    updateVarName: Blockly.Blocks.procedures_defnoreturn.updateVarName,\n    displayRenamedVar_: Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,\n    customContextMenu: Blockly.Blocks.procedures_defnoreturn.customContextMenu,\n    callType_: \"procedures_callreturn\"\n  };\n  Blockly.Blocks.procedures_mutatorcontainer = {\n    init: function init() {\n      this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TITLE);\n      this.appendStatementInput(\"STACK\");\n      this.appendDummyInput(\"STATEMENT_INPUT\").appendField(Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new Blockly.FieldCheckbox(\"TRUE\"), \"STATEMENTS\");\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP);\n      this.contextMenu = !1;\n    }\n  };\n  Blockly.Blocks.procedures_mutatorarg = {\n    init: function init() {\n      var a = new Blockly.FieldTextInput(Blockly.Procedures.DEFAULT_ARG, this.validator_);\n      a.oldShowEditorFn_ = a.showEditor_;\n\n      a.showEditor_ = function () {\n        this.createdVariables_ = [];\n        this.oldShowEditorFn_();\n      };\n\n      this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(a, \"NAME\");\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP);\n      this.contextMenu = !1;\n      a.onFinishEditing_ = this.deleteIntermediateVars_;\n      a.createdVariables_ = [];\n      a.onFinishEditing_(\"x\");\n    },\n    validator_: function validator_(a) {\n      var b = this.getSourceBlock(),\n          c = Blockly.Mutator.findParentWs(b.workspace);\n      a = a.replace(/[\\s\\xa0]+/g, \" \").replace(/^ | $/g, \"\");\n      if (!a) return null;\n\n      for (var d = (b.workspace.targetWorkspace || b.workspace).getAllBlocks(!1), e = a.toLowerCase(), f = 0; f < d.length; f++) {\n        if (d[f].id != this.getSourceBlock().id) {\n          var g = d[f].getFieldValue(\"NAME\");\n          if (g && g.toLowerCase() == e) return null;\n        }\n      }\n\n      if (b.isInFlyout) return a;\n      (b = c.getVariable(a, \"\")) && b.name != a && c.renameVariableById(b.getId(), a);\n      b || (b = c.createVariable(a, \"\")) && this.createdVariables_ && this.createdVariables_.push(b);\n      return a;\n    },\n    deleteIntermediateVars_: function deleteIntermediateVars_(a) {\n      var b = Blockly.Mutator.findParentWs(this.getSourceBlock().workspace);\n      if (b) for (var c = 0; c < this.createdVariables_.length; c++) {\n        var d = this.createdVariables_[c];\n        d.name != a && b.deleteVariableById(d.getId());\n      }\n    }\n  };\n  Blockly.Blocks.procedures_callnoreturn = {\n    init: function init() {\n      this.appendDummyInput(\"TOPROW\").appendField(\"\", \"NAME\");\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.quarkConnections_ = {};\n      this.quarkIds_ = null;\n      this.previousEnabledState_ = !0;\n    },\n    getProcedureCall: function getProcedureCall() {\n      return this.getFieldValue(\"NAME\");\n    },\n    renameProcedure: function renameProcedure(a, b) {\n      Blockly.Names.equals(a, this.getProcedureCall()) && (this.setFieldValue(b, \"NAME\"), this.setTooltip((this.outputConnection ? Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP : Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace(\"%1\", b)));\n    },\n    setProcedureParameters_: function setProcedureParameters_(a, b) {\n      var c = Blockly.Procedures.getDefinition(this.getProcedureCall(), this.workspace),\n          d = c && c.mutator && c.mutator.isVisible();\n      d || (this.quarkConnections_ = {}, this.quarkIds_ = null);\n      if (b) if (a.join(\"\\n\") == this.arguments_.join(\"\\n\")) this.quarkIds_ = b;else {\n        if (b.length != a.length) throw RangeError(\"paramNames and paramIds must be the same length.\");\n        this.setCollapsed(!1);\n        this.quarkIds_ || (this.quarkConnections_ = {}, this.quarkIds_ = []);\n        c = this.rendered;\n        this.rendered = !1;\n\n        for (var e = 0; e < this.arguments_.length; e++) {\n          var f = this.getInput(\"ARG\" + e);\n          f && (f = f.connection.targetConnection, this.quarkConnections_[this.quarkIds_[e]] = f, d && f && -1 == b.indexOf(this.quarkIds_[e]) && (f.disconnect(), f.getSourceBlock().bumpNeighbours()));\n        }\n\n        this.arguments_ = [].concat(a);\n        this.argumentVarModels_ = [];\n\n        for (e = 0; e < this.arguments_.length; e++) {\n          a = Blockly.Variables.getOrCreateVariablePackage(this.workspace, null, this.arguments_[e], \"\"), this.argumentVarModels_.push(a);\n        }\n\n        this.updateShape_();\n        if (this.quarkIds_ = b) for (e = 0; e < this.arguments_.length; e++) {\n          b = this.quarkIds_[e], b in this.quarkConnections_ && (f = this.quarkConnections_[b], Blockly.Mutator.reconnect(f, this, \"ARG\" + e) || delete this.quarkConnections_[b]);\n        }\n        (this.rendered = c) && this.render();\n      }\n    },\n    updateShape_: function updateShape_() {\n      for (var a = 0; a < this.arguments_.length; a++) {\n        var b = this.getField(\"ARGNAME\" + a);\n\n        if (b) {\n          Blockly.Events.disable();\n\n          try {\n            b.setValue(this.arguments_[a]);\n          } finally {\n            Blockly.Events.enable();\n          }\n        } else b = new Blockly.FieldLabel(this.arguments_[a]), this.appendValueInput(\"ARG\" + a).setAlign(Blockly.ALIGN_RIGHT).appendField(b, \"ARGNAME\" + a).init();\n      }\n\n      for (; this.getInput(\"ARG\" + a);) {\n        this.removeInput(\"ARG\" + a), a++;\n      }\n\n      if (a = this.getInput(\"TOPROW\")) this.arguments_.length ? this.getField(\"WITH\") || (a.appendField(Blockly.Msg.PROCEDURES_CALL_BEFORE_PARAMS, \"WITH\"), a.init()) : this.getField(\"WITH\") && a.removeField(\"WITH\");\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"name\", this.getProcedureCall());\n\n      for (var b = 0; b < this.arguments_.length; b++) {\n        var c = Blockly.utils.xml.createElement(\"arg\");\n        c.setAttribute(\"name\", this.arguments_[b]);\n        a.appendChild(c);\n      }\n\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      var b = a.getAttribute(\"name\");\n      this.renameProcedure(this.getProcedureCall(), b);\n      b = [];\n\n      for (var c = [], d = 0, e; e = a.childNodes[d]; d++) {\n        \"arg\" == e.nodeName.toLowerCase() && (b.push(e.getAttribute(\"name\")), c.push(e.getAttribute(\"paramId\")));\n      }\n\n      this.setProcedureParameters_(b, c);\n    },\n    getVars: function getVars() {\n      return this.arguments_;\n    },\n    getVarModels: function getVarModels() {\n      return this.argumentVarModels_;\n    },\n    onchange: function onchange(a) {\n      if (this.workspace && !this.workspace.isFlyout && a.recordUndo) if (a.type == Blockly.Events.BLOCK_CREATE && -1 != a.ids.indexOf(this.id)) {\n        var b = this.getProcedureCall();\n        b = Blockly.Procedures.getDefinition(b, this.workspace);\n        !b || b.type == this.defType_ && JSON.stringify(b.getVars()) == JSON.stringify(this.arguments_) || (b = null);\n\n        if (!b) {\n          Blockly.Events.setGroup(a.group);\n          a = Blockly.utils.xml.createElement(\"xml\");\n          b = Blockly.utils.xml.createElement(\"block\");\n          b.setAttribute(\"type\", this.defType_);\n          var c = this.getRelativeToSurfaceXY(),\n              d = c.y + 2 * Blockly.SNAP_RADIUS;\n          b.setAttribute(\"x\", c.x + Blockly.SNAP_RADIUS * (this.RTL ? -1 : 1));\n          b.setAttribute(\"y\", d);\n          c = this.mutationToDom();\n          b.appendChild(c);\n          c = Blockly.utils.xml.createElement(\"field\");\n          c.setAttribute(\"name\", \"NAME\");\n          d = this.getProcedureCall();\n          d || (d = Blockly.Procedures.findLegalName(\"\", this), this.renameProcedure(\"\", d));\n          c.appendChild(Blockly.utils.xml.createTextNode(d));\n          b.appendChild(c);\n          a.appendChild(b);\n          Blockly.Xml.domToWorkspace(a, this.workspace);\n          Blockly.Events.setGroup(!1);\n        }\n      } else a.type == Blockly.Events.BLOCK_DELETE ? (b = this.getProcedureCall(), b = Blockly.Procedures.getDefinition(b, this.workspace), b || (Blockly.Events.setGroup(a.group), this.dispose(!0), Blockly.Events.setGroup(!1))) : a.type == Blockly.Events.CHANGE && \"disabled\" == a.element && (b = this.getProcedureCall(), (b = Blockly.Procedures.getDefinition(b, this.workspace)) && b.id == a.blockId && ((b = Blockly.Events.getGroup()) && console.log(\"Saw an existing group while responding to a definition change\"), Blockly.Events.setGroup(a.group), a.newValue ? (this.previousEnabledState_ = this.isEnabled(), this.setEnabled(!1)) : this.setEnabled(this.previousEnabledState_), Blockly.Events.setGroup(b)));\n    },\n    customContextMenu: function customContextMenu(a) {\n      if (this.workspace.isMovable()) {\n        var b = {\n          enabled: !0\n        };\n        b.text = Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF;\n        var c = this.getProcedureCall(),\n            d = this.workspace;\n\n        b.callback = function () {\n          var e = Blockly.Procedures.getDefinition(c, d);\n          e && (d.centerOnBlock(e.id), e.select());\n        };\n\n        a.push(b);\n      }\n    },\n    defType_: \"procedures_defnoreturn\"\n  };\n  Blockly.Blocks.procedures_callreturn = {\n    init: function init() {\n      this.appendDummyInput(\"TOPROW\").appendField(\"\", \"NAME\");\n      this.setOutput(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.quarkConnections_ = {};\n      this.quarkIds_ = null;\n      this.previousEnabledState_ = !0;\n    },\n    getProcedureCall: Blockly.Blocks.procedures_callnoreturn.getProcedureCall,\n    renameProcedure: Blockly.Blocks.procedures_callnoreturn.renameProcedure,\n    setProcedureParameters_: Blockly.Blocks.procedures_callnoreturn.setProcedureParameters_,\n    updateShape_: Blockly.Blocks.procedures_callnoreturn.updateShape_,\n    mutationToDom: Blockly.Blocks.procedures_callnoreturn.mutationToDom,\n    domToMutation: Blockly.Blocks.procedures_callnoreturn.domToMutation,\n    getVars: Blockly.Blocks.procedures_callnoreturn.getVars,\n    getVarModels: Blockly.Blocks.procedures_callnoreturn.getVarModels,\n    onchange: Blockly.Blocks.procedures_callnoreturn.onchange,\n    customContextMenu: Blockly.Blocks.procedures_callnoreturn.customContextMenu,\n    defType_: \"procedures_defreturn\"\n  };\n  Blockly.Blocks.procedures_ifreturn = {\n    init: function init() {\n      this.appendValueInput(\"CONDITION\").setCheck(\"Boolean\").appendField(Blockly.Msg.CONTROLS_IF_MSG_IF);\n      this.appendValueInput(\"VALUE\").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);\n      this.setInputsInline(!0);\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip(Blockly.Msg.PROCEDURES_IFRETURN_TOOLTIP);\n      this.setHelpUrl(Blockly.Msg.PROCEDURES_IFRETURN_HELPURL);\n      this.hasReturnValue_ = !0;\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"value\", Number(this.hasReturnValue_));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.hasReturnValue_ = 1 == a.getAttribute(\"value\");\n      this.hasReturnValue_ || (this.removeInput(\"VALUE\"), this.appendDummyInput(\"VALUE\").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN));\n    },\n    onchange: function onchange(a) {\n      if (this.workspace.isDragging && !this.workspace.isDragging()) {\n        a = !1;\n        var b = this;\n\n        do {\n          if (-1 != this.FUNCTION_TYPES.indexOf(b.type)) {\n            a = !0;\n            break;\n          }\n\n          b = b.getSurroundParent();\n        } while (b);\n\n        a ? (\"procedures_defnoreturn\" == b.type && this.hasReturnValue_ ? (this.removeInput(\"VALUE\"), this.appendDummyInput(\"VALUE\").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN), this.hasReturnValue_ = !1) : \"procedures_defreturn\" != b.type || this.hasReturnValue_ || (this.removeInput(\"VALUE\"), this.appendValueInput(\"VALUE\").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN), this.hasReturnValue_ = !0), this.setWarningText(null), this.isInFlyout || this.setEnabled(!0)) : (this.setWarningText(Blockly.Msg.PROCEDURES_IFRETURN_WARNING), this.isInFlyout || this.getInheritedDisabled() || this.setEnabled(!1));\n      }\n    },\n    FUNCTION_TYPES: [\"procedures_defnoreturn\", \"procedures_defreturn\"]\n  };\n  Blockly.Blocks.texts = {};\n  Blockly.Constants.Text = {};\n  Blockly.Constants.Text.HUE = 160;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"text\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_input\",\n      name: \"TEXT\",\n      text: \"\"\n    }],\n    output: \"String\",\n    style: \"text_blocks\",\n    helpUrl: \"%{BKY_TEXT_TEXT_HELPURL}\",\n    tooltip: \"%{BKY_TEXT_TEXT_TOOLTIP}\",\n    extensions: [\"text_quotes\", \"parent_tooltip_when_inline\"]\n  }, {\n    type: \"text_multiline\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_image\",\n      src: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=\",\n      width: 12,\n      height: 17,\n      alt: \"\\u00b6\"\n    }, {\n      type: \"field_multilinetext\",\n      name: \"TEXT\",\n      text: \"\"\n    }],\n    output: \"String\",\n    style: \"text_blocks\",\n    helpUrl: \"%{BKY_TEXT_TEXT_HELPURL}\",\n    tooltip: \"%{BKY_TEXT_TEXT_TOOLTIP}\",\n    extensions: [\"parent_tooltip_when_inline\"]\n  }, {\n    type: \"text_join\",\n    message0: \"\",\n    output: \"String\",\n    style: \"text_blocks\",\n    helpUrl: \"%{BKY_TEXT_JOIN_HELPURL}\",\n    tooltip: \"%{BKY_TEXT_JOIN_TOOLTIP}\",\n    mutator: \"text_join_mutator\"\n  }, {\n    type: \"text_create_join_container\",\n    message0: \"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2\",\n    args0: [{\n      type: \"input_dummy\"\n    }, {\n      type: \"input_statement\",\n      name: \"STACK\"\n    }],\n    style: \"text_blocks\",\n    tooltip: \"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}\",\n    enableContextMenu: !1\n  }, {\n    type: \"text_create_join_item\",\n    message0: \"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"text_blocks\",\n    tooltip: \"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}\",\n    enableContextMenu: !1\n  }, {\n    type: \"text_append\",\n    message0: \"%{BKY_TEXT_APPEND_TITLE}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_TEXT_APPEND_VARIABLE}\"\n    }, {\n      type: \"input_value\",\n      name: \"TEXT\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"text_blocks\",\n    extensions: [\"text_append_tooltip\"]\n  }, {\n    type: \"text_length\",\n    message0: \"%{BKY_TEXT_LENGTH_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: [\"String\", \"Array\"]\n    }],\n    output: \"Number\",\n    style: \"text_blocks\",\n    tooltip: \"%{BKY_TEXT_LENGTH_TOOLTIP}\",\n    helpUrl: \"%{BKY_TEXT_LENGTH_HELPURL}\"\n  }, {\n    type: \"text_isEmpty\",\n    message0: \"%{BKY_TEXT_ISEMPTY_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: [\"String\", \"Array\"]\n    }],\n    output: \"Boolean\",\n    style: \"text_blocks\",\n    tooltip: \"%{BKY_TEXT_ISEMPTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_TEXT_ISEMPTY_HELPURL}\"\n  }, {\n    type: \"text_indexOf\",\n    message0: \"%{BKY_TEXT_INDEXOF_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: \"String\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"END\",\n      options: [[\"%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}\", \"FIRST\"], [\"%{BKY_TEXT_INDEXOF_OPERATOR_LAST}\", \"LAST\"]]\n    }, {\n      type: \"input_value\",\n      name: \"FIND\",\n      check: \"String\"\n    }],\n    output: \"Number\",\n    style: \"text_blocks\",\n    helpUrl: \"%{BKY_TEXT_INDEXOF_HELPURL}\",\n    inputsInline: !0,\n    extensions: [\"text_indexOf_tooltip\"]\n  }, {\n    type: \"text_charAt\",\n    message0: \"%{BKY_TEXT_CHARAT_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: \"String\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"WHERE\",\n      options: [[\"%{BKY_TEXT_CHARAT_FROM_START}\", \"FROM_START\"], [\"%{BKY_TEXT_CHARAT_FROM_END}\", \"FROM_END\"], [\"%{BKY_TEXT_CHARAT_FIRST}\", \"FIRST\"], [\"%{BKY_TEXT_CHARAT_LAST}\", \"LAST\"], [\"%{BKY_TEXT_CHARAT_RANDOM}\", \"RANDOM\"]]\n    }],\n    output: \"String\",\n    style: \"text_blocks\",\n    helpUrl: \"%{BKY_TEXT_CHARAT_HELPURL}\",\n    inputsInline: !0,\n    mutator: \"text_charAt_mutator\"\n  }]);\n  Blockly.Blocks.text_getSubstring = {\n    init: function init() {\n      this.WHERE_OPTIONS_1 = [[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START, \"FROM_START\"], [Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END, \"FROM_END\"], [Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST, \"FIRST\"]];\n      this.WHERE_OPTIONS_2 = [[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START, \"FROM_START\"], [Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END, \"FROM_END\"], [Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST, \"LAST\"]];\n      this.setHelpUrl(Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL);\n      this.setStyle(\"text_blocks\");\n      this.appendValueInput(\"STRING\").setCheck(\"String\").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);\n      this.appendDummyInput(\"AT1\");\n      this.appendDummyInput(\"AT2\");\n      Blockly.Msg.TEXT_GET_SUBSTRING_TAIL && this.appendDummyInput(\"TAIL\").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL);\n      this.setInputsInline(!0);\n      this.setOutput(!0, \"String\");\n      this.updateAt_(1, !0);\n      this.updateAt_(2, !0);\n      this.setTooltip(Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP);\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\"),\n          b = this.getInput(\"AT1\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at1\", b);\n      b = this.getInput(\"AT2\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at2\", b);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      var b = \"true\" == a.getAttribute(\"at1\");\n      a = \"true\" == a.getAttribute(\"at2\");\n      this.updateAt_(1, b);\n      this.updateAt_(2, a);\n    },\n    updateAt_: function updateAt_(a, b) {\n      this.removeInput(\"AT\" + a);\n      this.removeInput(\"ORDINAL\" + a, !0);\n      b ? (this.appendValueInput(\"AT\" + a).setCheck(\"Number\"), Blockly.Msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\" + a).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\" + a);\n      2 == a && Blockly.Msg.TEXT_GET_SUBSTRING_TAIL && (this.removeInput(\"TAIL\", !0), this.appendDummyInput(\"TAIL\").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL));\n      var c = new Blockly.FieldDropdown(this[\"WHERE_OPTIONS_\" + a], function (d) {\n        var e = \"FROM_START\" == d || \"FROM_END\" == d;\n\n        if (e != b) {\n          var f = this.getSourceBlock();\n          f.updateAt_(a, e);\n          f.setFieldValue(d, \"WHERE\" + a);\n          return null;\n        }\n      });\n      this.getInput(\"AT\" + a).appendField(c, \"WHERE\" + a);\n      1 == a && (this.moveInputBefore(\"AT1\", \"AT2\"), this.getInput(\"ORDINAL1\") && this.moveInputBefore(\"ORDINAL1\", \"AT2\"));\n    }\n  };\n  Blockly.Blocks.text_changeCase = {\n    init: function init() {\n      var a = [[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE, \"UPPERCASE\"], [Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE, \"LOWERCASE\"], [Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE, \"TITLECASE\"]];\n      this.setHelpUrl(Blockly.Msg.TEXT_CHANGECASE_HELPURL);\n      this.setStyle(\"text_blocks\");\n      this.appendValueInput(\"TEXT\").setCheck(\"String\").appendField(new Blockly.FieldDropdown(a), \"CASE\");\n      this.setOutput(!0, \"String\");\n      this.setTooltip(Blockly.Msg.TEXT_CHANGECASE_TOOLTIP);\n    }\n  };\n  Blockly.Blocks.text_trim = {\n    init: function init() {\n      var a = [[Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH, \"BOTH\"], [Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT, \"LEFT\"], [Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT, \"RIGHT\"]];\n      this.setHelpUrl(Blockly.Msg.TEXT_TRIM_HELPURL);\n      this.setStyle(\"text_blocks\");\n      this.appendValueInput(\"TEXT\").setCheck(\"String\").appendField(new Blockly.FieldDropdown(a), \"MODE\");\n      this.setOutput(!0, \"String\");\n      this.setTooltip(Blockly.Msg.TEXT_TRIM_TOOLTIP);\n    }\n  };\n  Blockly.Blocks.text_print = {\n    init: function init() {\n      this.jsonInit({\n        message0: Blockly.Msg.TEXT_PRINT_TITLE,\n        args0: [{\n          type: \"input_value\",\n          name: \"TEXT\"\n        }],\n        previousStatement: null,\n        nextStatement: null,\n        style: \"text_blocks\",\n        tooltip: Blockly.Msg.TEXT_PRINT_TOOLTIP,\n        helpUrl: Blockly.Msg.TEXT_PRINT_HELPURL\n      });\n    }\n  };\n  Blockly.Blocks.text_prompt_ext = {\n    init: function init() {\n      var a = [[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT, \"TEXT\"], [Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER, \"NUMBER\"]];\n      this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL);\n      this.setStyle(\"text_blocks\");\n      var b = this;\n      a = new Blockly.FieldDropdown(a, function (c) {\n        b.updateType_(c);\n      });\n      this.appendValueInput(\"TEXT\").appendField(a, \"TYPE\");\n      this.setOutput(!0, \"String\");\n      this.setTooltip(function () {\n        return \"TEXT\" == b.getFieldValue(\"TYPE\") ? Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT : Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER;\n      });\n    },\n    updateType_: function updateType_(a) {\n      this.outputConnection.setCheck(\"NUMBER\" == a ? \"Number\" : \"String\");\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"type\", this.getFieldValue(\"TYPE\"));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.updateType_(a.getAttribute(\"type\"));\n    }\n  };\n  Blockly.Blocks.text_prompt = {\n    init: function init() {\n      this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);\n      var a = [[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT, \"TEXT\"], [Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER, \"NUMBER\"]],\n          b = this;\n      this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL);\n      this.setStyle(\"text_blocks\");\n      a = new Blockly.FieldDropdown(a, function (c) {\n        b.updateType_(c);\n      });\n      this.appendDummyInput().appendField(a, \"TYPE\").appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(\"\"), \"TEXT\").appendField(this.newQuote_(!1));\n      this.setOutput(!0, \"String\");\n      this.setTooltip(function () {\n        return \"TEXT\" == b.getFieldValue(\"TYPE\") ? Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT : Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER;\n      });\n    },\n    updateType_: Blockly.Blocks.text_prompt_ext.updateType_,\n    mutationToDom: Blockly.Blocks.text_prompt_ext.mutationToDom,\n    domToMutation: Blockly.Blocks.text_prompt_ext.domToMutation\n  };\n  Blockly.Blocks.text_count = {\n    init: function init() {\n      this.jsonInit({\n        message0: Blockly.Msg.TEXT_COUNT_MESSAGE0,\n        args0: [{\n          type: \"input_value\",\n          name: \"SUB\",\n          check: \"String\"\n        }, {\n          type: \"input_value\",\n          name: \"TEXT\",\n          check: \"String\"\n        }],\n        output: \"Number\",\n        inputsInline: !0,\n        style: \"text_blocks\",\n        tooltip: Blockly.Msg.TEXT_COUNT_TOOLTIP,\n        helpUrl: Blockly.Msg.TEXT_COUNT_HELPURL\n      });\n    }\n  };\n  Blockly.Blocks.text_replace = {\n    init: function init() {\n      this.jsonInit({\n        message0: Blockly.Msg.TEXT_REPLACE_MESSAGE0,\n        args0: [{\n          type: \"input_value\",\n          name: \"FROM\",\n          check: \"String\"\n        }, {\n          type: \"input_value\",\n          name: \"TO\",\n          check: \"String\"\n        }, {\n          type: \"input_value\",\n          name: \"TEXT\",\n          check: \"String\"\n        }],\n        output: \"String\",\n        inputsInline: !0,\n        style: \"text_blocks\",\n        tooltip: Blockly.Msg.TEXT_REPLACE_TOOLTIP,\n        helpUrl: Blockly.Msg.TEXT_REPLACE_HELPURL\n      });\n    }\n  };\n  Blockly.Blocks.text_reverse = {\n    init: function init() {\n      this.jsonInit({\n        message0: Blockly.Msg.TEXT_REVERSE_MESSAGE0,\n        args0: [{\n          type: \"input_value\",\n          name: \"TEXT\",\n          check: \"String\"\n        }],\n        output: \"String\",\n        inputsInline: !0,\n        style: \"text_blocks\",\n        tooltip: Blockly.Msg.TEXT_REVERSE_TOOLTIP,\n        helpUrl: Blockly.Msg.TEXT_REVERSE_HELPURL\n      });\n    }\n  };\n  Blockly.Constants.Text.QUOTE_IMAGE_MIXIN = {\n    QUOTE_IMAGE_LEFT_DATAURI: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC\",\n    QUOTE_IMAGE_RIGHT_DATAURI: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==\",\n    QUOTE_IMAGE_WIDTH: 12,\n    QUOTE_IMAGE_HEIGHT: 12,\n    quoteField_: function quoteField_(a) {\n      for (var b = 0, c; c = this.inputList[b]; b++) {\n        for (var d = 0, e; e = c.fieldRow[d]; d++) {\n          if (a == e.name) {\n            c.insertFieldAt(d, this.newQuote_(!0));\n            c.insertFieldAt(d + 2, this.newQuote_(!1));\n            return;\n          }\n        }\n      }\n\n      console.warn('field named \"' + a + '\" not found in ' + this.toDevString());\n    },\n    newQuote_: function newQuote_(a) {\n      a = this.RTL ? !a : a;\n      return new Blockly.FieldImage(a ? this.QUOTE_IMAGE_LEFT_DATAURI : this.QUOTE_IMAGE_RIGHT_DATAURI, this.QUOTE_IMAGE_WIDTH, this.QUOTE_IMAGE_HEIGHT, a ? \"\\u201c\" : \"\\u201d\");\n    }\n  };\n\n  Blockly.Constants.Text.TEXT_QUOTES_EXTENSION = function () {\n    this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);\n    this.quoteField_(\"TEXT\");\n  };\n\n  Blockly.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN = {\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"items\", this.itemCount_);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.itemCount_ = parseInt(a.getAttribute(\"items\"), 10);\n      this.updateShape_();\n    },\n    decompose: function decompose(a) {\n      var b = a.newBlock(\"text_create_join_container\");\n      b.initSvg();\n\n      for (var c = b.getInput(\"STACK\").connection, d = 0; d < this.itemCount_; d++) {\n        var e = a.newBlock(\"text_create_join_item\");\n        e.initSvg();\n        c.connect(e.previousConnection);\n        c = e.nextConnection;\n      }\n\n      return b;\n    },\n    compose: function compose(a) {\n      var b = a.getInputTargetBlock(\"STACK\");\n\n      for (a = []; b && !b.isInsertionMarker();) {\n        a.push(b.valueConnection_), b = b.nextConnection && b.nextConnection.targetBlock();\n      }\n\n      for (b = 0; b < this.itemCount_; b++) {\n        var c = this.getInput(\"ADD\" + b).connection.targetConnection;\n        c && -1 == a.indexOf(c) && c.disconnect();\n      }\n\n      this.itemCount_ = a.length;\n      this.updateShape_();\n\n      for (b = 0; b < this.itemCount_; b++) {\n        Blockly.Mutator.reconnect(a[b], this, \"ADD\" + b);\n      }\n    },\n    saveConnections: function saveConnections(a) {\n      a = a.getInputTargetBlock(\"STACK\");\n\n      for (var b = 0; a;) {\n        var c = this.getInput(\"ADD\" + b);\n        a.valueConnection_ = c && c.connection.targetConnection;\n        b++;\n        a = a.nextConnection && a.nextConnection.targetBlock();\n      }\n    },\n    updateShape_: function updateShape_() {\n      this.itemCount_ && this.getInput(\"EMPTY\") ? this.removeInput(\"EMPTY\") : this.itemCount_ || this.getInput(\"EMPTY\") || this.appendDummyInput(\"EMPTY\").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));\n\n      for (var a = 0; a < this.itemCount_; a++) {\n        if (!this.getInput(\"ADD\" + a)) {\n          var b = this.appendValueInput(\"ADD\" + a).setAlign(Blockly.ALIGN_RIGHT);\n          0 == a && b.appendField(Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH);\n        }\n      }\n\n      for (; this.getInput(\"ADD\" + a);) {\n        this.removeInput(\"ADD\" + a), a++;\n      }\n    }\n  };\n\n  Blockly.Constants.Text.TEXT_JOIN_EXTENSION = function () {\n    this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);\n    this.itemCount_ = 2;\n    this.updateShape_();\n    this.setMutator(new Blockly.Mutator([\"text_create_join_item\"]));\n  };\n\n  Blockly.Extensions.register(\"text_append_tooltip\", Blockly.Extensions.buildTooltipWithFieldText(\"%{BKY_TEXT_APPEND_TOOLTIP}\", \"VAR\"));\n\n  Blockly.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION = function () {\n    var a = this;\n    this.setTooltip(function () {\n      return Blockly.Msg.TEXT_INDEXOF_TOOLTIP.replace(\"%1\", a.workspace.options.oneBasedIndex ? \"0\" : \"-1\");\n    });\n  };\n\n  Blockly.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN = {\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"at\", !!this.isAt_);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      a = \"false\" != a.getAttribute(\"at\");\n      this.updateAt_(a);\n    },\n    updateAt_: function updateAt_(a) {\n      this.removeInput(\"AT\", !0);\n      this.removeInput(\"ORDINAL\", !0);\n      a && (this.appendValueInput(\"AT\").setCheck(\"Number\"), Blockly.Msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX));\n      Blockly.Msg.TEXT_CHARAT_TAIL && (this.removeInput(\"TAIL\", !0), this.appendDummyInput(\"TAIL\").appendField(Blockly.Msg.TEXT_CHARAT_TAIL));\n      this.isAt_ = a;\n    }\n  };\n\n  Blockly.Constants.Text.TEXT_CHARAT_EXTENSION = function () {\n    this.getField(\"WHERE\").setValidator(function (b) {\n      b = \"FROM_START\" == b || \"FROM_END\" == b;\n      b != this.isAt_ && this.getSourceBlock().updateAt_(b);\n    });\n    this.updateAt_(!0);\n    var a = this;\n    this.setTooltip(function () {\n      var b = a.getFieldValue(\"WHERE\"),\n          c = Blockly.Msg.TEXT_CHARAT_TOOLTIP;\n      (\"FROM_START\" == b || \"FROM_END\" == b) && (b = \"FROM_START\" == b ? Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP : Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP) && (c += \"  \" + b.replace(\"%1\", a.workspace.options.oneBasedIndex ? \"#1\" : \"#0\"));\n      return c;\n    });\n  };\n\n  Blockly.Extensions.register(\"text_indexOf_tooltip\", Blockly.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION);\n  Blockly.Extensions.register(\"text_quotes\", Blockly.Constants.Text.TEXT_QUOTES_EXTENSION);\n  Blockly.Extensions.registerMutator(\"text_join_mutator\", Blockly.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN, Blockly.Constants.Text.TEXT_JOIN_EXTENSION);\n  Blockly.Extensions.registerMutator(\"text_charAt_mutator\", Blockly.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN, Blockly.Constants.Text.TEXT_CHARAT_EXTENSION);\n  Blockly.Blocks.variables = {};\n  Blockly.Constants.Variables = {};\n  Blockly.Constants.Variables.HUE = 330;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"variables_get\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n    }],\n    output: null,\n    style: \"variable_blocks\",\n    helpUrl: \"%{BKY_VARIABLES_GET_HELPURL}\",\n    tooltip: \"%{BKY_VARIABLES_GET_TOOLTIP}\",\n    extensions: [\"contextMenu_variableSetterGetter\"]\n  }, {\n    type: \"variables_set\",\n    message0: \"%{BKY_VARIABLES_SET}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n    }, {\n      type: \"input_value\",\n      name: \"VALUE\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"variable_blocks\",\n    tooltip: \"%{BKY_VARIABLES_SET_TOOLTIP}\",\n    helpUrl: \"%{BKY_VARIABLES_SET_HELPURL}\",\n    extensions: [\"contextMenu_variableSetterGetter\"]\n  }]);\n  Blockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN = {\n    customContextMenu: function customContextMenu(a) {\n      if (!this.isInFlyout) {\n        if (\"variables_get\" == this.type) var b = \"variables_set\",\n            c = Blockly.Msg.VARIABLES_GET_CREATE_SET;else b = \"variables_get\", c = Blockly.Msg.VARIABLES_SET_CREATE_GET;\n        var d = {\n          enabled: 0 < this.workspace.remainingCapacity()\n        },\n            e = this.getField(\"VAR\").getText();\n        d.text = c.replace(\"%1\", e);\n        c = Blockly.utils.xml.createElement(\"field\");\n        c.setAttribute(\"name\", \"VAR\");\n        c.appendChild(Blockly.utils.xml.createTextNode(e));\n        e = Blockly.utils.xml.createElement(\"block\");\n        e.setAttribute(\"type\", b);\n        e.appendChild(c);\n        d.callback = Blockly.ContextMenu.callbackFactory(this, e);\n        a.push(d);\n      } else if (\"variables_get\" == this.type || \"variables_get_reporter\" == this.type) b = {\n        text: Blockly.Msg.RENAME_VARIABLE,\n        enabled: !0,\n        callback: Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)\n      }, e = this.getField(\"VAR\").getText(), d = {\n        text: Blockly.Msg.DELETE_VARIABLE.replace(\"%1\", e),\n        enabled: !0,\n        callback: Blockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)\n      }, a.unshift(b), a.unshift(d);\n    }\n  };\n\n  Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY = function (a) {\n    return function () {\n      var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n      Blockly.Variables.renameVariable(b, c);\n    };\n  };\n\n  Blockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY = function (a) {\n    return function () {\n      var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n      b.deleteVariableById(c.getId());\n      b.refreshToolboxSelection();\n    };\n  };\n\n  Blockly.Extensions.registerMixin(\"contextMenu_variableSetterGetter\", Blockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN);\n  Blockly.Constants.VariablesDynamic = {};\n  Blockly.Constants.VariablesDynamic.HUE = 310;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"variables_get_dynamic\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n    }],\n    output: null,\n    style: \"variable_dynamic_blocks\",\n    helpUrl: \"%{BKY_VARIABLES_GET_HELPURL}\",\n    tooltip: \"%{BKY_VARIABLES_GET_TOOLTIP}\",\n    extensions: [\"contextMenu_variableDynamicSetterGetter\"]\n  }, {\n    type: \"variables_set_dynamic\",\n    message0: \"%{BKY_VARIABLES_SET}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n    }, {\n      type: \"input_value\",\n      name: \"VALUE\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"variable_dynamic_blocks\",\n    tooltip: \"%{BKY_VARIABLES_SET_TOOLTIP}\",\n    helpUrl: \"%{BKY_VARIABLES_SET_HELPURL}\",\n    extensions: [\"contextMenu_variableDynamicSetterGetter\"]\n  }]);\n  Blockly.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN = {\n    customContextMenu: function customContextMenu(a) {\n      if (!this.isInFlyout) {\n        var b = this.getFieldValue(\"VAR\");\n        var c = this.workspace.getVariableById(b).type;\n\n        if (\"variables_get_dynamic\" == this.type) {\n          b = \"variables_set_dynamic\";\n          var d = Blockly.Msg.VARIABLES_GET_CREATE_SET;\n        } else b = \"variables_get_dynamic\", d = Blockly.Msg.VARIABLES_SET_CREATE_GET;\n\n        var e = {\n          enabled: 0 < this.workspace.remainingCapacity()\n        },\n            f = this.getField(\"VAR\").getText();\n        e.text = d.replace(\"%1\", f);\n        d = Blockly.utils.xml.createElement(\"field\");\n        d.setAttribute(\"name\", \"VAR\");\n        d.setAttribute(\"variabletype\", c);\n        d.appendChild(Blockly.utils.xml.createTextNode(f));\n        f = Blockly.utils.xml.createElement(\"block\");\n        f.setAttribute(\"type\", b);\n        f.appendChild(d);\n        e.callback = Blockly.ContextMenu.callbackFactory(this, f);\n        a.push(e);\n      } else if (\"variables_get_dynamic\" == this.type || \"variables_get_reporter_dynamic\" == this.type) b = {\n        text: Blockly.Msg.RENAME_VARIABLE,\n        enabled: !0,\n        callback: Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)\n      }, f = this.getField(\"VAR\").getText(), e = {\n        text: Blockly.Msg.DELETE_VARIABLE.replace(\"%1\", f),\n        enabled: !0,\n        callback: Blockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)\n      }, a.unshift(b), a.unshift(e);\n    },\n    onchange: function onchange(a) {\n      a = this.getFieldValue(\"VAR\");\n      a = Blockly.Variables.getVariable(this.workspace, a);\n      \"variables_get_dynamic\" == this.type ? this.outputConnection.setCheck(a.type) : this.getInput(\"VALUE\").connection.setCheck(a.type);\n    }\n  };\n\n  Blockly.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY = function (a) {\n    return function () {\n      var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n      Blockly.Variables.renameVariable(b, c);\n    };\n  };\n\n  Blockly.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY = function (a) {\n    return function () {\n      var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n      b.deleteVariableById(c.getId());\n      b.refreshToolboxSelection();\n    };\n  };\n\n  Blockly.Extensions.registerMixin(\"contextMenu_variableDynamicSetterGetter\", Blockly.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN);\n  return Blockly.Blocks;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./core-browser', './msg/en', './blocks', './javascript'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./core-browser'), require('./msg/en'), require('./blocks'), require('./javascript'));\n  } else {\n    // Browser\n    root.Blockly = factory(root.Blockly, root.En, root.BlocklyBlocks, root.BlocklyJS);\n  }\n})(this, function (Blockly, En, BlocklyBlocks, BlocklyJS) {\n  /**\n   * @license\n   * Copyright 2019 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview Blockly module for the browser. This includes Blockly core\n   * and built in blocks, the JavaScript code generator and the English block\n   * localization files.\n   */\n\n  /* eslint-disable */\n  'use strict'; // Include the EN Locale by default.\n\n  Blockly.setLocale(En);\n  Blockly.Blocks = Blockly.Blocks || {};\n  Object.keys(BlocklyBlocks).forEach(function (k) {\n    Blockly.Blocks[k] = BlocklyBlocks[k];\n  });\n  Blockly.JavaScript = BlocklyJS;\n  return Blockly;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./blockly'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./blockly'));\n  } else {\n    // Browser\n    root.Blockly = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  /**\n   * @license\n   * Copyright 2019 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview Blockly core module for the browser. It includes blockly.js\n   *               and adds a helper method for setting the locale.\n   */\n\n  /* eslint-disable */\n  'use strict'; // Add a helper method to set the Blockly locale.\n\n  Blockly.setLocale = function (locale) {\n    Blockly.Msg = Blockly.Msg || {};\n    Object.keys(locale).forEach(function (k) {\n      Blockly.Msg[k] = locale[k];\n    });\n  };\n\n  return Blockly;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./browser'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./node'));\n  } else {\n    // Browser\n    root.Blockly = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  /**\n   * @license\n   * Copyright 2019 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview Blockly module.\n   */\n\n  /* eslint-disable */\n  'use strict';\n\n  return Blockly;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./core', './javascript_compressed.js'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./core'), require('./javascript_compressed.js'));\n  } else {\n    // Browser\n    root.BlocklyJavaScript = factory(root.Blockly, root.BlocklyJavaScript);\n  }\n})(this, function (Blockly, BlocklyJavaScript) {\n  /**\n   * @license\n   * Copyright 2020 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview JavaScript Generator module.\n   */\n\n  /* eslint-disable */\n  'use strict';\n\n  Blockly.JavaScript = BlocklyJavaScript;\n  return BlocklyJavaScript;\n});","// Do not edit this file; automatically generated by gulp.\n\n/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./blockly_compressed.js'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./blockly_compressed.js'));\n  } else {\n    // Browser\n    root.Blockly.JavaScript = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  'use strict';\n\n  Blockly.JavaScript = new Blockly.Generator(\"JavaScript\");\n  Blockly.JavaScript.addReservedWords(\"break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,\" + Object.getOwnPropertyNames(Blockly.utils.global).join(\",\"));\n  Blockly.JavaScript.ORDER_ATOMIC = 0;\n  Blockly.JavaScript.ORDER_NEW = 1.1;\n  Blockly.JavaScript.ORDER_MEMBER = 1.2;\n  Blockly.JavaScript.ORDER_FUNCTION_CALL = 2;\n  Blockly.JavaScript.ORDER_INCREMENT = 3;\n  Blockly.JavaScript.ORDER_DECREMENT = 3;\n  Blockly.JavaScript.ORDER_BITWISE_NOT = 4.1;\n  Blockly.JavaScript.ORDER_UNARY_PLUS = 4.2;\n  Blockly.JavaScript.ORDER_UNARY_NEGATION = 4.3;\n  Blockly.JavaScript.ORDER_LOGICAL_NOT = 4.4;\n  Blockly.JavaScript.ORDER_TYPEOF = 4.5;\n  Blockly.JavaScript.ORDER_VOID = 4.6;\n  Blockly.JavaScript.ORDER_DELETE = 4.7;\n  Blockly.JavaScript.ORDER_AWAIT = 4.8;\n  Blockly.JavaScript.ORDER_EXPONENTIATION = 5;\n  Blockly.JavaScript.ORDER_MULTIPLICATION = 5.1;\n  Blockly.JavaScript.ORDER_DIVISION = 5.2;\n  Blockly.JavaScript.ORDER_MODULUS = 5.3;\n  Blockly.JavaScript.ORDER_SUBTRACTION = 6.1;\n  Blockly.JavaScript.ORDER_ADDITION = 6.2;\n  Blockly.JavaScript.ORDER_BITWISE_SHIFT = 7;\n  Blockly.JavaScript.ORDER_RELATIONAL = 8;\n  Blockly.JavaScript.ORDER_IN = 8;\n  Blockly.JavaScript.ORDER_INSTANCEOF = 8;\n  Blockly.JavaScript.ORDER_EQUALITY = 9;\n  Blockly.JavaScript.ORDER_BITWISE_AND = 10;\n  Blockly.JavaScript.ORDER_BITWISE_XOR = 11;\n  Blockly.JavaScript.ORDER_BITWISE_OR = 12;\n  Blockly.JavaScript.ORDER_LOGICAL_AND = 13;\n  Blockly.JavaScript.ORDER_LOGICAL_OR = 14;\n  Blockly.JavaScript.ORDER_CONDITIONAL = 15;\n  Blockly.JavaScript.ORDER_ASSIGNMENT = 16;\n  Blockly.JavaScript.ORDER_YIELD = 17;\n  Blockly.JavaScript.ORDER_COMMA = 18;\n  Blockly.JavaScript.ORDER_NONE = 99;\n  Blockly.JavaScript.ORDER_OVERRIDES = [[Blockly.JavaScript.ORDER_FUNCTION_CALL, Blockly.JavaScript.ORDER_MEMBER], [Blockly.JavaScript.ORDER_FUNCTION_CALL, Blockly.JavaScript.ORDER_FUNCTION_CALL], [Blockly.JavaScript.ORDER_MEMBER, Blockly.JavaScript.ORDER_MEMBER], [Blockly.JavaScript.ORDER_MEMBER, Blockly.JavaScript.ORDER_FUNCTION_CALL], [Blockly.JavaScript.ORDER_LOGICAL_NOT, Blockly.JavaScript.ORDER_LOGICAL_NOT], [Blockly.JavaScript.ORDER_MULTIPLICATION, Blockly.JavaScript.ORDER_MULTIPLICATION], [Blockly.JavaScript.ORDER_ADDITION, Blockly.JavaScript.ORDER_ADDITION], [Blockly.JavaScript.ORDER_LOGICAL_AND, Blockly.JavaScript.ORDER_LOGICAL_AND], [Blockly.JavaScript.ORDER_LOGICAL_OR, Blockly.JavaScript.ORDER_LOGICAL_OR]];\n  Blockly.JavaScript.isInitialized = !1;\n\n  Blockly.JavaScript.init = function (a) {\n    Object.getPrototypeOf(this).init.call(this);\n    this.nameDB_ ? this.nameDB_.reset() : this.nameDB_ = new Blockly.Names(this.RESERVED_WORDS_);\n    this.nameDB_.setVariableMap(a.getVariableMap());\n    this.nameDB_.populateVariables(a);\n    this.nameDB_.populateProcedures(a);\n\n    for (var b = [], c = Blockly.Variables.allDeveloperVariables(a), d = 0; d < c.length; d++) {\n      b.push(this.nameDB_.getName(c[d], Blockly.Names.DEVELOPER_VARIABLE_TYPE));\n    }\n\n    a = Blockly.Variables.allUsedVarModels(a);\n\n    for (d = 0; d < a.length; d++) {\n      b.push(this.nameDB_.getName(a[d].getId(), Blockly.VARIABLE_CATEGORY_NAME));\n    }\n\n    b.length && (this.definitions_.variables = \"var \" + b.join(\", \") + \";\");\n    this.isInitialized = !0;\n  };\n\n  Blockly.JavaScript.finish = function (a) {\n    var b = Blockly.utils.object.values(this.definitions_);\n    a = Object.getPrototypeOf(this).finish.call(this, a);\n    this.isInitialized = !1;\n    this.nameDB_.reset();\n    return b.join(\"\\n\\n\") + \"\\n\\n\\n\" + a;\n  };\n\n  Blockly.JavaScript.scrubNakedValue = function (a) {\n    return a + \";\\n\";\n  };\n\n  Blockly.JavaScript.quote_ = function (a) {\n    a = a.replace(/\\\\/g, \"\\\\\\\\\").replace(/\\n/g, \"\\\\\\n\").replace(/'/g, \"\\\\'\");\n    return \"'\" + a + \"'\";\n  };\n\n  Blockly.JavaScript.multiline_quote_ = function (a) {\n    return a.split(/\\n/g).map(this.quote_).join(\" + '\\\\n' +\\n\");\n  };\n\n  Blockly.JavaScript.scrub_ = function (a, b, c) {\n    var d = \"\";\n\n    if (!a.outputConnection || !a.outputConnection.targetConnection) {\n      var e = a.getCommentText();\n      e && (e = Blockly.utils.string.wrap(e, this.COMMENT_WRAP - 3), d += this.prefixLines(e + \"\\n\", \"// \"));\n\n      for (var f = 0; f < a.inputList.length; f++) {\n        a.inputList[f].type == Blockly.inputTypes.VALUE && (e = a.inputList[f].connection.targetBlock()) && (e = this.allNestedComments(e)) && (d += this.prefixLines(e, \"// \"));\n      }\n    }\n\n    a = a.nextConnection && a.nextConnection.targetBlock();\n    c = c ? \"\" : this.blockToCode(a);\n    return d + b + c;\n  };\n\n  Blockly.JavaScript.getAdjusted = function (a, b, c, d, e) {\n    c = c || 0;\n    e = e || this.ORDER_NONE;\n    a.workspace.options.oneBasedIndex && c--;\n    var f = a.workspace.options.oneBasedIndex ? \"1\" : \"0\";\n    a = 0 < c ? this.valueToCode(a, b, this.ORDER_ADDITION) || f : 0 > c ? this.valueToCode(a, b, this.ORDER_SUBTRACTION) || f : d ? this.valueToCode(a, b, this.ORDER_UNARY_NEGATION) || f : this.valueToCode(a, b, e) || f;\n    if (Blockly.isNumber(a)) a = Number(a) + c, d && (a = -a);else {\n      if (0 < c) {\n        a = a + \" + \" + c;\n        var g = this.ORDER_ADDITION;\n      } else 0 > c && (a = a + \" - \" + -c, g = this.ORDER_SUBTRACTION);\n\n      d && (a = c ? \"-(\" + a + \")\" : \"-\" + a, g = this.ORDER_UNARY_NEGATION);\n      g = Math.floor(g);\n      e = Math.floor(e);\n      g && e >= g && (a = \"(\" + a + \")\");\n    }\n    return a;\n  };\n\n  Blockly.JavaScript.colour = {};\n\n  Blockly.JavaScript.colour_picker = function (a) {\n    return [Blockly.JavaScript.quote_(a.getFieldValue(\"COLOUR\")), Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.colour_random = function (a) {\n    return [Blockly.JavaScript.provideFunction_(\"colourRandom\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"() {\", \"  var num = Math.floor(Math.random() * Math.pow(2, 24));\", \"  return '#' + ('00000' + num.toString(16)).substr(-6);\", \"}\"]) + \"()\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.colour_rgb = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"RED\", Blockly.JavaScript.ORDER_NONE) || 0,\n        c = Blockly.JavaScript.valueToCode(a, \"GREEN\", Blockly.JavaScript.ORDER_NONE) || 0;\n    a = Blockly.JavaScript.valueToCode(a, \"BLUE\", Blockly.JavaScript.ORDER_NONE) || 0;\n    return [Blockly.JavaScript.provideFunction_(\"colourRgb\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(r, g, b) {\", \"  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;\", \"  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;\", \"  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;\", \"  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);\", \"  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);\", \"  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);\", \"  return '#' + r + g + b;\", \"}\"]) + \"(\" + b + \", \" + c + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.colour_blend = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"COLOUR1\", Blockly.JavaScript.ORDER_NONE) || \"'#000000'\",\n        c = Blockly.JavaScript.valueToCode(a, \"COLOUR2\", Blockly.JavaScript.ORDER_NONE) || \"'#000000'\";\n    a = Blockly.JavaScript.valueToCode(a, \"RATIO\", Blockly.JavaScript.ORDER_NONE) || .5;\n    return [Blockly.JavaScript.provideFunction_(\"colourBlend\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(c1, c2, ratio) {\", \"  ratio = Math.max(Math.min(Number(ratio), 1), 0);\", \"  var r1 = parseInt(c1.substring(1, 3), 16);\", \"  var g1 = parseInt(c1.substring(3, 5), 16);\", \"  var b1 = parseInt(c1.substring(5, 7), 16);\", \"  var r2 = parseInt(c2.substring(1, 3), 16);\", \"  var g2 = parseInt(c2.substring(3, 5), 16);\", \"  var b2 = parseInt(c2.substring(5, 7), 16);\", \"  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);\", \"  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);\", \"  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);\", \"  r = ('0' + (r || 0).toString(16)).slice(-2);\", \"  g = ('0' + (g || 0).toString(16)).slice(-2);\", \"  b = ('0' + (b || 0).toString(16)).slice(-2);\", \"  return '#' + r + g + b;\", \"}\"]) + \"(\" + b + \", \" + c + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists = {};\n\n  Blockly.JavaScript.lists_create_empty = function (a) {\n    return [\"[]\", Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.lists_create_with = function (a) {\n    for (var b = Array(a.itemCount_), c = 0; c < a.itemCount_; c++) {\n      b[c] = Blockly.JavaScript.valueToCode(a, \"ADD\" + c, Blockly.JavaScript.ORDER_NONE) || \"null\";\n    }\n\n    return [\"[\" + b.join(\", \") + \"]\", Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.lists_repeat = function (a) {\n    var b = Blockly.JavaScript.provideFunction_(\"listsRepeat\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(value, n) {\", \"  var array = [];\", \"  for (var i = 0; i < n; i++) {\", \"    array[i] = value;\", \"  }\", \"  return array;\", \"}\"]),\n        c = Blockly.JavaScript.valueToCode(a, \"ITEM\", Blockly.JavaScript.ORDER_NONE) || \"null\";\n    a = Blockly.JavaScript.valueToCode(a, \"NUM\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n    return [b + \"(\" + c + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists_length = function (a) {\n    return [(Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\") + \".length\", Blockly.JavaScript.ORDER_MEMBER];\n  };\n\n  Blockly.JavaScript.lists_isEmpty = function (a) {\n    return [\"!\" + (Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\") + \".length\", Blockly.JavaScript.ORDER_LOGICAL_NOT];\n  };\n\n  Blockly.JavaScript.lists_indexOf = function (a) {\n    var b = \"FIRST\" == a.getFieldValue(\"END\") ? \"indexOf\" : \"lastIndexOf\",\n        c = Blockly.JavaScript.valueToCode(a, \"FIND\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    b = (Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\") + \".\" + b + \"(\" + c + \")\";\n    return a.workspace.options.oneBasedIndex ? [b + \" + 1\", Blockly.JavaScript.ORDER_ADDITION] : [b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists_getIndex = function (a) {\n    var b = a.getFieldValue(\"MODE\") || \"GET\",\n        c = a.getFieldValue(\"WHERE\") || \"FROM_START\",\n        d = Blockly.JavaScript.valueToCode(a, \"VALUE\", \"RANDOM\" == c ? Blockly.JavaScript.ORDER_NONE : Blockly.JavaScript.ORDER_MEMBER) || \"[]\";\n\n    switch (c) {\n      case \"FIRST\":\n        if (\"GET\" == b) return [d + \"[0]\", Blockly.JavaScript.ORDER_MEMBER];\n        if (\"GET_REMOVE\" == b) return [d + \".shift()\", Blockly.JavaScript.ORDER_MEMBER];\n        if (\"REMOVE\" == b) return d + \".shift();\\n\";\n        break;\n\n      case \"LAST\":\n        if (\"GET\" == b) return [d + \".slice(-1)[0]\", Blockly.JavaScript.ORDER_MEMBER];\n        if (\"GET_REMOVE\" == b) return [d + \".pop()\", Blockly.JavaScript.ORDER_MEMBER];\n        if (\"REMOVE\" == b) return d + \".pop();\\n\";\n        break;\n\n      case \"FROM_START\":\n        a = Blockly.JavaScript.getAdjusted(a, \"AT\");\n        if (\"GET\" == b) return [d + \"[\" + a + \"]\", Blockly.JavaScript.ORDER_MEMBER];\n        if (\"GET_REMOVE\" == b) return [d + \".splice(\" + a + \", 1)[0]\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n        if (\"REMOVE\" == b) return d + \".splice(\" + a + \", 1);\\n\";\n        break;\n\n      case \"FROM_END\":\n        a = Blockly.JavaScript.getAdjusted(a, \"AT\", 1, !0);\n        if (\"GET\" == b) return [d + \".slice(\" + a + \")[0]\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n        if (\"GET_REMOVE\" == b) return [d + \".splice(\" + a + \", 1)[0]\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n        if (\"REMOVE\" == b) return d + \".splice(\" + a + \", 1);\";\n        break;\n\n      case \"RANDOM\":\n        d = Blockly.JavaScript.provideFunction_(\"listsGetRandomItem\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(list, remove) {\", \"  var x = Math.floor(Math.random() * list.length);\", \"  if (remove) {\", \"    return list.splice(x, 1)[0];\", \"  } else {\", \"    return list[x];\", \"  }\", \"}\"]) + \"(\" + d + \", \" + (\"GET\" != b) + \")\";\n        if (\"GET\" == b || \"GET_REMOVE\" == b) return [d, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n        if (\"REMOVE\" == b) return d + \";\\n\";\n    }\n\n    throw Error(\"Unhandled combination (lists_getIndex).\");\n  };\n\n  Blockly.JavaScript.lists_setIndex = function (a) {\n    function b() {\n      if (c.match(/^\\w+$/)) return \"\";\n      var g = Blockly.JavaScript.nameDB_.getDistinctName(\"tmpList\", Blockly.VARIABLE_CATEGORY_NAME),\n          h = \"var \" + g + \" = \" + c + \";\\n\";\n      c = g;\n      return h;\n    }\n\n    var c = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\",\n        d = a.getFieldValue(\"MODE\") || \"GET\",\n        e = a.getFieldValue(\"WHERE\") || \"FROM_START\",\n        f = Blockly.JavaScript.valueToCode(a, \"TO\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"null\";\n\n    switch (e) {\n      case \"FIRST\":\n        if (\"SET\" == d) return c + \"[0] = \" + f + \";\\n\";\n        if (\"INSERT\" == d) return c + \".unshift(\" + f + \");\\n\";\n        break;\n\n      case \"LAST\":\n        if (\"SET\" == d) return a = b(), a + (c + \"[\" + c + \".length - 1] = \" + f + \";\\n\");\n        if (\"INSERT\" == d) return c + \".push(\" + f + \");\\n\";\n        break;\n\n      case \"FROM_START\":\n        e = Blockly.JavaScript.getAdjusted(a, \"AT\");\n        if (\"SET\" == d) return c + \"[\" + e + \"] = \" + f + \";\\n\";\n        if (\"INSERT\" == d) return c + \".splice(\" + e + \", 0, \" + f + \");\\n\";\n        break;\n\n      case \"FROM_END\":\n        e = Blockly.JavaScript.getAdjusted(a, \"AT\", 1, !1, Blockly.JavaScript.ORDER_SUBTRACTION);\n        a = b();\n        if (\"SET\" == d) return a + (c + \"[\" + c + \".length - \" + e + \"] = \" + f + \";\\n\");\n        if (\"INSERT\" == d) return a + (c + \".splice(\" + c + \".length - \" + e + \", 0, \" + f + \");\\n\");\n        break;\n\n      case \"RANDOM\":\n        a = b();\n        e = Blockly.JavaScript.nameDB_.getDistinctName(\"tmpX\", Blockly.VARIABLE_CATEGORY_NAME);\n        a += \"var \" + e + \" = Math.floor(Math.random() * \" + c + \".length);\\n\";\n        if (\"SET\" == d) return a + (c + \"[\" + e + \"] = \" + f + \";\\n\");\n        if (\"INSERT\" == d) return a + (c + \".splice(\" + e + \", 0, \" + f + \");\\n\");\n    }\n\n    throw Error(\"Unhandled combination (lists_setIndex).\");\n  };\n\n  Blockly.JavaScript.lists.getIndex_ = function (a, b, c) {\n    return \"FIRST\" == b ? \"0\" : \"FROM_END\" == b ? a + \".length - 1 - \" + c : \"LAST\" == b ? a + \".length - 1\" : c;\n  };\n\n  Blockly.JavaScript.lists_getSublist = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\",\n        c = a.getFieldValue(\"WHERE1\"),\n        d = a.getFieldValue(\"WHERE2\");\n    if (\"FIRST\" == c && \"LAST\" == d) b += \".slice(0)\";else if (b.match(/^\\w+$/) || \"FROM_END\" != c && \"FROM_START\" == d) {\n      switch (c) {\n        case \"FROM_START\":\n          var e = Blockly.JavaScript.getAdjusted(a, \"AT1\");\n          break;\n\n        case \"FROM_END\":\n          e = Blockly.JavaScript.getAdjusted(a, \"AT1\", 1, !1, Blockly.JavaScript.ORDER_SUBTRACTION);\n          e = b + \".length - \" + e;\n          break;\n\n        case \"FIRST\":\n          e = \"0\";\n          break;\n\n        default:\n          throw Error(\"Unhandled option (lists_getSublist).\");\n      }\n\n      switch (d) {\n        case \"FROM_START\":\n          a = Blockly.JavaScript.getAdjusted(a, \"AT2\", 1);\n          break;\n\n        case \"FROM_END\":\n          a = Blockly.JavaScript.getAdjusted(a, \"AT2\", 0, !1, Blockly.JavaScript.ORDER_SUBTRACTION);\n          a = b + \".length - \" + a;\n          break;\n\n        case \"LAST\":\n          a = b + \".length\";\n          break;\n\n        default:\n          throw Error(\"Unhandled option (lists_getSublist).\");\n      }\n\n      b = b + \".slice(\" + e + \", \" + a + \")\";\n    } else {\n      e = Blockly.JavaScript.getAdjusted(a, \"AT1\");\n      a = Blockly.JavaScript.getAdjusted(a, \"AT2\");\n      var f = Blockly.JavaScript.lists.getIndex_,\n          g = {\n        FIRST: \"First\",\n        LAST: \"Last\",\n        FROM_START: \"FromStart\",\n        FROM_END: \"FromEnd\"\n      };\n      b = Blockly.JavaScript.provideFunction_(\"subsequence\" + g[c] + g[d], [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(sequence\" + (\"FROM_END\" == c || \"FROM_START\" == c ? \", at1\" : \"\") + (\"FROM_END\" == d || \"FROM_START\" == d ? \", at2\" : \"\") + \") {\", \"  var start = \" + f(\"sequence\", c, \"at1\") + \";\", \"  var end = \" + f(\"sequence\", d, \"at2\") + \" + 1;\", \"  return sequence.slice(start, end);\", \"}\"]) + \"(\" + b + (\"FROM_END\" == c || \"FROM_START\" == c ? \", \" + e : \"\") + (\"FROM_END\" == d || \"FROM_START\" == d ? \", \" + a : \"\") + \")\";\n    }\n    return [b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists_sort = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_FUNCTION_CALL) || \"[]\",\n        c = \"1\" === a.getFieldValue(\"DIRECTION\") ? 1 : -1;\n    a = a.getFieldValue(\"TYPE\");\n    var d = Blockly.JavaScript.provideFunction_(\"listsGetSortCompare\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(type, direction) {\", \"  var compareFuncs = {\", '    \"NUMERIC\": function(a, b) {', \"        return Number(a) - Number(b); },\", '    \"TEXT\": function(a, b) {', \"        return a.toString() > b.toString() ? 1 : -1; },\", '    \"IGNORE_CASE\": function(a, b) {', \"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },\", \"  };\", \"  var compare = compareFuncs[type];\", \"  return function(a, b) { return compare(a, b) * direction; }\", \"}\"]);\n    return [b + \".slice().sort(\" + d + '(\"' + a + '\", ' + c + \"))\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists_split = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"INPUT\", Blockly.JavaScript.ORDER_MEMBER),\n        c = Blockly.JavaScript.valueToCode(a, \"DELIM\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    a = a.getFieldValue(\"MODE\");\n    if (\"SPLIT\" == a) b || (b = \"''\"), a = \"split\";else if (\"JOIN\" == a) b || (b = \"[]\"), a = \"join\";else throw Error(\"Unknown mode: \" + a);\n    return [b + \".\" + a + \"(\" + c + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists_reverse = function (a) {\n    return [(Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_FUNCTION_CALL) || \"[]\") + \".slice().reverse()\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.logic = {};\n\n  Blockly.JavaScript.controls_if = function (a) {\n    var b = 0,\n        c = \"\";\n    Blockly.JavaScript.STATEMENT_PREFIX && (c += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX, a));\n\n    do {\n      var d = Blockly.JavaScript.valueToCode(a, \"IF\" + b, Blockly.JavaScript.ORDER_NONE) || \"false\";\n      var e = Blockly.JavaScript.statementToCode(a, \"DO\" + b);\n      Blockly.JavaScript.STATEMENT_SUFFIX && (e = Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, a), Blockly.JavaScript.INDENT) + e);\n      c += (0 < b ? \" else \" : \"\") + \"if (\" + d + \") {\\n\" + e + \"}\";\n      ++b;\n    } while (a.getInput(\"IF\" + b));\n\n    if (a.getInput(\"ELSE\") || Blockly.JavaScript.STATEMENT_SUFFIX) e = Blockly.JavaScript.statementToCode(a, \"ELSE\"), Blockly.JavaScript.STATEMENT_SUFFIX && (e = Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, a), Blockly.JavaScript.INDENT) + e), c += \" else {\\n\" + e + \"}\";\n    return c + \"\\n\";\n  };\n\n  Blockly.JavaScript.controls_ifelse = Blockly.JavaScript.controls_if;\n\n  Blockly.JavaScript.logic_compare = function (a) {\n    var b = {\n      EQ: \"==\",\n      NEQ: \"!=\",\n      LT: \"<\",\n      LTE: \"<=\",\n      GT: \">\",\n      GTE: \">=\"\n    }[a.getFieldValue(\"OP\")],\n        c = \"==\" == b || \"!=\" == b ? Blockly.JavaScript.ORDER_EQUALITY : Blockly.JavaScript.ORDER_RELATIONAL,\n        d = Blockly.JavaScript.valueToCode(a, \"A\", c) || \"0\";\n    a = Blockly.JavaScript.valueToCode(a, \"B\", c) || \"0\";\n    return [d + \" \" + b + \" \" + a, c];\n  };\n\n  Blockly.JavaScript.logic_operation = function (a) {\n    var b = \"AND\" == a.getFieldValue(\"OP\") ? \"&&\" : \"||\",\n        c = \"&&\" == b ? Blockly.JavaScript.ORDER_LOGICAL_AND : Blockly.JavaScript.ORDER_LOGICAL_OR,\n        d = Blockly.JavaScript.valueToCode(a, \"A\", c);\n    a = Blockly.JavaScript.valueToCode(a, \"B\", c);\n\n    if (d || a) {\n      var e = \"&&\" == b ? \"true\" : \"false\";\n      d || (d = e);\n      a || (a = e);\n    } else a = d = \"false\";\n\n    return [d + \" \" + b + \" \" + a, c];\n  };\n\n  Blockly.JavaScript.logic_negate = function (a) {\n    var b = Blockly.JavaScript.ORDER_LOGICAL_NOT;\n    return [\"!\" + (Blockly.JavaScript.valueToCode(a, \"BOOL\", b) || \"true\"), b];\n  };\n\n  Blockly.JavaScript.logic_boolean = function (a) {\n    return [\"TRUE\" == a.getFieldValue(\"BOOL\") ? \"true\" : \"false\", Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.logic_null = function (a) {\n    return [\"null\", Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.logic_ternary = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"IF\", Blockly.JavaScript.ORDER_CONDITIONAL) || \"false\",\n        c = Blockly.JavaScript.valueToCode(a, \"THEN\", Blockly.JavaScript.ORDER_CONDITIONAL) || \"null\";\n    a = Blockly.JavaScript.valueToCode(a, \"ELSE\", Blockly.JavaScript.ORDER_CONDITIONAL) || \"null\";\n    return [b + \" ? \" + c + \" : \" + a, Blockly.JavaScript.ORDER_CONDITIONAL];\n  };\n\n  Blockly.JavaScript.loops = {};\n\n  Blockly.JavaScript.controls_repeat_ext = function (a) {\n    var b = a.getField(\"TIMES\") ? String(Number(a.getFieldValue(\"TIMES\"))) : Blockly.JavaScript.valueToCode(a, \"TIMES\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"0\",\n        c = Blockly.JavaScript.statementToCode(a, \"DO\");\n    c = Blockly.JavaScript.addLoopTrap(c, a);\n    a = \"\";\n    var d = Blockly.JavaScript.nameDB_.getDistinctName(\"count\", Blockly.VARIABLE_CATEGORY_NAME),\n        e = b;\n    b.match(/^\\w+$/) || Blockly.isNumber(b) || (e = Blockly.JavaScript.nameDB_.getDistinctName(\"repeat_end\", Blockly.VARIABLE_CATEGORY_NAME), a += \"var \" + e + \" = \" + b + \";\\n\");\n    return a + (\"for (var \" + d + \" = 0; \" + d + \" < \" + e + \"; \" + d + \"++) {\\n\" + c + \"}\\n\");\n  };\n\n  Blockly.JavaScript.controls_repeat = Blockly.JavaScript.controls_repeat_ext;\n\n  Blockly.JavaScript.controls_whileUntil = function (a) {\n    var b = \"UNTIL\" == a.getFieldValue(\"MODE\"),\n        c = Blockly.JavaScript.valueToCode(a, \"BOOL\", b ? Blockly.JavaScript.ORDER_LOGICAL_NOT : Blockly.JavaScript.ORDER_NONE) || \"false\",\n        d = Blockly.JavaScript.statementToCode(a, \"DO\");\n    d = Blockly.JavaScript.addLoopTrap(d, a);\n    b && (c = \"!\" + c);\n    return \"while (\" + c + \") {\\n\" + d + \"}\\n\";\n  };\n\n  Blockly.JavaScript.controls_for = function (a) {\n    var b = Blockly.JavaScript.nameDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME),\n        c = Blockly.JavaScript.valueToCode(a, \"FROM\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"0\",\n        d = Blockly.JavaScript.valueToCode(a, \"TO\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"0\",\n        e = Blockly.JavaScript.valueToCode(a, \"BY\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"1\",\n        f = Blockly.JavaScript.statementToCode(a, \"DO\");\n    f = Blockly.JavaScript.addLoopTrap(f, a);\n\n    if (Blockly.isNumber(c) && Blockly.isNumber(d) && Blockly.isNumber(e)) {\n      var g = Number(c) <= Number(d);\n      a = \"for (\" + b + \" = \" + c + \"; \" + b + (g ? \" <= \" : \" >= \") + d + \"; \" + b;\n      b = Math.abs(Number(e));\n      a = (1 == b ? a + (g ? \"++\" : \"--\") : a + ((g ? \" += \" : \" -= \") + b)) + (\") {\\n\" + f + \"}\\n\");\n    } else a = \"\", g = c, c.match(/^\\w+$/) || Blockly.isNumber(c) || (g = Blockly.JavaScript.nameDB_.getDistinctName(b + \"_start\", Blockly.VARIABLE_CATEGORY_NAME), a += \"var \" + g + \" = \" + c + \";\\n\"), c = d, d.match(/^\\w+$/) || Blockly.isNumber(d) || (c = Blockly.JavaScript.nameDB_.getDistinctName(b + \"_end\", Blockly.VARIABLE_CATEGORY_NAME), a += \"var \" + c + \" = \" + d + \";\\n\"), d = Blockly.JavaScript.nameDB_.getDistinctName(b + \"_inc\", Blockly.VARIABLE_CATEGORY_NAME), a += \"var \" + d + \" = \", a = Blockly.isNumber(e) ? a + (Math.abs(e) + \";\\n\") : a + (\"Math.abs(\" + e + \");\\n\"), a = a + (\"if (\" + g + \" > \" + c + \") {\\n\") + (Blockly.JavaScript.INDENT + d + \" = -\" + d + \";\\n\"), a += \"}\\n\", a += \"for (\" + b + \" = \" + g + \"; \" + d + \" >= 0 ? \" + b + \" <= \" + c + \" : \" + b + \" >= \" + c + \"; \" + b + \" += \" + d + \") {\\n\" + f + \"}\\n\";\n\n    return a;\n  };\n\n  Blockly.JavaScript.controls_forEach = function (a) {\n    var b = Blockly.JavaScript.nameDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME),\n        c = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"[]\",\n        d = Blockly.JavaScript.statementToCode(a, \"DO\");\n    d = Blockly.JavaScript.addLoopTrap(d, a);\n    a = \"\";\n    var e = c;\n    c.match(/^\\w+$/) || (e = Blockly.JavaScript.nameDB_.getDistinctName(b + \"_list\", Blockly.VARIABLE_CATEGORY_NAME), a += \"var \" + e + \" = \" + c + \";\\n\");\n    c = Blockly.JavaScript.nameDB_.getDistinctName(b + \"_index\", Blockly.VARIABLE_CATEGORY_NAME);\n    d = Blockly.JavaScript.INDENT + b + \" = \" + e + \"[\" + c + \"];\\n\" + d;\n    return a + (\"for (var \" + c + \" in \" + e + \") {\\n\" + d + \"}\\n\");\n  };\n\n  Blockly.JavaScript.controls_flow_statements = function (a) {\n    var b = \"\";\n    Blockly.JavaScript.STATEMENT_PREFIX && (b += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX, a));\n    Blockly.JavaScript.STATEMENT_SUFFIX && (b += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, a));\n\n    if (Blockly.JavaScript.STATEMENT_PREFIX) {\n      var c = Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(a);\n      c && !c.suppressPrefixSuffix && (b += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX, c));\n    }\n\n    switch (a.getFieldValue(\"FLOW\")) {\n      case \"BREAK\":\n        return b + \"break;\\n\";\n\n      case \"CONTINUE\":\n        return b + \"continue;\\n\";\n    }\n\n    throw Error(\"Unknown flow statement.\");\n  };\n\n  Blockly.JavaScript.math = {};\n\n  Blockly.JavaScript.math_number = function (a) {\n    a = Number(a.getFieldValue(\"NUM\"));\n    return [a, 0 <= a ? Blockly.JavaScript.ORDER_ATOMIC : Blockly.JavaScript.ORDER_UNARY_NEGATION];\n  };\n\n  Blockly.JavaScript.math_arithmetic = function (a) {\n    var b = {\n      ADD: [\" + \", Blockly.JavaScript.ORDER_ADDITION],\n      MINUS: [\" - \", Blockly.JavaScript.ORDER_SUBTRACTION],\n      MULTIPLY: [\" * \", Blockly.JavaScript.ORDER_MULTIPLICATION],\n      DIVIDE: [\" / \", Blockly.JavaScript.ORDER_DIVISION],\n      POWER: [null, Blockly.JavaScript.ORDER_NONE]\n    }[a.getFieldValue(\"OP\")],\n        c = b[0];\n    b = b[1];\n    var d = Blockly.JavaScript.valueToCode(a, \"A\", b) || \"0\";\n    a = Blockly.JavaScript.valueToCode(a, \"B\", b) || \"0\";\n    return c ? [d + c + a, b] : [\"Math.pow(\" + d + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.math_single = function (a) {\n    var b = a.getFieldValue(\"OP\");\n    if (\"NEG\" == b) return a = Blockly.JavaScript.valueToCode(a, \"NUM\", Blockly.JavaScript.ORDER_UNARY_NEGATION) || \"0\", \"-\" == a[0] && (a = \" \" + a), [\"-\" + a, Blockly.JavaScript.ORDER_UNARY_NEGATION];\n    a = \"SIN\" == b || \"COS\" == b || \"TAN\" == b ? Blockly.JavaScript.valueToCode(a, \"NUM\", Blockly.JavaScript.ORDER_DIVISION) || \"0\" : Blockly.JavaScript.valueToCode(a, \"NUM\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n\n    switch (b) {\n      case \"ABS\":\n        var c = \"Math.abs(\" + a + \")\";\n        break;\n\n      case \"ROOT\":\n        c = \"Math.sqrt(\" + a + \")\";\n        break;\n\n      case \"LN\":\n        c = \"Math.log(\" + a + \")\";\n        break;\n\n      case \"EXP\":\n        c = \"Math.exp(\" + a + \")\";\n        break;\n\n      case \"POW10\":\n        c = \"Math.pow(10,\" + a + \")\";\n        break;\n\n      case \"ROUND\":\n        c = \"Math.round(\" + a + \")\";\n        break;\n\n      case \"ROUNDUP\":\n        c = \"Math.ceil(\" + a + \")\";\n        break;\n\n      case \"ROUNDDOWN\":\n        c = \"Math.floor(\" + a + \")\";\n        break;\n\n      case \"SIN\":\n        c = \"Math.sin(\" + a + \" / 180 * Math.PI)\";\n        break;\n\n      case \"COS\":\n        c = \"Math.cos(\" + a + \" / 180 * Math.PI)\";\n        break;\n\n      case \"TAN\":\n        c = \"Math.tan(\" + a + \" / 180 * Math.PI)\";\n    }\n\n    if (c) return [c, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n    switch (b) {\n      case \"LOG10\":\n        c = \"Math.log(\" + a + \") / Math.log(10)\";\n        break;\n\n      case \"ASIN\":\n        c = \"Math.asin(\" + a + \") / Math.PI * 180\";\n        break;\n\n      case \"ACOS\":\n        c = \"Math.acos(\" + a + \") / Math.PI * 180\";\n        break;\n\n      case \"ATAN\":\n        c = \"Math.atan(\" + a + \") / Math.PI * 180\";\n        break;\n\n      default:\n        throw Error(\"Unknown math operator: \" + b);\n    }\n\n    return [c, Blockly.JavaScript.ORDER_DIVISION];\n  };\n\n  Blockly.JavaScript.math_constant = function (a) {\n    return {\n      PI: [\"Math.PI\", Blockly.JavaScript.ORDER_MEMBER],\n      E: [\"Math.E\", Blockly.JavaScript.ORDER_MEMBER],\n      GOLDEN_RATIO: [\"(1 + Math.sqrt(5)) / 2\", Blockly.JavaScript.ORDER_DIVISION],\n      SQRT2: [\"Math.SQRT2\", Blockly.JavaScript.ORDER_MEMBER],\n      SQRT1_2: [\"Math.SQRT1_2\", Blockly.JavaScript.ORDER_MEMBER],\n      INFINITY: [\"Infinity\", Blockly.JavaScript.ORDER_ATOMIC]\n    }[a.getFieldValue(\"CONSTANT\")];\n  };\n\n  Blockly.JavaScript.math_number_property = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"NUMBER_TO_CHECK\", Blockly.JavaScript.ORDER_MODULUS) || \"0\",\n        c = a.getFieldValue(\"PROPERTY\");\n    if (\"PRIME\" == c) return [Blockly.JavaScript.provideFunction_(\"mathIsPrime\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(n) {\", \"  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\", \"  if (n == 2 || n == 3) {\", \"    return true;\", \"  }\", \"  // False if n is NaN, negative, is 1, or not whole.\", \"  // And false if n is divisible by 2 or 3.\", \"  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {\", \"    return false;\", \"  }\", \"  // Check all the numbers of form 6k +/- 1, up to sqrt(n).\", \"  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {\", \"    if (n % (x - 1) == 0 || n % (x + 1) == 0) {\", \"      return false;\", \"    }\", \"  }\", \"  return true;\", \"}\"]) + \"(\" + b + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n    switch (c) {\n      case \"EVEN\":\n        var d = b + \" % 2 == 0\";\n        break;\n\n      case \"ODD\":\n        d = b + \" % 2 == 1\";\n        break;\n\n      case \"WHOLE\":\n        d = b + \" % 1 == 0\";\n        break;\n\n      case \"POSITIVE\":\n        d = b + \" > 0\";\n        break;\n\n      case \"NEGATIVE\":\n        d = b + \" < 0\";\n        break;\n\n      case \"DIVISIBLE_BY\":\n        a = Blockly.JavaScript.valueToCode(a, \"DIVISOR\", Blockly.JavaScript.ORDER_MODULUS) || \"0\", d = b + \" % \" + a + \" == 0\";\n    }\n\n    return [d, Blockly.JavaScript.ORDER_EQUALITY];\n  };\n\n  Blockly.JavaScript.math_change = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"DELTA\", Blockly.JavaScript.ORDER_ADDITION) || \"0\";\n    a = Blockly.JavaScript.nameDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME);\n    return a + \" = (typeof \" + a + \" == 'number' ? \" + a + \" : 0) + \" + b + \";\\n\";\n  };\n\n  Blockly.JavaScript.math_round = Blockly.JavaScript.math_single;\n  Blockly.JavaScript.math_trig = Blockly.JavaScript.math_single;\n\n  Blockly.JavaScript.math_on_list = function (a) {\n    var b = a.getFieldValue(\"OP\");\n\n    switch (b) {\n      case \"SUM\":\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\";\n        a += \".reduce(function(x, y) {return x + y;})\";\n        break;\n\n      case \"MIN\":\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = \"Math.min.apply(null, \" + a + \")\";\n        break;\n\n      case \"MAX\":\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = \"Math.max.apply(null, \" + a + \")\";\n        break;\n\n      case \"AVERAGE\":\n        b = Blockly.JavaScript.provideFunction_(\"mathMean\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(myList) {\", \"  return myList.reduce(function(x, y) {return x + y;}) / myList.length;\", \"}\"]);\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = b + \"(\" + a + \")\";\n        break;\n\n      case \"MEDIAN\":\n        b = Blockly.JavaScript.provideFunction_(\"mathMedian\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(myList) {\", \"  var localList = myList.filter(function (x) {return typeof x == 'number';});\", \"  if (!localList.length) return null;\", \"  localList.sort(function(a, b) {return b - a;});\", \"  if (localList.length % 2 == 0) {\", \"    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;\", \"  } else {\", \"    return localList[(localList.length - 1) / 2];\", \"  }\", \"}\"]);\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = b + \"(\" + a + \")\";\n        break;\n\n      case \"MODE\":\n        b = Blockly.JavaScript.provideFunction_(\"mathModes\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(values) {\", \"  var modes = [];\", \"  var counts = [];\", \"  var maxCount = 0;\", \"  for (var i = 0; i < values.length; i++) {\", \"    var value = values[i];\", \"    var found = false;\", \"    var thisCount;\", \"    for (var j = 0; j < counts.length; j++) {\", \"      if (counts[j][0] === value) {\", \"        thisCount = ++counts[j][1];\", \"        found = true;\", \"        break;\", \"      }\", \"    }\", \"    if (!found) {\", \"      counts.push([value, 1]);\", \"      thisCount = 1;\", \"    }\", \"    maxCount = Math.max(thisCount, maxCount);\", \"  }\", \"  for (var j = 0; j < counts.length; j++) {\", \"    if (counts[j][1] == maxCount) {\", \"        modes.push(counts[j][0]);\", \"    }\", \"  }\", \"  return modes;\", \"}\"]);\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = b + \"(\" + a + \")\";\n        break;\n\n      case \"STD_DEV\":\n        b = Blockly.JavaScript.provideFunction_(\"mathStandardDeviation\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(numbers) {\", \"  var n = numbers.length;\", \"  if (!n) return null;\", \"  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;\", \"  var variance = 0;\", \"  for (var j = 0; j < n; j++) {\", \"    variance += Math.pow(numbers[j] - mean, 2);\", \"  }\", \"  variance = variance / n;\", \"  return Math.sqrt(variance);\", \"}\"]);\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = b + \"(\" + a + \")\";\n        break;\n\n      case \"RANDOM\":\n        b = Blockly.JavaScript.provideFunction_(\"mathRandomList\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(list) {\", \"  var x = Math.floor(Math.random() * list.length);\", \"  return list[x];\", \"}\"]);\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = b + \"(\" + a + \")\";\n        break;\n\n      default:\n        throw Error(\"Unknown operator: \" + b);\n    }\n\n    return [a, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.math_modulo = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"DIVIDEND\", Blockly.JavaScript.ORDER_MODULUS) || \"0\";\n    a = Blockly.JavaScript.valueToCode(a, \"DIVISOR\", Blockly.JavaScript.ORDER_MODULUS) || \"0\";\n    return [b + \" % \" + a, Blockly.JavaScript.ORDER_MODULUS];\n  };\n\n  Blockly.JavaScript.math_constrain = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_NONE) || \"0\",\n        c = Blockly.JavaScript.valueToCode(a, \"LOW\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n    a = Blockly.JavaScript.valueToCode(a, \"HIGH\", Blockly.JavaScript.ORDER_NONE) || \"Infinity\";\n    return [\"Math.min(Math.max(\" + b + \", \" + c + \"), \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.math_random_int = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"FROM\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n    a = Blockly.JavaScript.valueToCode(a, \"TO\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n    return [Blockly.JavaScript.provideFunction_(\"mathRandomInt\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(a, b) {\", \"  if (a > b) {\", \"    // Swap a and b to ensure a is smaller.\", \"    var c = a;\", \"    a = b;\", \"    b = c;\", \"  }\", \"  return Math.floor(Math.random() * (b - a + 1) + a);\", \"}\"]) + \"(\" + b + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.math_random_float = function (a) {\n    return [\"Math.random()\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.math_atan2 = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"X\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n    return [\"Math.atan2(\" + (Blockly.JavaScript.valueToCode(a, \"Y\", Blockly.JavaScript.ORDER_NONE) || \"0\") + \", \" + b + \") / Math.PI * 180\", Blockly.JavaScript.ORDER_DIVISION];\n  };\n\n  Blockly.JavaScript.procedures = {};\n\n  Blockly.JavaScript.procedures_defreturn = function (a) {\n    var b = Blockly.JavaScript.nameDB_.getName(a.getFieldValue(\"NAME\"), Blockly.PROCEDURE_CATEGORY_NAME),\n        c = \"\";\n    Blockly.JavaScript.STATEMENT_PREFIX && (c += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX, a));\n    Blockly.JavaScript.STATEMENT_SUFFIX && (c += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, a));\n    c && (c = Blockly.JavaScript.prefixLines(c, Blockly.JavaScript.INDENT));\n    var d = \"\";\n    Blockly.JavaScript.INFINITE_LOOP_TRAP && (d = Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.INFINITE_LOOP_TRAP, a), Blockly.JavaScript.INDENT));\n    var e = Blockly.JavaScript.statementToCode(a, \"STACK\"),\n        f = Blockly.JavaScript.valueToCode(a, \"RETURN\", Blockly.JavaScript.ORDER_NONE) || \"\",\n        g = \"\";\n    e && f && (g = c);\n    f && (f = Blockly.JavaScript.INDENT + \"return \" + f + \";\\n\");\n\n    for (var h = [], l = a.getVars(), k = 0; k < l.length; k++) {\n      h[k] = Blockly.JavaScript.nameDB_.getName(l[k], Blockly.VARIABLE_CATEGORY_NAME);\n    }\n\n    c = \"function \" + b + \"(\" + h.join(\", \") + \") {\\n\" + c + d + e + g + f + \"}\";\n    c = Blockly.JavaScript.scrub_(a, c);\n    Blockly.JavaScript.definitions_[\"%\" + b] = c;\n    return null;\n  };\n\n  Blockly.JavaScript.procedures_defnoreturn = Blockly.JavaScript.procedures_defreturn;\n\n  Blockly.JavaScript.procedures_callreturn = function (a) {\n    for (var b = Blockly.JavaScript.nameDB_.getName(a.getFieldValue(\"NAME\"), Blockly.PROCEDURE_CATEGORY_NAME), c = [], d = a.getVars(), e = 0; e < d.length; e++) {\n      c[e] = Blockly.JavaScript.valueToCode(a, \"ARG\" + e, Blockly.JavaScript.ORDER_NONE) || \"null\";\n    }\n\n    return [b + \"(\" + c.join(\", \") + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.procedures_callnoreturn = function (a) {\n    return Blockly.JavaScript.procedures_callreturn(a)[0] + \";\\n\";\n  };\n\n  Blockly.JavaScript.procedures_ifreturn = function (a) {\n    var b = \"if (\" + (Blockly.JavaScript.valueToCode(a, \"CONDITION\", Blockly.JavaScript.ORDER_NONE) || \"false\") + \") {\\n\";\n    Blockly.JavaScript.STATEMENT_SUFFIX && (b += Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, a), Blockly.JavaScript.INDENT));\n    a.hasReturnValue_ ? (a = Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_NONE) || \"null\", b += Blockly.JavaScript.INDENT + \"return \" + a + \";\\n\") : b += Blockly.JavaScript.INDENT + \"return;\\n\";\n    return b + \"}\\n\";\n  };\n\n  Blockly.JavaScript.texts = {};\n\n  Blockly.JavaScript.text = function (a) {\n    return [Blockly.JavaScript.quote_(a.getFieldValue(\"TEXT\")), Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.text_multiline = function (a) {\n    a = Blockly.JavaScript.multiline_quote_(a.getFieldValue(\"TEXT\"));\n    var b = -1 != a.indexOf(\"+\") ? Blockly.JavaScript.ORDER_ADDITION : Blockly.JavaScript.ORDER_ATOMIC;\n    return [a, b];\n  };\n\n  Blockly.JavaScript.text.forceString_ = function (a) {\n    return Blockly.JavaScript.text.forceString_.strRegExp.test(a) ? [a, Blockly.JavaScript.ORDER_ATOMIC] : [\"String(\" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text.forceString_.strRegExp = /^\\s*'([^']|\\\\')*'\\s*$/;\n\n  Blockly.JavaScript.text_join = function (a) {\n    switch (a.itemCount_) {\n      case 0:\n        return [\"''\", Blockly.JavaScript.ORDER_ATOMIC];\n\n      case 1:\n        return a = Blockly.JavaScript.valueToCode(a, \"ADD0\", Blockly.JavaScript.ORDER_NONE) || \"''\", Blockly.JavaScript.text.forceString_(a);\n\n      case 2:\n        var b = Blockly.JavaScript.valueToCode(a, \"ADD0\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n        a = Blockly.JavaScript.valueToCode(a, \"ADD1\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n        a = Blockly.JavaScript.text.forceString_(b)[0] + \" + \" + Blockly.JavaScript.text.forceString_(a)[0];\n        return [a, Blockly.JavaScript.ORDER_ADDITION];\n\n      default:\n        b = Array(a.itemCount_);\n\n        for (var c = 0; c < a.itemCount_; c++) {\n          b[c] = Blockly.JavaScript.valueToCode(a, \"ADD\" + c, Blockly.JavaScript.ORDER_NONE) || \"''\";\n        }\n\n        a = \"[\" + b.join(\",\") + \"].join('')\";\n        return [a, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    }\n  };\n\n  Blockly.JavaScript.text_append = function (a) {\n    var b = Blockly.JavaScript.nameDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME);\n    a = Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    return b + \" += \" + Blockly.JavaScript.text.forceString_(a)[0] + \";\\n\";\n  };\n\n  Blockly.JavaScript.text_length = function (a) {\n    return [(Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"''\") + \".length\", Blockly.JavaScript.ORDER_MEMBER];\n  };\n\n  Blockly.JavaScript.text_isEmpty = function (a) {\n    return [\"!\" + (Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"''\") + \".length\", Blockly.JavaScript.ORDER_LOGICAL_NOT];\n  };\n\n  Blockly.JavaScript.text_indexOf = function (a) {\n    var b = \"FIRST\" == a.getFieldValue(\"END\") ? \"indexOf\" : \"lastIndexOf\",\n        c = Blockly.JavaScript.valueToCode(a, \"FIND\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    b = (Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"''\") + \".\" + b + \"(\" + c + \")\";\n    return a.workspace.options.oneBasedIndex ? [b + \" + 1\", Blockly.JavaScript.ORDER_ADDITION] : [b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_charAt = function (a) {\n    var b = a.getFieldValue(\"WHERE\") || \"FROM_START\",\n        c = Blockly.JavaScript.valueToCode(a, \"VALUE\", \"RANDOM\" == b ? Blockly.JavaScript.ORDER_NONE : Blockly.JavaScript.ORDER_MEMBER) || \"''\";\n\n    switch (b) {\n      case \"FIRST\":\n        return [c + \".charAt(0)\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n      case \"LAST\":\n        return [c + \".slice(-1)\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n      case \"FROM_START\":\n        return a = Blockly.JavaScript.getAdjusted(a, \"AT\"), [c + \".charAt(\" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n      case \"FROM_END\":\n        return a = Blockly.JavaScript.getAdjusted(a, \"AT\", 1, !0), [c + \".slice(\" + a + \").charAt(0)\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n      case \"RANDOM\":\n        return [Blockly.JavaScript.provideFunction_(\"textRandomLetter\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(text) {\", \"  var x = Math.floor(Math.random() * text.length);\", \"  return text[x];\", \"}\"]) + \"(\" + c + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    }\n\n    throw Error(\"Unhandled option (text_charAt).\");\n  };\n\n  Blockly.JavaScript.text.getIndex_ = function (a, b, c) {\n    return \"FIRST\" == b ? \"0\" : \"FROM_END\" == b ? a + \".length - 1 - \" + c : \"LAST\" == b ? a + \".length - 1\" : c;\n  };\n\n  Blockly.JavaScript.text_getSubstring = function (a) {\n    var b = a.getFieldValue(\"WHERE1\"),\n        c = a.getFieldValue(\"WHERE2\"),\n        d = \"FROM_END\" != b && \"LAST\" != b && \"FROM_END\" != c && \"LAST\" != c,\n        e = Blockly.JavaScript.valueToCode(a, \"STRING\", d ? Blockly.JavaScript.ORDER_MEMBER : Blockly.JavaScript.ORDER_NONE) || \"''\";\n    if (\"FIRST\" == b && \"LAST\" == c) return [e, Blockly.JavaScript.ORDER_NONE];\n\n    if (e.match(/^'?\\w+'?$/) || d) {\n      switch (b) {\n        case \"FROM_START\":\n          d = Blockly.JavaScript.getAdjusted(a, \"AT1\");\n          break;\n\n        case \"FROM_END\":\n          d = Blockly.JavaScript.getAdjusted(a, \"AT1\", 1, !1, Blockly.JavaScript.ORDER_SUBTRACTION);\n          d = e + \".length - \" + d;\n          break;\n\n        case \"FIRST\":\n          d = \"0\";\n          break;\n\n        default:\n          throw Error(\"Unhandled option (text_getSubstring).\");\n      }\n\n      switch (c) {\n        case \"FROM_START\":\n          a = Blockly.JavaScript.getAdjusted(a, \"AT2\", 1);\n          break;\n\n        case \"FROM_END\":\n          a = Blockly.JavaScript.getAdjusted(a, \"AT2\", 0, !1, Blockly.JavaScript.ORDER_SUBTRACTION);\n          a = e + \".length - \" + a;\n          break;\n\n        case \"LAST\":\n          a = e + \".length\";\n          break;\n\n        default:\n          throw Error(\"Unhandled option (text_getSubstring).\");\n      }\n\n      b = e + \".slice(\" + d + \", \" + a + \")\";\n    } else {\n      d = Blockly.JavaScript.getAdjusted(a, \"AT1\");\n      a = Blockly.JavaScript.getAdjusted(a, \"AT2\");\n      var f = Blockly.JavaScript.text.getIndex_,\n          g = {\n        FIRST: \"First\",\n        LAST: \"Last\",\n        FROM_START: \"FromStart\",\n        FROM_END: \"FromEnd\"\n      };\n      b = Blockly.JavaScript.provideFunction_(\"subsequence\" + g[b] + g[c], [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(sequence\" + (\"FROM_END\" == b || \"FROM_START\" == b ? \", at1\" : \"\") + (\"FROM_END\" == c || \"FROM_START\" == c ? \", at2\" : \"\") + \") {\", \"  var start = \" + f(\"sequence\", b, \"at1\") + \";\", \"  var end = \" + f(\"sequence\", c, \"at2\") + \" + 1;\", \"  return sequence.slice(start, end);\", \"}\"]) + \"(\" + e + (\"FROM_END\" == b || \"FROM_START\" == b ? \", \" + d : \"\") + (\"FROM_END\" == c || \"FROM_START\" == c ? \", \" + a : \"\") + \")\";\n    }\n\n    return [b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_changeCase = function (a) {\n    var b = {\n      UPPERCASE: \".toUpperCase()\",\n      LOWERCASE: \".toLowerCase()\",\n      TITLECASE: null\n    }[a.getFieldValue(\"CASE\")];\n    a = Blockly.JavaScript.valueToCode(a, \"TEXT\", b ? Blockly.JavaScript.ORDER_MEMBER : Blockly.JavaScript.ORDER_NONE) || \"''\";\n    return [b ? a + b : Blockly.JavaScript.provideFunction_(\"textToTitleCase\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(str) {\", \"  return str.replace(/\\\\S+/g,\", \"      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});\", \"}\"]) + \"(\" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_trim = function (a) {\n    var b = {\n      LEFT: \".replace(/^[\\\\s\\\\xa0]+/, '')\",\n      RIGHT: \".replace(/[\\\\s\\\\xa0]+$/, '')\",\n      BOTH: \".trim()\"\n    }[a.getFieldValue(\"MODE\")];\n    return [(Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_MEMBER) || \"''\") + b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_print = function (a) {\n    return \"window.alert(\" + (Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_NONE) || \"''\") + \");\\n\";\n  };\n\n  Blockly.JavaScript.text_prompt_ext = function (a) {\n    var b = \"window.prompt(\" + (a.getField(\"TEXT\") ? Blockly.JavaScript.quote_(a.getFieldValue(\"TEXT\")) : Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_NONE) || \"''\") + \")\";\n    \"NUMBER\" == a.getFieldValue(\"TYPE\") && (b = \"Number(\" + b + \")\");\n    return [b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_prompt = Blockly.JavaScript.text_prompt_ext;\n\n  Blockly.JavaScript.text_count = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    a = Blockly.JavaScript.valueToCode(a, \"SUB\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    return [Blockly.JavaScript.provideFunction_(\"textCount\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(haystack, needle) {\", \"  if (needle.length === 0) {\", \"    return haystack.length + 1;\", \"  } else {\", \"    return haystack.split(needle).length - 1;\", \"  }\", \"}\"]) + \"(\" + b + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_replace = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_NONE) || \"''\",\n        c = Blockly.JavaScript.valueToCode(a, \"FROM\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    a = Blockly.JavaScript.valueToCode(a, \"TO\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    return [Blockly.JavaScript.provideFunction_(\"textReplace\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(haystack, needle, replacement) {\", '  needle = needle.replace(/([-()\\\\[\\\\]{}+?*.$\\\\^|,:#<!\\\\\\\\])/g,\"\\\\\\\\$1\")', '                 .replace(/\\\\x08/g,\"\\\\\\\\x08\");', \"  return haystack.replace(new RegExp(needle, 'g'), replacement);\", \"}\"]) + \"(\" + b + \", \" + c + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_reverse = function (a) {\n    return [(Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_MEMBER) || \"''\") + \".split('').reverse().join('')\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.variables = {};\n\n  Blockly.JavaScript.variables_get = function (a) {\n    return [Blockly.JavaScript.nameDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME), Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.variables_set = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"0\";\n    return Blockly.JavaScript.nameDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME) + \" = \" + b + \";\\n\";\n  };\n\n  Blockly.JavaScript.variablesDynamic = {};\n  Blockly.JavaScript.variables_get_dynamic = Blockly.JavaScript.variables_get;\n  Blockly.JavaScript.variables_set_dynamic = Blockly.JavaScript.variables_set;\n  return Blockly.JavaScript;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['../core'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('../core'));\n  } else {\n    // Browser\n    root.Blockly.Msg = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  var Blockly = {};\n  Blockly.Msg = {}; // This file was automatically generated.  Do not modify.\n\n  'use strict';\n\n  Blockly.Msg[\"ADD_COMMENT\"] = \"Add Comment\";\n  Blockly.Msg[\"CANNOT_DELETE_VARIABLE_PROCEDURE\"] = \"Can't delete the variable '%1' because it's part of the definition of the function '%2'\";\n  Blockly.Msg[\"CHANGE_VALUE_TITLE\"] = \"Change value:\";\n  Blockly.Msg[\"CLEAN_UP\"] = \"Clean up Blocks\";\n  Blockly.Msg[\"COLLAPSED_WARNINGS_WARNING\"] = \"Collapsed blocks contain warnings.\";\n  Blockly.Msg[\"COLLAPSE_ALL\"] = \"Collapse Blocks\";\n  Blockly.Msg[\"COLLAPSE_BLOCK\"] = \"Collapse Block\";\n  Blockly.Msg[\"COLOUR_BLEND_COLOUR1\"] = \"colour 1\";\n  Blockly.Msg[\"COLOUR_BLEND_COLOUR2\"] = \"colour 2\";\n  Blockly.Msg[\"COLOUR_BLEND_HELPURL\"] = \"https://meyerweb.com/eric/tools/color-blend/#:::rgbp\";\n  Blockly.Msg[\"COLOUR_BLEND_RATIO\"] = \"ratio\";\n  Blockly.Msg[\"COLOUR_BLEND_TITLE\"] = \"blend\";\n  Blockly.Msg[\"COLOUR_BLEND_TOOLTIP\"] = \"Blends two colours together with a given ratio (0.0 - 1.0).\";\n  Blockly.Msg[\"COLOUR_PICKER_HELPURL\"] = \"https://en.wikipedia.org/wiki/Color\";\n  Blockly.Msg[\"COLOUR_PICKER_TOOLTIP\"] = \"Choose a colour from the palette.\";\n  Blockly.Msg[\"COLOUR_RANDOM_HELPURL\"] = \"http://randomcolour.com\";\n  Blockly.Msg[\"COLOUR_RANDOM_TITLE\"] = \"random colour\";\n  Blockly.Msg[\"COLOUR_RANDOM_TOOLTIP\"] = \"Choose a colour at random.\";\n  Blockly.Msg[\"COLOUR_RGB_BLUE\"] = \"blue\";\n  Blockly.Msg[\"COLOUR_RGB_GREEN\"] = \"green\";\n  Blockly.Msg[\"COLOUR_RGB_HELPURL\"] = \"https://www.december.com/html/spec/colorpercompact.html\";\n  Blockly.Msg[\"COLOUR_RGB_RED\"] = \"red\";\n  Blockly.Msg[\"COLOUR_RGB_TITLE\"] = \"colour with\";\n  Blockly.Msg[\"COLOUR_RGB_TOOLTIP\"] = \"Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#loop-termination-blocks\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK\"] = \"break out of loop\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE\"] = \"continue with next iteration of loop\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK\"] = \"Break out of the containing loop.\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE\"] = \"Skip the rest of this loop, and continue with the next iteration.\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_WARNING\"] = \"Warning: This block may only be used within a loop.\";\n  Blockly.Msg[\"CONTROLS_FOREACH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#for-each\";\n  Blockly.Msg[\"CONTROLS_FOREACH_TITLE\"] = \"for each item %1 in list %2\";\n  Blockly.Msg[\"CONTROLS_FOREACH_TOOLTIP\"] = \"For each item in a list, set the variable '%1' to the item, and then do some statements.\";\n  Blockly.Msg[\"CONTROLS_FOR_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#count-with\";\n  Blockly.Msg[\"CONTROLS_FOR_TITLE\"] = \"count with %1 from %2 to %3 by %4\";\n  Blockly.Msg[\"CONTROLS_FOR_TOOLTIP\"] = \"Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.\";\n  Blockly.Msg[\"CONTROLS_IF_ELSEIF_TOOLTIP\"] = \"Add a condition to the if block.\";\n  Blockly.Msg[\"CONTROLS_IF_ELSE_TOOLTIP\"] = \"Add a final, catch-all condition to the if block.\";\n  Blockly.Msg[\"CONTROLS_IF_HELPURL\"] = \"https://github.com/google/blockly/wiki/IfElse\";\n  Blockly.Msg[\"CONTROLS_IF_IF_TOOLTIP\"] = \"Add, remove, or reorder sections to reconfigure this if block.\";\n  Blockly.Msg[\"CONTROLS_IF_MSG_ELSE\"] = \"else\";\n  Blockly.Msg[\"CONTROLS_IF_MSG_ELSEIF\"] = \"else if\";\n  Blockly.Msg[\"CONTROLS_IF_MSG_IF\"] = \"if\";\n  Blockly.Msg[\"CONTROLS_IF_TOOLTIP_1\"] = \"If a value is true, then do some statements.\";\n  Blockly.Msg[\"CONTROLS_IF_TOOLTIP_2\"] = \"If a value is true, then do the first block of statements. Otherwise, do the second block of statements.\";\n  Blockly.Msg[\"CONTROLS_IF_TOOLTIP_3\"] = \"If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.\";\n  Blockly.Msg[\"CONTROLS_IF_TOOLTIP_4\"] = \"If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.\";\n  Blockly.Msg[\"CONTROLS_REPEAT_HELPURL\"] = \"https://en.wikipedia.org/wiki/For_loop\";\n  Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"] = \"do\";\n  Blockly.Msg[\"CONTROLS_REPEAT_TITLE\"] = \"repeat %1 times\";\n  Blockly.Msg[\"CONTROLS_REPEAT_TOOLTIP\"] = \"Do some statements several times.\";\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#repeat\";\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_OPERATOR_UNTIL\"] = \"repeat until\";\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_OPERATOR_WHILE\"] = \"repeat while\";\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL\"] = \"While a value is false, then do some statements.\";\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_TOOLTIP_WHILE\"] = \"While a value is true, then do some statements.\";\n  Blockly.Msg[\"DELETE_ALL_BLOCKS\"] = \"Delete all %1 blocks?\";\n  Blockly.Msg[\"DELETE_BLOCK\"] = \"Delete Block\";\n  Blockly.Msg[\"DELETE_VARIABLE\"] = \"Delete the '%1' variable\";\n  Blockly.Msg[\"DELETE_VARIABLE_CONFIRMATION\"] = \"Delete %1 uses of the '%2' variable?\";\n  Blockly.Msg[\"DELETE_X_BLOCKS\"] = \"Delete %1 Blocks\";\n  Blockly.Msg[\"DISABLE_BLOCK\"] = \"Disable Block\";\n  Blockly.Msg[\"DUPLICATE_BLOCK\"] = \"Duplicate\";\n  Blockly.Msg[\"DUPLICATE_COMMENT\"] = \"Duplicate Comment\";\n  Blockly.Msg[\"ENABLE_BLOCK\"] = \"Enable Block\";\n  Blockly.Msg[\"EXPAND_ALL\"] = \"Expand Blocks\";\n  Blockly.Msg[\"EXPAND_BLOCK\"] = \"Expand Block\";\n  Blockly.Msg[\"EXTERNAL_INPUTS\"] = \"External Inputs\";\n  Blockly.Msg[\"HELP\"] = \"Help\";\n  Blockly.Msg[\"INLINE_INPUTS\"] = \"Inline Inputs\";\n  Blockly.Msg[\"IOS_CANCEL\"] = \"Cancel\";\n  Blockly.Msg[\"IOS_ERROR\"] = \"Error\";\n  Blockly.Msg[\"IOS_OK\"] = \"OK\";\n  Blockly.Msg[\"IOS_PROCEDURES_ADD_INPUT\"] = \"+ Add Input\";\n  Blockly.Msg[\"IOS_PROCEDURES_ALLOW_STATEMENTS\"] = \"Allow statements\";\n  Blockly.Msg[\"IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR\"] = \"This function has duplicate inputs.\";\n  Blockly.Msg[\"IOS_PROCEDURES_INPUTS\"] = \"INPUTS\";\n  Blockly.Msg[\"IOS_VARIABLES_ADD_BUTTON\"] = \"Add\";\n  Blockly.Msg[\"IOS_VARIABLES_ADD_VARIABLE\"] = \"+ Add Variable\";\n  Blockly.Msg[\"IOS_VARIABLES_DELETE_BUTTON\"] = \"Delete\";\n  Blockly.Msg[\"IOS_VARIABLES_EMPTY_NAME_ERROR\"] = \"You can't use an empty variable name.\";\n  Blockly.Msg[\"IOS_VARIABLES_RENAME_BUTTON\"] = \"Rename\";\n  Blockly.Msg[\"IOS_VARIABLES_VARIABLE_NAME\"] = \"Variable name\";\n  Blockly.Msg[\"LISTS_CREATE_EMPTY_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#create-empty-list\";\n  Blockly.Msg[\"LISTS_CREATE_EMPTY_TITLE\"] = \"create empty list\";\n  Blockly.Msg[\"LISTS_CREATE_EMPTY_TOOLTIP\"] = \"Returns a list, of length 0, containing no data records\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_CONTAINER_TITLE_ADD\"] = \"list\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_CONTAINER_TOOLTIP\"] = \"Add, remove, or reorder sections to reconfigure this list block.\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#create-list-with\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_INPUT_WITH\"] = \"create list with\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_ITEM_TOOLTIP\"] = \"Add an item to the list.\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_TOOLTIP\"] = \"Create a list with any number of items.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_FIRST\"] = \"first\";\n  Blockly.Msg[\"LISTS_GET_INDEX_FROM_END\"] = \"# from end\";\n  Blockly.Msg[\"LISTS_GET_INDEX_FROM_START\"] = \"#\";\n  Blockly.Msg[\"LISTS_GET_INDEX_GET\"] = \"get\";\n  Blockly.Msg[\"LISTS_GET_INDEX_GET_REMOVE\"] = \"get and remove\";\n  Blockly.Msg[\"LISTS_GET_INDEX_LAST\"] = \"last\";\n  Blockly.Msg[\"LISTS_GET_INDEX_RANDOM\"] = \"random\";\n  Blockly.Msg[\"LISTS_GET_INDEX_REMOVE\"] = \"remove\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TAIL\"] = \"\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_FIRST\"] = \"Returns the first item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_FROM\"] = \"Returns the item at the specified position in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_LAST\"] = \"Returns the last item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_RANDOM\"] = \"Returns a random item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST\"] = \"Removes and returns the first item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM\"] = \"Removes and returns the item at the specified position in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST\"] = \"Removes and returns the last item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM\"] = \"Removes and returns a random item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST\"] = \"Removes the first item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM\"] = \"Removes the item at the specified position in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST\"] = \"Removes the last item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM\"] = \"Removes a random item in a list.\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_END_FROM_END\"] = \"to # from end\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_END_FROM_START\"] = \"to #\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_END_LAST\"] = \"to last\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#getting-a-sublist\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_START_FIRST\"] = \"get sub-list from first\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_START_FROM_END\"] = \"get sub-list from # from end\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_START_FROM_START\"] = \"get sub-list from #\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_TAIL\"] = \"\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_TOOLTIP\"] = \"Creates a copy of the specified portion of a list.\";\n  Blockly.Msg[\"LISTS_INDEX_FROM_END_TOOLTIP\"] = \"%1 is the last item.\";\n  Blockly.Msg[\"LISTS_INDEX_FROM_START_TOOLTIP\"] = \"%1 is the first item.\";\n  Blockly.Msg[\"LISTS_INDEX_OF_FIRST\"] = \"find first occurrence of item\";\n  Blockly.Msg[\"LISTS_INDEX_OF_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list\";\n  Blockly.Msg[\"LISTS_INDEX_OF_LAST\"] = \"find last occurrence of item\";\n  Blockly.Msg[\"LISTS_INDEX_OF_TOOLTIP\"] = \"Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.\";\n  Blockly.Msg[\"LISTS_INLIST\"] = \"in list\";\n  Blockly.Msg[\"LISTS_ISEMPTY_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#is-empty\";\n  Blockly.Msg[\"LISTS_ISEMPTY_TITLE\"] = \"%1 is empty\";\n  Blockly.Msg[\"LISTS_ISEMPTY_TOOLTIP\"] = \"Returns true if the list is empty.\";\n  Blockly.Msg[\"LISTS_LENGTH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#length-of\";\n  Blockly.Msg[\"LISTS_LENGTH_TITLE\"] = \"length of %1\";\n  Blockly.Msg[\"LISTS_LENGTH_TOOLTIP\"] = \"Returns the length of a list.\";\n  Blockly.Msg[\"LISTS_REPEAT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#create-list-with\";\n  Blockly.Msg[\"LISTS_REPEAT_TITLE\"] = \"create list with item %1 repeated %2 times\";\n  Blockly.Msg[\"LISTS_REPEAT_TOOLTIP\"] = \"Creates a list consisting of the given value repeated the specified number of times.\";\n  Blockly.Msg[\"LISTS_REVERSE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#reversing-a-list\";\n  Blockly.Msg[\"LISTS_REVERSE_MESSAGE0\"] = \"reverse %1\";\n  Blockly.Msg[\"LISTS_REVERSE_TOOLTIP\"] = \"Reverse a copy of a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#in-list--set\";\n  Blockly.Msg[\"LISTS_SET_INDEX_INPUT_TO\"] = \"as\";\n  Blockly.Msg[\"LISTS_SET_INDEX_INSERT\"] = \"insert at\";\n  Blockly.Msg[\"LISTS_SET_INDEX_SET\"] = \"set\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST\"] = \"Inserts the item at the start of a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_FROM\"] = \"Inserts the item at the specified position in a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_LAST\"] = \"Append the item to the end of a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM\"] = \"Inserts the item randomly in a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_FIRST\"] = \"Sets the first item in a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_FROM\"] = \"Sets the item at the specified position in a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_LAST\"] = \"Sets the last item in a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_RANDOM\"] = \"Sets a random item in a list.\";\n  Blockly.Msg[\"LISTS_SORT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#sorting-a-list\";\n  Blockly.Msg[\"LISTS_SORT_ORDER_ASCENDING\"] = \"ascending\";\n  Blockly.Msg[\"LISTS_SORT_ORDER_DESCENDING\"] = \"descending\";\n  Blockly.Msg[\"LISTS_SORT_TITLE\"] = \"sort %1 %2 %3\";\n  Blockly.Msg[\"LISTS_SORT_TOOLTIP\"] = \"Sort a copy of a list.\";\n  Blockly.Msg[\"LISTS_SORT_TYPE_IGNORECASE\"] = \"alphabetic, ignore case\";\n  Blockly.Msg[\"LISTS_SORT_TYPE_NUMERIC\"] = \"numeric\";\n  Blockly.Msg[\"LISTS_SORT_TYPE_TEXT\"] = \"alphabetic\";\n  Blockly.Msg[\"LISTS_SPLIT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists\";\n  Blockly.Msg[\"LISTS_SPLIT_LIST_FROM_TEXT\"] = \"make list from text\";\n  Blockly.Msg[\"LISTS_SPLIT_TEXT_FROM_LIST\"] = \"make text from list\";\n  Blockly.Msg[\"LISTS_SPLIT_TOOLTIP_JOIN\"] = \"Join a list of texts into one text, separated by a delimiter.\";\n  Blockly.Msg[\"LISTS_SPLIT_TOOLTIP_SPLIT\"] = \"Split text into a list of texts, breaking at each delimiter.\";\n  Blockly.Msg[\"LISTS_SPLIT_WITH_DELIMITER\"] = \"with delimiter\";\n  Blockly.Msg[\"LOGIC_BOOLEAN_FALSE\"] = \"false\";\n  Blockly.Msg[\"LOGIC_BOOLEAN_HELPURL\"] = \"https://github.com/google/blockly/wiki/Logic#values\";\n  Blockly.Msg[\"LOGIC_BOOLEAN_TOOLTIP\"] = \"Returns either true or false.\";\n  Blockly.Msg[\"LOGIC_BOOLEAN_TRUE\"] = \"true\";\n  Blockly.Msg[\"LOGIC_COMPARE_HELPURL\"] = \"https://en.wikipedia.org/wiki/Inequality_(mathematics)\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_EQ\"] = \"Return true if both inputs equal each other.\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_GT\"] = \"Return true if the first input is greater than the second input.\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_GTE\"] = \"Return true if the first input is greater than or equal to the second input.\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_LT\"] = \"Return true if the first input is smaller than the second input.\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_LTE\"] = \"Return true if the first input is smaller than or equal to the second input.\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_NEQ\"] = \"Return true if both inputs are not equal to each other.\";\n  Blockly.Msg[\"LOGIC_NEGATE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Logic#not\";\n  Blockly.Msg[\"LOGIC_NEGATE_TITLE\"] = \"not %1\";\n  Blockly.Msg[\"LOGIC_NEGATE_TOOLTIP\"] = \"Returns true if the input is false. Returns false if the input is true.\";\n  Blockly.Msg[\"LOGIC_NULL\"] = \"null\";\n  Blockly.Msg[\"LOGIC_NULL_HELPURL\"] = \"https://en.wikipedia.org/wiki/Nullable_type\";\n  Blockly.Msg[\"LOGIC_NULL_TOOLTIP\"] = \"Returns null.\";\n  Blockly.Msg[\"LOGIC_OPERATION_AND\"] = \"and\";\n  Blockly.Msg[\"LOGIC_OPERATION_HELPURL\"] = \"https://github.com/google/blockly/wiki/Logic#logical-operations\";\n  Blockly.Msg[\"LOGIC_OPERATION_OR\"] = \"or\";\n  Blockly.Msg[\"LOGIC_OPERATION_TOOLTIP_AND\"] = \"Return true if both inputs are true.\";\n  Blockly.Msg[\"LOGIC_OPERATION_TOOLTIP_OR\"] = \"Return true if at least one of the inputs is true.\";\n  Blockly.Msg[\"LOGIC_TERNARY_CONDITION\"] = \"test\";\n  Blockly.Msg[\"LOGIC_TERNARY_HELPURL\"] = \"https://en.wikipedia.org/wiki/%3F:\";\n  Blockly.Msg[\"LOGIC_TERNARY_IF_FALSE\"] = \"if false\";\n  Blockly.Msg[\"LOGIC_TERNARY_IF_TRUE\"] = \"if true\";\n  Blockly.Msg[\"LOGIC_TERNARY_TOOLTIP\"] = \"Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.\";\n  Blockly.Msg[\"MATH_ADDITION_SYMBOL\"] = \"+\";\n  Blockly.Msg[\"MATH_ARITHMETIC_HELPURL\"] = \"https://en.wikipedia.org/wiki/Arithmetic\";\n  Blockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_ADD\"] = \"Return the sum of the two numbers.\";\n  Blockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_DIVIDE\"] = \"Return the quotient of the two numbers.\";\n  Blockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_MINUS\"] = \"Return the difference of the two numbers.\";\n  Blockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_MULTIPLY\"] = \"Return the product of the two numbers.\";\n  Blockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_POWER\"] = \"Return the first number raised to the power of the second number.\";\n  Blockly.Msg[\"MATH_ATAN2_HELPURL\"] = \"https://en.wikipedia.org/wiki/Atan2\";\n  Blockly.Msg[\"MATH_ATAN2_TITLE\"] = \"atan2 of X:%1 Y:%2\";\n  Blockly.Msg[\"MATH_ATAN2_TOOLTIP\"] = \"Return the arctangent of point (X, Y) in degrees from -180 to 180.\";\n  Blockly.Msg[\"MATH_CHANGE_HELPURL\"] = \"https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter\";\n  Blockly.Msg[\"MATH_CHANGE_TITLE\"] = \"change %1 by %2\";\n  Blockly.Msg[\"MATH_CHANGE_TOOLTIP\"] = \"Add a number to variable '%1'.\";\n  Blockly.Msg[\"MATH_CONSTANT_HELPURL\"] = \"https://en.wikipedia.org/wiki/Mathematical_constant\";\n  Blockly.Msg[\"MATH_CONSTANT_TOOLTIP\"] = \"Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).\";\n  Blockly.Msg[\"MATH_CONSTRAIN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Clamping_(graphics)\";\n  Blockly.Msg[\"MATH_CONSTRAIN_TITLE\"] = \"constrain %1 low %2 high %3\";\n  Blockly.Msg[\"MATH_CONSTRAIN_TOOLTIP\"] = \"Constrain a number to be between the specified limits (inclusive).\";\n  Blockly.Msg[\"MATH_DIVISION_SYMBOL\"] = \"\";\n  Blockly.Msg[\"MATH_IS_DIVISIBLE_BY\"] = \"is divisible by\";\n  Blockly.Msg[\"MATH_IS_EVEN\"] = \"is even\";\n  Blockly.Msg[\"MATH_IS_NEGATIVE\"] = \"is negative\";\n  Blockly.Msg[\"MATH_IS_ODD\"] = \"is odd\";\n  Blockly.Msg[\"MATH_IS_POSITIVE\"] = \"is positive\";\n  Blockly.Msg[\"MATH_IS_PRIME\"] = \"is prime\";\n  Blockly.Msg[\"MATH_IS_TOOLTIP\"] = \"Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.\";\n  Blockly.Msg[\"MATH_IS_WHOLE\"] = \"is whole\";\n  Blockly.Msg[\"MATH_MODULO_HELPURL\"] = \"https://en.wikipedia.org/wiki/Modulo_operation\";\n  Blockly.Msg[\"MATH_MODULO_TITLE\"] = \"remainder of %1  %2\";\n  Blockly.Msg[\"MATH_MODULO_TOOLTIP\"] = \"Return the remainder from dividing the two numbers.\";\n  Blockly.Msg[\"MATH_MULTIPLICATION_SYMBOL\"] = \"\";\n  Blockly.Msg[\"MATH_NUMBER_HELPURL\"] = \"https://en.wikipedia.org/wiki/Number\";\n  Blockly.Msg[\"MATH_NUMBER_TOOLTIP\"] = \"A number.\";\n  Blockly.Msg[\"MATH_ONLIST_HELPURL\"] = \"\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_AVERAGE\"] = \"average of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_MAX\"] = \"max of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_MEDIAN\"] = \"median of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_MIN\"] = \"min of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_MODE\"] = \"modes of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_RANDOM\"] = \"random item of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_STD_DEV\"] = \"standard deviation of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_SUM\"] = \"sum of list\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_AVERAGE\"] = \"Return the average (arithmetic mean) of the numeric values in the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_MAX\"] = \"Return the largest number in the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_MEDIAN\"] = \"Return the median number in the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_MIN\"] = \"Return the smallest number in the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_MODE\"] = \"Return a list of the most common item(s) in the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_RANDOM\"] = \"Return a random element from the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_STD_DEV\"] = \"Return the standard deviation of the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_SUM\"] = \"Return the sum of all the numbers in the list.\";\n  Blockly.Msg[\"MATH_POWER_SYMBOL\"] = \"^\";\n  Blockly.Msg[\"MATH_RANDOM_FLOAT_HELPURL\"] = \"https://en.wikipedia.org/wiki/Random_number_generation\";\n  Blockly.Msg[\"MATH_RANDOM_FLOAT_TITLE_RANDOM\"] = \"random fraction\";\n  Blockly.Msg[\"MATH_RANDOM_FLOAT_TOOLTIP\"] = \"Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).\";\n  Blockly.Msg[\"MATH_RANDOM_INT_HELPURL\"] = \"https://en.wikipedia.org/wiki/Random_number_generation\";\n  Blockly.Msg[\"MATH_RANDOM_INT_TITLE\"] = \"random integer from %1 to %2\";\n  Blockly.Msg[\"MATH_RANDOM_INT_TOOLTIP\"] = \"Return a random integer between the two specified limits, inclusive.\";\n  Blockly.Msg[\"MATH_ROUND_HELPURL\"] = \"https://en.wikipedia.org/wiki/Rounding\";\n  Blockly.Msg[\"MATH_ROUND_OPERATOR_ROUND\"] = \"round\";\n  Blockly.Msg[\"MATH_ROUND_OPERATOR_ROUNDDOWN\"] = \"round down\";\n  Blockly.Msg[\"MATH_ROUND_OPERATOR_ROUNDUP\"] = \"round up\";\n  Blockly.Msg[\"MATH_ROUND_TOOLTIP\"] = \"Round a number up or down.\";\n  Blockly.Msg[\"MATH_SINGLE_HELPURL\"] = \"https://en.wikipedia.org/wiki/Square_root\";\n  Blockly.Msg[\"MATH_SINGLE_OP_ABSOLUTE\"] = \"absolute\";\n  Blockly.Msg[\"MATH_SINGLE_OP_ROOT\"] = \"square root\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_ABS\"] = \"Return the absolute value of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_EXP\"] = \"Return e to the power of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_LN\"] = \"Return the natural logarithm of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_LOG10\"] = \"Return the base 10 logarithm of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_NEG\"] = \"Return the negation of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_POW10\"] = \"Return 10 to the power of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_ROOT\"] = \"Return the square root of a number.\";\n  Blockly.Msg[\"MATH_SUBTRACTION_SYMBOL\"] = \"-\";\n  Blockly.Msg[\"MATH_TRIG_ACOS\"] = \"acos\";\n  Blockly.Msg[\"MATH_TRIG_ASIN\"] = \"asin\";\n  Blockly.Msg[\"MATH_TRIG_ATAN\"] = \"atan\";\n  Blockly.Msg[\"MATH_TRIG_COS\"] = \"cos\";\n  Blockly.Msg[\"MATH_TRIG_HELPURL\"] = \"https://en.wikipedia.org/wiki/Trigonometric_functions\";\n  Blockly.Msg[\"MATH_TRIG_SIN\"] = \"sin\";\n  Blockly.Msg[\"MATH_TRIG_TAN\"] = \"tan\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_ACOS\"] = \"Return the arccosine of a number.\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_ASIN\"] = \"Return the arcsine of a number.\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_ATAN\"] = \"Return the arctangent of a number.\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_COS\"] = \"Return the cosine of a degree (not radian).\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_SIN\"] = \"Return the sine of a degree (not radian).\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_TAN\"] = \"Return the tangent of a degree (not radian).\";\n  Blockly.Msg[\"NEW_COLOUR_VARIABLE\"] = \"Create colour variable...\";\n  Blockly.Msg[\"NEW_NUMBER_VARIABLE\"] = \"Create number variable...\";\n  Blockly.Msg[\"NEW_STRING_VARIABLE\"] = \"Create string variable...\";\n  Blockly.Msg[\"NEW_VARIABLE\"] = \"Create variable...\";\n  Blockly.Msg[\"NEW_VARIABLE_TITLE\"] = \"New variable name:\";\n  Blockly.Msg[\"NEW_VARIABLE_TYPE_TITLE\"] = \"New variable type:\";\n  Blockly.Msg[\"ORDINAL_NUMBER_SUFFIX\"] = \"\";\n  Blockly.Msg[\"PROCEDURES_ALLOW_STATEMENTS\"] = \"allow statements\";\n  Blockly.Msg[\"PROCEDURES_BEFORE_PARAMS\"] = \"with:\";\n  Blockly.Msg[\"PROCEDURES_CALLNORETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\n  Blockly.Msg[\"PROCEDURES_CALLNORETURN_TOOLTIP\"] = \"Run the user-defined function '%1'.\";\n  Blockly.Msg[\"PROCEDURES_CALLRETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\n  Blockly.Msg[\"PROCEDURES_CALLRETURN_TOOLTIP\"] = \"Run the user-defined function '%1' and use its output.\";\n  Blockly.Msg[\"PROCEDURES_CALL_BEFORE_PARAMS\"] = \"with:\";\n  Blockly.Msg[\"PROCEDURES_CREATE_DO\"] = \"Create '%1'\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_COMMENT\"] = \"Describe this function...\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_DO\"] = \"\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_PROCEDURE\"] = \"do something\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_TITLE\"] = \"to\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_TOOLTIP\"] = \"Creates a function with no output.\";\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_RETURN\"] = \"return\";\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_TOOLTIP\"] = \"Creates a function with an output.\";\n  Blockly.Msg[\"PROCEDURES_DEF_DUPLICATE_WARNING\"] = \"Warning: This function has duplicate parameters.\";\n  Blockly.Msg[\"PROCEDURES_HIGHLIGHT_DEF\"] = \"Highlight function definition\";\n  Blockly.Msg[\"PROCEDURES_IFRETURN_HELPURL\"] = \"http://c2.com/cgi/wiki?GuardClause\";\n  Blockly.Msg[\"PROCEDURES_IFRETURN_TOOLTIP\"] = \"If a value is true, then return a second value.\";\n  Blockly.Msg[\"PROCEDURES_IFRETURN_WARNING\"] = \"Warning: This block may be used only within a function definition.\";\n  Blockly.Msg[\"PROCEDURES_MUTATORARG_TITLE\"] = \"input name:\";\n  Blockly.Msg[\"PROCEDURES_MUTATORARG_TOOLTIP\"] = \"Add an input to the function.\";\n  Blockly.Msg[\"PROCEDURES_MUTATORCONTAINER_TITLE\"] = \"inputs\";\n  Blockly.Msg[\"PROCEDURES_MUTATORCONTAINER_TOOLTIP\"] = \"Add, remove, or reorder inputs to this function.\";\n  Blockly.Msg[\"REDO\"] = \"Redo\";\n  Blockly.Msg[\"REMOVE_COMMENT\"] = \"Remove Comment\";\n  Blockly.Msg[\"RENAME_VARIABLE\"] = \"Rename variable...\";\n  Blockly.Msg[\"RENAME_VARIABLE_TITLE\"] = \"Rename all '%1' variables to:\";\n  Blockly.Msg[\"TEXT_APPEND_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#text-modification\";\n  Blockly.Msg[\"TEXT_APPEND_TITLE\"] = \"to %1 append text %2\";\n  Blockly.Msg[\"TEXT_APPEND_TOOLTIP\"] = \"Append some text to variable '%1'.\";\n  Blockly.Msg[\"TEXT_CHANGECASE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#adjusting-text-case\";\n  Blockly.Msg[\"TEXT_CHANGECASE_OPERATOR_LOWERCASE\"] = \"to lower case\";\n  Blockly.Msg[\"TEXT_CHANGECASE_OPERATOR_TITLECASE\"] = \"to Title Case\";\n  Blockly.Msg[\"TEXT_CHANGECASE_OPERATOR_UPPERCASE\"] = \"to UPPER CASE\";\n  Blockly.Msg[\"TEXT_CHANGECASE_TOOLTIP\"] = \"Return a copy of the text in a different case.\";\n  Blockly.Msg[\"TEXT_CHARAT_FIRST\"] = \"get first letter\";\n  Blockly.Msg[\"TEXT_CHARAT_FROM_END\"] = \"get letter # from end\";\n  Blockly.Msg[\"TEXT_CHARAT_FROM_START\"] = \"get letter #\";\n  Blockly.Msg[\"TEXT_CHARAT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#extracting-text\";\n  Blockly.Msg[\"TEXT_CHARAT_LAST\"] = \"get last letter\";\n  Blockly.Msg[\"TEXT_CHARAT_RANDOM\"] = \"get random letter\";\n  Blockly.Msg[\"TEXT_CHARAT_TAIL\"] = \"\";\n  Blockly.Msg[\"TEXT_CHARAT_TITLE\"] = \"in text %1 %2\";\n  Blockly.Msg[\"TEXT_CHARAT_TOOLTIP\"] = \"Returns the letter at the specified position.\";\n  Blockly.Msg[\"TEXT_COUNT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#counting-substrings\";\n  Blockly.Msg[\"TEXT_COUNT_MESSAGE0\"] = \"count %1 in %2\";\n  Blockly.Msg[\"TEXT_COUNT_TOOLTIP\"] = \"Count how many times some text occurs within some other text.\";\n  Blockly.Msg[\"TEXT_CREATE_JOIN_ITEM_TOOLTIP\"] = \"Add an item to the text.\";\n  Blockly.Msg[\"TEXT_CREATE_JOIN_TITLE_JOIN\"] = \"join\";\n  Blockly.Msg[\"TEXT_CREATE_JOIN_TOOLTIP\"] = \"Add, remove, or reorder sections to reconfigure this text block.\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_END_FROM_END\"] = \"to letter # from end\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_END_FROM_START\"] = \"to letter #\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_END_LAST\"] = \"to last letter\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_INPUT_IN_TEXT\"] = \"in text\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_START_FIRST\"] = \"get substring from first letter\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_START_FROM_END\"] = \"get substring from letter # from end\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_START_FROM_START\"] = \"get substring from letter #\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_TAIL\"] = \"\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_TOOLTIP\"] = \"Returns a specified portion of the text.\";\n  Blockly.Msg[\"TEXT_INDEXOF_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#finding-text\";\n  Blockly.Msg[\"TEXT_INDEXOF_OPERATOR_FIRST\"] = \"find first occurrence of text\";\n  Blockly.Msg[\"TEXT_INDEXOF_OPERATOR_LAST\"] = \"find last occurrence of text\";\n  Blockly.Msg[\"TEXT_INDEXOF_TITLE\"] = \"in text %1 %2 %3\";\n  Blockly.Msg[\"TEXT_INDEXOF_TOOLTIP\"] = \"Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.\";\n  Blockly.Msg[\"TEXT_ISEMPTY_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#checking-for-empty-text\";\n  Blockly.Msg[\"TEXT_ISEMPTY_TITLE\"] = \"%1 is empty\";\n  Blockly.Msg[\"TEXT_ISEMPTY_TOOLTIP\"] = \"Returns true if the provided text is empty.\";\n  Blockly.Msg[\"TEXT_JOIN_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#text-creation\";\n  Blockly.Msg[\"TEXT_JOIN_TITLE_CREATEWITH\"] = \"create text with\";\n  Blockly.Msg[\"TEXT_JOIN_TOOLTIP\"] = \"Create a piece of text by joining together any number of items.\";\n  Blockly.Msg[\"TEXT_LENGTH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#text-modification\";\n  Blockly.Msg[\"TEXT_LENGTH_TITLE\"] = \"length of %1\";\n  Blockly.Msg[\"TEXT_LENGTH_TOOLTIP\"] = \"Returns the number of letters (including spaces) in the provided text.\";\n  Blockly.Msg[\"TEXT_PRINT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#printing-text\";\n  Blockly.Msg[\"TEXT_PRINT_TITLE\"] = \"print %1\";\n  Blockly.Msg[\"TEXT_PRINT_TOOLTIP\"] = \"Print the specified text, number or other value.\";\n  Blockly.Msg[\"TEXT_PROMPT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#getting-input-from-the-user\";\n  Blockly.Msg[\"TEXT_PROMPT_TOOLTIP_NUMBER\"] = \"Prompt for user for a number.\";\n  Blockly.Msg[\"TEXT_PROMPT_TOOLTIP_TEXT\"] = \"Prompt for user for some text.\";\n  Blockly.Msg[\"TEXT_PROMPT_TYPE_NUMBER\"] = \"prompt for number with message\";\n  Blockly.Msg[\"TEXT_PROMPT_TYPE_TEXT\"] = \"prompt for text with message\";\n  Blockly.Msg[\"TEXT_REPLACE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#replacing-substrings\";\n  Blockly.Msg[\"TEXT_REPLACE_MESSAGE0\"] = \"replace %1 with %2 in %3\";\n  Blockly.Msg[\"TEXT_REPLACE_TOOLTIP\"] = \"Replace all occurances of some text within some other text.\";\n  Blockly.Msg[\"TEXT_REVERSE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#reversing-text\";\n  Blockly.Msg[\"TEXT_REVERSE_MESSAGE0\"] = \"reverse %1\";\n  Blockly.Msg[\"TEXT_REVERSE_TOOLTIP\"] = \"Reverses the order of the characters in the text.\";\n  Blockly.Msg[\"TEXT_TEXT_HELPURL\"] = \"https://en.wikipedia.org/wiki/String_(computer_science)\";\n  Blockly.Msg[\"TEXT_TEXT_TOOLTIP\"] = \"A letter, word, or line of text.\";\n  Blockly.Msg[\"TEXT_TRIM_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#trimming-removing-spaces\";\n  Blockly.Msg[\"TEXT_TRIM_OPERATOR_BOTH\"] = \"trim spaces from both sides of\";\n  Blockly.Msg[\"TEXT_TRIM_OPERATOR_LEFT\"] = \"trim spaces from left side of\";\n  Blockly.Msg[\"TEXT_TRIM_OPERATOR_RIGHT\"] = \"trim spaces from right side of\";\n  Blockly.Msg[\"TEXT_TRIM_TOOLTIP\"] = \"Return a copy of the text with spaces removed from one or both ends.\";\n  Blockly.Msg[\"TODAY\"] = \"Today\";\n  Blockly.Msg[\"UNDO\"] = \"Undo\";\n  Blockly.Msg[\"UNNAMED_KEY\"] = \"unnamed\";\n  Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"] = \"item\";\n  Blockly.Msg[\"VARIABLES_GET_CREATE_SET\"] = \"Create 'set %1'\";\n  Blockly.Msg[\"VARIABLES_GET_HELPURL\"] = \"https://github.com/google/blockly/wiki/Variables#get\";\n  Blockly.Msg[\"VARIABLES_GET_TOOLTIP\"] = \"Returns the value of this variable.\";\n  Blockly.Msg[\"VARIABLES_SET\"] = \"set %1 to %2\";\n  Blockly.Msg[\"VARIABLES_SET_CREATE_GET\"] = \"Create 'get %1'\";\n  Blockly.Msg[\"VARIABLES_SET_HELPURL\"] = \"https://github.com/google/blockly/wiki/Variables#set\";\n  Blockly.Msg[\"VARIABLES_SET_TOOLTIP\"] = \"Sets this variable to be equal to the input.\";\n  Blockly.Msg[\"VARIABLE_ALREADY_EXISTS\"] = \"A variable named '%1' already exists.\";\n  Blockly.Msg[\"VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE\"] = \"A variable named '%1' already exists for another type: '%2'.\";\n  Blockly.Msg[\"WORKSPACE_ARIA_LABEL\"] = \"Blockly Workspace\";\n  Blockly.Msg[\"WORKSPACE_COMMENT_DEFAULT_TEXT\"] = \"Say something...\";\n  Blockly.Msg[\"CONTROLS_FOREACH_INPUT_DO\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\n  Blockly.Msg[\"CONTROLS_FOR_INPUT_DO\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\n  Blockly.Msg[\"CONTROLS_IF_ELSEIF_TITLE_ELSEIF\"] = Blockly.Msg[\"CONTROLS_IF_MSG_ELSEIF\"];\n  Blockly.Msg[\"CONTROLS_IF_ELSE_TITLE_ELSE\"] = Blockly.Msg[\"CONTROLS_IF_MSG_ELSE\"];\n  Blockly.Msg[\"CONTROLS_IF_IF_TITLE_IF\"] = Blockly.Msg[\"CONTROLS_IF_MSG_IF\"];\n  Blockly.Msg[\"CONTROLS_IF_MSG_THEN\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_INPUT_DO\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\n  Blockly.Msg[\"LISTS_CREATE_WITH_ITEM_TITLE\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\n  Blockly.Msg[\"LISTS_GET_INDEX_HELPURL\"] = Blockly.Msg[\"LISTS_INDEX_OF_HELPURL\"];\n  Blockly.Msg[\"LISTS_GET_INDEX_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\n  Blockly.Msg[\"LISTS_GET_SUBLIST_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\n  Blockly.Msg[\"LISTS_INDEX_OF_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\n  Blockly.Msg[\"LISTS_SET_INDEX_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\n  Blockly.Msg[\"MATH_CHANGE_TITLE_ITEM\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_COMMENT\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_COMMENT\"];\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_DO\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_DO\"];\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_PROCEDURE\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_PROCEDURE\"];\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_TITLE\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_TITLE\"];\n  Blockly.Msg[\"TEXT_APPEND_VARIABLE\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\n  Blockly.Msg[\"TEXT_CREATE_JOIN_ITEM_TITLE_ITEM\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\n  Blockly.Msg[\"MATH_HUE\"] = \"230\";\n  Blockly.Msg[\"LOOPS_HUE\"] = \"120\";\n  Blockly.Msg[\"LISTS_HUE\"] = \"260\";\n  Blockly.Msg[\"LOGIC_HUE\"] = \"210\";\n  Blockly.Msg[\"VARIABLES_HUE\"] = \"330\";\n  Blockly.Msg[\"TEXTS_HUE\"] = \"160\";\n  Blockly.Msg[\"PROCEDURES_HUE\"] = \"290\";\n  Blockly.Msg[\"COLOUR_HUE\"] = \"20\";\n  Blockly.Msg[\"VARIABLES_DYNAMIC_HUE\"] = \"310\";\n  return Blockly.Msg;\n});","!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define([], t) : \"object\" == typeof exports ? exports.bowser = t() : e.bowser = t();\n}(this, function () {\n  return function (e) {\n    var t = {};\n\n    function r(n) {\n      if (t[n]) return t[n].exports;\n      var i = t[n] = {\n        i: n,\n        l: !1,\n        exports: {}\n      };\n      return e[n].call(i.exports, i, i.exports, r), i.l = !0, i.exports;\n    }\n\n    return r.m = e, r.c = t, r.d = function (e, t, n) {\n      r.o(e, t) || Object.defineProperty(e, t, {\n        enumerable: !0,\n        get: n\n      });\n    }, r.r = function (e) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(e, \"__esModule\", {\n        value: !0\n      });\n    }, r.t = function (e, t) {\n      if (1 & t && (e = r(e)), 8 & t) return e;\n      if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n      var n = Object.create(null);\n      if (r.r(n), Object.defineProperty(n, \"default\", {\n        enumerable: !0,\n        value: e\n      }), 2 & t && \"string\" != typeof e) for (var i in e) {\n        r.d(n, i, function (t) {\n          return e[t];\n        }.bind(null, i));\n      }\n      return n;\n    }, r.n = function (e) {\n      var t = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return r.d(t, \"a\", t), t;\n    }, r.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, r.p = \"\", r(r.s = 90);\n  }({\n    17: function _(e, t, r) {\n      \"use strict\";\n\n      t.__esModule = !0, t.default = void 0;\n\n      var n = r(18),\n          i = function () {\n        function e() {}\n\n        return e.getFirstMatch = function (e, t) {\n          var r = t.match(e);\n          return r && r.length > 0 && r[1] || \"\";\n        }, e.getSecondMatch = function (e, t) {\n          var r = t.match(e);\n          return r && r.length > 1 && r[2] || \"\";\n        }, e.matchAndReturnConst = function (e, t, r) {\n          if (e.test(t)) return r;\n        }, e.getWindowsVersionName = function (e) {\n          switch (e) {\n            case \"NT\":\n              return \"NT\";\n\n            case \"XP\":\n              return \"XP\";\n\n            case \"NT 5.0\":\n              return \"2000\";\n\n            case \"NT 5.1\":\n              return \"XP\";\n\n            case \"NT 5.2\":\n              return \"2003\";\n\n            case \"NT 6.0\":\n              return \"Vista\";\n\n            case \"NT 6.1\":\n              return \"7\";\n\n            case \"NT 6.2\":\n              return \"8\";\n\n            case \"NT 6.3\":\n              return \"8.1\";\n\n            case \"NT 10.0\":\n              return \"10\";\n\n            default:\n              return;\n          }\n        }, e.getMacOSVersionName = function (e) {\n          var t = e.split(\".\").splice(0, 2).map(function (e) {\n            return parseInt(e, 10) || 0;\n          });\n          if (t.push(0), 10 === t[0]) switch (t[1]) {\n            case 5:\n              return \"Leopard\";\n\n            case 6:\n              return \"Snow Leopard\";\n\n            case 7:\n              return \"Lion\";\n\n            case 8:\n              return \"Mountain Lion\";\n\n            case 9:\n              return \"Mavericks\";\n\n            case 10:\n              return \"Yosemite\";\n\n            case 11:\n              return \"El Capitan\";\n\n            case 12:\n              return \"Sierra\";\n\n            case 13:\n              return \"High Sierra\";\n\n            case 14:\n              return \"Mojave\";\n\n            case 15:\n              return \"Catalina\";\n\n            default:\n              return;\n          }\n        }, e.getAndroidVersionName = function (e) {\n          var t = e.split(\".\").splice(0, 2).map(function (e) {\n            return parseInt(e, 10) || 0;\n          });\n          if (t.push(0), !(1 === t[0] && t[1] < 5)) return 1 === t[0] && t[1] < 6 ? \"Cupcake\" : 1 === t[0] && t[1] >= 6 ? \"Donut\" : 2 === t[0] && t[1] < 2 ? \"Eclair\" : 2 === t[0] && 2 === t[1] ? \"Froyo\" : 2 === t[0] && t[1] > 2 ? \"Gingerbread\" : 3 === t[0] ? \"Honeycomb\" : 4 === t[0] && t[1] < 1 ? \"Ice Cream Sandwich\" : 4 === t[0] && t[1] < 4 ? \"Jelly Bean\" : 4 === t[0] && t[1] >= 4 ? \"KitKat\" : 5 === t[0] ? \"Lollipop\" : 6 === t[0] ? \"Marshmallow\" : 7 === t[0] ? \"Nougat\" : 8 === t[0] ? \"Oreo\" : 9 === t[0] ? \"Pie\" : void 0;\n        }, e.getVersionPrecision = function (e) {\n          return e.split(\".\").length;\n        }, e.compareVersions = function (t, r, n) {\n          void 0 === n && (n = !1);\n          var i = e.getVersionPrecision(t),\n              s = e.getVersionPrecision(r),\n              a = Math.max(i, s),\n              o = 0,\n              u = e.map([t, r], function (t) {\n            var r = a - e.getVersionPrecision(t),\n                n = t + new Array(r + 1).join(\".0\");\n            return e.map(n.split(\".\"), function (e) {\n              return new Array(20 - e.length).join(\"0\") + e;\n            }).reverse();\n          });\n\n          for (n && (o = a - Math.min(i, s)), a -= 1; a >= o;) {\n            if (u[0][a] > u[1][a]) return 1;\n\n            if (u[0][a] === u[1][a]) {\n              if (a === o) return 0;\n              a -= 1;\n            } else if (u[0][a] < u[1][a]) return -1;\n          }\n        }, e.map = function (e, t) {\n          var r,\n              n = [];\n          if (Array.prototype.map) return Array.prototype.map.call(e, t);\n\n          for (r = 0; r < e.length; r += 1) {\n            n.push(t(e[r]));\n          }\n\n          return n;\n        }, e.find = function (e, t) {\n          var r, n;\n          if (Array.prototype.find) return Array.prototype.find.call(e, t);\n\n          for (r = 0, n = e.length; r < n; r += 1) {\n            var i = e[r];\n            if (t(i, r)) return i;\n          }\n        }, e.assign = function (e) {\n          for (var t, r, n = e, i = arguments.length, s = new Array(i > 1 ? i - 1 : 0), a = 1; a < i; a++) {\n            s[a - 1] = arguments[a];\n          }\n\n          if (Object.assign) return Object.assign.apply(Object, [e].concat(s));\n\n          var o = function o() {\n            var e = s[t];\n            \"object\" == typeof e && null !== e && Object.keys(e).forEach(function (t) {\n              n[t] = e[t];\n            });\n          };\n\n          for (t = 0, r = s.length; t < r; t += 1) {\n            o();\n          }\n\n          return e;\n        }, e.getBrowserAlias = function (e) {\n          return n.BROWSER_ALIASES_MAP[e];\n        }, e.getBrowserTypeByAlias = function (e) {\n          return n.BROWSER_MAP[e] || \"\";\n        }, e;\n      }();\n\n      t.default = i, e.exports = t.default;\n    },\n    18: function _(e, t, r) {\n      \"use strict\";\n\n      t.__esModule = !0, t.ENGINE_MAP = t.OS_MAP = t.PLATFORMS_MAP = t.BROWSER_MAP = t.BROWSER_ALIASES_MAP = void 0;\n      t.BROWSER_ALIASES_MAP = {\n        \"Amazon Silk\": \"amazon_silk\",\n        \"Android Browser\": \"android\",\n        Bada: \"bada\",\n        BlackBerry: \"blackberry\",\n        Chrome: \"chrome\",\n        Chromium: \"chromium\",\n        Electron: \"electron\",\n        Epiphany: \"epiphany\",\n        Firefox: \"firefox\",\n        Focus: \"focus\",\n        Generic: \"generic\",\n        \"Google Search\": \"google_search\",\n        Googlebot: \"googlebot\",\n        \"Internet Explorer\": \"ie\",\n        \"K-Meleon\": \"k_meleon\",\n        Maxthon: \"maxthon\",\n        \"Microsoft Edge\": \"edge\",\n        \"MZ Browser\": \"mz\",\n        \"NAVER Whale Browser\": \"naver\",\n        Opera: \"opera\",\n        \"Opera Coast\": \"opera_coast\",\n        PhantomJS: \"phantomjs\",\n        Puffin: \"puffin\",\n        QupZilla: \"qupzilla\",\n        QQ: \"qq\",\n        QQLite: \"qqlite\",\n        Safari: \"safari\",\n        Sailfish: \"sailfish\",\n        \"Samsung Internet for Android\": \"samsung_internet\",\n        SeaMonkey: \"seamonkey\",\n        Sleipnir: \"sleipnir\",\n        Swing: \"swing\",\n        Tizen: \"tizen\",\n        \"UC Browser\": \"uc\",\n        Vivaldi: \"vivaldi\",\n        \"WebOS Browser\": \"webos\",\n        WeChat: \"wechat\",\n        \"Yandex Browser\": \"yandex\",\n        Roku: \"roku\"\n      };\n      t.BROWSER_MAP = {\n        amazon_silk: \"Amazon Silk\",\n        android: \"Android Browser\",\n        bada: \"Bada\",\n        blackberry: \"BlackBerry\",\n        chrome: \"Chrome\",\n        chromium: \"Chromium\",\n        electron: \"Electron\",\n        epiphany: \"Epiphany\",\n        firefox: \"Firefox\",\n        focus: \"Focus\",\n        generic: \"Generic\",\n        googlebot: \"Googlebot\",\n        google_search: \"Google Search\",\n        ie: \"Internet Explorer\",\n        k_meleon: \"K-Meleon\",\n        maxthon: \"Maxthon\",\n        edge: \"Microsoft Edge\",\n        mz: \"MZ Browser\",\n        naver: \"NAVER Whale Browser\",\n        opera: \"Opera\",\n        opera_coast: \"Opera Coast\",\n        phantomjs: \"PhantomJS\",\n        puffin: \"Puffin\",\n        qupzilla: \"QupZilla\",\n        qq: \"QQ Browser\",\n        qqlite: \"QQ Browser Lite\",\n        safari: \"Safari\",\n        sailfish: \"Sailfish\",\n        samsung_internet: \"Samsung Internet for Android\",\n        seamonkey: \"SeaMonkey\",\n        sleipnir: \"Sleipnir\",\n        swing: \"Swing\",\n        tizen: \"Tizen\",\n        uc: \"UC Browser\",\n        vivaldi: \"Vivaldi\",\n        webos: \"WebOS Browser\",\n        wechat: \"WeChat\",\n        yandex: \"Yandex Browser\"\n      };\n      t.PLATFORMS_MAP = {\n        tablet: \"tablet\",\n        mobile: \"mobile\",\n        desktop: \"desktop\",\n        tv: \"tv\"\n      };\n      t.OS_MAP = {\n        WindowsPhone: \"Windows Phone\",\n        Windows: \"Windows\",\n        MacOS: \"macOS\",\n        iOS: \"iOS\",\n        Android: \"Android\",\n        WebOS: \"WebOS\",\n        BlackBerry: \"BlackBerry\",\n        Bada: \"Bada\",\n        Tizen: \"Tizen\",\n        Linux: \"Linux\",\n        ChromeOS: \"Chrome OS\",\n        PlayStation4: \"PlayStation 4\",\n        Roku: \"Roku\"\n      };\n      t.ENGINE_MAP = {\n        EdgeHTML: \"EdgeHTML\",\n        Blink: \"Blink\",\n        Trident: \"Trident\",\n        Presto: \"Presto\",\n        Gecko: \"Gecko\",\n        WebKit: \"WebKit\"\n      };\n    },\n    90: function _(e, t, r) {\n      \"use strict\";\n\n      t.__esModule = !0, t.default = void 0;\n      var n,\n          i = (n = r(91)) && n.__esModule ? n : {\n        default: n\n      },\n          s = r(18);\n\n      function a(e, t) {\n        for (var r = 0; r < t.length; r++) {\n          var n = t[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);\n        }\n      }\n\n      var o = function () {\n        function e() {}\n\n        var t, r, n;\n        return e.getParser = function (e, t) {\n          if (void 0 === t && (t = !1), \"string\" != typeof e) throw new Error(\"UserAgent should be a string\");\n          return new i.default(e, t);\n        }, e.parse = function (e) {\n          return new i.default(e).getResult();\n        }, t = e, n = [{\n          key: \"BROWSER_MAP\",\n          get: function get() {\n            return s.BROWSER_MAP;\n          }\n        }, {\n          key: \"ENGINE_MAP\",\n          get: function get() {\n            return s.ENGINE_MAP;\n          }\n        }, {\n          key: \"OS_MAP\",\n          get: function get() {\n            return s.OS_MAP;\n          }\n        }, {\n          key: \"PLATFORMS_MAP\",\n          get: function get() {\n            return s.PLATFORMS_MAP;\n          }\n        }], (r = null) && a(t.prototype, r), n && a(t, n), e;\n      }();\n\n      t.default = o, e.exports = t.default;\n    },\n    91: function _(e, t, r) {\n      \"use strict\";\n\n      t.__esModule = !0, t.default = void 0;\n      var n = u(r(92)),\n          i = u(r(93)),\n          s = u(r(94)),\n          a = u(r(95)),\n          o = u(r(17));\n\n      function u(e) {\n        return e && e.__esModule ? e : {\n          default: e\n        };\n      }\n\n      var d = function () {\n        function e(e, t) {\n          if (void 0 === t && (t = !1), null == e || \"\" === e) throw new Error(\"UserAgent parameter can't be empty\");\n          this._ua = e, this.parsedResult = {}, !0 !== t && this.parse();\n        }\n\n        var t = e.prototype;\n        return t.getUA = function () {\n          return this._ua;\n        }, t.test = function (e) {\n          return e.test(this._ua);\n        }, t.parseBrowser = function () {\n          var e = this;\n          this.parsedResult.browser = {};\n          var t = o.default.find(n.default, function (t) {\n            if (\"function\" == typeof t.test) return t.test(e);\n            if (t.test instanceof Array) return t.test.some(function (t) {\n              return e.test(t);\n            });\n            throw new Error(\"Browser's test function is not valid\");\n          });\n          return t && (this.parsedResult.browser = t.describe(this.getUA())), this.parsedResult.browser;\n        }, t.getBrowser = function () {\n          return this.parsedResult.browser ? this.parsedResult.browser : this.parseBrowser();\n        }, t.getBrowserName = function (e) {\n          return e ? String(this.getBrowser().name).toLowerCase() || \"\" : this.getBrowser().name || \"\";\n        }, t.getBrowserVersion = function () {\n          return this.getBrowser().version;\n        }, t.getOS = function () {\n          return this.parsedResult.os ? this.parsedResult.os : this.parseOS();\n        }, t.parseOS = function () {\n          var e = this;\n          this.parsedResult.os = {};\n          var t = o.default.find(i.default, function (t) {\n            if (\"function\" == typeof t.test) return t.test(e);\n            if (t.test instanceof Array) return t.test.some(function (t) {\n              return e.test(t);\n            });\n            throw new Error(\"Browser's test function is not valid\");\n          });\n          return t && (this.parsedResult.os = t.describe(this.getUA())), this.parsedResult.os;\n        }, t.getOSName = function (e) {\n          var t = this.getOS().name;\n          return e ? String(t).toLowerCase() || \"\" : t || \"\";\n        }, t.getOSVersion = function () {\n          return this.getOS().version;\n        }, t.getPlatform = function () {\n          return this.parsedResult.platform ? this.parsedResult.platform : this.parsePlatform();\n        }, t.getPlatformType = function (e) {\n          void 0 === e && (e = !1);\n          var t = this.getPlatform().type;\n          return e ? String(t).toLowerCase() || \"\" : t || \"\";\n        }, t.parsePlatform = function () {\n          var e = this;\n          this.parsedResult.platform = {};\n          var t = o.default.find(s.default, function (t) {\n            if (\"function\" == typeof t.test) return t.test(e);\n            if (t.test instanceof Array) return t.test.some(function (t) {\n              return e.test(t);\n            });\n            throw new Error(\"Browser's test function is not valid\");\n          });\n          return t && (this.parsedResult.platform = t.describe(this.getUA())), this.parsedResult.platform;\n        }, t.getEngine = function () {\n          return this.parsedResult.engine ? this.parsedResult.engine : this.parseEngine();\n        }, t.getEngineName = function (e) {\n          return e ? String(this.getEngine().name).toLowerCase() || \"\" : this.getEngine().name || \"\";\n        }, t.parseEngine = function () {\n          var e = this;\n          this.parsedResult.engine = {};\n          var t = o.default.find(a.default, function (t) {\n            if (\"function\" == typeof t.test) return t.test(e);\n            if (t.test instanceof Array) return t.test.some(function (t) {\n              return e.test(t);\n            });\n            throw new Error(\"Browser's test function is not valid\");\n          });\n          return t && (this.parsedResult.engine = t.describe(this.getUA())), this.parsedResult.engine;\n        }, t.parse = function () {\n          return this.parseBrowser(), this.parseOS(), this.parsePlatform(), this.parseEngine(), this;\n        }, t.getResult = function () {\n          return o.default.assign({}, this.parsedResult);\n        }, t.satisfies = function (e) {\n          var t = this,\n              r = {},\n              n = 0,\n              i = {},\n              s = 0;\n\n          if (Object.keys(e).forEach(function (t) {\n            var a = e[t];\n            \"string\" == typeof a ? (i[t] = a, s += 1) : \"object\" == typeof a && (r[t] = a, n += 1);\n          }), n > 0) {\n            var a = Object.keys(r),\n                u = o.default.find(a, function (e) {\n              return t.isOS(e);\n            });\n\n            if (u) {\n              var d = this.satisfies(r[u]);\n              if (void 0 !== d) return d;\n            }\n\n            var c = o.default.find(a, function (e) {\n              return t.isPlatform(e);\n            });\n\n            if (c) {\n              var f = this.satisfies(r[c]);\n              if (void 0 !== f) return f;\n            }\n          }\n\n          if (s > 0) {\n            var l = Object.keys(i),\n                h = o.default.find(l, function (e) {\n              return t.isBrowser(e, !0);\n            });\n            if (void 0 !== h) return this.compareVersion(i[h]);\n          }\n        }, t.isBrowser = function (e, t) {\n          void 0 === t && (t = !1);\n          var r = this.getBrowserName().toLowerCase(),\n              n = e.toLowerCase(),\n              i = o.default.getBrowserTypeByAlias(n);\n          return t && i && (n = i.toLowerCase()), n === r;\n        }, t.compareVersion = function (e) {\n          var t = [0],\n              r = e,\n              n = !1,\n              i = this.getBrowserVersion();\n          if (\"string\" == typeof i) return \">\" === e[0] || \"<\" === e[0] ? (r = e.substr(1), \"=\" === e[1] ? (n = !0, r = e.substr(2)) : t = [], \">\" === e[0] ? t.push(1) : t.push(-1)) : \"=\" === e[0] ? r = e.substr(1) : \"~\" === e[0] && (n = !0, r = e.substr(1)), t.indexOf(o.default.compareVersions(i, r, n)) > -1;\n        }, t.isOS = function (e) {\n          return this.getOSName(!0) === String(e).toLowerCase();\n        }, t.isPlatform = function (e) {\n          return this.getPlatformType(!0) === String(e).toLowerCase();\n        }, t.isEngine = function (e) {\n          return this.getEngineName(!0) === String(e).toLowerCase();\n        }, t.is = function (e, t) {\n          return void 0 === t && (t = !1), this.isBrowser(e, t) || this.isOS(e) || this.isPlatform(e);\n        }, t.some = function (e) {\n          var t = this;\n          return void 0 === e && (e = []), e.some(function (e) {\n            return t.is(e);\n          });\n        }, e;\n      }();\n\n      t.default = d, e.exports = t.default;\n    },\n    92: function _(e, t, r) {\n      \"use strict\";\n\n      t.__esModule = !0, t.default = void 0;\n      var n,\n          i = (n = r(17)) && n.__esModule ? n : {\n        default: n\n      };\n      var s = /version\\/(\\d+(\\.?_?\\d+)+)/i,\n          a = [{\n        test: [/googlebot/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Googlebot\"\n          },\n              r = i.default.getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i, e) || i.default.getFirstMatch(s, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/opera/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Opera\"\n          },\n              r = i.default.getFirstMatch(s, e) || i.default.getFirstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/opr\\/|opios/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Opera\"\n          },\n              r = i.default.getFirstMatch(/(?:opr|opios)[\\s/](\\S+)/i, e) || i.default.getFirstMatch(s, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/SamsungBrowser/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Samsung Internet for Android\"\n          },\n              r = i.default.getFirstMatch(s, e) || i.default.getFirstMatch(/(?:SamsungBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/Whale/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"NAVER Whale Browser\"\n          },\n              r = i.default.getFirstMatch(s, e) || i.default.getFirstMatch(/(?:whale)[\\s/](\\d+(?:\\.\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/MZBrowser/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"MZ Browser\"\n          },\n              r = i.default.getFirstMatch(/(?:MZBrowser)[\\s/](\\d+(?:\\.\\d+)+)/i, e) || i.default.getFirstMatch(s, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/focus/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Focus\"\n          },\n              r = i.default.getFirstMatch(/(?:focus)[\\s/](\\d+(?:\\.\\d+)+)/i, e) || i.default.getFirstMatch(s, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/swing/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Swing\"\n          },\n              r = i.default.getFirstMatch(/(?:swing)[\\s/](\\d+(?:\\.\\d+)+)/i, e) || i.default.getFirstMatch(s, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/coast/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Opera Coast\"\n          },\n              r = i.default.getFirstMatch(s, e) || i.default.getFirstMatch(/(?:coast)[\\s/](\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/opt\\/\\d+(?:.?_?\\d+)+/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Opera Touch\"\n          },\n              r = i.default.getFirstMatch(/(?:opt)[\\s/](\\d+(\\.?_?\\d+)+)/i, e) || i.default.getFirstMatch(s, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/yabrowser/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Yandex Browser\"\n          },\n              r = i.default.getFirstMatch(/(?:yabrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, e) || i.default.getFirstMatch(s, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/ucbrowser/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"UC Browser\"\n          },\n              r = i.default.getFirstMatch(s, e) || i.default.getFirstMatch(/(?:ucbrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/Maxthon|mxios/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Maxthon\"\n          },\n              r = i.default.getFirstMatch(s, e) || i.default.getFirstMatch(/(?:Maxthon|mxios)[\\s/](\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/epiphany/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Epiphany\"\n          },\n              r = i.default.getFirstMatch(s, e) || i.default.getFirstMatch(/(?:epiphany)[\\s/](\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/puffin/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Puffin\"\n          },\n              r = i.default.getFirstMatch(s, e) || i.default.getFirstMatch(/(?:puffin)[\\s/](\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/sleipnir/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Sleipnir\"\n          },\n              r = i.default.getFirstMatch(s, e) || i.default.getFirstMatch(/(?:sleipnir)[\\s/](\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/k-meleon/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"K-Meleon\"\n          },\n              r = i.default.getFirstMatch(s, e) || i.default.getFirstMatch(/(?:k-meleon)[\\s/](\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/micromessenger/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"WeChat\"\n          },\n              r = i.default.getFirstMatch(/(?:micromessenger)[\\s/](\\d+(\\.?_?\\d+)+)/i, e) || i.default.getFirstMatch(s, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/qqbrowser/i],\n        describe: function describe(e) {\n          var t = {\n            name: /qqbrowserlite/i.test(e) ? \"QQ Browser Lite\" : \"QQ Browser\"\n          },\n              r = i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\\d+(\\.?_?\\d+)+)/i, e) || i.default.getFirstMatch(s, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/msie|trident/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Internet Explorer\"\n          },\n              r = i.default.getFirstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/\\sedg\\//i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Microsoft Edge\"\n          },\n              r = i.default.getFirstMatch(/\\sedg\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/edg([ea]|ios)/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Microsoft Edge\"\n          },\n              r = i.default.getSecondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/vivaldi/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Vivaldi\"\n          },\n              r = i.default.getFirstMatch(/vivaldi\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/seamonkey/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"SeaMonkey\"\n          },\n              r = i.default.getFirstMatch(/seamonkey\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/sailfish/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Sailfish\"\n          },\n              r = i.default.getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/silk/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Amazon Silk\"\n          },\n              r = i.default.getFirstMatch(/silk\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/phantom/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"PhantomJS\"\n          },\n              r = i.default.getFirstMatch(/phantomjs\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/slimerjs/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"SlimerJS\"\n          },\n              r = i.default.getFirstMatch(/slimerjs\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/blackberry|\\bbb\\d+/i, /rim\\stablet/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"BlackBerry\"\n          },\n              r = i.default.getFirstMatch(s, e) || i.default.getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/(web|hpw)[o0]s/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"WebOS Browser\"\n          },\n              r = i.default.getFirstMatch(s, e) || i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/bada/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Bada\"\n          },\n              r = i.default.getFirstMatch(/dolfin\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/tizen/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Tizen\"\n          },\n              r = i.default.getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.?_?\\d+)+)/i, e) || i.default.getFirstMatch(s, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/qupzilla/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"QupZilla\"\n          },\n              r = i.default.getFirstMatch(/(?:qupzilla)[\\s/](\\d+(\\.?_?\\d+)+)/i, e) || i.default.getFirstMatch(s, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/firefox|iceweasel|fxios/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Firefox\"\n          },\n              r = i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/electron/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Electron\"\n          },\n              r = i.default.getFirstMatch(/(?:electron)\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/MiuiBrowser/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Miui\"\n          },\n              r = i.default.getFirstMatch(/(?:MiuiBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/chromium/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Chromium\"\n          },\n              r = i.default.getFirstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i, e) || i.default.getFirstMatch(s, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/chrome|crios|crmo/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Chrome\"\n          },\n              r = i.default.getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/GSA/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Google Search\"\n          },\n              r = i.default.getFirstMatch(/(?:GSA)\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: function test(e) {\n          var t = !e.test(/like android/i),\n              r = e.test(/android/i);\n          return t && r;\n        },\n        describe: function describe(e) {\n          var t = {\n            name: \"Android Browser\"\n          },\n              r = i.default.getFirstMatch(s, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/playstation 4/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"PlayStation 4\"\n          },\n              r = i.default.getFirstMatch(s, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/safari|applewebkit/i],\n        describe: function describe(e) {\n          var t = {\n            name: \"Safari\"\n          },\n              r = i.default.getFirstMatch(s, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/.*/i],\n        describe: function describe(e) {\n          var t = -1 !== e.search(\"\\\\(\") ? /^(.*)\\/(.*)[ \\t]\\((.*)/ : /^(.*)\\/(.*) /;\n          return {\n            name: i.default.getFirstMatch(t, e),\n            version: i.default.getSecondMatch(t, e)\n          };\n        }\n      }];\n      t.default = a, e.exports = t.default;\n    },\n    93: function _(e, t, r) {\n      \"use strict\";\n\n      t.__esModule = !0, t.default = void 0;\n      var n,\n          i = (n = r(17)) && n.__esModule ? n : {\n        default: n\n      },\n          s = r(18);\n      var a = [{\n        test: [/Roku\\/DVP/],\n        describe: function describe(e) {\n          var t = i.default.getFirstMatch(/Roku\\/DVP-(\\d+\\.\\d+)/i, e);\n          return {\n            name: s.OS_MAP.Roku,\n            version: t\n          };\n        }\n      }, {\n        test: [/windows phone/i],\n        describe: function describe(e) {\n          var t = i.default.getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i, e);\n          return {\n            name: s.OS_MAP.WindowsPhone,\n            version: t\n          };\n        }\n      }, {\n        test: [/windows /i],\n        describe: function describe(e) {\n          var t = i.default.getFirstMatch(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i, e),\n              r = i.default.getWindowsVersionName(t);\n          return {\n            name: s.OS_MAP.Windows,\n            version: t,\n            versionName: r\n          };\n        }\n      }, {\n        test: [/Macintosh(.*?) FxiOS(.*?)\\//],\n        describe: function describe(e) {\n          var t = {\n            name: s.OS_MAP.iOS\n          },\n              r = i.default.getSecondMatch(/(Version\\/)(\\d[\\d.]+)/, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/macintosh/i],\n        describe: function describe(e) {\n          var t = i.default.getFirstMatch(/mac os x (\\d+(\\.?_?\\d+)+)/i, e).replace(/[_\\s]/g, \".\"),\n              r = i.default.getMacOSVersionName(t),\n              n = {\n            name: s.OS_MAP.MacOS,\n            version: t\n          };\n          return r && (n.versionName = r), n;\n        }\n      }, {\n        test: [/(ipod|iphone|ipad)/i],\n        describe: function describe(e) {\n          var t = i.default.getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i, e).replace(/[_\\s]/g, \".\");\n          return {\n            name: s.OS_MAP.iOS,\n            version: t\n          };\n        }\n      }, {\n        test: function test(e) {\n          var t = !e.test(/like android/i),\n              r = e.test(/android/i);\n          return t && r;\n        },\n        describe: function describe(e) {\n          var t = i.default.getFirstMatch(/android[\\s/-](\\d+(\\.\\d+)*)/i, e),\n              r = i.default.getAndroidVersionName(t),\n              n = {\n            name: s.OS_MAP.Android,\n            version: t\n          };\n          return r && (n.versionName = r), n;\n        }\n      }, {\n        test: [/(web|hpw)[o0]s/i],\n        describe: function describe(e) {\n          var t = i.default.getFirstMatch(/(?:web|hpw)[o0]s\\/(\\d+(\\.\\d+)*)/i, e),\n              r = {\n            name: s.OS_MAP.WebOS\n          };\n          return t && t.length && (r.version = t), r;\n        }\n      }, {\n        test: [/blackberry|\\bbb\\d+/i, /rim\\stablet/i],\n        describe: function describe(e) {\n          var t = i.default.getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i, e) || i.default.getFirstMatch(/blackberry\\d+\\/(\\d+([_\\s]\\d+)*)/i, e) || i.default.getFirstMatch(/\\bbb(\\d+)/i, e);\n          return {\n            name: s.OS_MAP.BlackBerry,\n            version: t\n          };\n        }\n      }, {\n        test: [/bada/i],\n        describe: function describe(e) {\n          var t = i.default.getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i, e);\n          return {\n            name: s.OS_MAP.Bada,\n            version: t\n          };\n        }\n      }, {\n        test: [/tizen/i],\n        describe: function describe(e) {\n          var t = i.default.getFirstMatch(/tizen[/\\s](\\d+(\\.\\d+)*)/i, e);\n          return {\n            name: s.OS_MAP.Tizen,\n            version: t\n          };\n        }\n      }, {\n        test: [/linux/i],\n        describe: function describe() {\n          return {\n            name: s.OS_MAP.Linux\n          };\n        }\n      }, {\n        test: [/CrOS/],\n        describe: function describe() {\n          return {\n            name: s.OS_MAP.ChromeOS\n          };\n        }\n      }, {\n        test: [/PlayStation 4/],\n        describe: function describe(e) {\n          var t = i.default.getFirstMatch(/PlayStation 4[/\\s](\\d+(\\.\\d+)*)/i, e);\n          return {\n            name: s.OS_MAP.PlayStation4,\n            version: t\n          };\n        }\n      }];\n      t.default = a, e.exports = t.default;\n    },\n    94: function _(e, t, r) {\n      \"use strict\";\n\n      t.__esModule = !0, t.default = void 0;\n      var n,\n          i = (n = r(17)) && n.__esModule ? n : {\n        default: n\n      },\n          s = r(18);\n      var a = [{\n        test: [/googlebot/i],\n        describe: function describe() {\n          return {\n            type: \"bot\",\n            vendor: \"Google\"\n          };\n        }\n      }, {\n        test: [/huawei/i],\n        describe: function describe(e) {\n          var t = i.default.getFirstMatch(/(can-l01)/i, e) && \"Nova\",\n              r = {\n            type: s.PLATFORMS_MAP.mobile,\n            vendor: \"Huawei\"\n          };\n          return t && (r.model = t), r;\n        }\n      }, {\n        test: [/nexus\\s*(?:7|8|9|10).*/i],\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.tablet,\n            vendor: \"Nexus\"\n          };\n        }\n      }, {\n        test: [/ipad/i],\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.tablet,\n            vendor: \"Apple\",\n            model: \"iPad\"\n          };\n        }\n      }, {\n        test: [/Macintosh(.*?) FxiOS(.*?)\\//],\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.tablet,\n            vendor: \"Apple\",\n            model: \"iPad\"\n          };\n        }\n      }, {\n        test: [/kftt build/i],\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.tablet,\n            vendor: \"Amazon\",\n            model: \"Kindle Fire HD 7\"\n          };\n        }\n      }, {\n        test: [/silk/i],\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.tablet,\n            vendor: \"Amazon\"\n          };\n        }\n      }, {\n        test: [/tablet(?! pc)/i],\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.tablet\n          };\n        }\n      }, {\n        test: function test(e) {\n          var t = e.test(/ipod|iphone/i),\n              r = e.test(/like (ipod|iphone)/i);\n          return t && !r;\n        },\n        describe: function describe(e) {\n          var t = i.default.getFirstMatch(/(ipod|iphone)/i, e);\n          return {\n            type: s.PLATFORMS_MAP.mobile,\n            vendor: \"Apple\",\n            model: t\n          };\n        }\n      }, {\n        test: [/nexus\\s*[0-6].*/i, /galaxy nexus/i],\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.mobile,\n            vendor: \"Nexus\"\n          };\n        }\n      }, {\n        test: [/[^-]mobi/i],\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.mobile\n          };\n        }\n      }, {\n        test: function test(e) {\n          return \"blackberry\" === e.getBrowserName(!0);\n        },\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.mobile,\n            vendor: \"BlackBerry\"\n          };\n        }\n      }, {\n        test: function test(e) {\n          return \"bada\" === e.getBrowserName(!0);\n        },\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.mobile\n          };\n        }\n      }, {\n        test: function test(e) {\n          return \"windows phone\" === e.getBrowserName();\n        },\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.mobile,\n            vendor: \"Microsoft\"\n          };\n        }\n      }, {\n        test: function test(e) {\n          var t = Number(String(e.getOSVersion()).split(\".\")[0]);\n          return \"android\" === e.getOSName(!0) && t >= 3;\n        },\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.tablet\n          };\n        }\n      }, {\n        test: function test(e) {\n          return \"android\" === e.getOSName(!0);\n        },\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.mobile\n          };\n        }\n      }, {\n        test: function test(e) {\n          return \"macos\" === e.getOSName(!0);\n        },\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.desktop,\n            vendor: \"Apple\"\n          };\n        }\n      }, {\n        test: function test(e) {\n          return \"windows\" === e.getOSName(!0);\n        },\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.desktop\n          };\n        }\n      }, {\n        test: function test(e) {\n          return \"linux\" === e.getOSName(!0);\n        },\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.desktop\n          };\n        }\n      }, {\n        test: function test(e) {\n          return \"playstation 4\" === e.getOSName(!0);\n        },\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.tv\n          };\n        }\n      }, {\n        test: function test(e) {\n          return \"roku\" === e.getOSName(!0);\n        },\n        describe: function describe() {\n          return {\n            type: s.PLATFORMS_MAP.tv\n          };\n        }\n      }];\n      t.default = a, e.exports = t.default;\n    },\n    95: function _(e, t, r) {\n      \"use strict\";\n\n      t.__esModule = !0, t.default = void 0;\n      var n,\n          i = (n = r(17)) && n.__esModule ? n : {\n        default: n\n      },\n          s = r(18);\n      var a = [{\n        test: function test(e) {\n          return \"microsoft edge\" === e.getBrowserName(!0);\n        },\n        describe: function describe(e) {\n          if (/\\sedg\\//i.test(e)) return {\n            name: s.ENGINE_MAP.Blink\n          };\n          var t = i.default.getFirstMatch(/edge\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return {\n            name: s.ENGINE_MAP.EdgeHTML,\n            version: t\n          };\n        }\n      }, {\n        test: [/trident/i],\n        describe: function describe(e) {\n          var t = {\n            name: s.ENGINE_MAP.Trident\n          },\n              r = i.default.getFirstMatch(/trident\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: function test(e) {\n          return e.test(/presto/i);\n        },\n        describe: function describe(e) {\n          var t = {\n            name: s.ENGINE_MAP.Presto\n          },\n              r = i.default.getFirstMatch(/presto\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: function test(e) {\n          var t = e.test(/gecko/i),\n              r = e.test(/like gecko/i);\n          return t && !r;\n        },\n        describe: function describe(e) {\n          var t = {\n            name: s.ENGINE_MAP.Gecko\n          },\n              r = i.default.getFirstMatch(/gecko\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }, {\n        test: [/(apple)?webkit\\/537\\.36/i],\n        describe: function describe() {\n          return {\n            name: s.ENGINE_MAP.Blink\n          };\n        }\n      }, {\n        test: [/(apple)?webkit/i],\n        describe: function describe(e) {\n          var t = {\n            name: s.ENGINE_MAP.WebKit\n          },\n              r = i.default.getFirstMatch(/webkit\\/(\\d+(\\.?_?\\d+)+)/i, e);\n          return r && (t.version = r), t;\n        }\n      }];\n      t.default = a, e.exports = t.default;\n    }\n  });\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _useBlocklyWorkspace2 = _interopRequireDefault(require(\"./useBlocklyWorkspace\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar propTypes = {\n  initialXml: _propTypes.default.string,\n  toolboxConfiguration: _propTypes.default.object,\n  // eslint-disable-line react/forbid-prop-types\n  workspaceConfiguration: _propTypes.default.object,\n  // eslint-disable-line react/forbid-prop-types\n  className: _propTypes.default.string,\n  onWorkspaceChange: _propTypes.default.func,\n  onImportXmlError: _propTypes.default.func,\n  onXmlChange: _propTypes.default.func,\n  onInject: _propTypes.default.func,\n  onDispose: _propTypes.default.func\n};\nvar defaultProps = {\n  initialXml: null,\n  toolboxConfiguration: null,\n  workspaceConfiguration: null,\n  className: null,\n  onWorkspaceChange: null,\n  onImportXmlError: null,\n  onXmlChange: null,\n  onInject: null,\n  onDispose: null\n};\n\nfunction BlocklyWorkspace(_ref) {\n  var initialXml = _ref.initialXml,\n      toolboxConfiguration = _ref.toolboxConfiguration,\n      workspaceConfiguration = _ref.workspaceConfiguration,\n      className = _ref.className,\n      onWorkspaceChange = _ref.onWorkspaceChange,\n      onXmlChange = _ref.onXmlChange,\n      onImportXmlError = _ref.onImportXmlError,\n      onInject = _ref.onInject,\n      onDispose = _ref.onDispose;\n\n  var editorDiv = _react.default.useRef(null);\n\n  var _useBlocklyWorkspace = (0, _useBlocklyWorkspace2.default)({\n    ref: editorDiv,\n    initialXml: initialXml,\n    toolboxConfiguration: toolboxConfiguration,\n    workspaceConfiguration: workspaceConfiguration,\n    onWorkspaceChange: onWorkspaceChange,\n    onImportXmlError: onImportXmlError,\n    onInject: onInject,\n    onDispose: onDispose\n  }),\n      xml = _useBlocklyWorkspace.xml;\n\n  var onXmlChangeRef = _react.default.useRef(onXmlChange);\n\n  _react.default.useEffect(function () {\n    onXmlChangeRef.current = onXmlChange;\n  }, [onXmlChange]);\n\n  _react.default.useEffect(function () {\n    if (onXmlChangeRef.current && xml) {\n      onXmlChangeRef.current(xml);\n    }\n  }, [xml]);\n\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: className,\n    ref: editorDiv\n  });\n}\n\nBlocklyWorkspace.propTypes = propTypes;\nBlocklyWorkspace.defaultProps = defaultProps;\nvar _default = BlocklyWorkspace;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = debounce;\n\nfunction debounce(func, wait) {\n  var timeout = null;\n  var later = null;\n\n  var debouncedFunction = function debouncedFunction() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    later = function later() {\n      timeout = null;\n      func.apply(void 0, args);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n\n  var cancel = function cancel() {\n    if (timeout !== null) {\n      clearTimeout(timeout);\n      later();\n    }\n  };\n\n  return [debouncedFunction, cancel];\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"useBlocklyWorkspace\", {\n  enumerable: true,\n  get: function get() {\n    return _useBlocklyWorkspace.default;\n  }\n});\nObject.defineProperty(exports, \"BlocklyWorkspace\", {\n  enumerable: true,\n  get: function get() {\n    return _BlocklyWorkspace.default;\n  }\n});\n\nvar _useBlocklyWorkspace = _interopRequireDefault(require(\"./useBlocklyWorkspace\"));\n\nvar _BlocklyWorkspace = _interopRequireDefault(require(\"./BlocklyWorkspace\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _blockly = _interopRequireDefault(require(\"blockly\"));\n\nvar _debounce3 = _interopRequireDefault(require(\"./debounce\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction importFromXml(xml, workspace, onImportXmlError) {\n  try {\n    _blockly.default.Xml.domToWorkspace(_blockly.default.Xml.textToDom(xml), workspace);\n\n    return true;\n  } catch (e) {\n    if (onImportXmlError) {\n      onImportXmlError(e);\n    }\n\n    return false;\n  }\n}\n\nvar useBlocklyWorkspace = function useBlocklyWorkspace(_ref) {\n  var ref = _ref.ref,\n      initialXml = _ref.initialXml,\n      toolboxConfiguration = _ref.toolboxConfiguration,\n      workspaceConfiguration = _ref.workspaceConfiguration,\n      onWorkspaceChange = _ref.onWorkspaceChange,\n      onImportXmlError = _ref.onImportXmlError,\n      onInject = _ref.onInject,\n      onDispose = _ref.onDispose;\n\n  var _React$useState = _react.default.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      workspace = _React$useState2[0],\n      setWorkspace = _React$useState2[1];\n\n  var _React$useState3 = _react.default.useState(initialXml),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      xml = _React$useState4[0],\n      setXml = _React$useState4[1];\n\n  var _React$useState5 = _react.default.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      didInitialImport = _React$useState6[0],\n      setDidInitialImport = _React$useState6[1];\n\n  var _React$useState7 = _react.default.useState(false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      didHandleNewWorkspace = _React$useState8[0],\n      setDidHandleNewWorkspace = _React$useState8[1]; // we explicitly don't want to recreate the workspace when the configuration changes\n  // so, we'll keep it in a ref and update as necessary in an effect hook\n\n\n  var workspaceConfigurationRef = _react.default.useRef(workspaceConfiguration);\n\n  _react.default.useEffect(function () {\n    workspaceConfigurationRef.current = workspaceConfiguration;\n  }, [workspaceConfiguration]);\n\n  var toolboxConfigurationRef = _react.default.useRef(toolboxConfiguration);\n\n  _react.default.useEffect(function () {\n    toolboxConfigurationRef.current = toolboxConfiguration;\n\n    if (toolboxConfiguration && workspace) {\n      workspace.updateToolbox(toolboxConfiguration);\n    }\n  }, [toolboxConfiguration, workspace]);\n\n  var onInjectRef = _react.default.useRef(onInject);\n\n  var onDisposeRef = _react.default.useRef(onDispose);\n\n  _react.default.useEffect(function () {\n    onInjectRef.current = onInject;\n  }, [onInject]);\n\n  _react.default.useEffect(function () {\n    onDisposeRef.current = onDispose;\n  }, [onDispose]);\n\n  var handleWorkspaceChanged = _react.default.useCallback(function (newWorkspace) {\n    if (onWorkspaceChange) {\n      onWorkspaceChange(newWorkspace);\n    }\n  }, [onWorkspaceChange]); // Workspace creation\n\n\n  _react.default.useEffect(function () {\n    var newWorkspace = _blockly.default.inject(ref.current, _objectSpread(_objectSpread({}, workspaceConfigurationRef.current), {}, {\n      toolbox: toolboxConfigurationRef.current\n    }));\n\n    setWorkspace(newWorkspace);\n    setDidInitialImport(false); // force a re-import if we recreate the workspace\n\n    setDidHandleNewWorkspace(false); // Singal that a workspace change event needs to be sent.\n\n    if (onInjectRef.current) {\n      onInjectRef.current(newWorkspace);\n    }\n\n    var onDisposeFunction = onDisposeRef.current; // Dispose of the workspace when our div ref goes away (Equivalent to didComponentUnmount)\n\n    return function () {\n      newWorkspace.dispose();\n\n      if (onDisposeFunction) {\n        onDisposeFunction(newWorkspace);\n      }\n    };\n  }, [ref]); // Send a workspace change event when the workspace is created\n\n\n  _react.default.useEffect(function () {\n    if (workspace && !didHandleNewWorkspace) {\n      handleWorkspaceChanged(workspace);\n    }\n  }, [handleWorkspaceChanged, didHandleNewWorkspace, workspace]); // Workspace change listener\n\n\n  _react.default.useEffect(function () {\n    if (workspace == null) {\n      return undefined;\n    }\n\n    var listener = function listener() {\n      handleWorkspaceChanged(workspace);\n    };\n\n    workspace.addChangeListener(listener);\n    return function () {\n      workspace.removeChangeListener(listener);\n    };\n  }, [workspace, handleWorkspaceChanged]); // xmlDidChange callback\n\n\n  _react.default.useEffect(function () {\n    if (workspace == null) {\n      return undefined;\n    }\n\n    var _debounce = (0, _debounce3.default)(function () {\n      var newXml = _blockly.default.Xml.domToText(_blockly.default.Xml.workspaceToDom(workspace));\n\n      if (newXml === xml) {\n        return;\n      }\n\n      setXml(newXml);\n    }, 200),\n        _debounce2 = _slicedToArray(_debounce, 2),\n        callback = _debounce2[0],\n        cancel = _debounce2[1];\n\n    workspace.addChangeListener(callback);\n    return function () {\n      workspace.removeChangeListener(callback);\n      cancel();\n    };\n  }, [workspace, xml]); // Initial Xml Changes\n\n\n  _react.default.useEffect(function () {\n    if (xml && workspace && !didInitialImport) {\n      var success = importFromXml(xml, workspace, onImportXmlError);\n\n      if (!success) {\n        setXml(null);\n      }\n\n      setDidInitialImport(true);\n    }\n  }, [xml, workspace, didInitialImport, onImportXmlError]);\n\n  return {\n    workspace: workspace,\n    xml: xml\n  };\n};\n\nvar _default = useBlocklyWorkspace;\nexports.default = _default;","import { useCallback, useRef, useState } from 'react';\nimport useDebouncedCallback from './useDebouncedCallback';\n\nfunction valueEquality(left, right) {\n  return left === right;\n}\n\nfunction adjustFunctionValueOfSetState(value) {\n  return typeof value === 'function' ? function () {\n    return value;\n  } : value;\n}\n\nfunction useStateIgnoreCallback(initialState) {\n  var _a = useState(adjustFunctionValueOfSetState(initialState)),\n      state = _a[0],\n      setState = _a[1];\n\n  var setStateIgnoreCallback = useCallback(function (value) {\n    return setState(adjustFunctionValueOfSetState(value));\n  }, []);\n  return [state, setStateIgnoreCallback];\n}\n\nexport default function useDebounce(value, delay, options) {\n  var eq = options && options.equalityFn || valueEquality;\n\n  var _a = useStateIgnoreCallback(value),\n      state = _a[0],\n      dispatch = _a[1];\n\n  var debounced = useDebouncedCallback(useCallback(function (value) {\n    return dispatch(value);\n  }, [dispatch]), delay, options);\n  var previousValue = useRef(value);\n\n  if (!eq(previousValue.current, value)) {\n    debounced(value);\n    previousValue.current = value;\n  }\n\n  return [state, {\n    cancel: debounced.cancel,\n    isPending: debounced.isPending,\n    flush: debounced.flush\n  }];\n}","import { useRef, useEffect, useMemo } from 'react';\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked, or until the next browser frame is drawn. The debounced function\n * comes with a `cancel` method to cancel delayed `func` invocations and a\n * `flush` method to immediately invoke them. Provide `options` to indicate\n * whether `func` should be invoked on the leading and/or trailing edge of the\n * `wait` timeout. The `func` is invoked with the last arguments provided to the\n * debounced function. Subsequent calls to the debounced function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * If `wait` is omitted in an environment with `requestAnimationFrame`, `func`\n * invocation will be deferred until the next frame is drawn (typically about\n * 16ms).\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `debounce` and `throttle`.\n *\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0]\n *  The number of milliseconds to delay; if omitted, `requestAnimationFrame` is\n *  used (if available, otherwise it will be setTimeout(...,0)).\n * @param {Object} [options={}] The options object.\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.leading=false]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {number} [options.maxWait]\n *  Specify invoking on the trailing edge of the timeout.\n * @param {boolean} [options.trailing=true]\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * const resizeHandler = useDebouncedCallback(calculateLayout, 150);\n * window.addEventListener('resize', resizeHandler)\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * const clickHandler = useDebouncedCallback(sendMail, 300, {\n *   leading: true,\n *   trailing: false,\n * })\n * <button onClick={clickHandler}>click me</button>\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * const debounced = useDebouncedCallback(batchLog, 250, { 'maxWait': 1000 })\n * const source = new EventSource('/stream')\n * source.addEventListener('message', debounced)\n *\n * // Cancel the trailing debounced invocation.\n * window.addEventListener('popstate', debounced.cancel)\n *\n * // Check for pending invocations.\n * const status = debounced.pending() ? \"Pending...\" : \"Ready\"\n */\n\nexport default function useDebouncedCallback(func, wait, options) {\n  var _this = this;\n\n  var lastCallTime = useRef(null);\n  var lastInvokeTime = useRef(0);\n  var timerId = useRef(null);\n  var lastArgs = useRef([]);\n  var lastThis = useRef();\n  var result = useRef();\n  var funcRef = useRef(func);\n  var mounted = useRef(true);\n  funcRef.current = func; // Bypass `requestAnimationFrame` by explicitly setting `wait=0`.\n\n  var useRAF = !wait && wait !== 0 && typeof window !== 'undefined';\n\n  if (typeof func !== 'function') {\n    throw new TypeError('Expected a function');\n  }\n\n  wait = +wait || 0;\n  options = options || {};\n  var leading = !!options.leading;\n  var trailing = 'trailing' in options ? !!options.trailing : true; // `true` by default\n\n  var maxing = ('maxWait' in options);\n  var maxWait = maxing ? Math.max(+options.maxWait || 0, wait) : null;\n  useEffect(function () {\n    mounted.current = true;\n    return function () {\n      mounted.current = false;\n    };\n  }, []); // You may have a question, why we have so many code under the useMemo definition.\n  //\n  // This was made as we want to escape from useCallback hell and\n  // not to initialize a number of functions each time useDebouncedCallback is called.\n  //\n  // It means that we have less garbage for our GC calls which improves performance.\n  // Also, it makes this library smaller.\n  //\n  // And the last reason, that the code without lots of useCallback with deps is easier to read.\n  // You have only one place for that.\n\n  var debounced = useMemo(function () {\n    var invokeFunc = function invokeFunc(time) {\n      var args = lastArgs.current;\n      var thisArg = lastThis.current;\n      lastArgs.current = lastThis.current = null;\n      lastInvokeTime.current = time;\n      return result.current = funcRef.current.apply(thisArg, args);\n    };\n\n    var startTimer = function startTimer(pendingFunc, wait) {\n      if (useRAF) cancelAnimationFrame(timerId.current);\n      timerId.current = useRAF ? requestAnimationFrame(pendingFunc) : setTimeout(pendingFunc, wait);\n    };\n\n    var shouldInvoke = function shouldInvoke(time) {\n      if (!mounted.current) return false;\n      var timeSinceLastCall = time - lastCallTime.current;\n      var timeSinceLastInvoke = time - lastInvokeTime.current; // Either this is the first call, activity has stopped and we're at the\n      // trailing edge, the system time has gone backwards and we're treating\n      // it as the trailing edge, or we've hit the `maxWait` limit.\n\n      return !lastCallTime.current || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n    };\n\n    var trailingEdge = function trailingEdge(time) {\n      timerId.current = null; // Only invoke if we have `lastArgs` which means `func` has been\n      // debounced at least once.\n\n      if (trailing && lastArgs.current) {\n        return invokeFunc(time);\n      }\n\n      lastArgs.current = lastThis.current = null;\n      return result.current;\n    };\n\n    var timerExpired = function timerExpired() {\n      var time = Date.now();\n\n      if (shouldInvoke(time)) {\n        return trailingEdge(time);\n      } // https://github.com/xnimorz/use-debounce/issues/97\n\n\n      if (!mounted.current) {\n        return;\n      } // Remaining wait calculation\n\n\n      var timeSinceLastCall = time - lastCallTime.current;\n      var timeSinceLastInvoke = time - lastInvokeTime.current;\n      var timeWaiting = wait - timeSinceLastCall;\n      var remainingWait = maxing ? Math.min(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting; // Restart the timer\n\n      startTimer(timerExpired, remainingWait);\n    };\n\n    var func = function func() {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var time = Date.now();\n      var isInvoking = shouldInvoke(time);\n      lastArgs.current = args;\n      lastThis.current = _this;\n      lastCallTime.current = time;\n\n      if (isInvoking) {\n        if (!timerId.current && mounted.current) {\n          // Reset any `maxWait` timer.\n          lastInvokeTime.current = lastCallTime.current; // Start the timer for the trailing edge.\n\n          startTimer(timerExpired, wait); // Invoke the leading edge.\n\n          return leading ? invokeFunc(lastCallTime.current) : result.current;\n        }\n\n        if (maxing) {\n          // Handle invocations in a tight loop.\n          startTimer(timerExpired, wait);\n          return invokeFunc(lastCallTime.current);\n        }\n      }\n\n      if (!timerId.current) {\n        startTimer(timerExpired, wait);\n      }\n\n      return result.current;\n    };\n\n    func.cancel = function () {\n      if (timerId.current) {\n        useRAF ? cancelAnimationFrame(timerId.current) : clearTimeout(timerId.current);\n      }\n\n      lastInvokeTime.current = 0;\n      lastArgs.current = lastCallTime.current = lastThis.current = timerId.current = null;\n    };\n\n    func.isPending = function () {\n      return !!timerId.current;\n    };\n\n    func.flush = function () {\n      return !timerId.current ? result.current : trailingEdge(Date.now());\n    };\n\n    return func;\n  }, [leading, maxing, wait, maxWait, trailing, useRAF]);\n  return debounced;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;\n};\n","'use strict';\nvar toPropertyKey = require('../internals/to-property-key');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg, 3) : false;\n  var element;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var classof = require('../internals/classof');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","var anObject = require('../internals/an-object');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that, 1 + AS_ENTRIES + INTERRUPTED);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (typeof iterFn != 'function') throw TypeError('Target is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = toLength(iterable.length); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && result instanceof Result) return result;\n      } return new Result(false);\n    }\n    iterator = iterFn.call(iterable);\n  }\n\n  next = iterator.next;\n  while (!(step = next.call(iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator);\n      throw error;\n    }\n    if (typeof result == 'object' && result && result instanceof Result) return result;\n  } return new Result(false);\n};\n","var anObject = require('../internals/an-object');\n\nmodule.exports = function (iterator) {\n  var returnMethod = iterator['return'];\n  if (returnMethod !== undefined) {\n    return anObject(returnMethod.call(iterator)).value;\n  }\n};\n","module.exports = {};\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  if (iframe.style) {\n    iframe.style.display = 'none';\n    html.appendChild(iframe);\n    // https://github.com/zloirock/core-js/issues/475\n    iframe.src = String(JS);\n    iframeDocument = iframe.contentWindow.document;\n    iframeDocument.open();\n    iframeDocument.write(scriptTag('document.F=Object'));\n    iframeDocument.close();\n    return iframeDocument.F;\n  }\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = document.domain && activeXDocument ?\n    NullProtoObjectViaActiveX(activeXDocument) : // old IE\n    NullProtoObjectViaIFrame() ||\n    NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar aFunction = require('../internals/a-function');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flatMap` method\n// https://tc39.es/ecma262/#sec-array.prototype.flatmap\n$({ target: 'Array', proto: true }, {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A;\n    aFunction(callbackfn);\n    A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://tc39.es/ecma262/#sec-array.prototype.flat\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flatMap');\n","var $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar createProperty = require('../internals/create-property');\n\n// `Object.fromEntries` method\n// https://github.com/tc39/proposal-object-from-entries\n$({ target: 'Object', stat: true }, {\n  fromEntries: function fromEntries(iterable) {\n    var obj = {};\n    iterate(iterable, function (k, v) {\n      createProperty(obj, k, v);\n    }, { AS_ENTRIES: true });\n    return obj;\n  }\n});\n","export const VM_WATCH_CHANGE = \"vmWatchChange\"\nexport const VM_BREAKPOINT = \"vmBreakpoint\"\nexport const VM_COMMAND_FAILED = \"vmCommandFailed\"\nexport const VM_ROLE_MISSING = \"vmRoleMissing\"\nexport const VM_GLOBAL_CHANGE = \"vmVariableChange\"\nexport const VM_GLOBAL_TYPE_MISMATCH = \"vmDynamicTypeError\"\nexport const VM_INTERNAL_ERROR = \"vmInternalError\"\nexport const VM_LOG_ENTRY = \"vmLogEntry\"\n","import { DependencyList, useEffect } from \"react\"\n\nexport default function useWindowEvent<K extends keyof WindowEventMap>(type: K,\n    listener: (this: Window, ev: WindowEventMap[K]) => any,\n    passive = false,\n    deps: DependencyList) {\n    useEffect(() => {\n        if (typeof window === \"undefined\")\n            return undefined; // SSR\n\n        // initiate the event handler\n        window.addEventListener<K>(type, listener, passive)\n\n        // this will clean up the event every time the component is re-rendered\n        return () => {\n            window.removeEventListener<K>(type, listener)\n        }\n    }, [type, listener, passive].concat(deps || []))\n}","import { useMemo, useContext } from \"react\";\nimport { unique } from \"../../../jacdac-ts/src/jdom/utils\";\nimport { makeCodeServices } from \"./services\"\nimport useWindowEvent from \"../hooks/useWindowEvent\"\nimport MakeCodeSnippetContext from \"./MakeCodeSnippetContext\";\n\nexport interface MakeCodeSnippetSource {\n    code: string;\n    ghost?: string;\n    meta: {\n        editor?: string;\n        snippet?: boolean;\n        dependencies: string[];\n    }\n}\n\nexport interface MakeCodeSnippetRendered {\n    uri?: string;\n    width?: number;\n    height?: number;\n    error?: string;\n}\n\n\n\nexport function parseMakeCodeSnippet(source: string): MakeCodeSnippetSource {\n    let ghost: string;\n    let code: string;\n    const meta: {\n        editor?: string;\n        snippet?: boolean;\n        dependencies: string[];\n    } = {\n        dependencies: []\n    }\n\n    if (/^---\\n/.test(source)) {\n        let front: string;\n        const parts = source.replace(/^---\\n/, '').split(/---\\n/gm)\n        switch (parts.length) {\n            case 1: front = ghost = undefined; code = source; break;\n            case 2: [front, code] = parts; break;\n            default: [front, ghost, code] = parts; break;\n        }\n\n        // parse front matter\n        front?.replace(/(.+):\\s*(.+)\\s*\\n/g, (m, name, value) => {\n            switch (name) {\n                case \"dep\": meta.dependencies.push(value); break;\n                case \"snippet\": meta.snippet = !!value; break;\n                default: meta[name] = value;\n            }\n            return \"\";\n        })\n    } else {\n        code = source;\n    }\n\n    // sniff services\n    const mkcds = makeCodeServices()\n    mkcds.filter(info => {\n        const src = (ghost || \"\") + \"\\n\" + (code || \"\");\n        return src.indexOf(info.client.qName) > -1\n            || (info.client.default && src.indexOf(info.client.default) > -1);\n    }).map(info => `${info.client.name.replace(/^pxt-/, '')}=github:${info.client.repo}`)\n        .forEach(dep => meta.dependencies.push(dep));\n\n    // add jacdac by default\n    if (!meta.dependencies.length)\n        meta.dependencies.push(\"jacdac=github:microsoft/pxt-jacdac\");\n\n    // ensure unique deps\n    meta.dependencies = unique(meta.dependencies);\n\n    return {\n        code,\n        ghost,\n        meta\n    }\n}\n\ninterface RenderBlocksRequestMessage {\n    type: \"renderblocks\",\n    id: string;\n    code: string;\n    ghost?: string;\n    options?: {\n        packageId?: string;\n        package?: string;\n        snippetMode?: boolean;\n        dependencies?: string[];\n    }\n}\n\ninterface RenderBlocksResponseMessage {\n    source: \"makecode\",\n    type: \"renderblocks\",\n    id: string;\n    uri?: string;\n    css?: string;\n    svg?: string;\n    width?: number;\n    height?: number;\n    error?: string;\n}\n\ninterface RenderBlocksRequentResponse {\n    req: RenderBlocksRequestMessage,\n    resolve: (resp: RenderBlocksResponseMessage) => void,\n    reject: (e: unknown) => void\n}\n\nexport function useMakeCodeRenderer() {\n    const { target, rendererUrl } = useContext(MakeCodeSnippetContext);\n    const lang = \"\"\n    const iframeId = \"makecoderenderer\" + target;\n    const pendingRequests = useMemo<{\n        [index: string]: RenderBlocksRequentResponse\n    }>(() => ({}), [target, lang]);\n\n    const sendRequest = (req: RenderBlocksRequestMessage) => {\n        const iframe = typeof document !== \"undefined\" && document.getElementById(iframeId) as HTMLIFrameElement;\n        if (iframe?.dataset.ready)\n            iframe?.contentWindow.postMessage(req, rendererUrl);\n    }\n\n    const render = (source: MakeCodeSnippetSource): Promise<MakeCodeSnippetRendered> => {\n        const { code, ghost, meta } = source;\n        const { dependencies, snippet } = meta;\n\n        // spin up iframe on demans\n        if (typeof document !== \"undefined\" && !document.getElementById(iframeId)) {\n            console.log(`mkcd: loading iframe`)\n            const f = document.createElement(\"iframe\");\n            f.id = iframeId;\n            f.style.position = \"absolute\";\n            f.style.left = \"0\";\n            f.style.bottom = \"0\";\n            f.style.width = \"1px\";\n            f.style.height = \"1px\";\n            f.src = `${rendererUrl}?render=1${lang ? `&lang=${lang}` : ''}`;\n            document.body.appendChild(f);\n        }\n\n        const req: RenderBlocksRequestMessage = {\n            type: \"renderblocks\",\n            id: \"r\" + Math.random(),\n            code,\n            ghost,\n            options: {\n                dependencies,\n                snippetMode: snippet\n            }\n        }\n        return new Promise<RenderBlocksResponseMessage>((resolve, reject) => {\n            pendingRequests[req.id] = { req, resolve, reject }\n            sendRequest(req);\n        })\n    }\n\n    // listen for messages\n    const handleMessage = (ev: MessageEvent) => {\n        const msg = ev.data;\n        if (msg.source != \"makecode\") return;\n        switch (msg.type) {\n            case \"renderready\": {\n                console.log(`mkcd: renderer ready, ${Object.keys(pendingRequests).length} pending`)\n                const iframe = typeof document !== \"undefined\" && document.getElementById(iframeId)\n                if (iframe) {\n                    console.log(`flushing messages`)\n                    iframe.dataset.ready = \"1\"\n                    Object.keys(pendingRequests)\n                        .forEach(k => sendRequest(pendingRequests[k].req));\n                }\n                break;\n            }\n            case \"renderblocks\": {\n                const id = msg.id; // this is the id you sent\n                const r = pendingRequests[id];\n                if (!r) return;\n                delete pendingRequests[id];\n                r.resolve(msg as RenderBlocksResponseMessage);\n                break;\n            }\n        }\n    }\n\n    useWindowEvent(\"message\", handleMessage, false, [])\n\n    return {\n        render\n    }\n}\n","import { createStyles, makeStyles } from \"@material-ui/core\"\nimport React, { useContext, useEffect, useRef } from \"react\"\nimport {\n    PACKET_PROCESS,\n    PACKET_SEND,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport { PacketMessage } from \"./iframebridgeclient\"\nimport Packet from \"../../../jacdac-ts/src/jdom/packet\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport PaperBox from \"../ui/PaperBox\"\nimport MakeCodeSnippetContext from \"./MakeCodeSnippetContext\"\nimport { MakeCodeSnippetSource } from \"./useMakeCodeRenderer\"\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        root: {\n            width: \"100%\",\n        },\n        root2: {\n            position: \"relative\",\n            paddingTop: \"86.75%\",\n        },\n        iframe: {\n            position: \"absolute\",\n            left: 0,\n            top: 0,\n            border: \"none\",\n            width: \"100%\",\n            height: \"100%\",\n        },\n    })\n)\n\nexport default function MakeCodeSimulator(props: {\n    snippet: MakeCodeSnippetSource\n}) {\n    const { simUrl } = useContext(MakeCodeSnippetContext)\n    const { snippet } = props\n    const { code, ghost, meta } = snippet\n    const { dependencies } = meta\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const frameRef = useRef<HTMLIFrameElement>()\n    const classes = useStyles()\n\n    const src = `${ghost || \"\"}\\n${code || \"\"}`\n    const url = `${simUrl}#single=1&fullscren=1&nofooter=1&deps=${encodeURIComponent(\n        dependencies.join(\",\")\n    )}&code=${encodeURIComponent(src)}`\n    const origin = new URL(url).origin\n\n    useEffect(() =>\n        bus.subscribe([PACKET_SEND, PACKET_PROCESS], (pkt: Packet) => {\n            this.packetSent++\n            const msg: PacketMessage = {\n                type: \"messagepacket\",\n                channel: \"jacdac\",\n                broadcast: true,\n                data: pkt.toBuffer(),\n                sender: pkt.sender,\n            }\n            frameRef.current?.contentWindow?.postMessage(msg, origin)\n        })\n    )\n\n    return (\n        <PaperBox>\n            <div className={classes.root}>\n                <div className={classes.root2}>\n                    <iframe\n                        ref={frameRef}\n                        className={classes.iframe}\n                        src={url}\n                        title=\"MakeCode rendering iframe to generate blocks images.\"\n                    />\n                </div>\n            </div>\n        </PaperBox>\n    )\n}\n","import React, { useState, useMemo, useContext } from \"react\"\nimport PaperBox from \"../ui/PaperBox\"\nimport { Tab, Tabs } from \"@material-ui/core\"\nimport CodeBlock from \"../CodeBlock\"\nimport TabPanel from \"../ui/TabPanel\"\nimport MakeCodeSnippetContext from \"./MakeCodeSnippetContext\"\nimport { parseMakeCodeSnippet } from \"./useMakeCodeRenderer\"\nimport MakeCodeSimulator from \"./MakeCodeSimulator\"\nimport { withPrefix } from \"gatsby\"\ninterface Rendered {\n    url: string\n    width: number\n    height: number\n}\n\nexport default function MakeCodeSnippet(props: { renderedSource: string }) {\n    const { renderedSource } = props\n    const { source, rendered } = JSON.parse(renderedSource) as {\n        source: string\n        rendered: Rendered\n    }\n    const { height, width, url } = rendered || {}\n    const tabs = [\"blocks\", \"typescript\", \"sim\"]\n    const { editor, setEditor } = useContext(MakeCodeSnippetContext)\n    const [tab, setTab] = useState(tabs.indexOf(editor) || 0)\n    const handleTabChange = (\n        event: React.ChangeEvent<unknown>,\n        newValue: number\n    ) => {\n        if (newValue < tabs.length - 1) setEditor(tabs[newValue])\n        setTab(newValue)\n    }\n    const snippet = useMemo(() => parseMakeCodeSnippet(source), [source])\n    const { code } = snippet\n\n    return (\n        <PaperBox>\n            <Tabs\n                value={tab}\n                onChange={handleTabChange}\n                aria-label=\"Select MakeCode editor\"\n            >\n                <Tab label={\"Blocks\"} />\n                <Tab label={\"JavaScript\"} />\n                <Tab label={\"Simulator\"} />\n            </Tabs>\n            <TabPanel value={tab} index={0}>\n                <img src={withPrefix(url)} alt={source} loading=\"lazy\" />\n            </TabPanel>\n            <TabPanel value={tab} index={1}>\n                <CodeBlock className=\"typescript\">{code}</CodeBlock>\n            </TabPanel>\n            <TabPanel value={tab} index={2}>\n                <MakeCodeSimulator snippet={snippet} />\n            </TabPanel>\n        </PaperBox>\n    )\n}\n","import React, { lazy, ReactNode, useContext } from \"react\"\nimport Highlight, {\n    defaultProps,\n    Language,\n    PrismTheme,\n} from \"prism-react-renderer\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport LIGHT_THEME from \"prism-react-renderer/themes/github\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DARK_THEME from \"prism-react-renderer/themes/vsDark\"\nimport DarkModeContext from \"./ui/DarkModeContext\"\nimport { IconButton, Link } from \"gatsby-theme-material-ui\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport GetAppIcon from \"@material-ui/icons/GetApp\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport LaunchIcon from \"@material-ui/icons/Launch\"\nimport Tooltip from \"./ui/Tooltip\"\nimport MakeCodeSnippet from \"./makecode/MakeCodeSnippet\"\nimport Suspense from \"./ui/Suspense\"\n\nconst TraceSnippet = lazy(() => import(\"./trace/TraceSnippet\"))\nconst CodeSandboxButton = lazy(() => import(\"./ui/CodeSandboxButton\"))\n\nfunction HighlightedCode(props: {\n    children: string\n    codeSandbox?: { js: string; html: string }\n    className?: string\n    downloadName?: string\n    downloadText?: string\n    actions?: ReactNode\n    url?: string\n}) {\n    const {\n        children,\n        codeSandbox,\n        className,\n        downloadName,\n        downloadText,\n        actions,\n        url,\n    } = props\n    const { darkMode } = useContext(DarkModeContext)\n    const language = className?.replace(/language-/, \"\") || \"\"\n    const theme = (darkMode === \"dark\" ? DARK_THEME : LIGHT_THEME) as PrismTheme\n    const valueUri =\n        !!downloadText &&\n        `data:application/json;charset=UTF-8,${encodeURIComponent(\n            downloadText\n        )}`\n\n    return (\n        <Highlight\n            {...defaultProps}\n            code={children?.replace(/[\\s\\r\\n]*$/g, \"\") || \"\"}\n            language={language as Language}\n            theme={theme}\n        >\n            {({ className, style, tokens, getLineProps, getTokenProps }) => (\n                <pre className={className} style={{ ...style }}>\n                    {!!url && (\n                        <Link style={{ float: \"right\" }} href={url}>\n                            <Tooltip title={`Open ${url}`}>\n                                <IconButton>\n                                    <LaunchIcon />\n                                </IconButton>\n                            </Tooltip>\n                        </Link>\n                    )}\n                    {!!downloadText && (\n                        <Link\n                            style={{ float: \"right\" }}\n                            href={valueUri}\n                            download={downloadName || \"download\"}\n                        >\n                            <Tooltip title=\"Download\">\n                                <IconButton>\n                                    <GetAppIcon />\n                                </IconButton>\n                            </Tooltip>\n                        </Link>\n                    )}\n                    {codeSandbox && (\n                        <div style={{ float: \"right\" }}>\n                            <Suspense>\n                                <CodeSandboxButton source={codeSandbox} />\n                            </Suspense>\n                        </div>\n                    )}\n                    {actions && <div style={{ float: \"right\" }}>{actions}</div>}\n                    {tokens?.map((line, index) => {\n                        const lineProps = getLineProps({ line, key: index })\n                        return (\n                            <div key={index} {...lineProps}>\n                                {line.map((token, key) => (\n                                    <span\n                                        key={key}\n                                        {...getTokenProps({ token, key })}\n                                    />\n                                ))}\n                            </div>\n                        )\n                    })}\n                </pre>\n            )}\n        </Highlight>\n    )\n}\n\nexport default function CodeBlock(props: {\n    children: string\n    className?: string\n    downloadName?: string\n    downloadText?: string\n    actions?: ReactNode\n    url?: string\n}) {\n    const { children, className, ...rest } = props\n    const language = className?.replace(/language-/, \"\") || \"\"\n\n    switch (language) {\n        case \"trace\":\n            return (\n                <Suspense>\n                    <TraceSnippet source={children} />\n                </Suspense>\n            )\n        case \"blocks\":\n            return <MakeCodeSnippet renderedSource={children} />\n        case \"vanilla\": {\n            const [source, js, html] = children.split(/\\n-{5,}\\n/gi)\n            return (\n                <HighlightedCode\n                    {...rest}\n                    className={\"javascript\"}\n                    codeSandbox={{ js, html }}\n                >\n                    {source}\n                </HighlightedCode>\n            )\n        }\n        default:\n            return <HighlightedCode {...props} />\n    }\n}\n","import {\n    BOUND,\n    CHANGE,\n    DEVICE_ANNOUNCE,\n    DEVICE_DISCONNECT,\n    ROLE_BOUND,\n    ROLE_UNBOUND,\n    UNBOUND,\n} from \"./constants\"\nimport JDBus from \"./bus\"\nimport JDDevice from \"./device\"\nimport JDService from \"./service\"\nimport { serviceSpecificationFromClassIdentifier } from \"./spec\"\nimport { JDClient } from \"./client\"\n\n/**\n * A binding from a name to a service\n * @category Roles\n */\nexport interface RoleBinding {\n    role: string\n    serviceClass: number\n    preferredDeviceId?: string\n    service?: JDService\n}\n\n/**\n * A role manager\n * @category Roles\n */\nexport class RoleManager extends JDClient {\n    private readonly _roles: RoleBinding[] = []\n\n    /**\n     * Gets the bus for this role\n     */\n    public readonly bus: JDBus\n\n    constructor(bus: JDBus) {\n        super()\n        this.bus = bus\n        this.mount(\n            this.bus.subscribe(DEVICE_ANNOUNCE, this.addServices.bind(this))\n        )\n        this.mount(\n            this.bus.subscribe(\n                DEVICE_DISCONNECT,\n                this.removeServices.bind(this)\n            )\n        )\n\n        this.bindServices()\n    }\n\n    /**\n     * Indicates if all roles are bound.\n     */\n    get isBound() {\n        return this._roles.every(({ service }) => !!service)\n    }\n\n    /**\n     * Gets the list of roles tracked by the manager\n     */\n    roles(bound: boolean = undefined) {\n        if (bound !== undefined)\n            return this._roles.filter(({ service }) => !!service === bound)\n        else return this._roles.slice(0)\n    }\n\n    /**\n     * Updates the list of roles\n     * @param newRoles\n     */\n    updateRoles(newRoles: RoleBinding[]) {\n        const oldBound = this.isBound\n        let changed = false\n\n        // remove unknown roles\n        const supportedNewRoles = newRoles.filter(({ serviceClass }) =>\n            serviceSpecificationFromClassIdentifier(serviceClass)\n        )\n\n        // unbind removed roles\n        let i = 0\n        while (i < this._roles.length) {\n            const role = this._roles[i]\n            if (!supportedNewRoles.find(r => r.role === role.role)) {\n                changed = true\n                this._roles.splice(i, 1)\n                this.emit(ROLE_UNBOUND, role.role)\n            } else {\n                i++\n            }\n        }\n\n        // update or add roles\n        for (const newRole of supportedNewRoles) {\n            const existingRole = this._roles.find(r => r.role === newRole.role)\n            if (!existingRole) {\n                // added role\n                changed = true\n                this._roles.push({ ...newRole })\n            } else if (existingRole.serviceClass !== newRole.serviceClass) {\n                // modified type, force rebinding\n                changed = true\n                existingRole.serviceClass = newRole.serviceClass\n                if (existingRole.service) {\n                    existingRole.service = undefined\n                    this.emit(ROLE_UNBOUND, existingRole.role)\n                }\n            } // else unmodifed role\n        }\n        // bound services\n        this.bindServices(changed)\n        this.emitBoundEvents(oldBound)\n    }\n\n    /**\n     * Resolves the service bound to a given role.\n     * @param role\n     * @returns\n     */\n    public service(role: string): JDService {\n        return this._roles.find(r => r.role === role)?.service\n    }\n\n    /**\n     * Updates or creates a new role\n     * @param role name of the role\n     * @param serviceClass desired service class\n     * @param preferredDeviceId optional preferred device id\n     * @returns\n     */\n    public updateRole(\n        role: string,\n        serviceClass: number,\n        preferredDeviceId?: string\n    ) {\n        if (!serviceSpecificationFromClassIdentifier(serviceClass)) return // unknown role type\n\n        let binding = this._roles.find(r => r.role === role)\n\n        // check if we already have this role\n        if (binding && serviceClass === binding.serviceClass) {\n            if (!binding.service && preferredDeviceId) {\n                binding.preferredDeviceId = preferredDeviceId\n            }\n            return\n        }\n        const oldBound = this.isBound\n        // new role\n        binding = { role, serviceClass, preferredDeviceId }\n        this._roles.push(binding)\n        if (!this.bindRole(binding)) {\n            this.emit(ROLE_UNBOUND, role)\n        }\n        this.emit(CHANGE)\n        this.emitBoundEvents(oldBound)\n    }\n\n    private emitBoundEvents(oldBound: boolean) {\n        const bound = this.isBound\n        if (oldBound !== bound) this.emit(bound ? BOUND : UNBOUND)\n    }\n\n    // TODO: need to respect other (unbound) role's preferredDeviceId\n    private bindRole(role: RoleBinding) {\n        const ret = this.bus\n            .services({ ignoreSelf: true, serviceClass: role.serviceClass })\n            .filter(s => !this.roles(true).find(r => r.service === s))\n        if (ret.length) {\n            let theOne = ret[0]\n            if (role.preferredDeviceId) {\n                const newOne = ret.find(\n                    s => s.device.deviceId === role.preferredDeviceId\n                )\n                if (newOne) theOne = newOne\n            }\n            role.service = theOne\n            this.emit(ROLE_BOUND, role.role)\n            return true\n        }\n        return false\n    }\n\n    private bindServices(changed?: boolean) {\n        this.roles(false).forEach(binding => {\n            if (this.bindRole(binding)) changed = true\n        })\n        if (changed) this.emit(CHANGE)\n    }\n\n    private addServices(dev: JDDevice) {\n        if (dev === this.bus.selfDevice) return\n        this.bindServices()\n    }\n\n    private removeServices(dev: JDDevice) {\n        let changed = false\n        this._roles\n            .filter(r => r.service?.device === dev)\n            .forEach(r => {\n                r.service = undefined\n                this.emit(ROLE_UNBOUND, r.role)\n                changed = true\n            })\n        this.bindServices(changed)\n    }\n\n    toString() {\n        return this._roles\n            .map(({ role, service }) => `${role}->${service || \"?\"}`)\n            .join(\",\")\n    }\n}\nexport default RoleManager\n\n/**\n * Tracks a set of roles\n * @param bus bus hosting the devices\n * @param bindings map of role names to device service pairs\n * @param onUpdate callback to run whenver role assignments change\n * @param options Additional options\n * @returns A unsubscribe callback to cleanup handlers\n * @category Roles\n */\nexport function trackRoles<\n    TRoles extends Record<\n        string,\n        { serviceClass: number; preferredDeviceId?: string }\n    >\n>(\n    bus: JDBus,\n    bindings: TRoles,\n    onUpdate: (roles: Record<keyof TRoles, JDService>) => void,\n    options?: {\n        /**\n         * Calls update even if not all role around bound\n         */\n        incomplete?: boolean\n    }\n): () => void {\n    const { incomplete } = options || {}\n    const roleManager = new RoleManager(bus)\n    roleManager.updateRoles(\n        Object.keys(bindings).map(role => ({\n            role,\n            serviceClass: bindings[role].serviceClass,\n            preferredDeviceId: bindings[role].preferredDeviceId,\n        }))\n    )\n    const roles = () => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const r: Record<keyof TRoles, JDService> = {} as any\n        for (const key in bindings) {\n            const srv = roleManager.service(key)\n            if (srv) r[key] = srv\n        }\n        return r\n    }\n    const update = () => {\n        if (!incomplete && !roleManager.isBound) return\n        onUpdate(roles())\n    }\n    const unsubscribe = roleManager.subscribe(CHANGE, update)\n    update()\n    return unsubscribe\n}\n\n/*\nfunction test(bus: JDBus) {\n    const bindings = {\n        thermo1: { serviceClass: SRV_BUTTON },\n        thermo2: { serviceClass: SRV_BUTTON },\n    }\n    trackRoles(\n        bus,\n        bindings,\n        ({ thermo1, thermo2 }) => {\n            console.log({ thermo1, thermo2 })\n        },\n        { incomplete: true }\n    )\n}\n*/\n","import { useContext, useMemo } from \"react\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport RoleManager from \"../../../jacdac-ts/src/jdom/rolemanager\"\n\nexport default function useRoleManager() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const roleManager = useMemo(() => bus && new RoleManager(bus), [bus])\n    return roleManager\n}\n","import { WorkspaceJSON } from \"./dsl/workspacejson\"\nimport { visitWorkspace } from \"./dsl/workspacevisitor\"\n\nexport interface BlockWarning {\n    sourceId?: string\n    message: string\n}\n\nexport function collectWarnings(workspace: WorkspaceJSON): BlockWarning[] {\n    const warnings: BlockWarning[] = []\n    visitWorkspace(workspace, {\n        visitBlock: b => {\n            if (b.warning) warnings.push({ sourceId: b.id, message: b.warning })\n        },\n    })\n    return warnings\n}\n","import { CHANGE } from \"../../../../jacdac-ts/src/jdom/constants\"\nimport { identityTransformData, resolveBlockDefinition } from \"../toolbox\"\nimport { BlockWithServices, resolveBlockServices } from \"../WorkspaceContext\"\n\nexport function registerDataSolver(block: BlockWithServices) {\n    const { jacdacServices: services } = block\n    // register data transforms\n    const { transformData } = resolveBlockDefinition(block.type) || {}\n    if (!transformData) return\n\n    const applyTransform = async () => {\n        if (!block.isEnabled() || block.isInFlyout) return\n\n        // transfer data to the next block\n        const nextServices = resolveBlockServices(\n            block.nextConnection?.targetBlock()\n        )\n        try {\n            services.setDataWarning(undefined)\n            // eslint-disable-next-line @typescript-eslint/ban-types\n            let newData: object[]\n            if (transformData === identityTransformData) newData = services.data\n            else {\n                //const start = performance.now()\n                newData = await transformData(\n                    block,\n                    services.data,\n                    nextServices?.data\n                )\n                //const end = performance.now()\n                //console.debug(\n                //    `data ${block.type}: ${roundWithPrecision(\n                //        (end - start) / 1000,\n                //        3\n                //    )}s`\n                //)\n            }\n\n            // propagate\n            services.transformedData = newData\n\n            // check if pass through\n            const def = resolveBlockDefinition(block.type)\n            if (def?.passthroughData) newData = services.data\n\n            if (nextServices) nextServices.data = newData\n        } catch (e) {\n            console.debug(e)\n        }\n    }\n    // apply transform, then register for change\n    applyTransform().then(() => services.on(CHANGE, applyTransform))\n}\n","import Blockly from \"blockly\"\nimport Flags from \"../../../jacdac-ts/src/jdom/flags\"\nimport { SMap, toMap } from \"../../../jacdac-ts/src/jdom/utils\"\nimport BlockDomainSpecificLanguage, { resolveDsl } from \"./dsl/dsl\"\nimport { ReactFieldBase } from \"./fields/ReactFieldBase\"\nimport { VariableJSON, WorkspaceJSON, BlockJSON, InputJSON } from \"../../../jacdac-ts/src/dsl/workspacejson\"\n\nexport function domToJSON(\n    workspace: Blockly.Workspace,\n    dsls: BlockDomainSpecificLanguage[]\n): WorkspaceJSON {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const clean = (o: any) =>\n        Object.keys(o)\n            .filter(k => o[k] === undefined || o[k] === null)\n            .forEach(k => delete o[k])\n    const builtins: SMap<(block: Blockly.Block) => string | number | boolean> =\n        {\n            logic_null: () => null,\n            text: block => block.getFieldValue(\"TEXT\"),\n            math_number: block => Number(block.getFieldValue(\"NUM\") || \"0\"),\n            logic_boolean: block => block.getFieldValue(\"BOOL\") === \"TRUE\",\n        }\n\n    const variableToJSON = (variable: Blockly.VariableModel): VariableJSON => ({\n        name: variable.name,\n        type: variable.type,\n        id: variable.getId(),\n    })\n    const fieldsToJSON = (fields: Blockly.Field[]) =>\n        !fields.length\n            ? undefined\n            : toMap(\n                  fields,\n                  field => (field.name as string)?.toLowerCase(),\n                  fieldToJSON\n              )\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const xmlToJSON = (xml: Element): any => {\n        const j = {}\n        if (Flags.diagnostics) j[\"xml\"] = xml.outerHTML\n        // dump attributes\n        for (const name of xml.getAttributeNames()) {\n            const v = xml.getAttribute(name)\n            j[name.toLowerCase()] = v\n        }\n        for (const child of xml.childNodes) {\n            if (child.nodeType === Node.TEXT_NODE) j[\"value\"] = xml.textContent\n            else if (child.nodeType === Node.ELEMENT_NODE) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                const children: any[] = j[\"children\"] || (j[\"children\"] = [])\n                children.push(xmlToJSON(child as Element))\n            }\n        }\n        return j\n    }\n    const fieldToJSON = (field: Blockly.Field) => {\n        if (field.isSerializable()) {\n            // custom field can just return the value\n            if (field instanceof ReactFieldBase) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                const value = (field as ReactFieldBase<any>).value\n                return { value }\n            } else {\n                const container = Blockly.utils.xml.createElement(\"field\")\n                const fieldXml = field.toXml(container)\n                return xmlToJSON(fieldXml)\n            }\n        }\n        return undefined\n    }\n    const flattenNext = (block: BlockJSON) => {\n        // flatten the linked list of next into an array\n        const children: BlockJSON[] = []\n        let current = block.next\n        while (current) {\n            children.push(current)\n            current = current.next\n        }\n        if (children.length) {\n            block.children = children\n            block.next = undefined\n        }\n    }\n    const blockToJSON = (block: Blockly.Block): BlockJSON => {\n        const blockToJSONHidden = (block: Blockly.Block): BlockJSON => {\n            // skip disabled blocks\n            if (!block?.isEnabled()) return undefined\n            // skip over insertion markers.\n            if (block.isInsertionMarker()) {\n                const child = block.getChildren(false)[0]\n                if (child) return blockToJSON(child)\n                else return undefined\n            }\n\n            const { type } = block\n            // allow DSL to handle conversion\n            let value = builtins[block.type]?.(block)\n            if (value === undefined) {\n                const dsl = resolveDsl(dsls, type)\n                value = dsl?.blockToValue?.(block)\n            }\n            const element: BlockJSON = {\n                type: block.type,\n                id: block.id,\n                value,\n                inputs:\n                    value === undefined\n                        ? block.inputList.map(input => {\n                              const container: InputJSON = {\n                                  type: input.type,\n                                  name: input.name,\n                                  fields: fieldsToJSON(input.fieldRow),\n                                  child: blockToJSON(\n                                      input.connection?.targetBlock()\n                                  ),\n                              }\n                              return container\n                          })\n                        : undefined,\n                next: blockToJSONHidden(block.getNextBlock()),\n            }\n            clean(element)\n            return element\n        }\n        const top = blockToJSONHidden(block)\n        if (top) {\n            flattenNext(top)\n            clean(top)\n        }\n        return top\n    }\n\n    try {\n        const variables = Blockly.Variables.allUsedVarModels(workspace).sort(\n            (l, r) => l.name.localeCompare(r.name)\n        ) // stable sort name\n        const blocks = workspace.getTopBlocks(true)\n        const json: WorkspaceJSON = {\n            variables: variables.map(variableToJSON),\n            blocks: blocks.map(blockToJSON).filter(b => !!b),\n        }\n        dsls.forEach(dsl => dsl.visitWorkspaceJSON?.(workspace, json))\n        return json\n    } catch (e) {\n        console.error(e)\n        return undefined\n    }\n}\n","import Blockly from \"blockly\"\nimport { useCallback } from \"react\"\nimport ReactField from \"./fields/ReactField\"\nimport useWorkspaceEvent from \"./useWorkspaceEvent\"\n\n// do not use block context\n\nexport default function useBlocklyEvents(workspace: Blockly.WorkspaceSvg) {\n    const handleChange = useCallback(\n        (event: Blockly.Events.Abstract & { type: string }) => {\n            const { type } = event\n            switch (type) {\n                case Blockly.Events.BLOCK_CHANGE: {\n                    const change = event as Blockly.Events.Change\n                    const block = workspace.getBlockById(change.blockId)\n                    // notify twin that the value changed\n                    const twinInput = block.inputList[1]\n                    const twinField = twinInput?.fieldRow.find(\n                        f => f.name === \"twin\"\n                    ) as ReactField<unknown>\n                    twinField?.emitChange?.()\n                    break\n                }\n            }\n        },\n        [workspace]\n    )\n    useWorkspaceEvent(workspace, handleChange)\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Number slider input field.\n * @author kozbial@google.com (Monica Kozbial)\n */\nimport * as Blockly from 'blockly/core';\n/**\n * Slider field.\n */\n\nexport class FieldSlider extends Blockly.FieldNumber {\n  /**\n   * Class for an number slider field.\n   * @param {string|number=} value The initial value of the field. Should\n   *    cast to a number. Defaults to 0.\n   * @param {?(string|number)=} min Minimum value.\n   * @param {?(string|number)=} max Maximum value.\n   * @param {?(string|number)=} precision Precision for value.\n   * @param {?Function=} validator A function that is called to validate\n   *    changes to the field's value. Takes in a number & returns a validated\n   *    number, or null to abort the change.\n   * @param {Object=} config A map of options used to configure the field.\n   *    See the [field creation documentation]{@link\n   * https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/number#creation}\n   *    for a list of properties this parameter supports.\n   * @extends {Blockly.FieldNumber}\n   * @constructor\n   */\n  constructor() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n    var min = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n    var max = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n    var precision = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : undefined;\n    var validator = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : undefined;\n    var config = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : undefined;\n    super(value, min, max, precision, validator, config);\n    /**\n     * Array holding info needed to unbind events.\n     * Used for disposing.\n     * Ex: [[node, name, func], [node, name, func]].\n     * @type {!Array.<Array<?>>}\n     * @private\n     */\n\n    this.boundEvents_ = [];\n    /**\n     * The HTML range input element.\n     * @type {?HTMLInputElement}\n     * @private\n     */\n\n    this.sliderInput_ = null;\n  }\n  /**\n   * Constructs a FieldSlider from a JSON arg object.\n   * @param {!Object} options A JSON object with options (value, min, max, and\n   *                          precision).\n   * @return {!FieldSlider} The new field instance.\n   * @package\n   * @nocollapse\n   */\n\n\n  static fromJson(options) {\n    return new FieldSlider(options['value'], undefined, undefined, undefined, undefined, options);\n  }\n  /**\n   * Show the inline free-text editor on top of the text along with the slider\n   *    editor.\n   * @param {Event=} e Optional mouse event that triggered the field to\n   *     open, or undefined if triggered programmatically.\n   * @param {boolean=} _quietInput Quiet input.\n   * @protected\n   * @override\n   */\n\n\n  showEditor_() {\n    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n    var _quietInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n    // Mobile browsers have issues with in-line textareas (focus & keyboards).\n    var noFocus = Blockly.utils.userAgent.MOBILE || Blockly.utils.userAgent.ANDROID || Blockly.utils.userAgent.IPAD;\n    super.showEditor_(e, noFocus); // Build the DOM.\n\n    var editor = this.dropdownCreate_();\n    Blockly.DropDownDiv.getContentDiv().appendChild(editor);\n    Blockly.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary, this.sourceBlock_.style.colourTertiary);\n    Blockly.DropDownDiv.showPositionedByField(this, this.dropdownDispose_.bind(this));\n  }\n  /**\n   * Updates the slider when the field rerenders.\n   * @protected\n   * @override\n   */\n\n\n  render_() {\n    super.render_();\n    this.updateSlider_();\n  }\n  /**\n   * Creates the slider editor and add event listeners.\n   * @return {!Element} The newly created slider.\n   * @private\n   */\n\n\n  dropdownCreate_() {\n    var wrapper = document.createElement('div');\n    wrapper.className = 'fieldSliderContainer';\n    var sliderInput = document.createElement('input');\n    sliderInput.setAttribute('type', 'range');\n    sliderInput.setAttribute('min', this.min_);\n    sliderInput.setAttribute('max', this.max_);\n    sliderInput.setAttribute('step', this.precision_);\n    sliderInput.setAttribute('value', this.getValue());\n    sliderInput.className = 'fieldSlider';\n    wrapper.appendChild(sliderInput);\n    this.sliderInput_ = sliderInput;\n    this.boundEvents_.push(Blockly.bindEventWithChecks_(sliderInput, 'input', this, this.onSliderChange_));\n    return wrapper;\n  }\n  /**\n   * Disposes of events belonging to the slider editor.\n   * @private\n   */\n\n\n  dropdownDispose_() {\n    for (var event of this.boundEvents_) {\n      Blockly.unbindEvent_(event);\n    }\n\n    this.sliderInput_ = null;\n  }\n  /**\n   * Sets the text to match the slider's position.\n   * @private\n   */\n\n\n  onSliderChange_() {\n    this.setEditorValue_(this.sliderInput_.value);\n  }\n  /**\n   * Updates the slider when the field rerenders.\n   * @private\n   */\n\n\n  updateSlider_() {\n    if (!this.sliderInput_) {\n      return;\n    }\n\n    this.sliderInput_.setAttribute('value', this.getValue());\n  }\n\n}\nBlockly.fieldRegistry.register('field_slider', FieldSlider);\n/**\n * CSS for slider field.\n */\n\nBlockly.Css.register([\n/* eslint-disable indent */\n\".fieldSliderContainer {\\n      align-items: center;\\n      display: flex;\\n      height: 32px;\\n      justify-content: center;\\n      width: 150px;\\n    }\\n    .fieldSlider {\\n      -webkit-appearance: none;\\n      background: transparent; /* override white in chrome */\\n      margin: 4px;\\n      padding: 0;\\n      width: 100%;\\n    }\\n    .fieldSlider:focus {\\n      outline: none;\\n    }\\n    /* Webkit */\\n    .fieldSlider::-webkit-slider-runnable-track {\\n      background: #ddd;\\n      border-radius: 5px;\\n      height: 10px;\\n    }\\n    .fieldSlider::-webkit-slider-thumb {\\n      -webkit-appearance: none;\\n      background: #fff;\\n      border-radius: 50%;\\n      box-shadow: 0 0 0 4px rgba(255,255,255,.15);\\n      cursor: pointer;\\n      height: 24px;\\n      margin-top: -7px;\\n      width: 24px;\\n    }\\n    /* Firefox */\\n    .fieldSlider::-moz-range-track {\\n      background: #ddd;\\n      border-radius: 5px;\\n      height: 10px;\\n    }\\n    .fieldSlider::-moz-range-thumb {\\n      background: #fff;\\n      border: none;\\n      border-radius: 50%;\\n      box-shadow: 0 0 0 4px rgba(255,255,255,.15);\\n      cursor: pointer;\\n      height: 24px;\\n      width: 24px;\\n    }\\n    .fieldSlider::-moz-focus-outer {\\n      /* override the focus border style */\\n      border: 0;\\n    }\\n    /* IE */\\n    .fieldSlider::-ms-track {\\n      /* IE wont let the thumb overflow the track, so fake it */\\n      background: transparent;\\n      border-color: transparent;\\n      border-width: 15px 0;\\n      /* remove default tick marks */\\n      color: transparent;\\n      height: 10px;\\n      width: 100%;\\n      margin: -4px 0;\\n    }\\n    .fieldSlider::-ms-fill-lower  {\\n      background: #ddd;\\n      border-radius: 5px;\\n    }\\n    .fieldSlider::-ms-fill-upper  {\\n      background: #ddd;\\n      border-radius: 5px;\\n    }\\n    .fieldSlider::-ms-thumb {\\n      background: #fff;\\n      border: none;\\n      border-radius: 50%;\\n      box-shadow: 0 0 0 4px rgba(255,255,255,.15);\\n      cursor: pointer;\\n      height: 24px;\\n      width: 24px;\\n    }\"\n/* eslint-enable indent */\n]);","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\nexport * from './field_slider';","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Overrides methods on Blockly.InsertionMarkerManager to\n * allow blocks to hook in dynamic functionality when they have pending\n * connections.\n * @author anjali@code.org (Anjali Pal)\n */\nimport * as Blockly from 'blockly/core';\n\nBlockly.InsertionMarkerManager.prototype.update = function (dxy, deleteArea) {\n  var candidate = this.getCandidate_(dxy);\n  this.wouldDeleteBlock_ = this.shouldDelete_(candidate, deleteArea);\n  var shouldUpdate = this.wouldDeleteBlock_ || this.shouldUpdatePreviews_(candidate, dxy);\n\n  if (shouldUpdate) {\n    // Begin monkey patch\n    if (candidate.closest && candidate.closest.sourceBlock_.onPendingConnection) {\n      candidate.closest.sourceBlock_.onPendingConnection(candidate.closest);\n\n      if (!this.pendingBlocks) {\n        this.pendingBlocks = new Set();\n      }\n\n      this.pendingBlocks.add(candidate.closest.sourceBlock_);\n    } // End monkey patch\n    // Don't fire events for insertion marker creation or movement.\n\n\n    Blockly.Events.disable();\n    this.maybeHidePreview_(candidate);\n    this.maybeShowPreview_(candidate);\n    Blockly.Events.enable();\n  }\n};\n\nvar oldDispose = Blockly.InsertionMarkerManager.prototype.dispose;\n\nBlockly.InsertionMarkerManager.prototype.dispose = function () {\n  if (this.pendingBlocks) {\n    this.pendingBlocks.forEach(block => {\n      if (block.finalizeConnections) {\n        block.finalizeConnections();\n      }\n    });\n  }\n\n  oldDispose.call(this);\n};","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Defines a version of the if block with dyanmic\n *     inputs that appear when a block is dragged over inputs on the block.\n */\nimport * as Blockly from 'blockly/core';\nBlockly.Blocks['dynamic_if'] = {\n  /**\n   * Counter for the next input to add to this block.\n   * @type {number}\n   */\n  inputCounter: 1,\n\n  /**\n   * Minimum number of inputs for this block.\n   * @type {number}\n   */\n  minInputs: 1,\n\n  /**\n   * Block for if/elseif/else statements. Must have one if input.\n   * Can have any number of elseif inputs and optionally one else input.\n   * @this {Blockly.Block}\n   */\n  init: function init() {\n    this.setHelpUrl(Blockly.Msg['CONTROLS_IF_HELPURL']);\n    this.setStyle('logic_blocks');\n    this.appendValueInput('IF0').setCheck('Boolean').appendField(Blockly.Msg['CONTROLS_IF_MSG_IF'], 'if');\n    this.appendStatementInput('DO0').appendField(Blockly.Msg['CONTROLS_IF_MSG_THEN']);\n    this.setNextStatement(true);\n    this.setPreviousStatement(true);\n    this.setTooltip(Blockly.Msg['LISTS_CREATE_WITH_TOOLTIP']);\n  },\n\n  /**\n   * Create XML to represent if/elseif/else inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function mutationToDom() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    var inputNames = this.inputList.filter(input => input.name.includes('IF')).map(input => input.name.replace('IF', '')).join(',');\n    container.setAttribute('inputs', inputNames);\n    var hasElse = !!this.getInput('ELSE');\n    container.setAttribute('else', hasElse);\n    container.setAttribute('next', this.inputCounter);\n    return container;\n  },\n\n  /**\n   * Parse XML to restore the inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function domToMutation(xmlElement) {\n    var inputs = xmlElement.getAttribute('inputs');\n\n    if (inputs) {\n      var inputNumbers = inputs.split(',');\n\n      if (this.getInput('IF0')) {\n        this.removeInput('IF0');\n      }\n\n      if (this.getInput('DO0')) {\n        this.removeInput('DO0');\n      }\n\n      var first = inputNumbers[0];\n      this.appendValueInput('IF' + first).setCheck('Boolean').appendField(Blockly.Msg['CONTROLS_IF_MSG_IF'], 'if');\n      this.appendStatementInput('DO' + first).appendField(Blockly.Msg['CONTROLS_IF_MSG_THEN']);\n\n      for (var i = 1; i < inputNumbers.length; i++) {\n        this.appendValueInput('IF' + inputNumbers[i]).setCheck('Boolean').appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSEIF'], 'elseif');\n        this.appendStatementInput('DO' + inputNumbers[i]).appendField(Blockly.Msg['CONTROLS_IF_MSG_THEN']);\n      }\n    }\n\n    var hasElse = xmlElement.getAttribute('else');\n\n    if (hasElse == 'true') {\n      this.appendStatementInput('ELSE').appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSE'], 'else');\n    }\n\n    var next = parseInt(xmlElement.getAttribute('next'));\n    this.inputCounter = next;\n  },\n\n  /**\n   * Finds the index of a connection. Used to determine where in the block to\n   * insert new inputs.\n   * @param {!Blockly.Connection} connection A connection on this block.\n   * @return {?number} The index of the connection in the this.inputList.\n   */\n  findInputIndexForConnection: function findInputIndexForConnection(connection) {\n    for (var i = 0; i < this.inputList.length; i++) {\n      var input = this.inputList[i];\n\n      if (input.connection == connection) {\n        return i;\n      }\n    }\n\n    return null;\n  },\n\n  /**\n   * Inserts a boolean value input and statement input at the specified index.\n   * @param {number} index Index of the input before which to add new inputs.\n   */\n  insertElseIf: function insertElseIf(index) {\n    var caseNumber = this.inputCounter;\n    this.appendValueInput('IF' + caseNumber).setCheck('Boolean').appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSEIF'], 'elseif');\n    this.appendStatementInput('DO' + caseNumber).appendField(Blockly.Msg['CONTROLS_IF_MSG_THEN']);\n    this.moveInputBefore('IF' + caseNumber, this.inputList[index].name);\n    this.moveInputBefore('DO' + caseNumber, this.inputList[index + 1].name);\n    this.inputCounter++;\n  },\n\n  /**\n   * Called when a block is dragged over one of the connections on this block.\n   * @param {!Blockly.Connection} connection The connection on this block that\n   * has a pending connection.\n   */\n  onPendingConnection: function onPendingConnection(connection) {\n    if (connection.type === Blockly.NEXT_STATEMENT && !this.getInput('ELSE')) {\n      this.appendStatementInput('ELSE').appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSE'], 'else');\n    }\n\n    var inputIndex = this.findInputIndexForConnection(connection);\n\n    if (inputIndex === null) {\n      return;\n    }\n\n    var input = this.inputList[inputIndex];\n\n    if (connection.targetConnection && input.name.includes('IF')) {\n      var nextIfInput = this.inputList[inputIndex + 2];\n\n      if (!nextIfInput || nextIfInput.name == 'ELSE') {\n        this.insertElseIf(inputIndex + 2);\n      } else {\n        var nextIfConnection = nextIfInput && nextIfInput.connection.targetConnection;\n\n        if (nextIfConnection && !nextIfConnection.sourceBlock_.isInsertionMarker()) {\n          this.insertElseIf(inputIndex + 2);\n        }\n      }\n    }\n  },\n\n  /**\n   * Called when a block drag ends if the dragged block had a pending connection\n   * with this block.\n   */\n  finalizeConnections: function finalizeConnections() {\n    var toRemove = []; // Remove Else If inputs if neither the if nor the do has a connected block.\n\n    for (var i = 2; i < this.inputList.length - 1; i += 2) {\n      var ifConnection = this.inputList[i];\n      var doConnection = this.inputList[i + 1];\n\n      if (!ifConnection.connection.targetConnection && !doConnection.connection.targetConnection) {\n        toRemove.push(ifConnection.name);\n        toRemove.push(doConnection.name);\n      }\n    }\n\n    toRemove.forEach(input => this.removeInput(input)); // Remove Else input if it doesn't have a connected block.\n\n    var elseInput = this.getInput('ELSE');\n\n    if (elseInput && !elseInput.connection.targetConnection) {\n      this.removeInput(elseInput.name);\n    } // Remove the If input if it is empty and there is at least one Else If\n\n\n    if (this.inputList.length > 2) {\n      var ifInput = this.inputList[0];\n      var doInput = this.inputList[1];\n      var nextInput = this.inputList[2];\n\n      if (nextInput.name.includes('IF') && !ifInput.connection.targetConnection && !doInput.connection.targetConnection) {\n        this.removeInput(ifInput.name);\n        this.removeInput(doInput.name);\n        nextInput.removeField('elseif');\n        nextInput.appendField(Blockly.Msg['CONTROLS_IF_MSG_IF'], 'if');\n      }\n    }\n  }\n};","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Defines a version of the text_join block with dyanmic\n *    inputs that appear when a block is dragged over inputs on the block.\n */\nimport * as Blockly from 'blockly/core';\nBlockly.Blocks['dynamic_text_join'] = {\n  /**\n   * Counter for the next input to add to this block.\n   * @type {number}\n   */\n  inputCounter: 2,\n\n  /**\n   * Minimum number of inputs for this block.\n   * @type {number}\n   */\n  minInputs: 2,\n\n  /**\n   * Block for concatenating any number of strings.\n   * @this {Blockly.Block}\n   */\n  init: function init() {\n    this.setHelpUrl(Blockly.Msg['TEXT_JOIN_HELPURL']);\n    this.setStyle('text_blocks');\n    this.appendValueInput('ADD0').appendField(Blockly.Msg['TEXT_JOIN_TITLE_CREATEWITH']);\n    this.appendValueInput('ADD1');\n    this.setOutput(true, 'String');\n    this.setTooltip(Blockly.Msg['TEXT_JOIN_TOOLTIP']);\n  },\n\n  /**\n   * Create XML to represent number of text inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function mutationToDom() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    var inputNames = this.inputList.map(input => input.name).join(',');\n    container.setAttribute('inputs', inputNames);\n    container.setAttribute('next', this.inputCounter);\n    return container;\n  },\n\n  /**\n   * Parse XML to restore the text inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function domToMutation(xmlElement) {\n    var items = xmlElement.getAttribute('inputs');\n\n    if (items) {\n      var inputNames = items.split(',');\n      this.inputList = [];\n      inputNames.forEach(name => this.appendValueInput(name));\n      this.inputList[0].appendField(Blockly.Msg['TEXT_JOIN_TITLE_CREATEWITH']);\n    }\n\n    var next = parseInt(xmlElement.getAttribute('next'));\n    this.inputCounter = next;\n  },\n\n  /**\n   * Check whether a new input should be added and determine where it should go.\n   * @param {!Blockly.Connection} connection The connection that has a\n   *     pending connection.\n   * @return {number} The index before which to insert a new input,\n   *     or null if no input should be added.\n   */\n  getIndexForNewInput: function getIndexForNewInput(connection) {\n    if (!connection.targetConnection) {\n      // this connection is available\n      return null;\n    }\n\n    var connectionIndex;\n\n    for (var i = 0; i < this.inputList.length; i++) {\n      if (this.inputList[i].connection == connection) {\n        connectionIndex = i;\n      }\n    }\n\n    if (connectionIndex == this.inputList.length - 1) {\n      // this connection is the last one and already has a block in it, so\n      // we should add a new connection at the end.\n      return this.inputList.length + 1;\n    }\n\n    var nextInput = this.inputList[connectionIndex + 1];\n    var nextConnection = nextInput && nextInput.connection.targetConnection;\n\n    if (nextConnection && !nextConnection.sourceBlock_.isInsertionMarker()) {\n      return connectionIndex + 1;\n    } // Don't add new connection\n\n\n    return null;\n  },\n\n  /**\n   * Called when a block is dragged over one of the connections on this block.\n   * @param {!Blockly.Connection} connection The connection on this block that\n   *     has a pending connection.\n   */\n  onPendingConnection: function onPendingConnection(connection) {\n    var insertIndex = this.getIndexForNewInput(connection);\n\n    if (insertIndex == null) {\n      return;\n    }\n\n    this.appendValueInput('ADD' + this.inputCounter++);\n    this.moveNumberedInputBefore(this.inputList.length - 1, insertIndex);\n  },\n\n  /**\n   * Called when a block drag ends if the dragged block had a pending connection\n   * with this block.\n   */\n  finalizeConnections: function finalizeConnections() {\n    if (this.inputList.length > this.minInputs) {\n      var toRemove = [];\n      this.inputList.forEach(input => {\n        var targetConnection = input.connection.targetConnection;\n\n        if (!targetConnection) {\n          toRemove.push(input.name);\n        }\n      });\n\n      if (this.inputList.length - toRemove.length < this.minInputs) {\n        // Always show at least two inputs\n        toRemove = toRemove.slice(this.minInputs);\n      }\n\n      toRemove.forEach(inputName => this.removeInput(inputName)); // The first input should have the block text. If we removed the\n      // first input, add the block text to the new first input.\n\n      if (this.inputList[0].fieldRow.length == 0) {\n        this.inputList[0].appendField(Blockly.Msg['TEXT_JOIN_TITLE_CREATEWITH']);\n      }\n    }\n  }\n};","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Defines a version of the list_create block with dyanmic\n *     inputs that appear when a block is dragged over inputs on the block.\n */\nimport * as Blockly from 'blockly/core';\nBlockly.Blocks['dynamic_list_create'] = {\n  /**\n   * Counter for the next input to add to this block.\n   * @type {number}\n   */\n  inputCounter: 2,\n\n  /**\n   * Minimum number of inputs for this block.\n   * @type {number}\n   */\n  minInputs: 2,\n\n  /**\n   * Block for concatenating any number of strings.\n   * @this {Blockly.Block}\n   */\n  init: function init() {\n    this.setHelpUrl(Blockly.Msg['LISTS_CREATE_WITH_HELPURL']);\n    this.setStyle('list_blocks');\n    this.appendValueInput('ADD0').appendField(Blockly.Msg['LISTS_CREATE_WITH_INPUT_WITH']);\n    this.appendValueInput('ADD1');\n    this.setOutput(true, 'Array');\n    this.setTooltip(Blockly.Msg['LISTS_CREATE_WITH_TOOLTIP']);\n  },\n\n  /**\n   * Create XML to represent number of text inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function mutationToDom() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    var inputNames = this.inputList.map(input => input.name).join(',');\n    container.setAttribute('inputs', inputNames);\n    container.setAttribute('next', this.inputCounter);\n    return container;\n  },\n\n  /**\n   * Parse XML to restore the text inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function domToMutation(xmlElement) {\n    var items = xmlElement.getAttribute('inputs');\n\n    if (items) {\n      var inputNames = items.split(',');\n      this.inputList = [];\n      inputNames.forEach(name => this.appendValueInput(name));\n      this.inputList[0].appendField(Blockly.Msg['LISTS_CREATE_WITH_INPUT_WITH']);\n    }\n\n    var next = parseInt(xmlElement.getAttribute('next'));\n    this.inputCounter = next;\n  },\n\n  /**\n   * Check whether a new input should be added and determine where it should go.\n   * @param {!Blockly.Connection} connection The connection that has a\n   *     pending connection.\n   * @return {number} The index before which to insert a new input,\n   *     or null if no input should be added.\n   */\n  getIndexForNewInput: function getIndexForNewInput(connection) {\n    if (!connection.targetConnection) {\n      // this connection is available\n      return null;\n    }\n\n    var connectionIndex;\n\n    for (var i = 0; i < this.inputList.length; i++) {\n      if (this.inputList[i].connection == connection) {\n        connectionIndex = i;\n      }\n    }\n\n    if (connectionIndex == this.inputList.length - 1) {\n      // this connection is the last one and already has a block in it, so\n      // we should add a new connection at the end.\n      return this.inputList.length + 1;\n    }\n\n    var nextInput = this.inputList[connectionIndex + 1];\n    var nextConnection = nextInput && nextInput.connection.targetConnection;\n\n    if (nextConnection && !nextConnection.sourceBlock_.isInsertionMarker()) {\n      return connectionIndex + 1;\n    } // Don't add new connection\n\n\n    return null;\n  },\n\n  /**\n   * Called when a block is dragged over one of the connections on this block.\n   * @param {!Blockly.Connection} connection The connection on this block that\n   * has a pending connection.\n   */\n  onPendingConnection: function onPendingConnection(connection) {\n    var insertIndex = this.getIndexForNewInput(connection);\n\n    if (insertIndex == null) {\n      return;\n    }\n\n    this.appendValueInput('ADD' + this.inputCounter++);\n    this.moveNumberedInputBefore(this.inputList.length - 1, insertIndex);\n  },\n\n  /**\n   * Called when a block drag ends if the dragged block had a pending connection\n   * with this block.\n   */\n  finalizeConnections: function finalizeConnections() {\n    if (this.inputList.length > this.minInputs) {\n      var toRemove = [];\n      this.inputList.forEach(input => {\n        var targetConnection = input.connection.targetConnection;\n\n        if (!targetConnection) {\n          toRemove.push(input.name);\n        }\n      });\n\n      if (this.inputList.length - toRemove.length < this.minInputs) {\n        // Always show at least two inputs\n        toRemove = toRemove.slice(this.minInputs);\n      }\n\n      toRemove.forEach(inputName => this.removeInput(inputName)); // The first input should have the block text. If we removed the\n      // first input, add the block text to the new first input.\n\n      if (this.inputList[0].fieldRow.length == 0) {\n        this.inputList[0].appendField(Blockly.Msg['LISTS_CREATE_WITH_INPUT_WITH']);\n      }\n    }\n  }\n};","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Adds blocks that replace the built-in mutator UI with dynamic\n *     connections that appear when a block is dragged over inputs on the block.\n */\nimport './insertion_marker_manager_monkey_patch';\nimport './dynamic_if.js';\nimport './dynamic_text_join.js';\nimport './dynamic_list_create.js';\nexport var overrideOldBlockDefinitions = function overrideOldBlockDefinitions() {\n  Blockly.Blocks['list_create'] = Blockly.Blocks['dynamic_list_create'];\n  Blockly.Blocks['text_join'] = Blockly.Blocks['dynamic_text_join'];\n  Blockly.Blocks['controls_if'] = Blockly.Blocks['dynamic_if'];\n};","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Plugin for changing the context menu to match the\n * `disableOrphans` event handler.\n */\nimport * as Blockly from 'blockly/core';\n/**\n * This plugin changes the logic of the enable/disable context menu item. It is\n * enabled for all blocks except top-level blocks that have output or\n * previous connections. In other words, the option is disabled for orphan\n * blocks. Using this plugin allows users to disable valid non-orphan blocks,\n * but not re-enable blocks that have been automatically disabled by\n * `disableOrphans`.\n */\n\nexport class DisableTopBlocks {\n  /**\n   * Modifies the context menu 'disable' option as described above.\n   */\n  init() {\n    var disableMenuItem = Blockly.ContextMenuRegistry.registry.getItem('blockDisable');\n    this.oldPreconditionFn = disableMenuItem.preconditionFn;\n\n    disableMenuItem.preconditionFn = function (\n    /** @type {!Blockly.ContextMenuRegistry.Scope} */\n    scope) {\n      var block = scope.block;\n\n      if (!block.isInFlyout && block.workspace.options.disable && block.isEditable()) {\n        if (block.getInheritedDisabled() || isOrphan(block)) {\n          return 'disabled';\n        }\n\n        return 'enabled';\n      }\n\n      return 'hidden';\n    };\n  }\n  /**\n   * Turn off the effects of this plugin and restore the initial behavior.\n   * This is never required to be called. It is optional in case you need to\n   * disable the plugin.\n   */\n\n\n  dispose() {\n    var disableMenuItem = Blockly.ContextMenuRegistry.registry.getItem('blockDisable');\n    disableMenuItem.preconditionFn = this.oldPreconditionFn;\n  }\n\n}\n/**\n * A block is an orphan if its parent is an orphan, or if it doesn't have a\n * parent but it does have a previous or output connection (so it expects to be\n * attached to something). This means all children of orphan blocks are also\n * orphans and cannot be manually re-enabled.\n * @param {!Blockly.BlockSvg} block Block to check.\n * @return {boolean} Whether the block is an orphan.\n */\n\nfunction isOrphan(block) {\n  // If the parent is an orphan block, this block should also be considered\n  // an orphan so it cannot be manually re-enabled.\n  var parent = block.getParent();\n\n  if (parent && isOrphan(parent)) {\n    return true;\n  }\n\n  return !parent && !!(block.outputConnection || block.previousConnection);\n}","import Blockly, { ContextMenuRegistry } from \"blockly\"\nimport \"@blockly/field-slider\"\nimport \"@blockly/block-dynamic-connection\"\nimport { useEffect } from \"react\"\nimport { DisableTopBlocks } from \"@blockly/disable-top-blocks\"\n\n// do not use block context\n\nexport default function useBlocklyPlugins(workspace: Blockly.WorkspaceSvg) {\n    //plugins\n    useEffect(() => {\n        if (!workspace) return\n\n        // context menu stuff\n        if (ContextMenuRegistry.registry.getItem(\"blockInline\"))\n            ContextMenuRegistry.registry.unregister(\"blockInline\")\n        if (ContextMenuRegistry.registry.getItem(\"cleanWorkspace\"))\n            ContextMenuRegistry.registry.unregister(\"cleanWorkspace\")\n\n        // Add the disableOrphans event handler. This is not done automatically by\n        // the plugin and should be handled by your application.\n        workspace.addChangeListener(Blockly.Events.disableOrphans)\n\n        // The plugin must be initialized before it has any effect.\n        const disableTopBlocksPlugin = new DisableTopBlocks()\n        disableTopBlocksPlugin.init()\n        return () =>\n            workspace.removeChangeListener(Blockly.Events.disableOrphans)\n    }, [workspace])\n}\n","import Blockly from \"blockly\"\nimport { useEffect, useMemo } from \"react\"\nimport { arrayConcatMany } from \"../../../jacdac-ts/src/jdom/utils\"\nimport useServices from \"../hooks/useServices\"\nimport Flags from \"../../../jacdac-ts/src/jdom/flags\"\nimport { Theme, useTheme } from \"@material-ui/core\"\nimport { registerFields } from \"./fields/fields\"\nimport {\n    BlockDefinition,\n    BlockReference,\n    ButtonDefinition,\n    CategoryDefinition,\n    ServiceBlockDefinitionFactory,\n    ToolboxConfiguration,\n    visitToolbox,\n} from \"./toolbox\"\nimport BlockDomainSpecificLanguage from \"./dsl/dsl\"\nimport { addDataPreviewField } from \"./fields/DataPreviewField\"\nimport { WorkspaceJSON } from \"../../../jacdac-ts/src/dsl/workspacejson\"\n\n// overrides blockly emboss filter for svg elements\nBlockly.BlockSvg.prototype.setHighlighted = function (highlighted) {\n    if (!this.rendered) {\n        return\n    }\n    if (highlighted) {\n        this.addSelect()\n    } else {\n        this.removeSelect()\n    }\n}\n\ntype CachedBlockDefinitions = {\n    blocks: BlockDefinition[]\n}\n\nfunction loadBlocks(\n    dsls: BlockDomainSpecificLanguage[],\n    theme: Theme\n): CachedBlockDefinitions {\n    const blocks = arrayConcatMany(\n        dsls.map(dsl =>\n            dsl?.createBlocks?.({ theme }).map(b => {\n                addDataPreviewField(b)\n                b.dsl = dsl.id // ensure DSL is set\n                return b\n            })\n        )\n    )\n\n    // register field editors\n    registerFields()\n    // re-register blocks with blocklys\n    blocks.forEach(\n        block =>\n            (Blockly.Blocks[block.type] = <\n                ServiceBlockDefinitionFactory<BlockDefinition>\n            >{\n                jacdacDefinition: block,\n                init: function () {\n                    this.jsonInit(block)\n                },\n            })\n    )\n\n    return {\n        blocks,\n    }\n}\n\nfunction patchCategoryJSONtoXML(cat: CategoryDefinition): CategoryDefinition {\n    cat.contents\n        ?.filter(node => node.kind === \"block\")\n        .map(node => <BlockReference>node)\n        .filter(block => {\n            const exists = Blockly.Blocks[block.type]\n            if (!exists && Flags.diagnostics)\n                console.warn(\n                    `block type '${block.type}' not found, consider refreshing page...`\n                )\n            return !!block.values && exists\n        }) // avoid broken blocks\n        .forEach(block => {\n            // yup, this suck but we have to go through it\n            block.blockxml = `<block type=\"${block.type}\">${Object.keys(\n                block.values\n            )\n                .map(name => {\n                    const { type } = block.values[name]\n                    const shadow = type !== \"variables_get\"\n                    return `<value name=\"${name}\"><${\n                        shadow ? \"shadow\" : \"field\"\n                    } type=\"${type}\" /></value>`\n                })\n                .join(\"\\n\")}</block>`\n            delete block.type\n        })\n    return cat\n}\n\nexport default function useToolbox(\n    dsls: BlockDomainSpecificLanguage[],\n    source: WorkspaceJSON\n): ToolboxConfiguration {\n    const liveServices = useServices({ specification: true })\n    const theme = useTheme()\n\n    useMemo(() => loadBlocks(dsls, theme), [theme, dsls])\n    const toolboxConfiguration = useMemo(() => {\n        const dslsCategories = arrayConcatMany(\n            dsls.map(dsl =>\n                dsl?.createCategory?.({ theme, source, liveServices })\n            )\n        )\n            .filter(cat => !!cat)\n            .sort((l, r) => -(l.order - r.order))\n        const contents = dslsCategories.map(node =>\n            node.kind === \"category\"\n                ? patchCategoryJSONtoXML(node as CategoryDefinition)\n                : node\n        )\n        // remove trailing separators\n        while (contents[0]?.kind === \"sep\") contents.shift()\n        while (contents[contents.length - 1]?.kind === \"sep\") contents.pop()\n        //\n        return <ToolboxConfiguration>{\n            kind: \"categoryToolbox\",\n            contents,\n        }\n    }, [theme, dsls, source, (liveServices || []).map(srv => srv.id).join(\",\")])\n    return toolboxConfiguration\n}\n\n// do not use block context\n\nexport function useToolboxButtons(\n    workspace: Blockly.WorkspaceSvg,\n    toolboxConfiguration: ToolboxConfiguration\n) {\n    // track workspace changes and update callbacks\n    useEffect(() => {\n        if (!workspace) return\n\n        // collect buttons\n        const buttons: ButtonDefinition[] = []\n        visitToolbox(toolboxConfiguration, {\n            visitButton: btn => buttons.push(btn),\n        })\n        // register buttons\n        buttons.forEach(button =>\n            workspace.registerButtonCallback(button.callbackKey, () =>\n                button.callback(workspace)\n            )\n        )\n        // cleanup\n        return () =>\n            buttons.forEach(button =>\n                workspace.removeButtonCallback(button.callbackKey)\n            )\n    }, [workspace, toolboxConfiguration])\n}\n","import { Events, WorkspaceSvg, Xml } from \"blockly\"\nimport React, {\n    createContext,\n    ReactNode,\n    useContext,\n    useEffect,\n    useState,\n} from \"react\"\nimport { CHANGE } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { arrayConcatMany, toMap } from \"../../../jacdac-ts/src/jdom/utils\"\nimport RoleManager from \"../../../jacdac-ts/src/jdom/rolemanager\"\nimport bus from \"../../jacdac/providerbus\"\nimport useRoleManager from \"../hooks/useRoleManager\"\nimport useLocalStorage from \"../hooks/useLocalStorage\"\nimport { BlockWarning, collectWarnings } from \"./blockwarning\"\nimport { registerDataSolver } from \"./dsl/datasolver\"\nimport BlockDomainSpecificLanguage from \"./dsl/dsl\"\nimport { domToJSON } from \"./jsongenerator\"\nimport {\n    JSON_WARNINGS_CATEGORY,\n    NEW_PROJET_XML,\n    ToolboxConfiguration,\n    WORKSPACE_FILENAME,\n} from \"./toolbox\"\nimport useBlocklyEvents from \"./useBlocklyEvents\"\nimport useBlocklyPlugins from \"./useBlocklyPlugins\"\nimport useToolbox, { useToolboxButtons } from \"./useToolbox\"\nimport {\n    BlockServices,\n    BlockWithServices,\n    FieldWithServices,\n    resolveWorkspaceServices,\n    WorkspaceServices,\n    WorkspaceWithServices,\n} from \"./WorkspaceContext\"\nimport AppContext from \"../AppContext\"\nimport {\n    WorkspaceFile,\n    WorkspaceJSON,\n} from \"../../../jacdac-ts/src/dsl/workspacejson\"\nimport useEffectAsync from \"../useEffectAsync\"\nimport useChange from \"../../jacdac/useChange\"\nimport FileSystemContext from \"../FileSystemContext\"\nimport { resolveBlockWarnings } from \"./WorkspaceContext\"\n\nexport interface BlockProps {\n    editorId: string\n    setEditorId: (id: string) => void\n\n    dsls: BlockDomainSpecificLanguage[]\n    workspace: WorkspaceSvg\n    workspaceXml: string\n    workspaceJSON: WorkspaceJSON\n    toolboxConfiguration: ToolboxConfiguration\n    roleManager: RoleManager\n    dragging: boolean\n    setWorkspace: (ws: WorkspaceSvg) => void\n    setWorkspaceXml: (value: string) => void\n    setWarnings: (category: string, warnings: BlockWarning[]) => void\n}\n\nconst BlockContext = createContext<BlockProps>({\n    editorId: \"\",\n    setEditorId: () => {},\n    dsls: [],\n    workspace: undefined,\n    workspaceXml: undefined,\n    workspaceJSON: undefined,\n    toolboxConfiguration: undefined,\n    roleManager: undefined,\n    dragging: false,\n    setWarnings: () => {},\n    setWorkspace: () => {},\n    setWorkspaceXml: () => {},\n})\nBlockContext.displayName = \"Block\"\n\nconst DEFAULT_XML = '<xml xmlns=\"http://www.w3.org/1999/xhtml\"></xml>'\n\nexport default BlockContext\n\n// eslint-disable-next-line react/prop-types\nexport function BlockProvider(props: {\n    storageKey: string\n    dsls: BlockDomainSpecificLanguage[]\n    onBeforeSaveWorkspaceFile?: (file: WorkspaceFile) => void\n    children: ReactNode\n}) {\n    const { storageKey, dsls, children, onBeforeSaveWorkspaceFile } = props\n    const { setError } = useContext(AppContext)\n    const { fileSystem } = useContext(FileSystemContext)\n    const workspaceDirectory = useChange(fileSystem, _ => _?.workingDirectory)\n    const workspaceFile = useChange(workspaceDirectory, _ =>\n        _?.file(WORKSPACE_FILENAME, { create: true })\n    )\n    const [storedXml, setStoredXml] = useLocalStorage(\n        storageKey,\n        NEW_PROJET_XML\n    )\n    const roleManager = useRoleManager()\n    const [workspace, setWorkspace] = useState<WorkspaceSvg>(undefined)\n    const [workspaceXml, _setWorkspaceXml] = useState<string>(storedXml)\n    const [workspaceJSON, setWorkspaceJSON] = useState<WorkspaceJSON>(undefined)\n    const [warnings, _setWarnings] = useState<\n        {\n            category: string\n            entries: BlockWarning[]\n        }[]\n    >([])\n    const [dragging, setDragging] = useState(false)\n    const [editorId, setEditorId] = useState(\"\")\n\n    const setWorkspaceXml = (xml: string) => {\n        _setWorkspaceXml(xml)\n        setStoredXml(xml)\n    }\n\n    const setWarnings = (category: string, entries: BlockWarning[]) => {\n        const i = warnings.findIndex(w => w.category === category)\n        _setWarnings([\n            ...warnings.slice(0, i),\n            {\n                category,\n                entries,\n            },\n            ...warnings.slice(i + 1),\n        ])\n    }\n\n    const toolboxConfiguration = useToolbox(dsls, workspaceJSON)\n    const initializeBlockServices = (block: BlockWithServices) => {\n        if (block?.jacdacServices?.initialized) return\n\n        let services = block.jacdacServices\n        if (!services) {\n            services = block.jacdacServices = new BlockServices()\n            block.inputList?.forEach(i =>\n                i.fieldRow?.forEach(f =>\n                    (\n                        f as unknown as FieldWithServices\n                    ).notifyServicesChanged?.()\n                )\n            )\n        }\n        services.initialized = true\n        registerDataSolver(block)\n    }\n\n    const handleBlockChange = (blockId: string) => {\n        const block = workspace.getBlockById(blockId) as BlockWithServices\n        const services = block?.jacdacServices\n        if (block && !block.isEnabled()) {\n            services?.clearData()\n        } else services?.emit(CHANGE)\n    }\n\n    const handleWorkspaceEvent = (event: {\n        type: string\n        workspaceId: string\n    }) => {\n        const { type, workspaceId } = event\n        if (workspaceId !== workspace.id) return\n        //console.log(`blockly: ${type}`, event)\n        if (type === Events.BLOCK_DRAG) {\n            const dragEvent = event as Events.BlockDrag\n            setDragging(!!dragEvent.isStart)\n        } else if (type === Events.FINISHED_LOADING) {\n            workspace\n                .getAllBlocks(false)\n                .forEach(b => initializeBlockServices(b as BlockWithServices))\n        } else if (type === Events.BLOCK_CREATE) {\n            const bev = event as unknown as Events.BlockCreate\n            const block = workspace.getBlockById(\n                bev.blockId\n            ) as BlockWithServices\n            initializeBlockServices(block)\n        } else if (type === Events.BLOCK_MOVE) {\n            const cev = event as unknown as Events.BlockMove\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const parentId = (cev as any).newParentId\n            if (parentId) handleBlockChange(parentId)\n        } else if (type === Events.BLOCK_CHANGE) {\n            const cev = event as unknown as Events.BlockChange\n            handleBlockChange(cev.blockId)\n        }\n    }\n    // plugins\n    useBlocklyPlugins(workspace)\n    useBlocklyEvents(workspace)\n    useToolboxButtons(workspace, toolboxConfiguration)\n\n    // role manager\n    useEffect(() => {\n        const services = resolveWorkspaceServices(workspace)\n        if (services) services.roleManager = roleManager\n    }, [workspace, roleManager])\n    useEffect(() => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const wws = workspace as unknown as WorkspaceWithServices\n        if (wws && !wws.jacdacServices) {\n            wws.jacdacServices = new WorkspaceServices()\n            wws.jacdacServices.roleManager = roleManager\n        }\n    }, [workspace])\n    useEffect(() => {\n        const services = resolveWorkspaceServices(workspace)\n        if (services) services.workingDirectory = workspaceDirectory\n    }, [workspace, workspaceDirectory])\n    useEffect(() => {\n        if (!workspace || dragging) return\n\n        const newWorkspaceJSON = domToJSON(workspace, dsls)\n        setWorkspaceJSON(newWorkspaceJSON)\n        const newWarnings = collectWarnings(newWorkspaceJSON)\n        setWarnings(JSON_WARNINGS_CATEGORY, newWarnings)\n    }, [dsls, workspace, dragging, workspaceXml])\n    useEffectAsync(\n        async mounted => {\n            if (!workspaceFile) return\n            try {\n                const text = await workspaceFile.textAsync()\n                if (!mounted()) return\n\n                const json = JSON.parse(text) as WorkspaceFile\n                const { editor, xml } = json || {}\n                if (editor !== editorId) throw new Error(\"Wrong block editor\")\n                // try loading xml into a dummy blockly workspace\n                const dom = Xml.textToDom(xml || DEFAULT_XML)\n                // all good, load in workspace\n                workspace.clear()\n                Xml.domToWorkspace(dom, workspace)\n            } catch (e) {\n                if (mounted()) setError(e)\n                if (fileSystem) fileSystem.workingDirectory = undefined\n            }\n        },\n        [workspaceFile]\n    )\n    useEffectAsync(async () => {\n        if (!workspaceFile) return\n        const file: WorkspaceFile = {\n            editor: editorId,\n            xml: workspaceXml,\n            json: workspaceJSON,\n        }\n        // allow dsls to add data\n        dsls.forEach(dsl => dsl.onBeforeSaveWorkspaceFile?.(file))\n        onBeforeSaveWorkspaceFile?.(file)\n        const fileContent = JSON.stringify(file)\n        workspaceFile?.write(fileContent)\n    }, [editorId, workspaceFile, workspaceJSON])\n    useEffect(() => {\n        const services = resolveWorkspaceServices(workspace)\n        if (services) services.workspaceJSON = workspaceJSON\n    }, [workspace, workspaceJSON])\n\n    // apply errors\n    useEffect(() => {\n        if (!workspace) return\n        const allErrors = toMap(\n            arrayConcatMany(\n                warnings\n                    .map(w => w.entries)\n                    .filter(entries => !!entries?.length)\n            ),\n            e => e.sourceId || \"\",\n            e => e.message\n        )\n        workspace\n            .getAllBlocks(false)\n            .forEach(b =>\n                b.setWarningText(allErrors[b.id] || resolveBlockWarnings(b))\n            )\n    }, [workspace, warnings])\n\n    // register block creation\n    useEffect(() => {\n        const handlers = [\n            handleWorkspaceEvent,\n            ...dsls.map(dsl => dsl.createWorkspaceChangeListener?.(workspace)),\n        ].filter(c => !!c)\n        handlers.forEach(handler => workspace?.addChangeListener(handler))\n        return () =>\n            handlers?.forEach(handler =>\n                workspace?.removeChangeListener(handler)\n            )\n    }, [workspace, dsls])\n    // don't refresh registers while dragging\n    useEffect(() => {\n        bus.backgroundRefreshRegisters = !dragging\n    }, [dragging])\n    // mounting dsts\n    useEffect(() => {\n        const unmounnts = dsls.map(dsl => dsl.mount?.()).filter(u => !!u)\n        return () => unmounnts.forEach(u => u())\n    }, [])\n\n    return (\n        <BlockContext.Provider\n            value={{\n                editorId,\n                setEditorId,\n                dsls,\n                workspace,\n                workspaceXml,\n                workspaceJSON,\n                toolboxConfiguration,\n                roleManager,\n                dragging,\n                setWarnings,\n                setWorkspace,\n                setWorkspaceXml,\n            }}\n        >\n            {children}\n        </BlockContext.Provider>\n    )\n}\n","import { Grid, Typography } from \"@material-ui/core\"\nimport React, { useContext } from \"react\"\nimport CodeBlock from \"../CodeBlock\"\nimport BlockContext from \"./BlockContext\"\n\nexport default function BlockDiagnostics() {\n    const { workspaceXml, workspaceJSON } = useContext(BlockContext)\n    return (\n        <>\n            <Grid item xs={12}>\n                <Typography variant=\"subtitle1\">Blockly JSON</Typography>\n                <CodeBlock\n                    className=\"json\"\n                    downloadName={\"test.json\"}\n                    downloadText={JSON.stringify(workspaceJSON, null, 2)}\n                >\n                    {JSON.stringify(workspaceJSON, null, 2)}\n                </CodeBlock>\n            </Grid>\n            <Grid item xs={12}>\n                <Typography variant=\"subtitle1\">Blockly XML</Typography>\n                <CodeBlock className=\"xml\">{workspaceXml}</CodeBlock>\n            </Grid>\n        </>\n    )\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Modern theme.\n */\nimport Blockly from 'blockly/core';\nexport default Blockly.Theme.defineTheme('modern', {\n  'base': Blockly.Themes.Classic,\n  'blockStyles': {\n    'colour_blocks': {\n      'colourPrimary': '#a5745b',\n      'colourSecondary': '#dbc7bd',\n      'colourTertiary': '#845d49'\n    },\n    'list_blocks': {\n      'colourPrimary': '#745ba5',\n      'colourSecondary': '#c7bddb',\n      'colourTertiary': '#5d4984'\n    },\n    'logic_blocks': {\n      'colourPrimary': '#5b80a5',\n      'colourSecondary': '#bdccdb',\n      'colourTertiary': '#496684'\n    },\n    'loop_blocks': {\n      'colourPrimary': '#5ba55b',\n      'colourSecondary': '#bddbbd',\n      'colourTertiary': '#498449'\n    },\n    'math_blocks': {\n      'colourPrimary': '#5b67a5',\n      'colourSecondary': '#bdc2db',\n      'colourTertiary': '#495284'\n    },\n    'procedure_blocks': {\n      'colourPrimary': '#995ba5',\n      'colourSecondary': '#d6bddb',\n      'colourTertiary': '#7a4984'\n    },\n    'text_blocks': {\n      'colourPrimary': '#5ba58c',\n      'colourSecondary': '#bddbd1',\n      'colourTertiary': '#498470'\n    },\n    'variable_blocks': {\n      'colourPrimary': '#a55b99',\n      'colourSecondary': '#dbbdd6',\n      'colourTertiary': '#84497a'\n    },\n    'variable_dynamic_blocks': {\n      'colourPrimary': '#a55b99',\n      'colourSecondary': '#dbbdd6',\n      'colourTertiary': '#84497a'\n    },\n    'hat_blocks': {\n      'colourPrimary': '#a55b99',\n      'colourSecondary': '#dbbdd6',\n      'colourTertiary': '#84497a',\n      'hat': 'cap'\n    }\n  },\n  'categoryStyles': {\n    'colour_category': {\n      'colour': '#a5745b'\n    },\n    'list_category': {\n      'colour': '#745ba5'\n    },\n    'logic_category': {\n      'colour': '#5b80a5'\n    },\n    'loop_category': {\n      'colour': '#5ba55b'\n    },\n    'math_category': {\n      'colour': '#5b67a5'\n    },\n    'procedure_category': {\n      'colour': '#995ba5'\n    },\n    'text_category': {\n      'colour': '#5ba58c'\n    },\n    'variable_category': {\n      'colour': '#a55b99'\n    },\n    'variable_dynamic_category': {\n      'colour': '#a55b99'\n    }\n  },\n  'componentStyles': {},\n  'fontStyle': {},\n  'startHats': null\n});","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Dark theme.\n */\nimport Blockly from 'blockly/core'; // Temporarily required to ensure there's no conflict with\n// Blockly.Themes.Dark\n\nBlockly.registry.unregister('theme', 'dark');\n/**\n * Dark theme.\n */\n\nexport default Blockly.Theme.defineTheme('dark', {\n  'base': Blockly.Themes.Classic,\n  'componentStyles': {\n    'workspaceBackgroundColour': '#1e1e1e',\n    'toolboxBackgroundColour': 'blackBackground',\n    'toolboxForegroundColour': '#fff',\n    'flyoutBackgroundColour': '#252526',\n    'flyoutForegroundColour': '#ccc',\n    'flyoutOpacity': 1,\n    'scrollbarColour': '#797979',\n    'insertionMarkerColour': '#fff',\n    'insertionMarkerOpacity': 0.3,\n    'scrollbarOpacity': 0.4,\n    'cursorColour': '#d0d0d0',\n    'blackBackground': '#333'\n  }\n});","import {\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    TextField,\n} from \"@material-ui/core\"\nimport Blockly from \"blockly\"\nimport { Button } from \"gatsby-theme-material-ui\"\nimport React, { ChangeEvent, useEffect, useRef, useState } from \"react\"\nimport { useId } from \"react-use-id-hook\"\n\nexport default function BlocklyModalDialogs() {\n    const [dialogType, setDialogType] = useState<\n        \"alert\" | \"confirm\" | \"prompt\"\n    >()\n    const [message, setMessage] = useState(\"\")\n    const [value, setValue] = useState(\"\")\n    const valueId = useId()\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const callback = useRef<any>()\n    const showDialog = !!dialogType\n\n    useEffect(() => {\n        // store older\n        const previous = {\n            alert: Blockly.alert,\n            confirm: Blockly.confirm,\n            prompt: Blockly.prompt,\n        }\n\n        // replace\n        Blockly.alert = (message, cb) => {\n            setMessage(message)\n            callback.current = cb\n            setDialogType(\"alert\")\n        }\n        Blockly.confirm = (message, cb) => {\n            setMessage(message)\n            callback.current = cb\n            setDialogType(\"confirm\")\n        }\n        Blockly.prompt = (message, defaultValue, cb) => {\n            setMessage(message)\n            setValue(defaultValue)\n            callback.current = cb\n            setDialogType(\"prompt\")\n        }\n\n        // cleanup\n        return () => {\n            Blockly.alert = previous.alert\n            Blockly.confirm = previous.confirm\n            Blockly.prompt = previous.prompt\n        }\n    }, [])\n\n    const handleCloseConfirm = () => setDialogType(undefined)\n    const handleCancel = () => {\n        callback.current?.(undefined)\n        setDialogType(undefined)\n    }\n    const handleOk = () => {\n        switch (dialogType) {\n            case \"alert\":\n                callback.current?.()\n                break\n            case \"confirm\":\n                callback.current(true)\n                break\n            case \"prompt\":\n                callback.current(value)\n                break\n        }\n        setDialogType(undefined)\n    }\n    const handleValueChange = (event: ChangeEvent<HTMLInputElement>) => {\n        setValue(event.target.value)\n    }\n\n    return (\n        <Dialog open={showDialog} onClose={handleCloseConfirm}>\n            <DialogContent>\n                <DialogContentText>{message}</DialogContentText>\n                {dialogType === \"prompt\" && (\n                    <TextField\n                        id={valueId}\n                        value={value}\n                        label=\"Value\"\n                        fullWidth={true}\n                        onChange={handleValueChange}\n                    />\n                )}\n            </DialogContent>\n            <DialogActions>\n                {dialogType !== \"alert\" && (\n                    <Button variant=\"contained\" onClick={handleCancel}>\n                        Cancel\n                    </Button>\n                )}\n                <Button variant=\"contained\" color=\"primary\" onClick={handleOk}>\n                    Ok\n                </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\n","import { useTheme } from \"@material-ui/core\"\nimport {\n    BlockSvg,\n    Events,\n    IPositionable,\n    MetricsManager,\n    utils,\n    WorkspaceSvg,\n    TOOLBOX_AT_LEFT,\n    Scrollbar,\n    ComponentManager,\n} from \"blockly\"\nimport React, { useCallback, useEffect, useRef, useState } from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { arrayConcatMany } from \"../../../jacdac-ts/src/jdom/utils\"\nimport { svgPointerPoint } from \"../widgets/svgutils\"\nimport useWorkspaceEvent from \"./useWorkspaceEvent\"\n\nconst MINI_RADIUS = 16\nconst MARGIN_VERTICAL_ = 20\nconst MARGIN_HORIZONTAL_ = 20\nconst MIN_SCALE = 0.05\nconst MAX_WIDTH = 200\nconst MAX_HEIGHT = 96\n\nfunction MiniBlock(props: {\n    x: number\n    y: number\n    width: number\n    height: number\n    color: string\n}) {\n    const { x, y, width, height, color } = props\n    return (\n        <rect\n            x={x}\n            y={y}\n            width={width}\n            height={height}\n            fill={color}\n            rx={MINI_RADIUS}\n            ry={MINI_RADIUS}\n        />\n    )\n}\n\nfunction MiniViewport(props: {\n    scroll: MetricsManager.ContainerRegion\n    view: MetricsManager.ContainerRegion\n}) {\n    const { view } = props\n    const { top, left, width, height } = view\n    const { palette } = useTheme()\n    const vx = left\n    const vy = top\n\n    return (\n        <rect\n            x={vx}\n            y={vy}\n            width={width}\n            height={height}\n            strokeWidth={MINI_RADIUS >> 1}\n            stroke={palette.text.primary}\n            fill={palette.grey[400]}\n            opacity={0.2}\n            rx={MINI_RADIUS}\n            ry={MINI_RADIUS}\n        />\n    )\n}\n\nfunction BlockMiniMap(props: {\n    workspace: WorkspaceSvg\n    onSizeUpdate: (width: number, height: number) => void\n}) {\n    const { workspace, onSizeUpdate } = props\n    const svgRef = useRef<SVGSVGElement>()\n    const [metrics, setMetrics] = useState<{\n        scroll: MetricsManager.ContainerRegion\n        contents: MetricsManager.ContainerRegion\n        blocks: {\n            blockId: string\n            rect: utils.Rect\n            color: string\n        }[]\n    }>()\n    const [view, setView] = useState<MetricsManager.ContainerRegion>()\n    const handleMetrics = () => {\n        const metricsManager = workspace.getMetricsManager()\n        const view = metricsManager.getViewMetrics(true)\n        const contents = metricsManager.getContentMetrics(true)\n        const scroll = metricsManager.getScrollMetrics(true, view, contents)\n        const tops: BlockSvg[] = arrayConcatMany(\n            (workspace.getTopBlocks(false) as BlockSvg[]).map(top => [\n                top,\n                ...(top.childBlocks_ as BlockSvg[]),\n            ])\n        )\n        const blocks = tops.map(b => ({\n            blockId: b.id,\n            rect: b.getBoundingRectangle(),\n            color: b.getColour(),\n        }))\n        setMetrics({ scroll, contents, blocks })\n        setView(view)\n        onSizeUpdate(scroll.width, scroll.height)\n    }\n    const handleView = () => {\n        const metricsManager = workspace.getMetricsManager()\n        const view = metricsManager.getViewMetrics(true)\n        setView(view)\n    }\n    const handleChange = useCallback(\n        (event: { type: string } & Events.Abstract) => {\n            const { type } = event\n            switch (type) {\n                case Events.BLOCK_CREATE:\n                case Events.BLOCK_DELETE:\n                case Events.BLOCK_MOVE:\n                case Events.BLOCK_CHANGE:\n                case Events.FINISHED_LOADING:\n                    handleMetrics()\n                    break\n                case Events.VIEWPORT_CHANGE:\n                    handleView()\n                    break\n            }\n        },\n        [workspace]\n    )\n    useWorkspaceEvent(workspace, handleChange)\n    const handleCenterView = (event: React.PointerEvent<Element>) => {\n        event.preventDefault()\n        event.stopPropagation()\n        if (event.buttons < 1) return\n        const pos = svgPointerPoint(svgRef.current, event)\n        // viewHeight and viewWidth are in pixels.\n        const halfViewWidth = view.width / 2\n        const halfViewHeight = view.height / 2\n        // Put the block in the center of the visible workspace instead.\n        const scrollToCenterX = pos.x - halfViewWidth + scroll.left\n        const scrollToCenterY = pos.y - halfViewHeight + scroll.top\n        // Convert from workspace directions to canvas directions.\n        // move to center of view\n        const x = -scrollToCenterX\n        const y = -scrollToCenterY\n\n        workspace.scroll(x, y)\n    }\n    // nothing to see\n    if (!metrics || !view) return null\n\n    const { scroll, blocks } = metrics\n    const cleft = scroll.left\n    const ctop = scroll.top\n    const cwidth = scroll.width\n    const cheight = scroll.height\n\n    return (\n        <svg\n            ref={svgRef}\n            viewBox={`0 0 ${cwidth} ${cheight}`}\n            width={cwidth}\n            height={cheight}\n        >\n            <g transform={`translate(${-cleft},${-ctop})`}>\n                {blocks?.map(({ blockId, rect, color }) => (\n                    <MiniBlock\n                        key={blockId}\n                        x={rect.left}\n                        y={rect.top}\n                        width={rect.right - rect.left}\n                        height={rect.bottom - rect.top}\n                        color={color}\n                    />\n                ))}\n                {view && <MiniViewport scroll={scroll} view={view} />}\n            </g>\n            <rect\n                x={0}\n                y={0}\n                width={cwidth}\n                height={cheight}\n                fill=\"transparent\"\n                stroke={\"#aaa\"}\n                strokeWidth={24}\n                onPointerDown={handleCenterView}\n                onPointerMove={handleCenterView}\n            />\n        </svg>\n    )\n}\n\nclass MinimapPlugin implements IPositionable {\n    readonly id = 'minimap';    \n    private top_ = 0\n    private left_ = 0\n    private width_ = MAX_WIDTH\n    private height_ = MAX_HEIGHT\n    private scale_ = MIN_SCALE\n    private svgGroup_: SVGGElement\n\n    constructor(readonly workspace_: WorkspaceSvg) {\n        this.init()\n    }\n\n    private init() {\n        const componentManager = this.workspace_.getComponentManager()\n        componentManager.addComponent({\n            component: this,\n            weight: 2,\n            capabilities: [ComponentManager.Capability.POSITIONABLE],\n        })\n        this.createDom_()\n        this.workspace_.resize()\n    }\n\n    private createDom_() {\n        this.svgGroup_ = utils.dom.createSvgElement(utils.Svg.G, {\n            class: \"minimap\",\n        })\n        utils.dom.insertAfter(this.svgGroup_, this.workspace_.getBubbleCanvas())\n        ReactDOM.render(this.render(), this.svgGroup_)\n    }\n\n    private render() {\n        return (\n            <BlockMiniMap\n                workspace={this.workspace_}\n                onSizeUpdate={this.handleSizeUpdate.bind(this)}\n            />\n        )\n    }\n\n    position(metrics: MetricsManager.UiMetrics): void {\n        const hasVerticalScrollbars =\n            this.workspace_.scrollbar &&\n            this.workspace_.scrollbar.canScrollHorizontally()\n\n        if (\n            metrics.toolboxMetrics.position === TOOLBOX_AT_LEFT ||\n            (this.workspace_.horizontalLayout && !this.workspace_.RTL)\n        ) {\n            // Right corner placement.\n            this.left_ =\n                metrics.absoluteMetrics.left +\n                metrics.viewMetrics.width -\n                this.width_ -\n                MARGIN_HORIZONTAL_\n            if (hasVerticalScrollbars && !this.workspace_.RTL) {\n                this.left_ -= Scrollbar.scrollbarThickness\n            }\n        } else {\n            // Left corner placement.\n            this.left_ = MARGIN_HORIZONTAL_\n            if (hasVerticalScrollbars && this.workspace_.RTL) {\n                this.left_ += Scrollbar.scrollbarThickness\n            }\n        }\n\n        // Upper corner placement\n        this.top_ = metrics.absoluteMetrics.top + MARGIN_VERTICAL_\n\n        this.positionSvgGroup()\n    }\n\n    private positionSvgGroup() {\n        this.svgGroup_.setAttribute(\n            \"transform\",\n            `translate(${this.left_},${this.top_}) scale(${this.scale_})`\n        )\n    }\n\n    getBoundingRectangle(): utils.Rect {\n        return new utils.Rect(\n            this.top_,\n            this.top_ + this.height_,\n            this.left_,\n            this.left_ + this.width_\n        )\n    }\n\n    private handleSizeUpdate(width: number, height: number) {\n        if (width !== this.width_ || height !== this.height_) {\n            this.scale_ = Math.min(\n                MIN_SCALE,\n                Math.min(MAX_HEIGHT / height, MAX_WIDTH / width)\n            )\n            const dw = width * this.scale_ - this.width_\n            this.width_ = width * this.scale_\n            this.height_ = height * this.scale_\n            this.left_ -= dw\n            this.positionSvgGroup()\n        }\n    }\n}\n\nexport function useBlockMinimap(workspace: WorkspaceSvg) {\n    useEffect(() => {\n        if (workspace) {\n            new MinimapPlugin(workspace)\n        }\n    }, [workspace])\n}\n","import React, { useMemo } from \"react\"\nimport { getParser, Parser } from \"bowser\"\nimport Alert from \"./Alert\"\nimport { AlertTitle } from \"@material-ui/lab\"\n\nexport default function BrowserCompatibilityAlert(props: {\n    filter: Parser.checkTree,\n    label: string\n}) {\n    const { filter, label } = props\n    const compatible = useMemo(() => {\n        if (typeof window !== undefined) {\n            const browser = getParser(window.navigator.userAgent)\n            return browser.satisfies(filter)\n        }\n        return true // SSR\n    }, [JSON.stringify(filter)])\n\n    if (compatible) return null\n\n    return (\n        <Alert severity=\"warning\">\n            <AlertTitle>Browser not compatible.</AlertTitle>\n            {label}\n        </Alert>\n    )\n}\n","import React, { useContext, useEffect, useRef } from \"react\"\nimport { useBlocklyWorkspace } from \"react-blockly\"\nimport { WorkspaceSvg } from \"blockly\"\nimport Theme from \"@blockly/theme-modern\"\nimport DarkTheme from \"@blockly/theme-dark\"\nimport BlocklyModalDialogs from \"./BlocklyModalDialogs\"\nimport DarkModeContext from \"../ui/DarkModeContext\"\nimport AppContext from \"../AppContext\"\nimport { createStyles, makeStyles } from \"@material-ui/core\"\nimport clsx from \"clsx\"\nimport { withPrefix } from \"gatsby\"\nimport Flags from \"../../../jacdac-ts/src/jdom/flags\"\nimport BlockContext from \"./BlockContext\"\nimport { useBlockMinimap } from \"./BlockMinimap\"\nimport BrowserCompatibilityAlert from \"../ui/BrowserCompatibilityAlert\"\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        editor: {\n            height: `calc(100vh - ${Flags.diagnostics ? 15 : 10}rem)`,\n            \"& .blocklyTreeLabel\": {\n                fontFamily: theme.typography.fontFamily,\n            },\n            \"& .blocklyText\": {\n                fontWeight: `normal !important`,\n                fontFamily: `${theme.typography.fontFamily} !important`,\n            },\n            \"& .blocklyTreeIconOpen, & .blocklyTreeIconClosed\": {\n                opacity: 0.5,\n            },\n            \"& .blocklyFieldButton.blocklyEditableText\": {\n                cursor: \"pointer\",\n            },\n            \"& .blocklyFieldButton.blocklyEditableText > text\": {\n                fill: \"#ffffff\",\n            },\n            \"& .blocklyFieldButton.blocklyEditableText > .blocklyFieldRect\": {\n                fill: \"transparent !important\",\n            },\n        },\n    })\n)\n\nexport default function BlockEditor(props: {\n    editorId: string\n    className?: string\n}) {\n    const { editorId, className } = props\n    const {\n        toolboxConfiguration,\n        workspaceXml,\n        setWorkspace,\n        setWorkspaceXml,\n        setEditorId,\n    } = useContext(BlockContext)\n    const classes = useStyles()\n    const { darkMode } = useContext(DarkModeContext)\n    const { setError } = useContext(AppContext)\n    const theme = darkMode === \"dark\" ? DarkTheme : Theme\n\n    // setup editor id in context\n    useEffect(() => {\n        setEditorId(editorId)\n        return () => setEditorId(\"\")\n    }, [editorId])\n\n    // ReactBlockly\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const blocklyRef = useRef(null)\n    const { workspace, xml } = useBlocklyWorkspace({\n        ref: blocklyRef,\n        toolboxConfiguration,\n        workspaceConfiguration: {\n            collapse: false,\n            disable: false,\n            comments: true,\n            css: true,\n            trashcan: false,\n            sounds: false,\n            renderer: \"zelos\",\n            theme,\n            oneBasedIndex: false,\n            move: {\n                scrollbars: {\n                    vertical: true,\n                    horizontal: true,\n                },\n            },\n            media: withPrefix(\"blockly/media/\"),\n            zoom: {\n                controls: true,\n                wheel: false,\n                startScale: 1.0,\n                maxScale: 3,\n                minScale: 0.08,\n                scaleSpeed: 1.1,\n                pinch: true,\n            },\n        },\n        initialXml: workspaceXml,\n        onImportXmlError: () => setError(\"Error loading blocks...\"),\n    }) as { workspace: WorkspaceSvg; xml: string }\n\n    // store ref\n    useEffect(() => setWorkspace(workspace), [workspace])\n    useEffect(() => setWorkspaceXml(xml), [xml])\n\n    // resize blockly\n    useEffect(() => {\n        const observer = new ResizeObserver(() => workspace?.resize())\n        observer.observe(blocklyRef.current)\n        return () => observer.disconnect()\n    }, [workspace, blocklyRef.current])\n\n    useBlockMinimap(workspace)\n\n    return (\n        <div>\n            <BrowserCompatibilityAlert\n                filter={{\n                    chrome: \"> 90\",\n                    edge: \"> 90\",\n                    firefox: \"> 90\"\n                }}\n                label=\"Please use Microsoft Edge 90+ or Google Chrome 90+ for this page.\"\n            />\n            <div className={clsx(classes.editor, className)} ref={blocklyRef} />\n            <BlocklyModalDialogs />\n        </div>\n    )\n}\n","/* eslint-disable @typescript-eslint/ban-types */\nimport { Block, Events, FieldVariable, Workspace, WorkspaceSvg } from \"blockly\"\nimport React, {\n    createContext,\n    ReactNode,\n    useCallback,\n    useEffect,\n    useState,\n} from \"react\"\nimport { WorkspaceJSON } from \"../../../jacdac-ts/src/dsl/workspacejson\"\nimport { CHANGE } from \"../../../jacdac-ts/src/jdom/constants\"\nimport JDEventSource from \"../../../jacdac-ts/src/jdom/eventsource\"\nimport JDService from \"../../../jacdac-ts/src/jdom/service\"\nimport RoleManager from \"../../../jacdac-ts/src/jdom/rolemanager\"\nimport { VMProgramRunner } from \"../../../jacdac-ts/src/vm/runner\"\nimport useChange from \"../../jacdac/useChange\"\nimport { FileSystemDirectory } from \"../fs/fsdom\"\nimport ReactField from \"./fields/ReactField\"\nimport useWorkspaceEvent from \"./useWorkspaceEvent\"\n\nexport class WorkspaceServices extends JDEventSource {\n    static readonly WORKSPACE_CHANGE = \"workspaceChange\"\n\n    private _directory: FileSystemDirectory\n\n    private _workspaceJSON: WorkspaceJSON\n    private _runner: VMProgramRunner\n    private _roleManager: RoleManager\n\n    constructor() {\n        super()\n    }\n\n    get workspaceJSON() {\n        return this._workspaceJSON\n    }\n\n    set workspaceJSON(value: WorkspaceJSON) {\n        if (value !== this._workspaceJSON) {\n            this._workspaceJSON = value\n            this.emit(WorkspaceServices.WORKSPACE_CHANGE)\n        }\n    }\n\n    get runner() {\n        return this._runner\n    }\n\n    set runner(value: VMProgramRunner) {\n        if (this._runner !== value) {\n            this._runner = value\n            this.emit(CHANGE)\n        }\n    }\n\n    get roleManager() {\n        return this._roleManager\n    }\n\n    set roleManager(value: RoleManager) {\n        if (this._roleManager !== value) {\n            this._roleManager = value\n            this.emit(CHANGE)\n        }\n    }\n\n    get workingDirectory() {\n        return this._directory\n    }\n    set workingDirectory(value: FileSystemDirectory) {\n        if (this._directory !== value) {\n            this._directory = value\n            // don't notify\n        }\n    }\n}\n\nexport interface WorkspaceWithServices extends Workspace {\n    jacdacServices: WorkspaceServices\n}\n\nexport function resolveWorkspaceServices(workspace: Workspace) {\n    const workspaceWithServices = workspace as WorkspaceWithServices\n    const services = workspaceWithServices?.jacdacServices\n    return services\n}\n\nexport interface FieldWithServices {\n    notifyServicesChanged?: () => void\n}\n\nexport const DATA_WARNING_KEY = \"data\"\nexport class BlockServices extends JDEventSource {\n    private _data: object[]\n    private _transformedData: object[]\n    private _warnings: Record<string, string>\n\n    get data() {\n        return this._data\n    }\n    set data(value: object[]) {\n        if (this._data !== value) {\n            this._data = value\n            this._transformedData = undefined\n            this.emit(CHANGE)\n        }\n    }\n    get transformedData() {\n        return this._transformedData\n    }\n    set transformedData(value: object[]) {\n        if (this._transformedData !== value) {\n            this._transformedData = value\n            // don't update immediately transformed data or it\n            // generates an update loop\n        }\n    }\n\n    setDataWarning(value: string) {\n        this.setWarning(DATA_WARNING_KEY, value)\n    }\n\n    get warnings() {\n        return this._warnings\n    }\n\n    setWarning(key: string, value: string) {\n        if (!value) {\n            if (this._warnings) {\n                delete this._warnings[key]\n                if (!Object.keys(this._warnings).length)\n                    this._warnings = undefined\n            }\n        } else {\n            if (!this._warnings) this._warnings = {}\n            this._warnings[key] = value\n        }\n    }\n\n    clearData() {\n        this._data = undefined\n        this._transformedData = undefined\n        this.setWarning(DATA_WARNING_KEY, undefined)\n        this.emit(CHANGE)\n    }\n\n    readonly cache = {}\n\n    initialized = false\n}\nexport interface BlockWithServices extends Block {\n    jacdacServices: BlockServices\n}\n\nexport function resolveBlockServices(block: Block) {\n    const blockWithServices = block as BlockWithServices\n    const services = blockWithServices?.jacdacServices\n    return services\n}\n\nexport function setBlockWarning(block: Block, key: string, value: string) {\n    const services = resolveBlockServices(block)\n    services?.setWarning(key, value)\n}\n\nexport function setBlockDataWarning(block: Block, value: string) {\n    setBlockWarning(block, DATA_WARNING_KEY, value)\n}\n\nexport function resolveBlockWarnings(block: Block) {\n    const services = resolveBlockServices(block)\n    if (services) {\n        const { warnings } = services\n        if (warnings) return Object.values(warnings).join(\"\\n\")\n    }\n    return null\n}\n\nexport interface WorkspaceContextProps {\n    workspace?: WorkspaceSvg\n    dragging?: boolean\n    sourceBlock?: Block\n    sourceId?: string\n    services: WorkspaceServices\n    flyout?: boolean\n    role?: string\n    roleServiceClass?: number\n    roleService?: JDService\n    runner?: VMProgramRunner\n}\n\nexport const WorkspaceContext = createContext<WorkspaceContextProps>({\n    workspace: undefined,\n    dragging: false,\n    sourceBlock: undefined,\n    flyout: false,\n    sourceId: undefined,\n    services: undefined,\n    role: undefined,\n    roleServiceClass: undefined,\n    roleService: undefined,\n    runner: undefined,\n})\nWorkspaceContext.displayName = \"Workspace\"\n\nexport default WorkspaceContext\n\nexport function WorkspaceProvider(props: {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    field: ReactField<any>\n    children: ReactNode\n}) {\n    const { field, children } = props\n    const [sourceBlock, setSourceBlock] = useState<Block>(\n        field?.getSourceBlock()\n    )\n    const sourceId = sourceBlock?.id\n    const workspace = sourceBlock?.workspace as WorkspaceSvg\n    const services = resolveWorkspaceServices(workspace)\n    const roleManager = useChange(services, _ => _?.roleManager)\n    const runner = useChange(services, _ => _?.runner)\n    const [dragging, setDragging] = useState(!!workspace?.isDragging())\n\n    const resolveRole = () => {\n        const newSourceBlock = field.getSourceBlock()\n        const roleInput = newSourceBlock?.inputList[0]\n        const roleField = roleInput?.fieldRow.find(\n            f => f.name === \"role\" && f instanceof FieldVariable\n        ) as FieldVariable\n        if (roleField) {\n            const xml = document.createElement(\"xml\")\n            roleField?.toXml(xml)\n            const newRole = roleField?.getVariable()?.name\n            return newRole\n        }\n        return undefined\n    }\n    const resolveRoleService = () => {\n        const newRoleService = role && roleManager?.service(role)\n        return newRoleService\n    }\n\n    const [role, setRole] = useState<string>(resolveRole())\n    const [roleService, setRoleService] = useState<JDService>(\n        resolveRoleService()\n    )\n    const roleServiceClass = useChange(\n        roleManager,\n        _ => _?.roles().find(r => r.role === role)?.serviceClass\n    )\n    const [flyout, setFlyout] = useState(!!sourceBlock?.isInFlyout)\n\n    // resolve role\n    useEffect(() => {\n        return field?.events.subscribe(CHANGE, () => {\n            const newSourceBlock = field.getSourceBlock()\n            setSourceBlock(newSourceBlock)\n            setRole(resolveRole())\n            setFlyout(!!newSourceBlock?.isInFlyout)\n        })\n    }, [field, workspace, runner])\n\n    // resolve current role service\n    useEffect(() => {\n        setRoleService(resolveRoleService())\n        return roleManager?.subscribe(CHANGE, () =>\n            setRoleService(resolveRoleService())\n        )\n    }, [role, runner])\n\n    const handleWorkspaceEvent = useCallback(\n        (event: Events.Abstract & { type: string }) => {\n            const { workspaceId, type } = event\n            if (workspaceId !== workspace?.id) return\n            if (type === Events.BLOCK_DRAG) {\n                const drag = event as Events.BlockDrag\n                setDragging(!!drag?.isStart)\n            }\n        },\n        [workspace]\n    )\n    useWorkspaceEvent(workspace, handleWorkspaceEvent)\n\n    return (\n        // eslint-disable-next-line react/react-in-jsx-scope\n        <WorkspaceContext.Provider\n            value={{\n                sourceBlock,\n                workspace,\n                dragging,\n                sourceId,\n                services,\n                role,\n                roleServiceClass,\n                roleService,\n                runner,\n                flyout,\n            }}\n        >\n            {children}\n        </WorkspaceContext.Provider>\n    )\n}\n","import ScatterPlotField from \"../fields/chart/ScatterPlotField\"\nimport {\n    BlockDefinition,\n    BlockReference,\n    CategoryDefinition,\n    DataColumnInputDefinition,\n    DATA_SCIENCE_STATEMENT_TYPE,\n    DummyInputDefinition,\n    identityTransformData,\n    LabelDefinition,\n    OptionsInputDefinition,\n    SeparatorDefinition,\n    StatementInputDefinition,\n} from \"../toolbox\"\nimport BlockDomainSpecificLanguage from \"./dsl\"\nimport DataColumnChooserField from \"../fields/DataColumnChooserField\"\nimport LinePlotField from \"../fields/chart/LinePlotField\"\nimport BarChartField from \"../fields/chart/BarField\"\nimport HistogramField from \"../fields/chart/HistogramField\"\nimport DataTableField from \"../fields/DataTableField\"\nimport { paletteColorByIndex } from \"./palette\"\nimport BoxPlotField from \"../fields/chart/BoxPlotField\"\nimport VegaChartField from \"../fields/chart/VegaChartField\"\nimport type { VisualizationSpec } from \"react-vega\"\nimport type { Mark } from \"vega-lite/build/src/mark\"\nimport { tidyHeaders, tidyResolveFieldColumn } from \"../fields/tidy\"\nimport { Block } from \"blockly\"\nimport type { JSONSchema4 } from \"json-schema\"\nimport JSONSettingsField, {\n    JSONSettingsInputDefinition,\n} from \"../fields/JSONSettingsField\"\nimport HeatMapPlotField from \"../fields/chart/HeatMapField\"\n\nconst SCATTERPLOT_BLOCK = \"chart_scatterplot\"\nconst LINEPLOT_BLOCK = \"chart_lineplot\"\nconst HEATMAP_BLOCK = \"chart_heatmap\"\nconst BARCHART_BLOCK = \"chart_bar\"\nconst HISTOGRAM_BLOCK = \"chart_histogram\"\nconst BOX_PLOT_BLOCK = \"chart_box_plot\"\nconst CHART_SHOW_TABLE_BLOCK = \"chart_show_table\"\n\nconst VEGA_LAYER_BLOCK = \"vega_layer\"\nconst VEGA_ENCODING_BLOCK = \"vega_encoding\"\nconst VEGA_STATEMENT_TYPE = \"vegaStatementType\"\n\nconst chartSettingsSchema: JSONSchema4 = {\n    type: \"object\",\n    properties: {\n        title: {\n            type: \"string\",\n            title: \"Chart title\",\n        },\n    },\n}\nconst axisSchema: JSONSchema4 = {\n    type: \"object\",\n    properties: {\n        title: {\n            type: \"string\",\n            title: \"Title\",\n        },\n    },\n}\nconst scaleSchema: JSONSchema4 = {\n    type: \"object\",\n    properties: {\n        domainMin: {\n            type: \"number\",\n            title: \"minimum\",\n            description: \"Sets the minimum value in the scale domain\",\n        },\n        domainMax: {\n            type: \"number\",\n            title: \"maximum\",\n            description: \"Sets the maximum value in the scale domain\",\n        },\n    },\n}\nconst encodingSettingsSchema: JSONSchema4 = {\n    type: \"object\",\n    properties: {\n        axis: axisSchema,\n    },\n}\nconst encodingNumberSettingsSchema: JSONSchema4 = {\n    type: \"object\",\n    properties: {\n        scale: scaleSchema,\n        axis: axisSchema,\n    },\n}\nconst char2DSettingsSchema: JSONSchema4 = {\n    type: \"object\",\n    properties: {\n        title: {\n            type: \"string\",\n            title: \"Chart title\",\n        },\n        encoding: {\n            type: \"object\",\n            properties: {\n                x: {\n                    title: \"X\",\n                    ...encodingNumberSettingsSchema,\n                },\n                y: {\n                    title: \"Y\",\n                    ...encodingNumberSettingsSchema,\n                },\n            },\n        },\n    },\n}\nconst charMapSettingsSchema: JSONSchema4 = {\n    type: \"object\",\n    properties: {\n        title: {\n            type: \"string\",\n            title: \"Chart title\",\n        },\n        encoding: {\n            index: {\n                title: \"Index\",\n                ...encodingSettingsSchema,\n            },\n            value: {\n                title: \"Value\",\n                ...encodingNumberSettingsSchema,\n            },\n        },\n    },\n}\n\nconst colour = paletteColorByIndex(4)\nconst chartDsl: BlockDomainSpecificLanguage = {\n    id: \"chart\",\n    createBlocks: () => [\n        <BlockDefinition>{\n            kind: \"block\",\n            type: CHART_SHOW_TABLE_BLOCK,\n            tooltip: \"Displays the block data as a table\",\n            message0: \"show table %1 %2 %3 %4 %5 %6\",\n            args0: [\n                {\n                    type: DataColumnChooserField.KEY,\n                    name: \"column0\",\n                },\n                {\n                    type: DataColumnChooserField.KEY,\n                    name: \"column1\",\n                },\n                {\n                    type: DataColumnChooserField.KEY,\n                    name: \"column2\",\n                },\n                {\n                    type: DataColumnChooserField.KEY,\n                    name: \"column3\",\n                },\n                <DummyInputDefinition>{\n                    type: \"input_dummy\",\n                },\n                {\n                    type: DataTableField.KEY,\n                    name: \"table\",\n                    selectColumns: true,\n                },\n            ],\n            previousStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            nextStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            colour,\n            template: \"meta\",\n            inputsInline: false,\n            dataPreviewField: false,\n            transformData: identityTransformData,\n        },\n        <BlockDefinition>{\n            kind: \"block\",\n            type: SCATTERPLOT_BLOCK,\n            tooltip: \"Renders the block data in a scatter plot\",\n            message0: \"scatterplot of x %1 y %2 size %3 group %4 %5 %6 %7\",\n            args0: [\n                <DataColumnInputDefinition>{\n                    type: DataColumnChooserField.KEY,\n                    name: \"x\",\n                    dataType: \"number\",\n                },\n                <DataColumnInputDefinition>{\n                    type: DataColumnChooserField.KEY,\n                    name: \"y\",\n                    dataType: \"number\",\n                },\n                <DataColumnInputDefinition>{\n                    type: DataColumnChooserField.KEY,\n                    name: \"size\",\n                    dataType: \"number\",\n                },\n                <DataColumnInputDefinition>{\n                    type: DataColumnChooserField.KEY,\n                    name: \"group\",\n                },\n                <JSONSettingsInputDefinition>{\n                    type: JSONSettingsField.KEY,\n                    name: \"settings\",\n                    schema: char2DSettingsSchema,\n                },\n                <DummyInputDefinition>{\n                    type: \"input_dummy\",\n                },\n                {\n                    type: ScatterPlotField.KEY,\n                    name: \"plot\",\n                },\n            ],\n            previousStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            nextStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            colour,\n            template: \"meta\",\n            inputsInline: false,\n            dataPreviewField: false,\n            transformData: identityTransformData,\n        },\n        <BlockDefinition>{\n            kind: \"block\",\n            type: BARCHART_BLOCK,\n            tooltip: \"Renders the block data in a bar chart\",\n            message0: \"bar chart of index %1 value %2 %3 %4 %5\",\n            args0: [\n                <DataColumnInputDefinition>{\n                    type: DataColumnChooserField.KEY,\n                    name: \"index\",\n                },\n                <DataColumnInputDefinition>{\n                    type: DataColumnChooserField.KEY,\n                    name: \"value\",\n                    dataType: \"number\",\n                },\n                <JSONSettingsInputDefinition>{\n                    type: JSONSettingsField.KEY,\n                    name: \"settings\",\n                    schema: charMapSettingsSchema,\n                },\n                <DummyInputDefinition>{\n                    type: \"input_dummy\",\n                },\n                {\n                    type: BarChartField.KEY,\n                    name: \"plot\",\n                },\n            ],\n            previousStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            nextStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            colour,\n            template: \"meta\",\n            inputsInline: false,\n            dataPreviewField: false,\n            transformData: identityTransformData,\n        },\n        <BlockDefinition>{\n            kind: \"block\",\n            type: LINEPLOT_BLOCK,\n            tooltip: \"Renders the block data in a line chart\",\n            message0: \"line chart of x %1 y %2 group %3 %4 %5 %6\",\n            args0: [\n                <DataColumnInputDefinition>{\n                    type: DataColumnChooserField.KEY,\n                    name: \"x\",\n                    dataType: \"number\",\n                },\n                <DataColumnInputDefinition>{\n                    type: DataColumnChooserField.KEY,\n                    name: \"y\",\n                    dataType: \"number\",\n                },\n                <DataColumnInputDefinition>{\n                    type: DataColumnChooserField.KEY,\n                    name: \"group\",\n                },\n                <JSONSettingsInputDefinition>{\n                    type: JSONSettingsField.KEY,\n                    name: \"settings\",\n                    schema: char2DSettingsSchema,\n                },\n                <DummyInputDefinition>{\n                    type: \"input_dummy\",\n                },\n                {\n                    type: LinePlotField.KEY,\n                    name: \"plot\",\n                },\n            ],\n            previousStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            nextStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            colour,\n            template: \"meta\",\n            inputsInline: false,\n            dataPreviewField: false,\n            transformData: identityTransformData,\n        },\n        <BlockDefinition>{\n            kind: \"block\",\n            type: HEATMAP_BLOCK,\n            tooltip: \"Renders the block data in a 2D heatmap\",\n            message0: \"heatmap of x %1 y %2 color %3 %4 %5 %6\",\n            args0: [\n                <DataColumnInputDefinition>{\n                    type: DataColumnChooserField.KEY,\n                    name: \"x\",\n                    dataType: \"number\",\n                },\n                <DataColumnInputDefinition>{\n                    type: DataColumnChooserField.KEY,\n                    name: \"y\",\n                    dataType: \"number\",\n                },\n                <DataColumnInputDefinition>{\n                    type: DataColumnChooserField.KEY,\n                    name: \"color\",\n                },\n                <JSONSettingsInputDefinition>{\n                    type: JSONSettingsField.KEY,\n                    name: \"settings\",\n                    schema: char2DSettingsSchema,\n                },\n                <DummyInputDefinition>{\n                    type: \"input_dummy\",\n                },\n                {\n                    type: HeatMapPlotField.KEY,\n                    name: \"plot\",\n                },\n            ],\n            previousStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            nextStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            colour,\n            template: \"meta\",\n            inputsInline: false,\n            dataPreviewField: false,\n            transformData: identityTransformData,\n        },\n        <BlockDefinition>{\n            kind: \"block\",\n            type: HISTOGRAM_BLOCK,\n            tooltip: \"Renders the block data as a histogram\",\n            message0: \"histogram of %1 group %2 %3 %4 %5\",\n            args0: [\n                {\n                    type: DataColumnChooserField.KEY,\n                    name: \"index\",\n                    dataType: \"number\",\n                },\n                {\n                    type: DataColumnChooserField.KEY,\n                    name: \"group\",\n                },\n                <JSONSettingsInputDefinition>{\n                    type: JSONSettingsField.KEY,\n                    name: \"settings\",\n                    schema: chartSettingsSchema,\n                },\n                <DummyInputDefinition>{\n                    type: \"input_dummy\",\n                },\n                {\n                    type: HistogramField.KEY,\n                    name: \"plot\",\n                },\n            ],\n            previousStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            nextStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            colour,\n            template: \"meta\",\n            inputsInline: false,\n            dataPreviewField: false,\n            transformData: identityTransformData,\n        },\n        {\n            kind: \"block\",\n            type: BOX_PLOT_BLOCK,\n            message0: \"boxplot of index %1 value %2 group %3 %4 %5 %6\",\n            args0: [\n                {\n                    type: DataColumnChooserField.KEY,\n                    name: \"index\",\n                },\n                {\n                    type: DataColumnChooserField.KEY,\n                    name: \"value\",\n                    dataType: \"number\",\n                },\n                {\n                    type: DataColumnChooserField.KEY,\n                    name: \"group\",\n                },\n                <JSONSettingsInputDefinition>{\n                    type: JSONSettingsField.KEY,\n                    name: \"settings\",\n                    schema: charMapSettingsSchema,\n                },\n                <DummyInputDefinition>{\n                    type: \"input_dummy\",\n                },\n                {\n                    type: BoxPlotField.KEY,\n                    name: \"plot\",\n                },\n            ],\n            previousStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            nextStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            colour,\n            template: \"meta\",\n            inputsInline: false,\n            dataPreviewField: false,\n            transformData: identityTransformData,\n        },\n        {\n            kind: \"block\",\n            type: VEGA_LAYER_BLOCK,\n            message0: \"chart %1 %2 %3 %4 %5 %6\",\n            args0: [\n                <OptionsInputDefinition>{\n                    type: \"field_dropdown\",\n                    options: [\n                        \"arc\",\n                        \"area\",\n                        \"bar\",\n                        \"boxplot\",\n                        \"circle\",\n                        \"errorband\",\n                        \"errorbar\",\n                        \"line\",\n                        \"point\",\n                        \"rect\",\n                        \"rule\",\n                        \"square\",\n                        \"text\",\n                        \"tick\",\n                        \"trail\",\n                    ].map(s => [s, s]),\n                    name: \"mark\",\n                },\n                <JSONSettingsInputDefinition>{\n                    type: JSONSettingsField.KEY,\n                    name: \"settings\",\n                    schema: chartSettingsSchema,\n                },\n                <DummyInputDefinition>{\n                    type: \"input_dummy\",\n                },\n                <StatementInputDefinition>{\n                    type: \"input_statement\",\n                    name: \"fields\",\n                    check: VEGA_STATEMENT_TYPE,\n                },\n                <DummyInputDefinition>{\n                    type: \"input_dummy\",\n                },\n                {\n                    type: VegaChartField.KEY,\n                    name: \"chart\",\n                },\n            ],\n            previousStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            nextStatement: DATA_SCIENCE_STATEMENT_TYPE,\n            colour,\n            template: \"meta\",\n            inputsInline: false,\n            dataPreviewField: false,\n            transformData: identityTransformData,\n        },\n        {\n            kind: \"block\",\n            type: VEGA_ENCODING_BLOCK,\n            message0: \"encoding %1 as %2 type %3\",\n            args0: [\n                <OptionsInputDefinition>{\n                    type: \"field_dropdown\",\n                    options: [\n                        \"x\",\n                        \"y\",\n                        \"x2\",\n                        \"y2\",\n                        \"xError\",\n                        \"yError\",\n                        \"xError2\",\n                        \"yError2\",\n                        \"theta\",\n                        \"theta2\",\n                        \"radius\",\n                        \"radius2\",\n                        \"color\",\n                        \"angle\",\n                        \"opacity\",\n                        \"fillOpacity\",\n                        \"strokeOpacity\",\n                        \"shape\",\n                        \"size\",\n                        \"strokeDash\",\n                        \"strokeWidth\",\n                        \"text\",\n                    ].map(s => [s, s]),\n                    name: \"channel\",\n                },\n                <DataColumnInputDefinition>{\n                    type: DataColumnChooserField.KEY,\n                    name: \"field\",\n                    parentData: true\n                },\n                <OptionsInputDefinition>{\n                    type: \"field_dropdown\",\n                    options: [\n                        \"quantitative\",\n                        \"ordinal\",\n                        \"nominal\",\n                        \"temporal\",\n                    ].map(s => [s, s]),\n                    name: \"type\",\n                },\n            ],\n            previousStatement: VEGA_STATEMENT_TYPE,\n            nextStatement: VEGA_STATEMENT_TYPE,\n            colour,\n            template: \"meta\",\n            inputsInline: false,\n            dataPreviewField: false,\n            transformData: identityTransformData,\n        },\n    ],\n\n    createCategory: () => [\n        <CategoryDefinition>{\n            kind: \"category\",\n            name: \"Charts\",\n            contents: [\n                <BlockReference>{ kind: \"block\", type: SCATTERPLOT_BLOCK },\n                <BlockReference>{ kind: \"block\", type: HISTOGRAM_BLOCK },\n                <BlockReference>{ kind: \"block\", type: BOX_PLOT_BLOCK },\n                <BlockReference>{ kind: \"block\", type: BARCHART_BLOCK },\n                <BlockReference>{ kind: \"block\", type: LINEPLOT_BLOCK },\n                <BlockReference>{ kind: \"block\", type: HEATMAP_BLOCK },\n                <BlockReference>{ kind: \"block\", type: CHART_SHOW_TABLE_BLOCK },\n                <SeparatorDefinition>{\n                    kind: \"sep\",\n                },\n                <LabelDefinition>{\n                    kind: \"label\",\n                    text: \"Advanced\",\n                },\n                <BlockReference>{\n                    kind: \"block\",\n                    type: VEGA_LAYER_BLOCK,\n                },\n                <BlockReference>{\n                    kind: \"block\",\n                    type: VEGA_ENCODING_BLOCK,\n                },\n            ],\n            colour,\n        },\n    ],\n}\n\nexport default chartDsl\n\nexport function blockToVisualizationSpec(\n    sourceBlock: Block,\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    data: object[]\n): VisualizationSpec {\n    const { headers, types } = tidyHeaders(data)\n    const mark: Mark = sourceBlock.getFieldValue(\"mark\")\n    const title: string = sourceBlock.getFieldValue(\"title\")\n    const spec: VisualizationSpec = {\n        title,\n        mark: { type: mark, tooltip: true },\n        encoding: {},\n        data: { name: \"values\" },\n    }\n\n    let child = sourceBlock.getInputTargetBlock(\"fields\")\n    while (child) {\n        switch (child.type) {\n            case VEGA_ENCODING_BLOCK: {\n                const channel: string = child.getFieldValue(\"channel\")\n                const field = tidyResolveFieldColumn(data, child, \"field\")\n                const type: string = child.getFieldValue(\"type\")\n                if (channel && field) {\n                    const fieldType = types[headers.indexOf(field)]\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    spec.encoding[channel] = {\n                        field,\n                        type:\n                            type ||\n                            (fieldType === \"number\"\n                                ? \"quantitative\"\n                                : \"nominal\"),\n                    }\n                }\n                break\n            }\n        }\n\n        child = child.getNextBlock()\n    }\n\n    return spec\n}\n","import jsep from \"jsep\"\nimport { Theme } from \"@material-ui/core\"\nimport Blockly, { Block, Workspace, WorkspaceSvg } from \"blockly\"\nimport JDService from \"../../../../jacdac-ts/src/jdom/service\"\nimport { RoleEvent } from \"../../../../jacdac-ts/src/vm/compile\"\nimport { VMError } from \"../../../../jacdac-ts/src/vm/ir\"\nimport {\n    BlockDefinition,\n    ContentDefinition,\n    resolveBlockDefinition,\n    ServiceBlockDefinition,\n} from \"../toolbox\"\nimport { CmdWithErrors, ExpressionWithErrors } from \"../../vm/VMgenerator\"\nimport {\n    BlockJSON,\n    WorkspaceFile,\n    WorkspaceJSON,\n} from \"../../../../jacdac-ts/src/dsl/workspacejson\"\n\nexport interface CreateBlocksOptions {\n    theme: Theme\n}\n\nexport interface CreateCategoryOptions {\n    theme: Theme\n    source: WorkspaceJSON\n    liveServices: JDService[]\n}\n\nexport interface CompileEventToVMOptions {\n    block: BlockJSON\n    definition: ServiceBlockDefinition\n    blockToExpression: (ev: RoleEvent, block: BlockJSON) => ExpressionWithErrors\n}\n\nexport interface CompileEventToVMResult {\n    event?: RoleEvent\n    expression?: jsep.Expression\n    errors?: VMError[]\n    meta?: boolean\n}\n\nexport interface CompileExpressionToVMOptions {\n    event: RoleEvent\n    block: BlockJSON\n    definition: ServiceBlockDefinition\n    blockToExpressionInner: (ev: RoleEvent, block: BlockJSON) => jsep.Expression\n}\n\nexport interface CompileCommandToVMOptions {\n    event: RoleEvent\n    block: BlockJSON\n    definition: ServiceBlockDefinition\n    blockToExpression: (ev: RoleEvent, block: BlockJSON) => ExpressionWithErrors\n}\n\nexport default interface BlockDomainSpecificLanguage {\n    /**\n     * A unique identifier used to route blocks back to the DSL\n     */\n    id: string\n\n    /**\n     * A list of builtin block types, typically provided by Blockly\n     */\n    types?: string[]\n\n    /**\n     * Optional API to be called when mounted in the React context, returns unmounted\n     */\n    mount?: () => () => void\n\n    /**\n     * Creates blocks for the DSL\n     */\n    createBlocks?: (options: CreateBlocksOptions) => BlockDefinition[]\n\n    /***\n     * Creates a JSON category to populate the toolbox\n     */\n    createCategory?: (options: CreateCategoryOptions) => ContentDefinition[]\n\n    /**\n     * Shorthand to convert block JSON into a primitive value\n     */\n    blockToValue?: (block: Block) => string | number | boolean\n\n    /**\n     * Returns a change listener if needed\n     */\n    createWorkspaceChangeListener?: (\n        workspace: WorkspaceSvg\n    ) => (event: Blockly.Events.Abstract) => void\n\n    /**\n     * After a successfull parse and save, opportunity to walk the JSON tree\n     * and attach warnings\n     */\n    visitWorkspaceJSON?: (\n        workspace: Workspace,\n        workspaceJSON: WorkspaceJSON\n    ) => void\n\n    // VM support\n    compileEventToVM?: (\n        options: CompileEventToVMOptions\n    ) => CompileEventToVMResult\n\n    compileCommandToVM?: (options: CompileCommandToVMOptions) => CmdWithErrors\n\n    compileExpressionToVM?: (\n        options: CompileExpressionToVMOptions\n    ) => ExpressionWithErrors\n\n    onBeforeSaveWorkspaceFile?: (file: WorkspaceFile) => void\n}\n\nexport function resolveDsl(dsls: BlockDomainSpecificLanguage[], type: string) {\n    const dsl = dsls?.find(dsl => dsl.types?.indexOf(type) > -1)\n    if (dsl) return dsl\n\n    const { dsl: dslName } = resolveBlockDefinition(type) || {}\n    if (!dslName) {\n        console.warn(`unknown dsl for ${type}`)\n        return undefined\n    }\n    return dsls?.find(dsl => dsl.id === dslName)\n}\n","import { fieldShadows } from \"../fields/fields\"\nimport BlockDomainSpecificLanguage from \"./dsl\"\n\nconst fieldsDsl: BlockDomainSpecificLanguage = {\n    id: \"fields\",\n    createBlocks: () => fieldShadows(),\n}\nexport default fieldsDsl\n","// see https://developers.google.com/blockly/guides/create-custom-blocks/block-colour\n// and https://mkweb.bcgsc.ca/colorblind/palettes.mhtml#page-container\n\nconst _palette = [\n    \"#2271b2\",\n    \"#3db7e9\",\n    \"#f748a5\",\n    \"#359b73\",\n    \"#d55e00\",\n    \"e69f00\",\n]\n\nexport default function palette() {\n    return _palette.slice(0)\n}\n\nexport function paletteColorByIndex(i: number) {\n    while (i < 0) i += _palette.length\n    return _palette[i % _palette.length]\n}\n","/* eslint-disable @typescript-eslint/ban-types */\nimport workerProxy from \"./proxy\"\nimport type {\n    CsvDownloadRequest,\n    CsvSaveRequest,\n    CsvParseRequest,\n    CsvFile,\n    CsvFileResponse,\n    CsvUnparseRequest,\n    CsvUnparseResponse,\n    CsvMessage,\n} from \"../../../../workers/csv/dist/node_modules/csv.worker\"\n\nexport async function downloadCSV(url: string): Promise<CsvFile> {\n    const worker = workerProxy(\"csv\")\n    const res = await worker.postMessage<CsvDownloadRequest, CsvFileResponse>({\n        worker: \"csv\",\n        type: \"download\",\n        url,\n    })\n    return res?.file\n}\n\nexport async function saveCSV(\n    fileHandle: FileSystemFileHandle,\n    data: object[]\n): Promise<void> {\n    const worker = workerProxy(\"csv\")\n    await worker.postMessage<CsvSaveRequest, CsvMessage>({\n        worker: \"csv\",\n        type: \"save\",\n        fileHandle,\n        data,\n    })\n}\n\nexport async function unparseCSV(data: object[]): Promise<string> {\n    const worker = workerProxy(\"csv\")\n    const resp = await worker.postMessage<\n        CsvUnparseRequest,\n        CsvUnparseResponse\n    >({\n        worker: \"csv\",\n        type: \"unparse\",\n        data,\n    })\n    return resp?.text\n}\n\nexport async function parseCSV(source: string): Promise<CsvFile> {\n    const worker = workerProxy(\"csv\")\n    const resp = await worker.postMessage<CsvParseRequest, CsvFileResponse>({\n        worker: \"csv\",\n        type: \"parse\",\n        source,\n    })\n    return resp?.file\n}\n","import type {\n    DataRequest,\n    DataMessage,\n} from \"../../../../workers/data/dist/node_modules/data.worker\"\nimport workerProxy from \"./proxy\"\n\nexport default async function postTransformData(\n    message: DataRequest\n    // eslint-disable-next-line @typescript-eslint/ban-types\n): Promise<object[]> {\n    // check for missing data\n    if (!message.data) return undefined\n    const worker = workerProxy(\"data\")\n    const res = await worker.postMessage<DataRequest, DataMessage>(message)\n    return res?.data\n}\n","import { BlockJSON, FieldJSON, InputJSON, WorkspaceJSON } from \"./workspacejson\"\n\nexport interface WorkspaceVisitor {\n    visitBlock?: (block: BlockJSON) => void\n    visitInput?: (input: InputJSON) => void\n    visitField?: (name: string, field: FieldJSON) => void\n}\n\nexport function visitBlock(block: BlockJSON, visitor: WorkspaceVisitor) {\n    if (!block) return\n    visitor.visitBlock?.(block)\n    const { inputs, children } = block\n    inputs?.forEach(input => visitInput(input, visitor))\n    children?.forEach(child => visitBlock(child, visitor))\n}\n\nexport function visitInput(input: InputJSON, visitor: WorkspaceVisitor) {\n    if (!input) return\n    visitor.visitInput?.(input)\n    const { fields, child } = input\n    if (fields) Object.keys(fields).map(k => visitField(k, fields[k], visitor))\n    visitBlock(child, visitor)\n}\n\nexport function visitField(\n    name: string,\n    field: FieldJSON,\n    visitor: WorkspaceVisitor\n) {\n    if (!field) return\n    visitor.visitField?.(name, field)\n}\n\nexport function visitWorkspace(\n    workspace: WorkspaceJSON,\n    visitor: WorkspaceVisitor\n) {\n    workspace?.blocks?.forEach(block => visitBlock(block, visitor))\n}\n","import { BlockWithServices, FieldWithServices } from \"../WorkspaceContext\"\nimport { Block, FieldDropdown } from \"blockly\"\nimport { withPrefix } from \"gatsby\"\nimport { downloadCSV } from \"../dsl/workers/csv.proxy\"\n\nconst builtins = {\n    cereal: withPrefix(\"/datasets/cereal.csv\"),\n    penguins: withPrefix(\"/datasets/penguins.csv\"),\n}\n\nexport default class BuiltinDataSetField\n    extends FieldDropdown\n    implements FieldWithServices\n{\n    static KEY = \"jacdac_field_data_builtin_dataset\"\n    private initialized = false\n\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    static fromJson(options: object) {\n        return new BuiltinDataSetField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    constructor(options: object) {\n        super(() => Object.keys(builtins).map(k => [k, k]), undefined, options)\n    }\n\n    init() {\n        super.init()\n        this.initialized = true\n        this.updateData()\n    }\n\n    private async updateData() {\n        if (!this.initialized) return\n\n        const url = builtins[this.getValue()]\n        if (!url) return\n\n        // load dataset as needed\n        const sourceBlock = this.getSourceBlock() as BlockWithServices\n        const marker = !!sourceBlock?.isInsertionMarker()\n        if (!sourceBlock || marker) return\n\n        const services = sourceBlock.jacdacServices\n        if (!services || services.cache[BuiltinDataSetField.KEY] === url) return // already downloaded\n        // avoid races\n        services.cache[BuiltinDataSetField.KEY] = url\n\n        const { data, errors } = await downloadCSV(url)\n        if (errors?.length)\n            console.debug(`csv parse errors`, {\n                id: sourceBlock.id,\n                marker,\n                data,\n                errors,\n                services,\n                url,\n            })\n        services.data = data\n    }\n\n    setSourceBlock(block: Block) {\n        super.setSourceBlock(block)\n        this.updateData()\n    }\n\n    doValueUpdate_(newValue) {\n        super.doValueUpdate_(newValue)\n        this.updateData()\n    }\n\n    notifyServicesChanged() {\n        this.updateData()\n    }\n}\n","import { resolveBlockServices } from \"../WorkspaceContext\"\nimport { ReactFieldJSON } from \"./ReactField\"\nimport { tidyHeaders } from \"./tidy\"\nimport { FieldDropdown } from \"blockly\"\nimport { humanify } from \"../../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\n\nexport interface DataColumnChooseOptions extends ReactFieldJSON {\n    dataType?: \"number\" | \"string\"\n    parentData?: boolean\n}\n\nexport default class DataColumnChooserField extends FieldDropdown {\n    static KEY = \"jacdac_field_data_column_chooser\"\n    SERIALIZABLE = true\n    dataType: string\n    parentData: boolean\n\n    static fromJson(options: ReactFieldJSON) {\n        return new DataColumnChooserField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    // the first argument is a dummy and never used\n    constructor(options?: DataColumnChooseOptions) {\n        super(() => [[\"\", \"\"]], undefined, options)\n        this.dataType = options?.dataType\n        this.parentData = options?.parentData\n    }\n\n    fromXml(fieldElement: Element) {\n        this.setValue(fieldElement.textContent)\n    }\n\n    getOptions(): string[][] {\n        const sourceBlock = this.getSourceBlock()\n        const services = resolveBlockServices(\n            this.parentData ? sourceBlock?.getSurroundParent() : sourceBlock\n        )\n        const data = services?.data\n        const { headers, types } = tidyHeaders(data)\n        const options =\n            headers\n                .filter((h, i) => !this.dataType || types[i] === this.dataType)\n                .map(h => [humanify(h), h]) || []\n        const value = this.getValue()\n        const r =\n            options.length < 1\n                ? [[humanify(value || \"\"), value || \"\"]]\n                : [...options, [\"\", \"\"]]\n        return r\n    }\n\n    doClassValidation_(newValue?: string) {\n        // skip super class validationervices chan\n        return newValue\n    }\n}\n","import React, { lazy, ReactNode } from \"react\"\nimport ReactField, { ReactFieldJSON } from \"./ReactField\"\nimport {\n    BlockDefinition,\n    DataPreviewInputDefinition,\n    identityTransformData,\n} from \"../toolbox\"\nimport Suspense from \"../../ui/Suspense\"\nconst DataTablePreviewWidget = lazy(() => import(\"./DataTablePreviewWidget\"))\n\nexport interface DataPreviewOptions extends ReactFieldJSON {\n    compare?: boolean\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport default class DataPreviewField extends ReactField<ReactFieldJSON> {\n    static KEY = \"jacdac_field_data_preview\"\n    compare: boolean\n\n    static fromJson(options: DataPreviewOptions) {\n        return new DataPreviewField(options?.value, undefined, options)\n    }\n\n    // the first argument is a dummy and never used\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(value: string, validator?: any, options?: DataPreviewOptions) {\n        super(value, validator, options)\n        this.compare = !!options?.compare\n    }\n\n    protected initCustomView(): SVGElement {\n        const group = this.fieldGroup_\n        group.classList.add(\"blocklyFieldButton\")\n        return undefined\n    }\n\n    getText_() {\n        return \"\"\n    }\n\n    renderField(): ReactNode {\n        return (\n            <Suspense>\n                <DataTablePreviewWidget compare={this.compare} />\n            </Suspense>\n        )\n    }\n}\n\nexport function addDataPreviewField(block: BlockDefinition): BlockDefinition {\n    const preview = block?.dataPreviewField\n    if (preview) {\n        // don't add twice\n        block.dataPreviewField = false\n        // parse args and add one more arg\n        const { message0 } = block\n        const i = message0.lastIndexOf(\"%\")\n        const index = parseInt(message0.substr(i + 1))\n        block.message0 += ` %${index + 1}`\n\n        // does this mutate the data?\n        const identity =\n            preview === \"after\" || block.transformData === identityTransformData\n\n        // add field\n        block.args0.push({\n            type: DataPreviewField.KEY,\n            name: \"preview\",\n            compare: !identity,\n        } as DataPreviewInputDefinition)\n    }\n    return block\n}\n","import React from \"react\"\nimport { ReactFieldJSON } from \"./ReactField\"\nimport ReactInlineField from \"./ReactInlineField\"\nimport DataTableWidget from \"./DataTableWidget\"\nimport { SMALL_TABLE_HEIGHT } from \"../toolbox\"\n\nexport interface DataPreviewOptions extends ReactFieldJSON {\n    transformed?: boolean\n    small?: boolean\n    selectColumns?: boolean\n}\n\nconst MAX_ITEMS = 256\nexport default class DataTableField extends ReactInlineField {\n    static KEY = \"jacdac_field_data_table\"\n    EDITABLE = false\n    transformed: boolean\n    small: boolean\n    selectColumns: boolean\n\n    static fromJson(options: DataPreviewOptions) {\n        return new DataTableField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: DataPreviewOptions) {\n        super(options)\n        this.transformed = !!options?.transformed\n        this.small = !!options?.small\n        this.selectColumns = !!options?.selectColumns\n    }\n\n    protected createContainer(): HTMLDivElement {\n        const c = document.createElement(\"div\")\n        c.style.display = \"block\"\n        c.style.minWidth = \"388px\"\n        c.style.maxWidth = \"80vh\"\n        c.style.maxHeight = \"60vh\"\n        return c\n    }\n\n    renderInlineField() {\n        const tableHeight = this.small ? SMALL_TABLE_HEIGHT : undefined\n        return (\n            <DataTableWidget\n                maxItems={MAX_ITEMS}\n                tableHeight={tableHeight}\n                transformed={this.transformed}\n                selectColumns={this.selectColumns}\n            />\n        )\n    }\n}\n","import React, { ReactNode, useContext } from \"react\"\nimport WorkspaceContext from \"../WorkspaceContext\"\nimport useBlockData from \"../useBlockData\"\nimport { Grid, makeStyles, Typography } from \"@material-ui/core\"\nimport { TABLE_HEIGHT, TABLE_WIDTH } from \"../toolbox\"\nimport { PointerBoundary } from \"./PointerBoundary\"\nimport CopyButton from \"../../ui/CopyButton\"\nimport { unparseCSV } from \"../dsl/workers/csv.proxy\"\nimport { roundWithPrecision, toMap } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport { tidyHeaders, tidyResolveHeader } from \"./tidy\"\nimport { humanify } from \"../../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\n\ninterface StylesProps {\n    tableHeight: number\n}\n\nconst useStyles = makeStyles(() => ({\n    empty: {\n        paddingLeft: \"0.5rem\",\n        paddingRight: \"0.5rem\",\n        background: \"#fff\",\n        color: \"#000\",\n        borderRadius: \"0.25rem\",\n    },\n    button: {\n        color: \"grey\",\n    },\n    root: (props: StylesProps) => ({\n        marginTop: \"0.25rem\",\n        paddingLeft: \"0.5rem\",\n        paddingRight: \"0.5rem\",\n        background: \"#fff\",\n        color: \"#000\",\n        borderRadius: \"0.25rem\",\n        width: `calc(${TABLE_WIDTH}px - 0.25rem)`,\n        height: `calc(${props.tableHeight}px - 0.25rem)`,\n        overflow: \"auto\",\n    }),\n    table: {\n        margin: 0,\n        fontSize: \"0.8rem\",\n        lineHeight: \"1rem\",\n\n        \"& th, td\": {\n            backgroundClip: \"padding-box\",\n            \"scroll-snap-align\": \"start\",\n        },\n        \"& th\": {\n            position: \"sticky\",\n            top: 0,\n            background: \"white\",\n        },\n        \"& td\": {\n            borderColor: \"#ccc\",\n            borderRightStyle: \"solid 1px\",\n        },\n    },\n}))\n\nexport default function DataTableWidget(props: {\n    label?: string\n    transformed?: boolean\n    tableHeight?: number\n    empty?: ReactNode\n    maxItems?: number\n    selectColumns?: boolean\n}): JSX.Element {\n    const {\n        label,\n        transformed,\n        tableHeight = TABLE_HEIGHT,\n        empty,\n        maxItems,\n        selectColumns,\n    } = props\n    const { sourceBlock } = useContext(WorkspaceContext)\n    const { data, transformedData } = useBlockData<{ id?: string } & unknown>(\n        sourceBlock\n    )\n    const raw = transformed ? transformedData : data\n    const classes = useStyles({ tableHeight })\n\n    if (!raw?.length)\n        return empty ? <span className={classes.empty}>{empty}</span> : null\n\n    const selectedColumns = selectColumns\n        ? [0, 1, 2, 3]\n              .map(i => `column${i}`)\n              .map(n => tidyResolveHeader(raw, sourceBlock?.getFieldValue(n)))\n              .filter(c => !!c)\n        : []\n    const columns = selectedColumns.length\n        ? selectedColumns\n        : tidyHeaders(raw).headers\n    const table =\n        raw.length > maxItems\n            ? [\n                  ...raw.slice(0, maxItems),\n                  toMap(\n                      columns,\n                      c => c,\n                      () => \"...\"\n                  ),\n              ]\n            : raw\n\n    console.log({\n        raw,\n        transformed,\n        transformedData,\n        data,\n        table,\n        selectedColumns,\n        columns,\n    })\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const renderCell = (v: any) =>\n        typeof v === \"boolean\"\n            ? v\n                ? \"true\"\n                : \"false\"\n            : typeof v === \"number\"\n            ? roundWithPrecision(v, 3)\n            : v + \"\"\n\n    const handleCopy = async () => {\n        const text = unparseCSV(raw)\n        return text\n    }\n\n    return (\n        <PointerBoundary className={classes.root}>\n            <Grid container direction=\"column\" spacing={1}>\n                <Grid item xs={12}>\n                    <Grid\n                        container\n                        direction=\"row\"\n                        justifyContent=\"flex-start\"\n                        alignItems=\"center\"\n                        spacing={1}\n                    >\n                        {label && (\n                            <Grid item>\n                                <Typography variant=\"h6\">{label}</Typography>\n                            </Grid>\n                        )}\n                        <Grid item>\n                            <CopyButton\n                                size=\"small\"\n                                className={classes.button}\n                                onCopy={handleCopy}\n                            />\n                        </Grid>\n                        {raw.length > 1 && (\n                            <Grid item>\n                                <Typography variant=\"caption\">\n                                    {raw.length} rows x {columns.length} columns\n                                </Typography>\n                            </Grid>\n                        )}\n                    </Grid>\n                </Grid>\n                <Grid item xs={12}>\n                    <table className={classes.table}>\n                        <thead>\n                            <tr>\n                                {columns.map(c => (\n                                    <th key={c}>{humanify(c)}</th>\n                                ))}\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {table.map((r, i) => (\n                                <tr key={r.id || i}>\n                                    {columns.map(c => (\n                                        <td key={c}>{renderCell(r[c])}</td>\n                                    ))}\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </Grid>\n            </Grid>\n        </PointerBoundary>\n    )\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Block, FieldDropdown } from \"blockly\"\nimport { CHANGE } from \"../../../../jacdac-ts/src/jdom/constants\"\nimport { parseCSV } from \"../dsl/workers/csv.proxy\"\nimport {\n    resolveBlockServices,\n    resolveWorkspaceServices,\n} from \"../WorkspaceContext\"\nimport { ReactFieldJSON } from \"./ReactField\"\n\nexport default class FileOpenField extends FieldDropdown {\n    static KEY = \"jacdac_field_file_open\"\n    SERIALIZABLE = true\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    private _data: object[]\n    private _unmount: () => void\n\n    static fromJson(options: ReactFieldJSON) {\n        return new FileOpenField(options)\n    }\n\n    constructor(options?: ReactFieldJSON) {\n        super(() => [[\"\", \"\"]], undefined, options)\n    }\n\n    fromXml(fieldElement: Element) {\n        this.setValue(fieldElement.textContent)\n    }\n\n    getOptions(): string[][] {\n        const options = this.resolveFiles()?.map(f => [f.name, f.name]) || []\n        const value = this.getValue()\n\n        return options.length < 1\n            ? [[value || \"\", value || \"\"]]\n            : [...options, [\"\", \"\"]]\n    }\n\n    doClassValidation_(newValue?: string) {\n        // skip super class validationervices chan\n        return newValue\n    }\n\n    init() {\n        super.init()\n        this.updateData()\n    }\n\n    setSourceBlock(block: Block) {\n        super.setSourceBlock(block)\n        this.updateData()\n    }\n\n    doValueUpdate_(newValue) {\n        super.doValueUpdate_(newValue)\n        this.parseSource()\n    }\n\n    notifyServicesChanged() {\n        this.updateData()\n    }\n\n    dispose() {\n        super.dispose()\n        this.unmount()\n    }\n\n    private resolveFiles() {\n        const sourceBlock = this.getSourceBlock()\n        const services = resolveWorkspaceServices(sourceBlock?.workspace)\n        const directory = services?.workingDirectory\n        return directory?.files.filter(f => /\\.csv$/i.test(f.name))\n    }\n\n    private async parseSource() {\n        const filename = this.getValue()\n        const file = this.resolveFiles()?.find(f => f.name === filename)\n        if (file) {\n            try {\n                console.debug(`file: loading ${file.name}`)\n                const source = await file.textAsync()\n                console.debug(`file: loaded ${(source?.length || 0) / 1024}kb`)\n                if (source) {\n                    const csv = await parseCSV(source)\n                    this._data = csv?.data\n                    this.updateData()\n                }\n            } catch (e) {\n                console.log(e)\n                this.value_ = undefined\n            }\n        }\n    }\n\n    private async updateData() {\n        const sourceBlock = this.getSourceBlock()\n        // update current data\n        const blockServices = resolveBlockServices(sourceBlock)\n        if (blockServices) blockServices.data = this._data\n\n        // register file system changes\n        this.unmount()\n        const wsServices = resolveWorkspaceServices(sourceBlock?.workspace)\n        if (wsServices) {\n            const { workingDirectory } = wsServices\n            this._unmount = workingDirectory?.subscribe(CHANGE, () =>\n                this.updateData()\n            )\n        }\n    }\n\n    private unmount() {\n        if (this._unmount) {\n            this._unmount()\n            this._unmount = undefined\n        }\n    }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Field } from \"blockly\"\n\nexport default class FileSaveField extends Field {\n    static KEY = \"jacdac_field_file_save\"\n    SERIALIZABLE = true\n    private fileType: string\n\n    constructor(options?: any) {\n        super(\"...\", null, options)\n        this.fileType = options?.fileType || \"csv\"\n    }\n    fileHandle: FileSystemFileHandle\n\n    static fromJson(options: any) {\n        return new FileSaveField(options)\n    }\n\n    showEditor_() {\n        this.openFileHandle()\n    }\n\n    private async openFileHandle() {\n        const options: SaveFilePickerOptions = {\n            types: [\n                {\n                    id: \"text\",\n                    description: \"Text Files\",\n                    accept: {\n                        \"text/plain\": [\".txt\"],\n                    },\n                },\n                {\n                    id: \"csv\",\n                    description: \"CSV Files\",\n                    accept: {\n                        \"text/csv\": [\".csv\"],\n                    },\n                },\n                {\n                    id: \"json\",\n                    description: \"JSON Files\",\n                    accept: {\n                        \"application/json\": [\".json\"],\n                    },\n                },\n            ].filter(({ id }) => this.fileType === id),\n            excludeAcceptAllOption: true,\n        }\n        this.fileHandle = await window.showSaveFilePicker?.(options)\n        this.setValue(this.fileHandle?.name || \"\")\n    }\n}\n","function tidy(items) {\n  if (typeof items === \"function\") {\n    throw new Error(\"You must supply the data as the first argument to tidy()\");\n  }\n\n  var result = items;\n\n  for (var _len = arguments.length, fns = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    fns[_key - 1] = arguments[_key];\n  }\n\n  for (var fn of fns) {\n    if (fn) {\n      result = fn(result);\n    }\n  }\n\n  return result;\n}\n\nexport { tidy };","import { singleOrArray } from './helpers/singleOrArray.js';\n\nfunction summarize(summarizeSpec, options) {\n  var _summarize = items => {\n    options = options != null ? options : {};\n    var summarized = {};\n    var keys = Object.keys(summarizeSpec);\n\n    for (var key of keys) {\n      summarized[key] = summarizeSpec[key](items);\n    }\n\n    if (options.rest && items.length) {\n      var objectKeys = Object.keys(items[0]);\n\n      for (var objKey of objectKeys) {\n        if (keys.includes(objKey)) {\n          continue;\n        }\n\n        summarized[objKey] = options.rest(objKey)(items);\n      }\n    }\n\n    return [summarized];\n  };\n\n  return _summarize;\n}\n\nfunction _summarizeHelper(items, summaryFn, predicateFn, keys) {\n  if (!items.length) return [];\n  var summarized = {};\n  var keysArr;\n\n  if (keys == null) {\n    keysArr = Object.keys(items[0]);\n  } else {\n    keysArr = [];\n\n    for (var keyInput of singleOrArray(keys)) {\n      if (typeof keyInput === \"function\") {\n        keysArr.push(...keyInput(items));\n      } else {\n        keysArr.push(keyInput);\n      }\n    }\n  }\n\n  var _loop = function _loop(key) {\n    if (predicateFn) {\n      var vector = items.map(d => d[key]);\n\n      if (!predicateFn(vector)) {\n        return \"continue\";\n      }\n    }\n\n    summarized[key] = summaryFn(key)(items);\n  };\n\n  for (var key of keysArr) {\n    var _ret = _loop(key);\n\n    if (_ret === \"continue\") continue;\n  }\n\n  return [summarized];\n}\n\nfunction summarizeAll(summaryFn) {\n  var _summarizeAll = items => _summarizeHelper(items, summaryFn);\n\n  return _summarizeAll;\n}\n\nfunction summarizeIf(predicateFn, summaryFn) {\n  var _summarizeIf = items => _summarizeHelper(items, summaryFn, predicateFn);\n\n  return _summarizeIf;\n}\n\nfunction summarizeAt(keys, summaryFn) {\n  var _summarizeAt = items => _summarizeHelper(items, summaryFn, void 0, keys);\n\n  return _summarizeAt;\n}\n\nexport { summarize, summarizeAll, summarizeAt, summarizeIf };","export class InternMap extends Map {\n  constructor(entries) {\n    var key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : keyof;\n    super();\n    Object.defineProperties(this, {\n      _intern: {\n        value: new Map()\n      },\n      _key: {\n        value: key\n      }\n    });\n    if (entries != null) for (var [_key2, value] of entries) {\n      this.set(_key2, value);\n    }\n  }\n\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n\n}\nexport class InternSet extends Set {\n  constructor(values) {\n    var key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : keyof;\n    super();\n    Object.defineProperties(this, {\n      _intern: {\n        value: new Map()\n      },\n      _key: {\n        value: key\n      }\n    });\n    if (values != null) for (var value of values) {\n      this.add(value);\n    }\n  }\n\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n\n}\n\nfunction intern_get(_ref, value) {\n  var {\n    _intern,\n    _key\n  } = _ref;\n\n  var key = _key(value);\n\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set(_ref2, value) {\n  var {\n    _intern,\n    _key\n  } = _ref2;\n\n  var key = _key(value);\n\n  if (_intern.has(key)) return _intern.get(key);\n\n  _intern.set(key, value);\n\n  return value;\n}\n\nfunction intern_delete(_ref3, value) {\n  var {\n    _intern,\n    _key\n  } = _ref3;\n\n  var key = _key(value);\n\n  if (_intern.has(key)) {\n    value = _intern.get(value);\n\n    _intern.delete(key);\n  }\n\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}","export default function (x) {\n  return x;\n}","import { InternMap } from \"internmap\";\nimport identity from \"./identity.js\";\nexport default function group(values) {\n  for (var _len = arguments.length, keys = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    keys[_key - 1] = arguments[_key];\n  }\n\n  return nest(values, identity, identity, keys);\n}\nexport function groups(values) {\n  for (var _len2 = arguments.length, keys = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    keys[_key2 - 1] = arguments[_key2];\n  }\n\n  return nest(values, Array.from, identity, keys);\n}\nexport function rollup(values, reduce) {\n  for (var _len3 = arguments.length, keys = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n    keys[_key3 - 2] = arguments[_key3];\n  }\n\n  return nest(values, identity, reduce, keys);\n}\nexport function rollups(values, reduce) {\n  for (var _len4 = arguments.length, keys = new Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n    keys[_key4 - 2] = arguments[_key4];\n  }\n\n  return nest(values, Array.from, reduce, keys);\n}\nexport function index(values) {\n  for (var _len5 = arguments.length, keys = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n    keys[_key5 - 1] = arguments[_key5];\n  }\n\n  return nest(values, identity, unique, keys);\n}\nexport function indexes(values) {\n  for (var _len6 = arguments.length, keys = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {\n    keys[_key6 - 1] = arguments[_key6];\n  }\n\n  return nest(values, Array.from, unique, keys);\n}\n\nfunction unique(values) {\n  if (values.length !== 1) throw new Error(\"duplicate key\");\n  return values[0];\n}\n\nfunction nest(values, map, reduce, keys) {\n  return function regroup(values, i) {\n    if (i >= keys.length) return reduce(values);\n    var groups = new InternMap();\n    var keyof = keys[i++];\n    var index = -1;\n\n    for (var value of values) {\n      var key = keyof(value, ++index, values);\n\n      var _group = groups.get(key);\n\n      if (_group) _group.push(value);else groups.set(key, [value]);\n    }\n\n    for (var [_key7, _values] of groups) {\n      groups.set(_key7, regroup(_values, i));\n    }\n\n    return map(groups);\n  }(values, 0);\n}","import \"core-js/modules/es.object.from-entries.js\";\n\nfunction assignGroupKeys(d, keys) {\n  if (d == null || typeof d !== \"object\" || Array.isArray(d)) return d;\n  var keysObj = Object.fromEntries(keys.filter(key => typeof key[0] !== \"function\"));\n  return Object.assign(keysObj, d);\n}\n\nexport { assignGroupKeys };","function groupTraversal(grouped, outputGrouped, keys, addSubgroup, addLeaves) {\n  var level = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\n  for (var [key, value] of grouped.entries()) {\n    var keysHere = [...keys, key];\n\n    if (value instanceof Map) {\n      var subgroup = addSubgroup(outputGrouped, keysHere, level);\n      groupTraversal(value, subgroup, keysHere, addSubgroup, addLeaves, level + 1);\n    } else {\n      addLeaves(outputGrouped, keysHere, value, level);\n    }\n  }\n\n  return outputGrouped;\n}\n\nexport { groupTraversal };","import { groupTraversal } from './groupTraversal.js';\n\nfunction groupMap(grouped, groupFn) {\n  var keyFn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : keys => keys[keys.length - 1];\n\n  function addSubgroup(parentGrouped, keys) {\n    var subgroup = new Map();\n    parentGrouped.set(keyFn(keys), subgroup);\n    return subgroup;\n  }\n\n  function addLeaves(parentGrouped, keys, values) {\n    parentGrouped.set(keyFn(keys), groupFn(values, keys));\n  }\n\n  var outputGrouped = new Map();\n  groupTraversal(grouped, outputGrouped, [], addSubgroup, addLeaves);\n  return outputGrouped;\n}\n\nexport { groupMap };","var identity = d => d;\n\nexport { identity };","function singleOrArray(d) {\n  return d == null ? [] : Array.isArray(d) ? d : [d];\n}\n\nexport { singleOrArray };","import _defineProperty from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport \"core-js/modules/es.array.flat.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { group } from 'd3-array';\nimport { assignGroupKeys } from './helpers/assignGroupKeys.js';\nimport { groupMap } from './helpers/groupMap.js';\nimport { groupTraversal } from './helpers/groupTraversal.js';\nimport { identity } from './helpers/identity.js';\nimport { singleOrArray } from './helpers/singleOrArray.js';\n\nfunction groupBy(groupKeys, fns, options) {\n  if (typeof fns === \"function\") {\n    fns = [fns];\n  } else if (arguments.length === 2 && fns != null && !Array.isArray(fns)) {\n    options = fns;\n  }\n\n  var _groupBy = items => {\n    var grouped = makeGrouped(items, groupKeys);\n    var results = runFlow(grouped, fns, options == null ? void 0 : options.addGroupKeys);\n\n    if (options == null ? void 0 : options.export) {\n      switch (options.export) {\n        case \"grouped\":\n          return results;\n\n        case \"levels\":\n          return exportLevels(results, options);\n\n        case \"entries-obj\":\n        case \"entriesObject\":\n          return exportLevels(results, _objectSpread(_objectSpread({}, options), {}, {\n            export: \"levels\",\n            levels: [\"entries-object\"]\n          }));\n\n        default:\n          return exportLevels(results, _objectSpread(_objectSpread({}, options), {}, {\n            export: \"levels\",\n            levels: [options.export]\n          }));\n      }\n    }\n\n    var ungrouped = ungroup(results, options == null ? void 0 : options.addGroupKeys);\n    return ungrouped;\n  };\n\n  return _groupBy;\n}\n\ngroupBy.grouped = options => _objectSpread(_objectSpread({}, options), {}, {\n  export: \"grouped\"\n});\n\ngroupBy.entries = options => _objectSpread(_objectSpread({}, options), {}, {\n  export: \"entries\"\n});\n\ngroupBy.entriesObject = options => _objectSpread(_objectSpread({}, options), {}, {\n  export: \"entries-object\"\n});\n\ngroupBy.object = options => _objectSpread(_objectSpread({}, options), {}, {\n  export: \"object\"\n});\n\ngroupBy.map = options => _objectSpread(_objectSpread({}, options), {}, {\n  export: \"map\"\n});\n\ngroupBy.keys = options => _objectSpread(_objectSpread({}, options), {}, {\n  export: \"keys\"\n});\n\ngroupBy.values = options => _objectSpread(_objectSpread({}, options), {}, {\n  export: \"values\"\n});\n\ngroupBy.levels = options => _objectSpread(_objectSpread({}, options), {}, {\n  export: \"levels\"\n});\n\nfunction runFlow(items, fns, addGroupKeys) {\n  var result = items;\n  if (!(fns == null ? void 0 : fns.length)) return result;\n\n  var _loop = function _loop(fn) {\n    if (!fn) return \"continue\";\n    result = groupMap(result, (items2, keys) => {\n      var context = {\n        groupKeys: keys\n      };\n      var leafItemsMapped = fn(items2, context);\n\n      if (addGroupKeys !== false) {\n        leafItemsMapped = leafItemsMapped.map(item => assignGroupKeys(item, keys));\n      }\n\n      return leafItemsMapped;\n    });\n  };\n\n  for (var fn of fns) {\n    var _ret = _loop(fn);\n\n    if (_ret === \"continue\") continue;\n  }\n\n  return result;\n}\n\nfunction makeGrouped(items, groupKeys) {\n  var groupKeyFns = singleOrArray(groupKeys).map((key, i) => {\n    var keyFn = typeof key === \"function\" ? key : d => d[key];\n    var keyCache = new Map();\n    return d => {\n      var keyValue = keyFn(d);\n      var keyValueOf = typeof keyValue === \"object\" ? keyValue.valueOf() : keyValue;\n\n      if (keyCache.has(keyValueOf)) {\n        return keyCache.get(keyValueOf);\n      }\n\n      var keyWithName = [key, keyValue];\n      keyCache.set(keyValueOf, keyWithName);\n      return keyWithName;\n    };\n  });\n  var grouped = group(items, ...groupKeyFns);\n  return grouped;\n}\n\nfunction ungroup(grouped, addGroupKeys) {\n  var items = [];\n  groupTraversal(grouped, items, [], identity, (root, keys, values) => {\n    var valuesToAdd = values;\n\n    if (addGroupKeys !== false) {\n      valuesToAdd = values.map(d => assignGroupKeys(d, keys));\n    }\n\n    root.push(...valuesToAdd);\n  });\n  return items;\n}\n\nvar defaultCompositeKey = keys => keys.join(\"/\");\n\nfunction processFromGroupsOptions(options) {\n  var _a;\n\n  var {\n    flat,\n    single,\n    mapLeaf = identity,\n    mapLeaves = identity,\n    addGroupKeys\n  } = options;\n  var compositeKey;\n\n  if (options.flat) {\n    compositeKey = (_a = options.compositeKey) != null ? _a : defaultCompositeKey;\n  }\n\n  var groupFn = (values, keys) => {\n    return single ? mapLeaf(addGroupKeys === false ? values[0] : assignGroupKeys(values[0], keys)) : mapLeaves(values.map(d => mapLeaf(addGroupKeys === false ? d : assignGroupKeys(d, keys))));\n  };\n\n  var keyFn = flat ? keys => compositeKey(keys.map(d => d[1])) : keys => keys[keys.length - 1][1];\n  return {\n    groupFn,\n    keyFn\n  };\n}\n\nfunction exportLevels(grouped, options) {\n  var {\n    groupFn,\n    keyFn\n  } = processFromGroupsOptions(options);\n  var {\n    mapEntry = identity\n  } = options;\n  var {\n    levels = [\"entries\"]\n  } = options;\n  var levelSpecs = [];\n\n  for (var levelOption of levels) {\n    switch (levelOption) {\n      case \"entries\":\n      case \"entries-object\":\n      case \"entries-obj\":\n      case \"entriesObject\":\n        {\n          var _ret2 = function () {\n            var levelMapEntry = (levelOption === \"entries-object\" || levelOption === \"entries-obj\" || levelOption === \"entriesObject\") && options.mapEntry == null ? _ref => {\n              var [key, values] = _ref;\n              return {\n                key,\n                values\n              };\n            } : mapEntry;\n            levelSpecs.push({\n              id: \"entries\",\n              createEmptySubgroup: () => [],\n              addSubgroup: (parentGrouped, newSubgroup, key, level) => {\n                parentGrouped.push(levelMapEntry([key, newSubgroup], level));\n              },\n              addLeaf: (parentGrouped, key, values, level) => {\n                parentGrouped.push(levelMapEntry([key, values], level));\n              }\n            });\n            return \"break\";\n          }();\n\n          if (_ret2 === \"break\") break;\n        }\n\n      case \"map\":\n        levelSpecs.push({\n          id: \"map\",\n          createEmptySubgroup: () => new Map(),\n          addSubgroup: (parentGrouped, newSubgroup, key) => {\n            parentGrouped.set(key, newSubgroup);\n          },\n          addLeaf: (parentGrouped, key, values) => {\n            parentGrouped.set(key, values);\n          }\n        });\n        break;\n\n      case \"object\":\n        levelSpecs.push({\n          id: \"object\",\n          createEmptySubgroup: () => ({}),\n          addSubgroup: (parentGrouped, newSubgroup, key) => {\n            parentGrouped[key] = newSubgroup;\n          },\n          addLeaf: (parentGrouped, key, values) => {\n            parentGrouped[key] = values;\n          }\n        });\n        break;\n\n      case \"keys\":\n        levelSpecs.push({\n          id: \"keys\",\n          createEmptySubgroup: () => [],\n          addSubgroup: (parentGrouped, newSubgroup, key) => {\n            parentGrouped.push([key, newSubgroup]);\n          },\n          addLeaf: (parentGrouped, key) => {\n            parentGrouped.push(key);\n          }\n        });\n        break;\n\n      case \"values\":\n        levelSpecs.push({\n          id: \"values\",\n          createEmptySubgroup: () => [],\n          addSubgroup: (parentGrouped, newSubgroup) => {\n            parentGrouped.push(newSubgroup);\n          },\n          addLeaf: (parentGrouped, key, values) => {\n            parentGrouped.push(values);\n          }\n        });\n        break;\n\n      default:\n        {\n          if (typeof levelOption === \"object\") {\n            levelSpecs.push(levelOption);\n          }\n        }\n    }\n  }\n\n  var addSubgroup = (parentGrouped, keys, level) => {\n    var _a, _b;\n\n    if (options.flat) {\n      return parentGrouped;\n    }\n\n    var levelSpec = (_a = levelSpecs[level]) != null ? _a : levelSpecs[levelSpecs.length - 1];\n    var nextLevelSpec = (_b = levelSpecs[level + 1]) != null ? _b : levelSpec;\n    var newSubgroup = nextLevelSpec.createEmptySubgroup();\n    levelSpec.addSubgroup(parentGrouped, newSubgroup, keyFn(keys), level);\n    return newSubgroup;\n  };\n\n  var addLeaf = (parentGrouped, keys, values, level) => {\n    var _a;\n\n    var levelSpec = (_a = levelSpecs[level]) != null ? _a : levelSpecs[levelSpecs.length - 1];\n    levelSpec.addLeaf(parentGrouped, keyFn(keys), groupFn(values, keys), level);\n  };\n\n  var initialOutputObject = levelSpecs[0].createEmptySubgroup();\n  return groupTraversal(grouped, initialOutputObject, [], addSubgroup, addLeaf);\n}\n\nexport { groupBy };","import { arrange, desc } from './arrange.js';\nimport { groupBy } from './groupBy.js';\nimport { identity } from './helpers/identity.js';\nimport { tally } from './tally.js';\nimport { tidy } from './tidy.js';\n\nfunction count(groupKeys, options) {\n  var _count = items => {\n    options = options != null ? options : {};\n    var {\n      name = \"n\",\n      sort\n    } = options;\n    var results = tidy(items, groupBy(groupKeys, [tally(options)]), sort ? arrange(desc(name)) : identity);\n    return results;\n  };\n\n  return _count;\n}\n\nexport { count };","import _defineProperty from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport \"core-js/modules/es.array.flat-map.js\";\nimport \"core-js/modules/es.array.unscopables.flat-map.js\";\n\nfunction autodetectByMap(itemsA, itemsB) {\n  if (itemsA.length === 0 || itemsB.length === 0) return {};\n  var keysA = Object.keys(itemsA[0]);\n  var keysB = Object.keys(itemsB[0]);\n  var byMap = {};\n\n  for (var key of keysA) {\n    if (keysB.includes(key)) {\n      byMap[key] = key;\n    }\n  }\n\n  return byMap;\n}\n\nfunction makeByMap(by) {\n  if (Array.isArray(by)) {\n    var byMap = {};\n\n    for (var key of by) {\n      byMap[key] = key;\n    }\n\n    return byMap;\n  } else if (typeof by === \"object\") {\n    return by;\n  }\n\n  return {\n    [by]: by\n  };\n}\n\nfunction isMatch(d, j, byMap) {\n  for (var jKey in byMap) {\n    var dKey = byMap[jKey];\n\n    if (d[dKey] !== j[jKey]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction innerJoin(itemsToJoin, options) {\n  var _innerJoin = items => {\n    var byMap = (options == null ? void 0 : options.by) == null ? autodetectByMap(items, itemsToJoin) : makeByMap(options.by);\n    var joined = items.flatMap(d => {\n      var matches = itemsToJoin.filter(j => isMatch(d, j, byMap));\n      return matches.map(j => _objectSpread(_objectSpread({}, d), j));\n    });\n    return joined;\n  };\n\n  return _innerJoin;\n}\n\nexport { autodetectByMap, innerJoin, isMatch, makeByMap };","import _defineProperty from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport \"core-js/modules/es.array.flat-map.js\";\nimport \"core-js/modules/es.array.unscopables.flat-map.js\";\nimport \"core-js/modules/es.object.from-entries.js\";\nimport { autodetectByMap, makeByMap, isMatch } from './innerJoin.js';\n\nfunction leftJoin(itemsToJoin, options) {\n  var _leftJoin = items => {\n    if (!itemsToJoin.length) return items;\n    var byMap = (options == null ? void 0 : options.by) == null ? autodetectByMap(items, itemsToJoin) : makeByMap(options.by);\n    var joinObjectKeys = Object.keys(itemsToJoin[0]);\n    var joined = items.flatMap(d => {\n      var matches = itemsToJoin.filter(j => isMatch(d, j, byMap));\n\n      if (matches.length) {\n        return matches.map(j => _objectSpread(_objectSpread({}, d), j));\n      }\n\n      var undefinedFill = Object.fromEntries(joinObjectKeys.filter(key => d[key] == null).map(key => [key, void 0]));\n      return _objectSpread(_objectSpread({}, d), undefinedFill);\n    });\n    return joined;\n  };\n\n  return _leftJoin;\n}\n\nexport { leftJoin };","import _defineProperty from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport \"core-js/modules/es.array.flat-map.js\";\nimport \"core-js/modules/es.array.unscopables.flat-map.js\";\nimport \"core-js/modules/es.object.from-entries.js\";\nimport { autodetectByMap, makeByMap, isMatch } from './innerJoin.js';\n\nfunction fullJoin(itemsToJoin, options) {\n  var _fullJoin = items => {\n    if (!itemsToJoin.length) return items;\n    if (!items.length) return itemsToJoin;\n    var byMap = (options == null ? void 0 : options.by) == null ? autodetectByMap(items, itemsToJoin) : makeByMap(options.by);\n    var matchMap = new Map();\n    var joinObjectKeys = Object.keys(itemsToJoin[0]);\n    var joined = items.flatMap(d => {\n      var matches = itemsToJoin.filter(j => {\n        var matched = isMatch(d, j, byMap);\n\n        if (matched) {\n          matchMap.set(j, true);\n        }\n\n        return matched;\n      });\n\n      if (matches.length) {\n        return matches.map(j => _objectSpread(_objectSpread({}, d), j));\n      }\n\n      var undefinedFill = Object.fromEntries(joinObjectKeys.filter(key => d[key] == null).map(key => [key, void 0]));\n      return _objectSpread(_objectSpread({}, d), undefinedFill);\n    });\n\n    if (matchMap.size < itemsToJoin.length) {\n      var leftEmptyObject = Object.fromEntries(Object.keys(items[0]).map(key => [key, void 0]));\n\n      for (var item of itemsToJoin) {\n        if (!matchMap.has(item)) {\n          joined.push(_objectSpread(_objectSpread({}, leftEmptyObject), item));\n        }\n      }\n    }\n\n    return joined;\n  };\n\n  return _fullJoin;\n}\n\nexport { fullJoin };","import _defineProperty from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { groupBy } from './groupBy.js';\nimport { tidy } from './tidy.js';\n\nfunction pivotWider(options) {\n  var _pivotWider = items => {\n    var {\n      namesFrom,\n      valuesFrom,\n      valuesFill,\n      valuesFillMap,\n      namesSep = \"_\"\n    } = options;\n    var namesFromKeys = Array.isArray(namesFrom) ? namesFrom : [namesFrom];\n    var valuesFromKeys = Array.isArray(valuesFrom) ? valuesFrom : [valuesFrom];\n    var wider = [];\n    if (!items.length) return wider;\n    var idColumns = Object.keys(items[0]).filter(key => !namesFromKeys.includes(key) && !valuesFromKeys.includes(key));\n    var nameValuesMap = {};\n\n    for (var item of items) {\n      for (var nameKey of namesFromKeys) {\n        if (nameValuesMap[nameKey] == null) {\n          nameValuesMap[nameKey] = {};\n        }\n\n        nameValuesMap[nameKey][item[nameKey]] = true;\n      }\n    }\n\n    var nameValuesLists = [];\n\n    for (var _nameKey in nameValuesMap) {\n      nameValuesLists.push(Object.keys(nameValuesMap[_nameKey]));\n    }\n\n    var baseWideObj = {};\n    var combos = makeCombinations(namesSep, nameValuesLists);\n\n    for (var _nameKey2 of combos) {\n      if (valuesFromKeys.length === 1) {\n        baseWideObj[_nameKey2] = valuesFillMap != null ? valuesFillMap[valuesFromKeys[0]] : valuesFill;\n        continue;\n      }\n\n      for (var valueKey of valuesFromKeys) {\n        baseWideObj[\"\".concat(valueKey).concat(namesSep).concat(_nameKey2)] = valuesFillMap != null ? valuesFillMap[valueKey] : valuesFill;\n      }\n    }\n\n    function widenItems(items2) {\n      if (!items2.length) return [];\n\n      var wide = _objectSpread({}, baseWideObj);\n\n      for (var idKey of idColumns) {\n        wide[idKey] = items2[0][idKey];\n      }\n\n      var _loop = function _loop(_item) {\n        var nameKey = namesFromKeys.map(key => _item[key]).join(namesSep);\n\n        if (valuesFromKeys.length === 1) {\n          wide[nameKey] = _item[valuesFromKeys[0]];\n          return \"continue\";\n        }\n\n        for (var _valueKey of valuesFromKeys) {\n          wide[\"\".concat(_valueKey).concat(namesSep).concat(nameKey)] = _item[_valueKey];\n        }\n      };\n\n      for (var _item of items2) {\n        var _ret = _loop(_item);\n\n        if (_ret === \"continue\") continue;\n      }\n\n      return [wide];\n    }\n\n    if (!idColumns.length) {\n      return widenItems(items);\n    }\n\n    var finish = tidy(items, groupBy(idColumns, [widenItems]));\n    return finish;\n  };\n\n  return _pivotWider;\n}\n\nfunction makeCombinations() {\n  var separator = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"_\";\n  var arrays = arguments.length > 1 ? arguments[1] : undefined;\n\n  function combine(accum, prefix, remainingArrays) {\n    if (!remainingArrays.length && prefix != null) {\n      accum.push(prefix);\n      return;\n    }\n\n    var array = remainingArrays[0];\n    var newRemainingArrays = remainingArrays.slice(1);\n\n    for (var item of array) {\n      combine(accum, prefix == null ? item : \"\".concat(prefix).concat(separator).concat(item), newRemainingArrays);\n    }\n  }\n\n  var result = [];\n  combine(result, null, arrays);\n  return result;\n}\n\nexport { pivotWider };","import { expand } from './expand.js';\nimport { leftJoin } from './leftJoin.js';\nimport { replaceNully } from './replaceNully.js';\n\nfunction complete(expandKeys, replaceNullySpec) {\n  var _complete = items => {\n    var expanded = expand(expandKeys)(items);\n    var joined = leftJoin(items)(expanded);\n    return replaceNullySpec ? replaceNully(replaceNullySpec)(joined) : joined;\n  };\n\n  return _complete;\n}\n\nexport { complete };","export default function min(values, valueof) {\n  var min;\n\n  if (valueof === undefined) {\n    for (var value of values) {\n      if (value != null && (min > value || min === undefined && value >= value)) {\n        min = value;\n      }\n    }\n  } else {\n    var index = -1;\n\n    for (var _value of values) {\n      if ((_value = valueof(_value, ++index, values)) != null && (min > _value || min === undefined && _value >= _value)) {\n        min = _value;\n      }\n    }\n  }\n\n  return min;\n}","import { min as min$1 } from 'd3-array';\n\nfunction min(key) {\n  var keyFn = typeof key === \"function\" ? key : d => d[key];\n  return items => min$1(items, keyFn);\n}\n\nexport { min };","export default function max(values, valueof) {\n  var max;\n\n  if (valueof === undefined) {\n    for (var value of values) {\n      if (value != null && (max < value || max === undefined && value >= value)) {\n        max = value;\n      }\n    }\n  } else {\n    var index = -1;\n\n    for (var _value of values) {\n      if ((_value = valueof(_value, ++index, values)) != null && (max < _value || max === undefined && _value >= _value)) {\n        max = _value;\n      }\n    }\n  }\n\n  return max;\n}","import { max as max$1 } from 'd3-array';\n\nfunction max(key) {\n  var keyFn = typeof key === \"function\" ? key : d => d[key];\n  return items => max$1(items, keyFn);\n}\n\nexport { max };","export { tidy } from './tidy.js';\nexport { filter } from './filter.js';\nexport { when } from './when.js';\nexport { map } from './map.js';\nexport { distinct } from './distinct.js';\nexport { arrange, asc, desc, fixedOrder, arrange as sort } from './arrange.js';\nexport { summarize, summarizeAll, summarizeAt, summarizeIf } from './summarize.js';\nexport { total, totalAll, totalAt, totalIf } from './total.js';\nexport { count } from './count.js';\nexport { tally } from './tally.js';\nexport { groupBy } from './groupBy.js';\nexport { rename } from './rename.js';\nexport { slice, sliceHead, sliceMax, sliceMin, sliceSample, sliceTail } from './slice.js';\nexport { innerJoin } from './innerJoin.js';\nexport { leftJoin } from './leftJoin.js';\nexport { fullJoin } from './fullJoin.js';\nexport { mutateWithSummary } from './mutateWithSummary.js';\nexport { mutate } from './mutate.js';\nexport { transmute } from './transmute.js';\nexport { select as pick, select } from './select.js';\nexport { addRows as addItems, addRows } from './addRows.js';\nexport { pivotWider } from './pivotWider.js';\nexport { pivotLonger } from './pivotLonger.js';\nexport { expand } from './expand.js';\nexport { fullSeq, fullSeqDate, fullSeqDateISOString, vectorSeq, vectorSeqDate } from './sequences/fullSeq.js';\nexport { replaceNully } from './replaceNully.js';\nexport { complete } from './complete.js';\nexport { fill } from './fill.js';\nexport { debug } from './debug.js';\nexport { rate } from './item/rate.js';\nexport { cumsum } from './vector/cumsum.js';\nexport { roll } from './vector/roll.js';\nexport { lag } from './vector/lag.js';\nexport { lead } from './vector/lead.js';\nexport { sum } from './summary/sum.js';\nexport { min } from './summary/min.js';\nexport { max } from './summary/max.js';\nexport { mean } from './summary/mean.js';\nexport { meanRate } from './summary/meanRate.js';\nexport { median } from './summary/median.js';\nexport { deviation } from './summary/deviation.js';\nexport { variance } from './summary/variance.js';\nexport { n } from './summary/n.js';\nexport { nDistinct } from './summary/nDistinct.js';\nexport { first } from './summary/first.js';\nexport { last } from './summary/last.js';\nexport { everything } from './selectors/everything.js';\nexport { startsWith } from './selectors/startsWith.js';\nexport { endsWith } from './selectors/endsWith.js';\nexport { contains } from './selectors/contains.js';\nexport { matches } from './selectors/matches.js';\nexport { numRange } from './selectors/numRange.js';\nexport { negate } from './selectors/negate.js';\nimport * as math from './math/math.js';\nexport { math as TMath };","import React, { lazy, useContext } from \"react\"\nimport { ReactFieldJSON } from \"./ReactField\"\nimport WorkspaceContext from \"../WorkspaceContext\"\nimport ReactInlineField from \"./ReactInlineField\"\nimport useBlockData from \"../useBlockData\"\nimport Suspense from \"../../ui/Suspense\"\nimport { tidyFindLastValue } from \"./tidy\"\nimport { tidy, min as tidyMin, max as tidyMax, summarize } from \"@tidyjs/tidy\"\nimport { Grid } from \"@material-ui/core\"\nimport { roundWithPrecision } from \"../../../../jacdac-ts/src/jdom/utils\"\nconst GaugeWidget = lazy(() => import(\"../../widgets/GaugeWidget\"))\n\nfunction GaugeWidgetView() {\n    const { sourceBlock } = useContext(WorkspaceContext)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const { data } = useBlockData<any>(sourceBlock)\n    if (!data?.length) return null\n\n    const field = sourceBlock?.getFieldValue(\"field\") as string\n    let value = tidyFindLastValue(data, field)\n    if (value === undefined) return null\n\n    let min = Number(sourceBlock?.getFieldValue(\"min\"))\n    let max = Number(sourceBlock?.getFieldValue(\"max\"))\n    if (min === max) {\n        min = undefined\n        max = undefined\n    }\n\n    if (isNaN(min)) min = tidy(data, summarize({ min: tidyMin(field) }))[0].min\n    if (isNaN(max)) max = tidy(data, summarize({ max: tidyMax(field) }))[0].max\n\n    // round with precision\n    const step = Math.ceil(Math.abs(value)) / 10\n    const precision = step < 1 ? Math.ceil(-Math.log10(step)) : 0\n    value = roundWithPrecision(value, precision)\n\n    // clamp values\n    value = Math.min(max, Math.max(min, value))\n\n    return (\n        <Grid\n            container\n            justifyContent=\"center\"\n            alignContent=\"center\"\n            alignItems=\"center\"\n        >\n            <Grid item>\n                <Suspense>\n                    <GaugeWidget value={value} min={min} max={max} />\n                </Suspense>\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default class GaugeWidgetField extends ReactInlineField {\n    static KEY = \"jacdac_field_gauge_widget\"\n    EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new GaugeWidgetField(options)\n    }\n\n    protected createContainer(): HTMLDivElement {\n        const c = document.createElement(\"div\")\n        c.style.width = \"20rem\"\n        return c\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return <GaugeWidgetView />\n    }\n}\n","import React, { lazy, useContext, PointerEvent } from \"react\"\nimport { ReactFieldJSON } from \"./ReactField\"\nimport WorkspaceContext from \"../WorkspaceContext\"\nimport ReactInlineField from \"./ReactInlineField\"\nimport Suspense from \"../../ui/Suspense\"\nimport NoServiceAlert from \"./NoServiceAlert\"\n\nconst JDomServiceTreeView = lazy(\n    () => import(\"../../tools/JDomServiceTreeView\")\n)\n\nfunction JDomTreeWidget() {\n    const { roleService, flyout } = useContext(WorkspaceContext)\n    const onPointerStopPropagation = (event: PointerEvent<HTMLDivElement>) => {\n        // make sure blockly does not handle drags when interacting with UI\n        event.stopPropagation()\n    }\n\n    if (flyout) return null\n    if (!roleService) return <NoServiceAlert />\n\n    return (\n        <div\n            style={{ minWidth: \"12rem\", cursor: \"inherit\" }}\n            onPointerDown={onPointerStopPropagation}\n            onPointerUp={onPointerStopPropagation}\n            onPointerMove={onPointerStopPropagation}\n        >\n            {roleService && (\n                <Suspense>\n                    <JDomServiceTreeView\n                        service={roleService}\n                        defaultExpanded={[roleService.id]}\n                    />\n                </Suspense>\n            )}\n        </div>\n    )\n}\n\nexport default class JDomTreeField extends ReactInlineField {\n    static KEY = \"jacdac_field_jdom_service_tree\"\n    EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new JDomTreeField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return <JDomTreeWidget />\n    }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/ban-types */\nimport React, { lazy, ReactNode, useEffect, useState } from \"react\"\nimport ReactField, { ReactFieldJSON, UNMOUNT } from \"./ReactField\"\nimport type { JSONSchema4 } from \"json-schema\"\nimport Suspense from \"../../ui/Suspense\"\nimport { InputDefinition } from \"../toolbox\"\nimport { assert } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport JDEventSource from \"../../../../jacdac-ts/src/jdom/eventsource\"\nconst JSONSchemaForm = lazy(() => import(\"../../ui/JSONSchemaForm\"))\n\nexport interface JSONSettingsOptions extends ReactFieldJSON {\n    schema?: JSONSchema4\n}\n\nexport interface JSONSettingsInputDefinition extends InputDefinition {\n    type: \"jacdac_field_json_settings\"\n    schema: JSONSchema4\n}\n\nfunction JSONSettingsWidget(props: {\n    schema: JSONSchema4\n    value: any\n    events: JDEventSource\n    setValue: (newValue: any) => void\n}) {\n    const { schema, value, setValue, events } = props\n    const [editValue, setEditValue] = useState(value)\n\n    useEffect(\n        () => events.subscribe(UNMOUNT, () => setValue(editValue)),\n        [editValue]\n    )\n\n    return (\n        <div\n            style={{\n                maxWidth: \"22rem\",\n                minHeight: \"20rem\",\n                padding: \"0.5rem\",\n            }}\n        >\n            <Suspense>\n                <JSONSchemaForm\n                    schema={schema}\n                    value={editValue}\n                    setValue={setEditValue}\n                />\n            </Suspense>\n        </div>\n    )\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport default class JSONSettingsField extends ReactField<ReactFieldJSON> {\n    static KEY = \"jacdac_field_json_settings\"\n    SERIALIZABLE = true\n    schema: JSONSchema4\n\n    static fromJson(options: ReactFieldJSON) {\n        return new JSONSettingsField(options?.value, undefined, options)\n    }\n\n    // the first argument is a dummy and never used\n    constructor(value: string, validator?: any, options?: JSONSettingsOptions) {\n        super(value, validator, options)\n        this.schema = options?.schema || {}\n        this.darkMode = \"light\"\n        assert(!!this.schema, \"schema missing\")\n    }\n\n    protected initCustomView(): SVGElement {\n        const group = this.fieldGroup_\n        group.classList.add(\"blocklyFieldButton\")\n        return undefined\n    }\n\n    get defaultValue() {\n        return {}\n    }\n\n    getText_() {\n        return \"\"\n    }\n\n    renderField(): ReactNode {\n        const { schema, value = {}, events } = this\n        const setValue = (v: any) => (this.value = v)\n        return (\n            <JSONSettingsWidget\n                schema={schema}\n                value={value}\n                events={events}\n                setValue={setValue}\n            />\n        )\n    }\n}\n","import React, { lazy, ReactNode } from \"react\"\nimport { HidKeyboardModifiers } from \"../../../../jacdac-ts/src/jdom/constants\"\nimport ReactField, { ReactFieldJSON } from \"./ReactField\"\nimport Suspense from \"../../ui/Suspense\"\nimport { renderKeyboardKey } from \"../../../../jacdac-ts/src/servers/hidkeyboardserver\"\nconst KeyboardKeyInput = lazy(() => import(\"../../ui/KeyboardKeyInput\"))\n\nexport interface KeyboardFieldValue {\n    selector: number\n    modifiers: HidKeyboardModifiers\n}\n\nexport default class KeyboardKeyField extends ReactField<KeyboardFieldValue> {\n    static KEY = \"jacdac_field_keyboard_key\"\n\n    static fromJson(options: ReactFieldJSON) {\n        return new KeyboardKeyField(options?.value, undefined, options)\n    }\n\n    get defaultValue() {\n        return { selector: 4, modifiers: 0 }\n    }\n\n    getText_() {\n        const { selector, modifiers } = this.value\n        return renderKeyboardKey(selector, modifiers, true)\n    }\n\n    renderField(): ReactNode {\n        const { selector, modifiers } = this.value\n        const handleChange = (\n            newSelector: number,\n            newModifiers: HidKeyboardModifiers\n        ) => {\n            this.value = { selector: newSelector, modifiers: newModifiers }\n        }\n        return (\n            <Suspense>\n                <KeyboardKeyInput\n                    initialSelector={selector}\n                    initialModifiers={modifiers}\n                    onChange={handleChange}\n                />\n            </Suspense>\n        )\n    }\n}\n","import React, { lazy, ReactNode, useContext } from \"react\"\nimport Suspense from \"../../ui/Suspense\"\nimport ReactField, { ReactFieldJSON, toShadowDefinition } from \"./ReactField\"\nimport { rgbToHtmlColor } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport { child } from \"../../widgets/svg\"\nimport ValueContext, { ValueContextProps } from \"./ValueContext\"\n\nconst LEDWidget = lazy(() => import(\"../../widgets/LEDWidget\"))\n\nfunction LEDColorFieldWidget() {\n    const { value, onValueChange } =\n        useContext<ValueContextProps<number>>(ValueContext)\n    return (\n        <Suspense>\n            <LEDWidget\n                ledColor={value}\n                onLedColorChange={onValueChange}\n                ledCount={3}\n                color=\"secondary\"\n            />\n        </Suspense>\n    )\n}\n\nexport default class LEDColorField extends ReactField<number> {\n    static KEY = \"jacdac_field_led_color\"\n    static SHADOW = toShadowDefinition(LEDColorField)\n\n    static fromJson(options: ReactFieldJSON) {\n        return new LEDColorField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options?.value, undefined, options, { width: 28, height: 28 })\n    }\n\n    protected initCustomView() {\n        const { width } = this.size_\n        const r = width >> 1\n        return child(this.fieldGroup_, \"circle\", {\n            r: width >> 1,\n            cx: r,\n            cy: r,\n            strokeWidth: 2,\n            stroke: \"#777\",\n        }) as SVGCircleElement\n    }\n\n    updateView() {\n        const c = rgbToHtmlColor(this.value)\n        const circle = this.view as SVGCircleElement\n        if (c) {\n            circle?.setAttribute(\"fill\", c)\n        }\n    }\n\n    getText_() {\n        return rgbToHtmlColor(this.value)\n    }\n\n    renderField(): ReactNode {\n        return <LEDColorFieldWidget />\n    }\n}\n","import ReactField from \"./ReactField\"\nimport { child } from \"../../widgets/svg\"\nimport { utils } from \"blockly\"\n\nexport default class ReactImageField<T> extends ReactField<T> {\n    constructor(value: string, width = 32, height = 32) {\n        super(value, undefined, undefined, { width, height })\n    }\n\n    setSize(width: number, height: number) {\n        this.size_ = new utils.Size(width, height)\n        const img = this.view as SVGImageElement\n        if (img) {\n            img.setAttribute(\"width\", width + \"\")\n            img.setAttribute(\"height\", height + \"\")\n        }\n    }\n\n    protected updateView() {\n        const imgUri = this.renderValue()\n        const img = this.view as SVGImageElement\n        if (imgUri) {\n            img?.setAttributeNS(\n                \"http://www.w3.org/1999/xlink\",\n                \"xlink:href\",\n                imgUri\n            )\n            img?.setAttribute(\"alt\", this.getText())\n        }\n    }\n\n    /**\n     * Renders the value to a data uri string\n     */\n    protected renderValue(): string {\n        return undefined\n    }\n\n    protected initCustomView() {\n        const { width, height } = this.size_\n        return child(this.fieldGroup_, \"image\", {\n            height,\n            width,\n            alt: this.getText(),\n        }) as SVGImageElement\n    }\n}\n","import React, { lazy, ReactNode } from \"react\"\nimport { fromHex, toHex } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport Suspense from \"../../ui/Suspense\"\nimport { ReactFieldJSON, VALUE_CHANGE } from \"./ReactField\"\nimport ReactImageField from \"./ReactImageField\"\nconst LEDMatrixWidget = lazy(() => import(\"../../widgets/LEDMatrixWidget\"))\n\nexport interface LEDMatrixFieldValue {\n    // hex data\n    leds: string\n    rows: number\n    columns: number\n}\n\nexport default class LEDMatrixField extends ReactImageField<LEDMatrixFieldValue> {\n    static KEY = \"jacdac_field_led_matrix\"\n\n    constructor(value: string) {\n        super(value)\n\n        this.events.on(VALUE_CHANGE, () => {\n            const { rows, columns } = this.value\n            this.setSize(32, (32 / columns) * rows)\n        })\n    }\n\n    static fromJson(options: ReactFieldJSON) {\n        return new LEDMatrixField(options?.value)\n    }\n\n    get defaultValue() {\n        return {\n            leds: toHex(new Uint8Array(0)),\n            rows: 5,\n            columns: 5,\n        }\n    }\n\n    getText_() {\n        const { leds, rows, columns } = this.value\n        return `${leds} (${rows}x${columns})`\n    }\n\n    renderValue(): string {\n        const { leds, rows, columns } = this.value\n        // render current state to LEDmatrix field\n        const columnspadded = columns + (8 - (columns % 8))\n        const ledsBytes = fromHex(leds)\n        const cvs = document.createElement(\"canvas\")\n        const b = 3\n        const pw = 8\n        const ph = 8\n        const w = rows * pw + (rows - 1) * b\n        const h = columns * ph + (columns - 1) * b\n        cvs.width = w + 2 * b\n        cvs.height = h + 2 * b\n        const ctx = cvs.getContext(\"2d\")\n        ctx.fillStyle = \"#444\"\n        ctx.fillRect(b, b, w, h)\n        ctx.fillStyle = \"blue\"\n        for (let x = 0; x < columns; ++x) {\n            for (let y = 0; y < rows; ++y) {\n                const bitindex = y * columnspadded + x\n                const byte = ledsBytes[bitindex >> 3]\n                const bit = bitindex % 8\n                const on = 1 === ((byte >> bit) & 1)\n                ctx.fillStyle = on ? \"#ffc400\" : \"#000\"\n                ctx.fillRect(x * (pw + b) + b, y * (ph + b) + b, pw, ph)\n            }\n        }\n        const dataUri = cvs.toDataURL(\"image/png\")\n        return dataUri\n    }\n\n    renderField(): ReactNode {\n        const { leds, rows, columns } = this.value\n        const ledsBytes = fromHex(leds)\n        console.log(`led bytes`, { leds, ledsBytes })\n        const onChange = (newLeds: Uint8Array) =>\n            (this.value = {\n                leds: toHex(newLeds),\n                rows,\n                columns,\n            })\n        return (\n            <Suspense>\n                <LEDMatrixWidget\n                    color=\"secondary\"\n                    brightness={1}\n                    leds={ledsBytes}\n                    rows={rows}\n                    columns={columns}\n                    onChange={onChange}\n                />\n            </Suspense>\n        )\n    }\n}\n","import React, { lazy } from \"react\"\nimport Suspense from \"../../ui/Suspense\"\nimport { ReactFieldJSON } from \"./ReactField\"\nimport ReactInlineField from \"./ReactInlineField\"\nconst LogViewWidget = lazy(() => import(\"./LogViewWidget\"))\n\nexport default class LogViewField extends ReactInlineField {\n    static KEY = \"jacdac_field_log_view\"\n    EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new LogViewField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return (\n            <Suspense>\n                <LogViewWidget />\n            </Suspense>\n        )\n    }\n}\n","import React, { useContext } from \"react\"\nimport { Button } from \"@material-ui/core\"\nimport AddIcon from \"@material-ui/icons/Add\"\nimport { startServiceProviderFromServiceClass } from \"../../../../jacdac-ts/src/servers/servers\"\nimport JacdacContext, { JacdacContextProps } from \"../../../jacdac/Context\"\nimport WorkspaceContext from \"../WorkspaceContext\"\nimport { serviceSpecificationFromClassIdentifier } from \"../../../../jacdac-ts/src/jdom/spec\"\nimport { Alert } from \"@material-ui/lab\"\n\nexport default function NoServiceAlert() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { roleService, roleServiceClass, flyout } =\n        useContext(WorkspaceContext)\n    const spec = serviceSpecificationFromClassIdentifier(roleServiceClass)\n    const handleStartSimulator = () =>\n        startServiceProviderFromServiceClass(bus, spec.classIdentifier)\n\n    // nothing to do here\n    if (roleService || flyout) return null\n\n    // unresolved, unknown service\n    if (!roleService && !roleServiceClass) return null\n\n    // unknown spec\n    if (!spec) return <Alert severity=\"warning\">Unknown service</Alert>\n\n    return (\n        <Button\n            variant=\"outlined\"\n            color=\"default\"\n            startIcon={<AddIcon />}\n            onClick={handleStartSimulator}\n        >\n            start {spec.name}\n        </Button>\n    )\n}\n","import React, { lazy, ReactNode } from \"react\"\nimport { createToneContext, ToneContext } from \"../../ui/WebAudioContext\"\nimport Suspense from \"../../ui/Suspense\"\nimport ReactField, {\n    ReactFieldJSON,\n    toShadowDefinition,\n} from \"./ReactField\"\nconst PianoWidget = lazy(() => import(\"../../widgets/PianoWidget\"))\n\nexport default class NoteField extends ReactField<number> {\n    static KEY = \"jacdac_field_note\"\n    static SHADOW = toShadowDefinition(NoteField)\n    toneContext: ToneContext\n\n    static fromJson(options: ReactFieldJSON) {\n        return new NoteField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options?.value, undefined, options)\n    }\n\n    get defaultValue() {\n        return 440\n    }\n\n    getText_() {\n        return (this.value | 0) + \"\"\n    }\n\n    renderField(): ReactNode {\n        const handlePlayTone = async (newFrequency: number) => {\n            this.value = newFrequency\n            if (!this.toneContext) this.toneContext = createToneContext()\n            this.toneContext?.playTone(newFrequency, 400, 0.5)\n        }\n        return (\n            <Suspense>\n                <PianoWidget playTone={handlePlayTone} />\n            </Suspense>\n        )\n    }\n}\n","import React, { PointerEvent, ReactNode, useContext } from \"react\"\nimport WorkspaceContext from \"../WorkspaceContext\"\n\nexport function PointerBoundary(props: {\n    className?: string\n    children: ReactNode\n}) {\n    const { dragging } = useContext(WorkspaceContext)\n    const { className, children } = props\n    const onPointerStopPropagation = (event: PointerEvent<HTMLDivElement>) => {\n        // make sure blockly does not handle drags when interacting with UI\n        if (!dragging) event.stopPropagation()\n    }\n    return (\n        <div\n            className={className}\n            style={dragging ? undefined : { cursor: \"inherit\" }}\n            onPointerDown={dragging ? undefined : onPointerStopPropagation}\n            onPointerUp={dragging ? undefined : onPointerStopPropagation}\n            onPointerMove={dragging ? undefined : onPointerStopPropagation}\n        >\n            {children}\n        </div>\n    )\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport Blockly from \"blockly\"\nimport JacdacProvider from \"../../../jacdac/Provider\"\nimport { ReactNode } from \"react\"\nimport { IdProvider } from \"react-use-id-hook\"\nimport DarkModeProvider from \"../../ui/DarkModeProvider\"\nimport AppTheme from \"../../ui/AppTheme\"\nimport { Box } from \"@material-ui/core\"\nimport { BlockDefinition } from \"../toolbox\"\nimport { assert } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport { ValueProvider } from \"./ValueContext\"\nimport JDEventSource from \"../../../../jacdac-ts/src/jdom/eventsource\"\nimport { CHANGE } from \"../../../../jacdac-ts/src/jdom/constants\"\nimport {\n    BlockServices,\n    BlockWithServices,\n    FieldWithServices,\n    WorkspaceProvider,\n} from \"../WorkspaceContext\"\nimport { WebAudioProvider } from \"../../ui/WebAudioContext\"\nimport { ReactFieldBase } from \"./ReactFieldBase\"\n\ndeclare module \"blockly\" {\n    interface Block {\n        getColourTertiary(): string\n    }\n}\n\nexport type ReactFieldJSON = any\n\nexport const SOURCE_BLOCK_CHANGE = \"sourceBlockChange\"\nexport const VALUE_CHANGE = \"valueChange\"\nexport const MOUNT = \"mount\"\nexport const UNMOUNT = \"unmount\"\n\n\nexport default class ReactField<T> extends ReactFieldBase<T> {\n    SERIALIZABLE = true\n    public readonly events = new JDEventSource()\n    protected div_: Element\n    protected view: SVGElement\n    protected darkMode: \"light\" | \"dark\" = \"dark\"\n\n\n    // override to support custom view\n    protected initCustomView(): SVGElement {\n        return null\n    }\n\n    // override to update view\n    protected updateView() {}\n\n    getText_() {\n        return JSON.stringify(this.value)\n    }\n\n    toXml(fieldElement: Element) {\n        fieldElement.textContent = JSON.stringify(this.value)\n        return fieldElement\n    }\n\n    fromXml(fieldElement: Element) {\n        try {\n            const v = JSON.parse(fieldElement.textContent)\n            this.value = v\n        } catch (e) {\n            console.log(e, { text: fieldElement.textContent })\n            this.value = undefined\n        }\n    }\n\n    emitChange() {\n        this.events.emit(CHANGE)\n    }\n\n    setSourceBlock(block: Blockly.Block) {\n        const changed = block !== this.sourceBlock_\n        super.setSourceBlock(block)\n        if (changed && !block?.isInsertionMarker()) {\n            const bs = block as unknown as BlockWithServices\n            if (!bs.jacdacServices) {\n                bs.jacdacServices = new BlockServices()\n                bs.inputList?.forEach(i =>\n                    i.fieldRow?.forEach(f =>\n                        (\n                            f as unknown as FieldWithServices\n                        ).notifyServicesChanged?.()\n                    )\n                )\n            }\n            this.events.emit(SOURCE_BLOCK_CHANGE, block)\n            this.emitChange()\n        }\n    }\n\n    initView() {\n        this.view = this.initCustomView()\n        if (this.view) this.updateView()\n        else super.initView()\n    }\n\n    updateSize_() {\n        if (!this.view) super.updateSize_()\n    }\n\n    doValueUpdate_(newValue: string) {\n        const change = this.value_ !== newValue\n        if (this.view) {\n            this.value_ = newValue\n            this.updateView()\n        } else super.doValueUpdate_(newValue)\n        if (change) {\n            this.events.emit(VALUE_CHANGE, this.value)\n            this.emitChange()\n        }\n    }\n\n    showEditor_() {\n        this.div_ = Blockly.DropDownDiv.getContentDiv()\n        ReactDOM.render(this.render(), this.div_)\n        const border = this.sourceBlock_.getColourTertiary()\n        Blockly.DropDownDiv.setColour(this.sourceBlock_.getColour(), border)\n\n        // the div_ size has not been computed yet, so let the browse handle this\n        setTimeout(() => {\n            Blockly.DropDownDiv.showPositionedByField(\n                this,\n                this.dropdownDispose_.bind(this)\n            )\n            this.events.emit(MOUNT)\n        }, 200)\n    }\n\n    hide() {\n        Blockly.DropDownDiv.hideIfOwner(this, true)\n    }\n\n    dropdownDispose_() {\n        // this blows on hot reloads\n        try {\n            this.events.emit(UNMOUNT)\n            ReactDOM.unmountComponentAtNode(this.div_)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    render() {\n        const onValueChange = (newValue: any) => (this.value = newValue)\n        return (\n            <WorkspaceProvider field={this}>\n                <DarkModeProvider fixedDarkMode={this.darkMode}>\n                    <IdProvider>\n                        <WebAudioProvider>\n                            <JacdacProvider>\n                                <AppTheme>\n                                    <ValueProvider\n                                        value={this.value}\n                                        onValueChange={onValueChange}\n                                    >\n                                        <Box\n                                            m={0.5}\n                                            borderRadius={\"0.25rem\"}\n                                            bgcolor=\"background.paper\"\n                                        >\n                                            {this.renderField()}\n                                        </Box>\n                                    </ValueProvider>\n                                </AppTheme>\n                            </JacdacProvider>\n                        </WebAudioProvider>\n                    </IdProvider>\n                </DarkModeProvider>\n            </WorkspaceProvider>\n        )\n    }\n\n    renderField(): ReactNode {\n        return <span>not implemented</span>\n    }\n\n    dispose() {\n        this.view = undefined\n        super.dispose()\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function toShadowDefinition(fieldType: any): BlockDefinition {\n    assert(!!fieldType.KEY)\n    const type = fieldType.KEY + \"_shadow\"\n    return {\n        kind: \"block\",\n        type,\n        message0: `%1`,\n        args0: [\n            {\n                type: fieldType.KEY,\n                name: \"value\",\n            },\n        ],\n        style: \"math_blocks\",\n        output: \"Number\",\n        template: \"shadow\",\n    }\n}\n","import Blockly from \"blockly\"\n\nexport class ReactFieldBase<T> extends Blockly.Field {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(\n        value: string,\n        validator?: any,\n        options?: any,\n        size?: { width: number; height: number }\n    ) {\n        super(value, validator, options)\n        if (size) this.size_ = new Blockly.utils.Size(size.width, size.height)\n    }\n\n    get defaultValue(): T {\n        return {} as T\n    }\n\n    get value(): T {\n        try {\n            const v = JSON.parse(this.getValue())\n            return (v || this.defaultValue) as T\n        } catch (e) {\n            console.warn(e)\n            return this.defaultValue\n        }\n    }\n\n    set value(v: T) {\n        this.setValue(JSON.stringify(v))\n    }\n}","import React, { ReactNode } from \"react\"\nimport ReactDOM from \"react-dom\"\nimport ReactField from \"./ReactField\"\nimport { child } from \"../../widgets/svg\"\nimport DarkModeProvider from \"../../ui/DarkModeProvider\"\nimport { IdProvider } from \"react-use-id-hook\"\nimport JacdacProvider from \"../../../jacdac/Provider\"\nimport AppTheme from \"../../ui/AppTheme\"\nimport Blockly, { Events } from \"blockly\"\nimport { WorkspaceProvider } from \"../WorkspaceContext\"\nimport { WebAudioProvider } from \"../../ui/WebAudioContext\"\n\nexport default class ReactInlineField extends ReactField<unknown> {\n    protected container: HTMLDivElement\n    protected resizeObserver: ResizeObserver\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options?.value, undefined, options, { width: 1, height: 1 })\n    }\n\n    protected createContainer(): HTMLDivElement {\n        const c = document.createElement(\"div\")\n        c.style.display = \"inline-block\"\n        c.style.minWidth = \"14rem\"\n        return c\n    }\n\n    protected initCustomView() {\n        const { width, height } = this.size_\n        const fo = child(this.fieldGroup_, \"foreignObject\", {\n            x: 0,\n            y: 0,\n            width,\n            height,\n        }) as SVGForeignObjectElement\n\n        this.container = this.createContainer()\n        fo.appendChild(this.container)\n\n        this.resizeObserver = new ResizeObserver(\n            (entries: ResizeObserverEntry[]) => {\n                const entry = entries[0]\n                const { contentRect } = entry\n                this.size_.width = contentRect.width\n                this.size_.height = contentRect.height\n                fo.setAttribute(\"width\", this.size_.width + \"\")\n                fo.setAttribute(\"height\", this.size_.height + \"\")\n                this.forceRerender()\n                const b = this.sourceBlock_\n                if (b?.workspace) {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    const ev = new (Events.get(Events.BLOCK_MOVE) as any)(b)\n                    Events.fire(ev)\n                }\n            }\n        )\n        this.resizeObserver.observe(this.container)\n\n        ReactDOM.render(this.renderBlock(), this.container)\n        return fo\n    }\n\n    dispose() {\n        if (this.container) {\n            ReactDOM.unmountComponentAtNode(this.container)\n            this.container = undefined\n        }\n        if (this.resizeObserver) {\n            this.resizeObserver.disconnect()\n            this.resizeObserver = undefined\n        }\n        super.dispose()\n    }\n\n    renderField(): ReactNode {\n        return <div>not used</div>\n    }\n\n    renderInlineField(): ReactNode {\n        return null\n    }\n\n    renderBlock(): ReactNode {\n        return (\n            <WorkspaceProvider field={this}>\n                <DarkModeProvider fixedDarkMode=\"dark\">\n                    <IdProvider>\n                        <WebAudioProvider>\n                            <JacdacProvider>\n                                <AppTheme>{this.renderInlineField()}</AppTheme>\n                            </JacdacProvider>\n                        </WebAudioProvider>\n                    </IdProvider>\n                </DarkModeProvider>\n            </WorkspaceProvider>\n        )\n    }\n\n    getText_() {\n        return \"...\"\n    }\n\n    // don't bind any mouse event\n    bindEvents_() {\n        Blockly.Tooltip.bindMouseEvents(this.getClickTarget_())\n    }\n}\n","import { Grid, Slider } from \"@material-ui/core\"\nimport React, { ReactNode, useContext } from \"react\"\nimport ReactField from \"./ReactField\"\nimport ValueContext, { ValueContextProps } from \"./ValueContext\"\n\nfunction FieldWithSlider(props: { children: ReactNode }) {\n    const { children } = props\n    const { value, onValueChange } =\n        useContext<ValueContextProps<number>>(ValueContext)\n    const handleChange = async (ev: unknown, nv: number | number[]) => {\n        const newValue = nv as number\n        onValueChange(newValue)\n    }\n    return (\n        <Grid container spacing={1}>\n            <Grid item xs={12}>\n                {children}\n            </Grid>\n            <Grid item xs={12}>\n                <Slider\n                    color=\"secondary\"\n                    valueLabelDisplay=\"auto\"\n                    valueLabelFormat={`${Math.round(value)}`}\n                    min={-90}\n                    max={90}\n                    step={5}\n                    value={value}\n                    onChange={handleChange}\n                    aria-label=\"angle\"\n                />\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default class SliderField extends ReactField<number> {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(value: string, options?: any) {\n        super(value, undefined, options)\n    }\n\n    get defaultValue() {\n        return 0\n    }\n\n    getText_() {\n        return this.value + \"\"\n    }\n\n    renderField(): ReactNode {\n        return <FieldWithSlider>{this.renderWidget()}</FieldWithSlider>\n    }\n\n    renderWidget(): ReactNode {\n        return null\n    }\n}\n","import React, { lazy, ReactNode, useContext } from \"react\"\nimport SliderField from \"./SliderField\"\nimport Suspense from \"../../ui/Suspense\"\nimport { ReactFieldJSON, toShadowDefinition } from \"./ReactField\"\nimport ValueContext, { ValueContextProps } from \"./ValueContext\"\n\nconst ServoWidget = lazy(() => import(\"../../widgets/ServoWidget\"))\n\nfunction ServiceFieldWidget() {\n    const { value } =\n        useContext<ValueContextProps<number>>(ValueContext)\n    return (\n        <Suspense>\n            <ServoWidget\n                angle={value}\n                offset={0}\n                color=\"secondary\"\n                enabled={true}\n            />\n        </Suspense>\n    )\n}\n\nexport default class ServoAngleField extends SliderField {\n    static KEY = \"jacdac_field_servo_angle\"\n    static SHADOW = toShadowDefinition(ServoAngleField)\n\n    static fromJson(options: ReactFieldJSON) {\n        return new ServoAngleField(options?.value, options)\n    }\n\n    getText_() {\n        return this.value + \"\"\n    }\n\n    renderWidget(): ReactNode {\n        return <ServiceFieldWidget />\n    }\n}\n","import React, { lazy } from \"react\"\nimport Suspense from \"../../ui/Suspense\"\nimport { ReactFieldJSON } from \"./ReactField\"\nimport ReactInlineField from \"./ReactInlineField\"\nconst TwinWidget = lazy(() => import(\"./TwinWidget\"))\n\nexport default class TwinField extends ReactInlineField {\n    static KEY = \"jacdac_field_twin\"\n    EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new TwinField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return (\n            <Suspense>\n                <TwinWidget />\n            </Suspense>\n        )\n    }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Block, FieldDropdown } from \"blockly\"\nimport { CHANGE } from \"../../../../jacdac-ts/src/jdom/constants\"\nimport type { TFModelObj } from \"../../../workers/tf/dist/node_modules/tf.worker\"\n\nimport { resolveWorkspaceServices } from \"../WorkspaceContext\"\nimport { ReactFieldJSON } from \"./ReactField\"\n\nexport default class UseModelField extends FieldDropdown {\n    static KEY = \"jacdac_field_mlblocks_model_open\"\n    SERIALIZABLE = true\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    private _models: Record<string, TFModelObj>\n    private _unmount: () => void\n\n    static fromJson(options: ReactFieldJSON) {\n        return new UseModelField(options)\n    }\n\n    constructor(options?: ReactFieldJSON) {\n        super(() => [[\"\", \"\"]], undefined, options)\n        this._models = {}\n    }\n\n    fromXml(fieldElement: Element) {\n        this.setValue(fieldElement.textContent)\n    }\n\n    getOptions(): string[][] {\n        let options = []\n        if (this._models) options = Object.keys(this._models).map(m => [m, m])\n        const value = this.getValue()\n\n        return options.length < 1\n            ? [[value || \"\", value || \"\"]]\n            : [...options, [\"\", \"\"]]\n    }\n\n    doClassValidation_(newValue?: string) {\n        // skip super class validation\n        return newValue\n    }\n\n    init() {\n        super.init()\n        this.populateModels()\n    }\n\n    setSourceBlock(block: Block) {\n        super.setSourceBlock(block)\n        this.populateModels()\n    }\n\n    doValueUpdate_(newValue) {\n        super.doValueUpdate_(newValue)\n    }\n\n    notifyServicesChanged() {\n        this.populateModels()\n    }\n\n    dispose() {\n        super.dispose()\n        this.unmount()\n    }\n\n    private resolveFiles() {\n        const sourceBlock = this.getSourceBlock()\n        const services = resolveWorkspaceServices(sourceBlock?.workspace)\n        const directory = services?.workingDirectory\n        return directory?.files.filter(f => /\\.json$/i.test(f.name))\n    }\n\n    private async populateModels() {\n        const files = this.resolveFiles()\n        if (!files) return\n\n        files.forEach(async file => {\n            if (file) {\n                try {\n                    // grab the content of the JSON file\n                    const source = await file.textAsync()\n                    const model = JSON.parse(source)\n\n                    if (model && model.status == \"trained\")\n                        this._models[file.name] = model\n                } catch (e) {\n                    console.log(e)\n                }\n            }\n        })\n    }\n\n    async getModel() {\n        const filename = this.getValue()\n\n        let selectedModel = this._models[filename]\n        if (!selectedModel) {\n            // if that did not work, refresh model list and try again\n            this.populateModels()\n            selectedModel = this._models[filename]\n        }\n\n        // if that did not work, this model cannot be loaded\n        if (!selectedModel) this.value_ = undefined\n\n        return selectedModel\n    }\n\n    private unmount() {\n        if (this._unmount) {\n            this._unmount()\n            this._unmount = undefined\n        }\n    }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { createContext, ReactNode, useState } from \"react\"\n\nexport interface ValueContextProps<T = any> {\n    value: T\n    onValueChange: (value: T) => void\n}\n\nexport const ValueContext = createContext<ValueContextProps>({\n    value: undefined,\n    onValueChange: undefined,\n})\nValueContext.displayName = \"Value\"\n\nexport default ValueContext\n\nexport function ValueProvider(props: {\n    value: any\n    onValueChange?: (newValue: any) => any\n    children: ReactNode\n}) {\n    const {\n        children,\n        value: initialValue,\n        onValueChange: onFieldValueChange,\n    } = props\n    const [value, setValue] = useState<any>(initialValue)\n    const onValueChange = (newValue: any) => {\n        setValue(newValue)\n        onFieldValueChange?.(newValue)\n    }\n    return (\n        // eslint-disable-next-line react/react-in-jsx-scope\n        <ValueContext.Provider value={{ value, onValueChange }}>\n            {children}\n        </ValueContext.Provider>\n    )\n}\n","import { createStyles, makeStyles, Theme } from \"@material-ui/core\"\nimport React, { useContext, useEffect, useState } from \"react\"\nimport { VM_GLOBAL_CHANGE } from \"../../../../jacdac-ts/src/vm/events\"\nimport { atomic } from \"../../../../jacdac-ts/src/vm/runner\"\nimport WorkspaceContext from \"../WorkspaceContext\"\nimport { ReactFieldJSON } from \"./ReactField\"\nimport ReactInlineField from \"./ReactInlineField\"\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        table: {\n            padding: 0,\n            margin: 0,\n            fontSize: \"0.9rem\",\n            lineHeight: \"1rem\",\n            color: theme.palette.text.primary,\n\n            \"& td\": {\n                borderColor: \"#ccc\",\n            },\n        },\n    })\n)\n\nfunction VariablesWidget() {\n    const { runner } = useContext(WorkspaceContext)\n    const classes = useStyles()\n    const [variables, setVariables] = useState<\n        { name: string; value: atomic }[]\n    >(runner?.globals())\n    useEffect(\n        () =>\n            runner?.subscribe(VM_GLOBAL_CHANGE, () =>\n                setVariables(runner.globals())\n            ),\n        [runner]\n    )\n\n    return (\n        <>\n            {variables && (\n                <table className={classes.table}>\n                    <tbody>\n                        {variables?.map(({ name, value }) => (\n                            <tr key={name}>\n                                <td>{name}</td>\n                                <td>{value}</td>\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n            )}\n        </>\n    )\n}\n\nexport default class VariablesField extends ReactInlineField {\n    static KEY = \"jacdac_field_variables_view\"\n    EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new VariablesField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return <VariablesWidget />\n    }\n}\n","import React, { useContext, useEffect, useState } from \"react\"\nimport { ReactFieldJSON } from \"./ReactField\"\nimport { Box, Grid, Typography, useTheme } from \"@material-ui/core\"\nimport WorkspaceContext from \"../WorkspaceContext\"\nimport ReactInlineField from \"./ReactInlineField\"\nimport { PointerBoundary } from \"./PointerBoundary\"\nimport { WatchValueType } from \"../../../../jacdac-ts/src/vm/runner\"\nimport { VM_WATCH_CHANGE } from \"../../../../jacdac-ts/src/vm/events\"\nimport { roundWithPrecision } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport useBlockData from \"../useBlockData\"\nimport JacdacContext, { JacdacContextProps } from \"../../../jacdac/Context\"\nimport SwitchWithLabel from \"../../ui/SwitchWithLabel\"\n\nconst HORIZON = 10\nfunction WatchValueWidget() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { runner, sourceId, sourceBlock } = useContext(WorkspaceContext)\n    const { data, setData } = useBlockData<{\n        time: number\n        value: number\n    }>(sourceBlock, [])\n    const theme = useTheme()\n\n    // track changes\n    const [value, setValue] = useState<WatchValueType>(\n        runner?.lookupWatch(sourceId)\n    )\n\n    useEffect(\n        () =>\n            runner?.subscribe(VM_WATCH_CHANGE, (watchSourceId: string) => {\n                if (watchSourceId === sourceId) {\n                    const newValue = runner.lookupWatch(sourceId)\n                    setValue(newValue)\n                    if (!isNaN(newValue)) {\n                        const newData = [\n                            ...(data || []),\n                            { time: bus.timestamp / 1000, value: newValue },\n                        ].slice(-HORIZON)\n                        setData(newData)\n                    }\n                }\n            }),\n        [runner, sourceId, data]\n    )\n\n    let valueNumber = typeof value === \"number\" ? (value as number) : undefined\n    if (!isNaN(valueNumber)) {\n        const step = Math.ceil(Math.abs(valueNumber)) / 10\n        const precision = step < 1 ? Math.ceil(-Math.log10(step)) : 0\n        valueNumber = roundWithPrecision(valueNumber, precision)\n    }\n\n    return (\n        <Box\n            bgcolor={theme.palette.background.paper}\n            borderRadius={theme.spacing(1)}\n            color={theme.palette.text.primary}\n        >\n            <Grid\n                container\n                alignItems=\"flex-end\"\n                alignContent=\"center\"\n                justifyContent=\"center\"\n                spacing={1}\n            >\n                <Grid item>\n                    <PointerBoundary>\n                        {!isNaN(valueNumber) ? (\n                            <Typography variant=\"body1\">\n                                {valueNumber}\n                            </Typography>\n                        ) : typeof value === \"boolean\" ? (\n                            <Box pl={1}>\n                                <SwitchWithLabel\n                                    readOnly={true}\n                                    checked={!!value}\n                                    label={value ? \"true\" : \"false\"}\n                                />\n                            </Box>\n                        ) : (\n                            <Typography variant=\"body1\">\n                                {value === undefined ? \"...\" : value + \"\"}\n                            </Typography>\n                        )}\n                    </PointerBoundary>\n                </Grid>\n            </Grid>\n        </Box>\n    )\n}\n\nexport default class WatchValueField extends ReactInlineField {\n    static KEY = \"jacdac_field_watch_value\"\n    EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new WatchValueField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    protected createContainer(): HTMLDivElement {\n        const c = document.createElement(\"div\")\n        c.style.display = \"inline-block\"\n        c.style.minWidth = \"4rem\"\n        return c\n    }\n\n    renderInlineField() {\n        return <WatchValueWidget />\n    }\n}\n","import React, { useContext } from \"react\"\nimport WorkspaceContext from \"../../WorkspaceContext\"\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport useBlockData from \"../../useBlockData\"\nimport type { VisualizationSpec } from \"react-vega\"\nimport VegaLiteWidget from \"./VegaLiteWidget\"\nimport { tidyResolveHeader } from \"../tidy\"\nimport { BAR_CORNER_RADIUS, BAR_MAX_ITEMS } from \"../../toolbox\"\n\nfunction BarWidget() {\n    const { sourceBlock } = useContext(WorkspaceContext)\n    const { data } = useBlockData(sourceBlock)\n    const index = tidyResolveHeader(data, sourceBlock?.getFieldValue(\"index\"))\n    const value = tidyResolveHeader(\n        data,\n        sourceBlock?.getFieldValue(\"value\"),\n        \"number\"\n    )\n    if (!index || !value) return null\n\n    const sliceOptions = {\n        sliceMax: BAR_MAX_ITEMS,\n    }\n    const spec: VisualizationSpec = {\n        mark: { type: \"bar\", cornerRadius: BAR_CORNER_RADIUS, tooltip: true },\n        encoding: {\n            x: { field: index, type: \"nominal\" },\n            y: { field: value, type: \"quantitative\" },\n        },\n        data: { name: \"values\" },\n    }\n    return <VegaLiteWidget spec={spec} slice={sliceOptions} />\n}\n\nexport default class BarField extends ReactInlineField {\n    static KEY = \"jacdac_field_bar_plot\"\n    EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new BarField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return <BarWidget />\n    }\n}\n","import React, { useContext } from \"react\"\nimport WorkspaceContext from \"../../WorkspaceContext\"\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport useBlockData from \"../../useBlockData\"\nimport type { VisualizationSpec } from \"react-vega\"\nimport VegaLiteWidget from \"./VegaLiteWidget\"\nimport { tidyResolveHeader } from \"../tidy\"\nimport { BAR_CORNER_RADIUS } from \"../../toolbox\"\n\nfunction BoxPlotWidget() {\n    const { sourceBlock } = useContext(WorkspaceContext)\n    const { data } = useBlockData(sourceBlock)\n    const index = tidyResolveHeader(data, sourceBlock?.getFieldValue(\"index\"))\n    const value = tidyResolveHeader(\n        data,\n        sourceBlock?.getFieldValue(\"value\"),\n        \"number\"\n    )\n    if (!index || !value) return null\n\n    const spec: VisualizationSpec = {\n        mark: {\n            type: \"boxplot\",\n            cornerRadius: BAR_CORNER_RADIUS,\n            tooltip: true,\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        } as any,\n        encoding: {\n            x: { field: index, type: \"nominal\", scale: { zero: false } },\n            y: { field: value, type: \"quantitative\", scale: { zero: false } },\n        },\n        data: { name: \"values\" },\n    }\n\n    return <VegaLiteWidget spec={spec} />\n}\n\nexport default class BoxPlotField extends ReactInlineField {\n    static KEY = \"jacdac_field_box_plot\"\n    EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new BoxPlotField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return <BoxPlotWidget />\n    }\n}\n","import React, { useContext } from \"react\"\nimport WorkspaceContext from \"../../WorkspaceContext\"\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport useBlockData from \"../../useBlockData\"\nimport type { VisualizationSpec } from \"react-vega\"\nimport VegaLiteWidget from \"./VegaLiteWidget\"\nimport { tidyResolveHeader } from \"../tidy\"\nimport { LINE_MAX_ITEMS } from \"../../toolbox\"\n\nfunction HeatMapWidget() {\n    const { sourceBlock } = useContext(WorkspaceContext)\n    const { data } = useBlockData(sourceBlock)\n    const x = tidyResolveHeader(data, sourceBlock?.getFieldValue(\"x\"))\n    const y = tidyResolveHeader(data, sourceBlock?.getFieldValue(\"y\"))\n    const color = tidyResolveHeader(\n        data,\n        sourceBlock?.getFieldValue(\"color\"),\n        \"number\"\n    )\n    if (!x || !y || !color) return null\n\n    const sliceOptions = {\n        sliceHead: LINE_MAX_ITEMS,\n    }\n    const spec: VisualizationSpec = {\n        mark: { type: \"rect\", tooltip: true },\n        encoding: {\n            x: { field: x, type: \"ordinal\" },\n            y: { field: y, type: \"ordinal\" },\n            color: {\n                field: color,\n                type: \"quantitative\",\n                scale: { zero: false },\n            },\n        },\n        data: { name: \"values\" },\n    }\n    return <VegaLiteWidget spec={spec} slice={sliceOptions} />\n}\n\nexport default class HeatMapPlotField extends ReactInlineField {\n    static KEY = \"jacdac_field_heat_map\"\n    EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new HeatMapPlotField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return <HeatMapWidget />\n    }\n}\n","import React, { useContext } from \"react\"\nimport WorkspaceContext from \"../../WorkspaceContext\"\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport useBlockData from \"../../useBlockData\"\nimport type { VisualizationSpec } from \"react-vega\"\nimport VegaLiteWidget from \"./VegaLiteWidget\"\nimport { tidyResolveHeader } from \"../tidy\"\nimport { BAR_CORNER_RADIUS } from \"../../toolbox\"\n\nfunction HistogramWidget() {\n    const { sourceBlock } = useContext(WorkspaceContext)\n    const { data } = useBlockData(sourceBlock)\n    const index = tidyResolveHeader(data, sourceBlock?.getFieldValue(\"index\"))\n\n    if (!index) return null\n\n    const spec: VisualizationSpec = {\n        mark: { type: \"bar\", cornerRadius: BAR_CORNER_RADIUS, tooltip: true },\n        encoding: {\n            x: { bin: true, field: index },\n            y: { aggregate: \"count\" },\n        },\n        data: { name: \"values\" },\n    }\n\n    return <VegaLiteWidget spec={spec} />\n}\n\nexport default class HistogramField extends ReactInlineField {\n    static KEY = \"jacdac_field_histogram\"\n    EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new HistogramField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return <HistogramWidget />\n    }\n}\n","import React, { useContext } from \"react\"\nimport WorkspaceContext from \"../../WorkspaceContext\"\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport useBlockData from \"../../useBlockData\"\nimport type { VisualizationSpec } from \"react-vega\"\nimport VegaLiteWidget from \"./VegaLiteWidget\"\nimport { tidyResolveHeader } from \"../tidy\"\nimport { LINE_MAX_ITEMS } from \"../../toolbox\"\n\nfunction LinePlotWidget() {\n    const { sourceBlock } = useContext(WorkspaceContext)\n    const { data } = useBlockData(sourceBlock)\n    const x = tidyResolveHeader(data, sourceBlock?.getFieldValue(\"x\"), \"number\")\n    const y = tidyResolveHeader(data, sourceBlock?.getFieldValue(\"y\"), \"number\")\n    if (!x || !y) return null\n\n    const sliceOptions = {\n        sliceHead: LINE_MAX_ITEMS,\n    }\n    const spec: VisualizationSpec = {\n        mark: { type: \"line\", tooltip: true },\n        encoding: {\n            x: { field: x, type: \"quantitative\", scale: { zero: false } },\n            y: { field: y, type: \"quantitative\", scale: { zero: false } },\n        },\n        data: { name: \"values\" },\n    }\n    return <VegaLiteWidget spec={spec} slice={sliceOptions} />\n}\n\nexport default class LinePlotField extends ReactInlineField {\n    static KEY = \"jacdac_field_line_plot\"\n    EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new LinePlotField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return <LinePlotWidget />\n    }\n}\n","import React, { useContext } from \"react\"\nimport WorkspaceContext from \"../../WorkspaceContext\"\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport useBlockData from \"../../useBlockData\"\nimport VegaLiteWidget from \"./VegaLiteWidget\"\nimport { tidyResolveHeader } from \"../tidy\"\nimport { SCATTER_MAX_ITEMS } from \"../../toolbox\"\nimport { humanify } from \"../../../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\n\nfunction ScatterPlotWidget(props: { linearRegression?: boolean }) {\n    const { linearRegression } = props\n    const { sourceBlock } = useContext(WorkspaceContext)\n    const { data, transformedData } = useBlockData(sourceBlock)\n    const x = tidyResolveHeader(data, sourceBlock?.getFieldValue(\"x\"), \"number\")\n    const y = tidyResolveHeader(data, sourceBlock?.getFieldValue(\"y\"), \"number\")\n    const size = tidyResolveHeader(\n        data,\n        sourceBlock?.getFieldValue(\"size\"),\n        \"number\"\n    )\n\n    if (!x || !y) return null\n\n    const sliceOptions = {\n        sliceSample: SCATTER_MAX_ITEMS,\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let spec: any = {\n        mark: { type: \"point\", filled: true, tooltip: true },\n        encoding: {\n            x: {\n                field: x,\n                type: \"quantitative\",\n                scale: { zero: false },\n                title: humanify(x),\n            },\n            y: {\n                field: y,\n                title: humanify(y),\n                type: \"quantitative\",\n                scale: { zero: false },\n            },\n        },\n    }\n    if (size)\n        spec.encoding.size = {\n            field: size,\n            type: \"quantitative\",\n            scale: { zero: false },\n        }\n\n    if (linearRegression) {\n        const { slope, intercept } = (transformedData?.[0] || {}) as any\n        spec = {\n            title:\n                slope !== undefined\n                    ? `slope: ${slope}, intercept: ${intercept}`\n                    : undefined,\n            layer: [\n                spec,\n                {\n                    mark: {\n                        type: \"line\",\n                        color: \"firebrick\",\n                    },\n                    transform: [\n                        {\n                            regression: y,\n                            on: x,\n                        },\n                    ],\n                    encoding: {\n                        x: {\n                            field: x,\n                            type: \"quantitative\",\n                        },\n                        y: {\n                            field: y,\n                            type: \"quantitative\",\n                        },\n                    },\n                },\n            ],\n        }\n    }\n    spec.data = { name: \"values\" }\n\n    return <VegaLiteWidget spec={spec} slice={sliceOptions} />\n}\n\nexport interface ScatterPlotFieldProps {\n    linearRegression?: boolean\n}\n\nexport default class ScatterPlotField extends ReactInlineField {\n    static KEY = \"jacdac_field_scatter_plot\"\n    EDITABLE = false\n    linearRegression: boolean\n\n    static fromJson(options: ReactFieldJSON) {\n        return new ScatterPlotField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: ScatterPlotFieldProps) {\n        super(options)\n        this.linearRegression = !!options?.linearRegression\n    }\n\n    renderInlineField() {\n        return <ScatterPlotWidget linearRegression={this.linearRegression} />\n    }\n}\n","import React, { useContext, useState } from \"react\"\nimport WorkspaceContext, {\n    BlocklyWorkspaceWithServices,\n    WorkspaceServices,\n} from \"../../WorkspaceContext\"\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport useBlockData from \"../../useBlockData\"\nimport VegaLiteWidget from \"./VegaLiteWidget\"\nimport { blockToVisualizationSpec } from \"../../dsl/chartdsl\"\nimport { useEffect } from \"react\"\n\nfunction VegaChartWidget() {\n    const { sourceBlock, workspace } = useContext(WorkspaceContext)\n    const { data } = useBlockData(sourceBlock)\n    const services = (workspace as BlocklyWorkspaceWithServices)?.jacdacServices\n\n    // track workspace changes and re-render\n    const [, setWorkspaceJSON] = useState(services?.workspaceJSON)\n    useEffect(\n        () =>\n            services?.subscribe(WorkspaceServices.WORKSPACE_CHANGE, () =>\n                setWorkspaceJSON(services.workspaceJSON)\n            ),\n        [services]\n    )\n\n    const spec = blockToVisualizationSpec(sourceBlock, data)\n\n    return <VegaLiteWidget spec={spec} />\n}\n\nexport default class VegaChartField extends ReactInlineField {\n    static KEY = \"jacdac_field_vega_chart\"\n    EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new VegaChartField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return <VegaChartWidget />\n    }\n}\n","import React, { lazy, useContext, useMemo, useRef, useState } from \"react\"\nimport WorkspaceContext from \"../../WorkspaceContext\"\nimport useBlockData from \"../../useBlockData\"\nimport { PointerBoundary } from \"../PointerBoundary\"\nimport Suspense from \"../../../ui/Suspense\"\nimport { Grid, makeStyles, NoSsr } from \"@material-ui/core\"\nimport { CHART_HEIGHT, CHART_SVG_MAX_ITEMS, CHART_WIDTH } from \"../../toolbox\"\nimport type { View, VisualizationSpec } from \"react-vega\"\nimport type { DataSliceOptions } from \"../../../../workers/data/dist/node_modules/data.worker\"\nimport useEffectAsync from \"../../../useEffectAsync\"\nimport { tidyResolveHeader, tidySlice } from \"./../tidy\"\nimport { JSONTryParse } from \"../../../../../jacdac-ts/src/jdom/utils\"\nimport { humanify } from \"../../../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\nimport CopyButton from \"../../../ui/CopyButton\"\nimport FullscreenIcon from \"@material-ui/icons/Fullscreen\"\nimport IconButtonWithTooltip from \"../../../ui/IconButtonWithTooltip\"\nconst VegaLite = lazy(() => import(\"./VegaLite\"))\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction clone(v: any) {\n    return v ? JSON.parse(JSON.stringify(v)) : v\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isKV(v: any) {\n    return !!v && typeof v === \"object\" && !Array.isArray(v)\n}\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction jsonMergeFrom(trg: object, src: object) {\n    if (!src) return\n    Object.keys(src).forEach(k => {\n        if (isKV(trg[k]) && isKV(src[k])) jsonMergeFrom(trg[k], src[k])\n        else trg[k] = clone(src[k])\n    })\n}\n\nconst useStyles = makeStyles(() => ({\n    button: {\n        color: \"grey\",\n    },\n}))\n\nexport default function VegaLiteWidget(props: {\n    spec: VisualizationSpec\n    slice?: DataSliceOptions\n}) {\n    const { spec, slice } = props\n    const { sourceBlock } = useContext(WorkspaceContext)\n    const { data } = useBlockData(sourceBlock)\n    const classes = useStyles()\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    const [vegaData, setVegaData] = useState<{ values: object[] }>(undefined)\n    const viewRef = useRef<View>()\n\n    const group = tidyResolveHeader(data, sourceBlock?.getFieldValue(\"group\"))\n    const settings = JSONTryParse(sourceBlock?.getFieldValue(\"settings\"))\n    const handleNewView = (view: View) => (viewRef.current = view)\n\n    const fullSpec = useMemo(() => {\n        if (!settings) return spec\n        const s = clone(spec)\n        if (s.encoding)\n            Object.values(s.encoding)\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                .filter((e: any) => !e.title)\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                .forEach((e: any) => (e.title = humanify(e.field)))\n        jsonMergeFrom(s, settings)\n        if (\n            Object.values(s.encoding || {}).some(\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                (encoding: any) =>\n                    encoding?.scale?.domainMin !== undefined ||\n                    encoding?.scale?.domainMax !== undefined\n            )\n        ) {\n            s.mark.clip = true\n        }\n        if (group) {\n            s.encoding.color = {\n                field: group,\n                title: humanify(group),\n                type: \"nominal\",\n            }\n            s.encoding.strokeDash = {\n                field: group,\n                title: humanify(group),\n                type: \"nominal\",\n            }\n        }\n        return s\n    }, [spec, group, settings])\n\n    useEffectAsync(\n        async mounted => {\n            if (!slice) {\n                setVegaData({ values: data })\n            } else {\n                const sliced = await tidySlice(data, slice)\n                if (mounted()) setVegaData({ values: sliced })\n            }\n        },\n        [data]\n    )\n\n    if (!vegaData?.values?.length || !spec) return null\n\n    const renderer =\n        vegaData.values.length < CHART_SVG_MAX_ITEMS ? \"svg\" : \"canvas\"\n    const handleCopy = async () => {\n        const view = viewRef.current\n        const canvas = await view?.toCanvas(2)\n        return canvas\n    }\n    const handleFullScreen = async () => {\n        const view = viewRef.current\n        const container = view?.container()\n        if (!container) return\n        const svg = container.firstElementChild as HTMLElement\n        if (svg.getAttribute(\"width\")) {\n            container.style.width = svg.getAttribute(\"width\") + \"px\"\n            container.style.height = svg.getAttribute(\"height\") + \"px\"\n            svg.style.width = \"100%\"\n            svg.style.height = \"100%\"\n            svg.removeAttribute(\"width\")\n            svg.removeAttribute(\"height\")\n        }\n        await container?.requestFullscreen({\n            navigationUI: \"hide\",\n        })\n    }\n\n    return (\n        <NoSsr>\n            <PointerBoundary>\n                <div style={{ background: \"#fff\", borderRadius: \"0.25rem\" }}>\n                    <Grid container direction=\"column\" spacing={1}>\n                        <Grid item xs={12}>\n                            <Grid\n                                container\n                                direction=\"row\"\n                                justifyContent=\"flex-start\"\n                                alignItems=\"center\"\n                                spacing={1}\n                            >\n                                <Grid item>\n                                    <CopyButton\n                                        size=\"small\"\n                                        className={classes.button}\n                                        onCopy={handleCopy}\n                                    />\n                                </Grid>\n                                <Grid item>\n                                    <IconButtonWithTooltip\n                                        title=\"show full screen\"\n                                        className={classes.button}\n                                        onClick={handleFullScreen}\n                                    >\n                                        <FullscreenIcon />\n                                    </IconButtonWithTooltip>\n                                </Grid>\n                            </Grid>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <Suspense>\n                                <VegaLite\n                                    actions={false}\n                                    width={CHART_WIDTH}\n                                    height={CHART_HEIGHT}\n                                    spec={fullSpec}\n                                    data={vegaData}\n                                    renderer={renderer}\n                                    tooltip={true}\n                                    onNewView={handleNewView}\n                                />\n                            </Suspense>\n                        </Grid>\n                    </Grid>\n                </div>\n            </PointerBoundary>\n        </NoSsr>\n    )\n}\n\n/**\n * https://github.com/vega/vega-embed/issues/733\nactions {\n                                export: { png: true, svg: true },\n                                source: false,\n                                compiled: false,\n                                editor: false,\n                            }\n */\n","import Blockly from \"blockly\"\nimport NoteField from \"./NoteField\"\nimport KeyboardKeyField from \"./KeyboardKeyField\"\nimport LEDMatrixField from \"./LEDMatrixField\"\nimport ServoAngleField from \"./ServoAngleField\"\nimport { BlockDefinition } from \"../toolbox\"\nimport { assert } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport LEDColorField from \"./LEDColorField\"\nimport TwinField from \"./TwinField\"\nimport JDomTreeField from \"./JDomTreeField\"\nimport WatchValueField from \"./WatchValueField\"\nimport LogViewField from \"./LogViewField\"\nimport VariablesField from \"./VariablesFields\"\nimport DataTableField from \"./DataTableField\"\nimport DataColumnChooserField from \"./DataColumnChooserField\"\nimport BuiltinDataSetField from \"./BuiltinDataSetField\"\nimport DataPreviewField from \"./DataPreviewField\"\n\nimport LinePlotField from \"./chart/LinePlotField\"\nimport GaugeWidgetField from \"./GaugeWidgetField\"\nimport ScatterPlotField from \"./chart/ScatterPlotField\"\nimport BarChartField from \"./chart/BarField\"\nimport HistogramField from \"./chart/HistogramField\"\nimport BoxPlotField from \"./chart/BoxPlotField\"\nimport HeatMapPlotField from \"./chart/HeatMapField\"\nimport VegaChartField from \"./chart/VegaChartField\"\n\nimport FileSaveField from \"./FileSaveField\"\nimport FileOpenField from \"./FileOpenField\"\nimport UseModelField from \"./UseModelField\"\n\nimport ExpandModelBlockField from \"./mb/ExpandModelBlockField\"\nimport DataSetBlockField from \"./mb/DataSetBlockField\"\nimport DataSetBlockButton from \"./mb/DataSetBlockButton\"\nimport RecordingBlockField from \"./mb/RecordingBlockField\"\nimport NeuralNetworkBlockField from \"./mb/NeuralNetworkBlockField\"\nimport NeuralNetworkBlockButton from \"./mb/NeuralNetworkBlockButtons\"\nimport ConvLayerBlockField from \"./mb/ConvLayerBlockField\"\nimport PoolingLayerBlockField from \"./mb/PoolingLayerBlockField\"\nimport DropoutLayerBlockField from \"./mb/DropoutLayerBlockField\"\nimport FlattenLayerBlockField from \"./mb/FlattenLayerBlockField\"\nimport DenseLayerBlockField from \"./mb/DenseLayerBlockField\"\nimport TrainedModelBlockField from \"./mb/TrainedModelBlockField\"\n\nimport JSONSettingsField from \"./JSONSettingsField\"\n\nlet reactFieldShadows: BlockDefinition[]\nexport function registerFields() {\n    if (reactFieldShadows) return\n\n    reactFieldShadows = []\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const registerType = (fieldType: any) => {\n        const key = fieldType.KEY\n        assert(!!key)\n        try {\n            Blockly.fieldRegistry.unregister(key) // hot reload issues\n        } catch (e) {\n            // ignore hot reload issues\n        }\n        Blockly.fieldRegistry.register(key, fieldType)\n        if (fieldType.SHADOW) reactFieldShadows.push(fieldType.SHADOW)\n    }\n    const fieldTypes = [\n        KeyboardKeyField,\n        NoteField,\n        LEDMatrixField,\n        ServoAngleField,\n        LEDColorField,\n\n        TwinField,\n        JDomTreeField,\n\n        GaugeWidgetField,\n\n        WatchValueField,\n        LogViewField,\n\n        VariablesField,\n        DataTableField,\n        DataPreviewField,\n        DataColumnChooserField,\n\n        BuiltinDataSetField,\n\n        ScatterPlotField,\n        LinePlotField,\n        BarChartField,\n        HistogramField,\n        BoxPlotField,\n        HeatMapPlotField,\n        VegaChartField,\n\n        ExpandModelBlockField,\n        DataSetBlockField,\n        DataSetBlockButton,\n        RecordingBlockField,\n        NeuralNetworkBlockField,\n        NeuralNetworkBlockButton,\n        ConvLayerBlockField,\n        PoolingLayerBlockField,\n        DropoutLayerBlockField,\n        FlattenLayerBlockField,\n        DenseLayerBlockField,\n        TrainedModelBlockField,\n\n        FileSaveField,\n        FileOpenField,\n        UseModelField,\n\n        JSONSettingsField,\n    ]\n    fieldTypes.forEach(registerType)\n}\n\nexport function fieldShadows() {\n    registerFields()\n    return reactFieldShadows.slice(0)\n}\n","import React, { ReactNode, useContext, useEffect, useState } from \"react\"\nimport {\n    Box,\n    Grid,\n    MenuItem,\n    Select,\n    TextField,\n    Tooltip,\n    makeStyles,\n    Theme,\n    createStyles,\n} from \"@material-ui/core\"\n\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport { PointerBoundary } from \"../PointerBoundary\"\n\nimport WorkspaceContext from \"../../WorkspaceContext\"\n\nimport { useId } from \"react-use-id-hook\"\nimport ExpandModelBlockField from \"./ExpandModelBlockField\"\n\nexport interface ConvLayerFieldValue {\n    percentParams: number\n    percentSize: number\n    runTimeInMs: number\n    outputShape: number[]\n    numFilters: number\n    kernelSize: number\n    strideSize: number\n    activation: string\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        fieldContainer: {\n            lineHeight: \"2.5rem\",\n            width: \"15rem\",\n        },\n        field: {\n            width: theme.spacing(10),\n        },\n    })\n)\n\nfunction LayerParameterWidget(props: { initFieldValue: ConvLayerFieldValue }) {\n    const { initFieldValue } = props\n    const { sourceBlock } = useContext(WorkspaceContext)\n    const classes = useStyles()\n\n    const { percentSize, percentParams, outputShape, runTimeInMs } =\n        initFieldValue\n    let { numFilters, kernelSize, strideSize, activation } = initFieldValue\n\n    const updateParameters = () => {\n        // push changes to field values to the parent\n        const updatedValue = {\n            numFilters: numFilters,\n            kernelSize: kernelSize,\n            strideSize: strideSize,\n            activation: activation,\n        }\n\n        // send new value to the parameter holder\n        const expandField = sourceBlock.getField(\n            \"EXPAND_BUTTON\"\n        ) as ExpandModelBlockField\n        expandField.updateFieldValue(updatedValue)\n    }\n\n    const handleChangedFilters = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        const newValue = event.target.valueAsNumber\n        if (newValue && !isNaN(newValue)) {\n            numFilters = newValue\n            updateParameters()\n        }\n    }\n\n    const handleChangedKernelSize = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        const newValue = event.target.valueAsNumber\n        if (newValue && !isNaN(newValue)) {\n            kernelSize = newValue\n            updateParameters()\n        }\n    }\n\n    const handleChangedStrides = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        const newValue = event.target.valueAsNumber\n        if (newValue && !isNaN(newValue)) {\n            strideSize = newValue\n            updateParameters()\n        }\n    }\n\n    const handleChangedActivation = event => {\n        const newValue = event.target.value\n        if (newValue) {\n            activation = newValue\n            updateParameters()\n        }\n    }\n\n    return (\n        <PointerBoundary>\n            <Grid container spacing={1} direction={\"column\"}>\n                <Grid item className={classes.fieldContainer}>\n                    <Box color=\"text.secondary\">\n                        filters&emsp;\n                        <Tooltip title=\"Update the kernel size\">\n                            <TextField\n                                id={useId() + \"filters\"}\n                                type=\"number\"\n                                size=\"small\"\n                                variant=\"outlined\"\n                                defaultValue={numFilters}\n                                onChange={handleChangedFilters}\n                                className={classes.field}\n                            />\n                        </Tooltip>\n                    </Box>\n                    <Box color=\"text.secondary\">\n                        kernel size&emsp;\n                        <Tooltip title=\"Update the kernel size\">\n                            <TextField\n                                id={useId() + \"kernelSize\"}\n                                type=\"number\"\n                                size=\"small\"\n                                variant=\"outlined\"\n                                defaultValue={kernelSize}\n                                onChange={handleChangedKernelSize}\n                                className={classes.field}\n                            />\n                        </Tooltip>\n                    </Box>\n                    <Box color=\"text.secondary\">\n                        stride&emsp;\n                        <Tooltip title=\"Update the stride\">\n                            <TextField\n                                id={useId() + \"stride\"}\n                                type=\"number\"\n                                size=\"small\"\n                                variant=\"outlined\"\n                                defaultValue={strideSize}\n                                onChange={handleChangedStrides}\n                                className={classes.field}\n                            />\n                        </Tooltip>\n                    </Box>\n                    <Box color=\"text.secondary\">\n                        activation&emsp;\n                        <Tooltip title=\"Update the activation function\">\n                            <Select\n                                id={useId() + \"activation\"}\n                                variant=\"outlined\"\n                                defaultValue={activation}\n                                onChange={handleChangedActivation}\n                            >\n                                <MenuItem value=\"softmax\">softmax</MenuItem>\n                                <MenuItem value=\"linear\">linear</MenuItem>\n                                <MenuItem value=\"relu\">relu</MenuItem>\n                            </Select>\n                        </Tooltip>\n                    </Box>\n                </Grid>\n                <Grid item>\n                    <Box color=\"text.secondary\">\n                        Output shape: [{outputShape.join(\", \")}]<br />\n                        Percent of total size: {percentSize.toPrecision(2)}%\n                        <br />\n                        Percent of total params: {percentParams.toPrecision(2)}%\n                        <br />\n                        Run time: {runTimeInMs.toPrecision(2)} ms <br />\n                    </Box>\n                </Grid>\n            </Grid>\n        </PointerBoundary>\n    )\n}\n\nexport default class ConvLayerBlockField extends ReactInlineField {\n    static KEY = \"conv_layer_block_field_key\"\n\n    constructor(value: string, previousValue?: any) {\n        super(value)\n        if (previousValue)\n            this.value = { ...this.defaultValue, ...previousValue }\n    }\n\n    static fromJson(options: ReactFieldJSON) {\n        return new ConvLayerBlockField(options?.value)\n    }\n\n    /* This default value is specified here and in modelblockdsl.ts */\n    get defaultValue() {\n        return {\n            percentParams: 0,\n            percentSize: 0,\n            runTimeInMs: 0,\n            outputShape: [0, 0],\n            numFilters: 16,\n            kernelSize: 2,\n            strideSize: 1,\n        }\n    }\n\n    getText_() {\n        return ``\n    }\n\n    renderInlineField(): ReactNode {\n        return <LayerParameterWidget initFieldValue={this.value} />\n    }\n}\n","import React, { ReactNode, useContext } from \"react\"\nimport { Button, Grid, Tooltip } from \"@material-ui/core\"\nimport ViewIcon from \"@material-ui/icons/Visibility\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DownloadIcon from \"@material-ui/icons/GetApp\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\n\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport WorkspaceContext from \"../../WorkspaceContext\"\n\nfunction DataSetButtonWidget() {\n    const { sourceBlock } = useContext(WorkspaceContext)\n\n    const handleViewDataSet = () => {\n        console.log(\"View and edit dataset modal\")\n        sourceBlock.data = \"click.edit\"\n    }\n    const handleDownloadDataSet = () => {\n        console.log(\"Download dataset\")\n        sourceBlock.data = \"click.download\"\n    }\n\n    return (\n        <Grid container spacing={1} direction={\"row\"}>\n            <Grid item style={{ display: \"inline-flex\", width: 300 }}>\n                <Tooltip title=\"View this data set and perform actions like splitting it\">\n                    <Button\n                        onClick={handleViewDataSet}\n                        startIcon={<ViewIcon />}\n                        variant=\"outlined\"\n                        size=\"small\"\n                    >\n                        View\n                    </Button>\n                </Tooltip>\n                &ensp;\n                <Tooltip title=\"Download dataset as csv file\">\n                    <Button\n                        onClick={handleDownloadDataSet}\n                        startIcon={<DownloadIcon />}\n                        variant=\"outlined\"\n                        size=\"small\"\n                    >\n                        Download\n                    </Button>\n                </Tooltip>\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default class DataSetBlockButtons extends ReactInlineField {\n    static KEY = \"ds_block_buttons_key\"\n\n    constructor(value: string) {\n        super(value)\n    }\n\n    static fromJson(options: ReactFieldJSON) {\n        return new DataSetBlockButtons(options?.value)\n    }\n\n    getText_() {\n        return `nn`\n    }\n\n    renderInlineField(): ReactNode {\n        return <DataSetButtonWidget />\n    }\n}\n","import React, { ReactNode, useContext, useEffect, useState } from \"react\"\nimport {\n    Box,\n    Grid,\n    MenuItem,\n    Select,\n    TextField,\n    Tooltip,\n    makeStyles,\n    Theme,\n    createStyles,\n} from \"@material-ui/core\"\n\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport { PointerBoundary } from \"../PointerBoundary\"\n\nimport WorkspaceContext, {\n    resolveBlockServices,\n    WorkspaceWithServices,\n    WorkspaceServices,\n} from \"../../WorkspaceContext\"\nimport { CHANGE } from \"../../../../../jacdac-ts/src/jdom/constants\"\n\nimport { useId } from \"react-use-id-hook\"\nimport ExpandModelBlockField from \"./ExpandModelBlockField\"\n\nexport interface DataSetBlockFieldValue {\n    numRecordings: number\n    numSamples: number\n    inputClasses: string[]\n    inputTypes: string[]\n}\n\nfunction DataSetParameterWidget(props: {\n    initFieldValue: DataSetBlockFieldValue\n}) {\n    const { initFieldValue } = props\n\n    const { inputClasses, inputTypes } = initFieldValue\n\n    const { sourceBlock } = useContext(WorkspaceContext)\n    const services = resolveBlockServices(sourceBlock)\n\n    // track workspace changes and re-render\n    const [, setBlockData] = useState(services.data)\n    useEffect(\n        () =>\n            services?.subscribe(CHANGE, () => {\n                setBlockData(services.data)\n            }),\n        [services]\n    )\n\n    return (\n        <PointerBoundary>\n            <Grid container spacing={1} direction={\"column\"}>\n                <Grid item>\n                    <Box color=\"text.secondary\">\n                        Classes:{\" \"}\n                        {inputClasses.length ? inputClasses.join(\", \") : \"none\"}{\" \"}\n                        <br />\n                        Input type(s):{\" \"}\n                        {inputTypes.length ? inputTypes.join(\", \") : \"none\"}\n                    </Box>\n                </Grid>\n            </Grid>\n        </PointerBoundary>\n    )\n}\n\nexport default class DataSetBlockField extends ReactInlineField {\n    static KEY = \"dataset_block_field_key\"\n\n    constructor(value: string, previousValue?: any) {\n        super(value)\n        if (previousValue)\n            this.value = { ...this.defaultValue, ...previousValue }\n    }\n\n    static fromJson(options: ReactFieldJSON) {\n        return new DataSetBlockField(options?.value)\n    }\n\n    /* This default value is specified here and in modelblockdsl.ts */\n    get defaultValue() {\n        return {\n            numRecordings: 0,\n            numSamples: 0,\n            inputClasses: [],\n            inputTypes: [],\n        }\n    }\n\n    getText_() {\n        const totalRecordings = this.value.numRecordings\n\n        return `${totalRecordings} recording(s)`\n    }\n\n    renderInlineField(): ReactNode {\n        return <DataSetParameterWidget initFieldValue={this.value} />\n    }\n}\n","import React, { ReactNode, useContext, useEffect, useState } from \"react\"\nimport {\n    Box,\n    Grid,\n    MenuItem,\n    Select,\n    TextField,\n    Tooltip,\n    makeStyles,\n    Theme,\n    createStyles,\n} from \"@material-ui/core\"\n\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport { PointerBoundary } from \"../PointerBoundary\"\n\nimport WorkspaceContext, { resolveBlockServices } from \"../../WorkspaceContext\"\n\nimport { useId } from \"react-use-id-hook\"\nimport ExpandModelBlockField from \"./ExpandModelBlockField\"\n\nexport interface DenseLayerFieldValue {\n    percentParams: number\n    percentSize: number\n    runTimeInMs: number\n    outputShape: number[]\n    numUnits: number\n    activation: string\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        fieldContainer: {\n            lineHeight: \"2.5rem\",\n            width: \"15rem\",\n        },\n        field: {\n            width: theme.spacing(10),\n        },\n    })\n)\n\nfunction LayerParameterWidget(props: {\n    initFieldValue: DenseLayerFieldValue\n    setFieldValue: (f: DenseLayerFieldValue) => void\n}) {\n    const { initFieldValue } = props\n    const { sourceBlock } = useContext(WorkspaceContext)\n    const classes = useStyles()\n\n    const { percentSize, percentParams, outputShape, runTimeInMs } =\n        initFieldValue\n    let { numUnits, activation } = initFieldValue\n\n    const updateParameters = () => {\n        // push changes to field values to the parent\n        const updatedValue = {\n            numUnits: numUnits,\n            activation: activation,\n        }\n\n        // send new value to the parameter holder\n        const expandField = sourceBlock.getField(\n            \"EXPAND_BUTTON\"\n        ) as ExpandModelBlockField\n        expandField.updateFieldValue(updatedValue)\n    }\n\n    const handleChangedUnits = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const newValue = event.target.valueAsNumber\n        if (newValue && !isNaN(newValue)) {\n            numUnits = newValue\n            updateParameters()\n        }\n    }\n\n    const handleChangedActivation = event => {\n        const newValue = event.target.value\n        if (newValue) {\n            activation = newValue\n            updateParameters()\n        }\n    }\n\n    return (\n        <PointerBoundary>\n            <Grid container spacing={1} direction={\"column\"}>\n                <Grid item className={classes.fieldContainer}>\n                    <Box color=\"text.secondary\">\n                        units&emsp;\n                        <Tooltip title=\"Update the number of units\">\n                            <TextField\n                                id={useId() + \"filters\"}\n                                type=\"number\"\n                                size=\"small\"\n                                variant=\"outlined\"\n                                defaultValue={numUnits}\n                                onChange={handleChangedUnits}\n                                className={classes.field}\n                            />\n                        </Tooltip>\n                    </Box>\n                    <Box color=\"text.secondary\">\n                        activation&emsp;\n                        <Tooltip title=\"Update the activation function\">\n                            <Select\n                                id={useId() + \"activation\"}\n                                variant=\"outlined\"\n                                defaultValue={activation}\n                                onChange={handleChangedActivation}\n                            >\n                                <MenuItem value=\"softmax\">softmax</MenuItem>\n                                <MenuItem value=\"linear\">linear</MenuItem>\n                                <MenuItem value=\"relu\">relu</MenuItem>\n                            </Select>\n                        </Tooltip>\n                    </Box>\n                </Grid>\n                <Grid item>\n                    <Box color=\"text.secondary\">\n                        Output shape: [{outputShape.join(\", \")}]<br />\n                        Percent of total size: {percentSize.toPrecision(2)}%\n                        <br />\n                        Percent of total params: {percentParams.toPrecision(2)}%\n                        <br />\n                        Run time: {runTimeInMs.toPrecision(2)} ms <br />\n                    </Box>\n                </Grid>\n            </Grid>\n        </PointerBoundary>\n    )\n}\n\nexport default class DenseLayerBlockField extends ReactInlineField {\n    static KEY = \"dense_layer_block_field_key\"\n\n    constructor(value: string, previousValue?: any) {\n        super(value)\n        if (previousValue)\n            this.value = { ...this.defaultValue, ...previousValue }\n    }\n\n    static fromJson(options: ReactFieldJSON) {\n        return new DenseLayerBlockField(options?.value)\n    }\n\n    /* This default value is specified here and in modelblockdsl.ts */\n    get defaultValue() {\n        return {\n            percentParams: 0,\n            percentSize: 0,\n            runTimeInMs: 0,\n            outputShape: [0],\n            numUnits: 4,\n            activation: \"relu\",\n        }\n    }\n\n    getText_() {\n        return ``\n    }\n\n    renderInlineField(): ReactNode {\n        return <LayerParameterWidget initFieldValue={this.value} />\n    }\n}\n","import React, { ReactNode, useContext, useEffect, useState } from \"react\"\nimport {\n    Box,\n    Grid,\n    TextField,\n    Tooltip,\n    makeStyles,\n    Theme,\n    createStyles,\n} from \"@material-ui/core\"\n\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport { PointerBoundary } from \"../PointerBoundary\"\n\nimport WorkspaceContext from \"../../WorkspaceContext\"\n\nimport { useId } from \"react-use-id-hook\"\nimport ExpandModelBlockField from \"./ExpandModelBlockField\"\n\nexport interface DropoutLayerFieldValue {\n    percentParams: number\n    percentSize: number\n    runTimeInMs: number\n    outputShape: number[]\n    rate: string\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        fieldContainer: {\n            lineHeight: \"2.5rem\",\n            width: \"15rem\",\n        },\n        field: {\n            width: theme.spacing(10),\n        },\n    })\n)\n\nfunction LayerParameterWidget(props: {\n    initFieldValue: DropoutLayerFieldValue\n}) {\n    const { initFieldValue } = props\n    const { sourceBlock } = useContext(WorkspaceContext)\n    const classes = useStyles()\n\n    const { percentSize, percentParams, outputShape, runTimeInMs } =\n        initFieldValue\n    let rate = initFieldValue.rate\n\n    const updateParameters = () => {\n        let rateAsNum\n        if (rate == \"0.\") rateAsNum = 0\n        else rateAsNum = parseFloat(rate)\n        // push changes to field values to the parent\n        const updatedValue = {\n            rate: rateAsNum,\n        }\n\n        // send new value to the parameter holder\n        const expandField = sourceBlock.getField(\n            \"EXPAND_BUTTON\"\n        ) as ExpandModelBlockField\n        expandField.updateFieldValue(updatedValue)\n    }\n\n    const handleChangedRate = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const newValue = event.target.value\n        if (newValue) {\n            let valueAsNum\n\n            // catch edge case?\n            if (newValue == \"0.\") valueAsNum = 0\n            else valueAsNum = parseFloat(newValue)\n\n            if (valueAsNum >= 0 && valueAsNum < 1) {\n                rate = newValue\n                updateParameters()\n            }\n        }\n    }\n\n    return (\n        <PointerBoundary>\n            <Grid container spacing={1} direction={\"column\"}>\n                <Grid item className={classes.fieldContainer}>\n                    <Box color=\"text.secondary\">\n                        rate&emsp;\n                        <Tooltip title=\"Update the dropout rate\">\n                            <TextField\n                                id={useId() + \"rate\"}\n                                type=\"text\"\n                                size=\"small\"\n                                variant=\"outlined\"\n                                defaultValue={rate}\n                                onChange={handleChangedRate}\n                                className={classes.field}\n                            />\n                        </Tooltip>\n                    </Box>\n                </Grid>\n                <Grid item>\n                    <Box color=\"text.secondary\">\n                        Output shape: [{outputShape.join(\", \")}]<br />\n                        Percent of total size: {percentSize.toPrecision(2)}%\n                        <br />\n                        Percent of total params: {percentParams.toPrecision(2)}%\n                        <br />\n                        Run time: {runTimeInMs.toPrecision(2)} ms <br />\n                    </Box>\n                </Grid>\n            </Grid>\n        </PointerBoundary>\n    )\n}\n\nexport default class DropoutLayerBlockField extends ReactInlineField {\n    static KEY = \"dropout_layer_block_field_key\"\n\n    constructor(value: string, previousValue?: any) {\n        super(value)\n        if (previousValue)\n            this.value = { ...this.defaultValue, ...previousValue }\n    }\n\n    static fromJson(options: ReactFieldJSON) {\n        return new DropoutLayerBlockField(options?.value)\n    }\n\n    /* This default value is specified here and in modelblockdsl.ts */\n    get defaultValue() {\n        return {\n            percentParams: 0,\n            percentSize: 0,\n            runTimeInMs: 0,\n            outputShape: [0, 0],\n            rate: \"0.1\",\n        }\n    }\n\n    getText_() {\n        return ``\n    }\n\n    renderInlineField(): ReactNode {\n        return <LayerParameterWidget initFieldValue={this.value} />\n    }\n}\n","import React, { useContext, useState } from \"react\"\n\nimport { Grid } from \"@material-ui/core\"\nimport AddCircleIcon from \"@material-ui/icons/AddCircleOutline\"\nimport RemoveCircleIcon from \"@material-ui/icons/RemoveCircleOutline\"\nimport IconButtonWithTooltip from \"../../../ui/IconButtonWithTooltip\"\n\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport WorkspaceContext from \"../../WorkspaceContext\"\n\nimport { MODEL_BLOCKS } from \"../../../model-editor/modelblockdsl\"\n\nimport DenseLayerBlockField from \"./DenseLayerBlockField\"\nimport DataSetBlockField from \"./DataSetBlockField\"\nimport RecordingBlockField from \"./RecordingBlockField\"\nimport NeuralNetworkBlockField from \"./NeuralNetworkBlockField\"\nimport ConvLayerBlockField from \"./ConvLayerBlockField\"\nimport PoolingLayerBlockField from \"./PoolingLayerBlockField\"\nimport DropoutLayerBlockField from \"./DropoutLayerBlockField\"\nimport FlattenLayerBlockField from \"./FlattenLayerBlockField\"\nimport { Block } from \"blockly\"\n\nconst REMOVABLE_INPUT = \"REMOVABLE_INPUT\"\nconst LAYER_INPUT = \"LAYER_INPUTS\"\n\nfunction ExpandIconWidget() {\n    const { sourceBlock } = useContext(WorkspaceContext)\n\n    const getCurrentValue = () => {\n        const expandField = sourceBlock.getField(\"EXPAND_BUTTON\")\n        if (expandField.getValue()) {\n            const value = JSON.parse(expandField.getValue())\n            return value\n        }\n        return null\n    }\n\n    const updateCurrentValue = (paramName: string, paramValue: any) => {\n        const expandField = sourceBlock.getField(\n            \"EXPAND_BUTTON\"\n        ) as ExpandModelBlockField\n\n        expandField.updateFieldValue({ paramName: paramValue })\n    }\n\n    const appendParamInput = (block: Block) => {\n        block\n            .appendDummyInput(REMOVABLE_INPUT)\n            .appendField(getBlockFieldType(block.type), \"BLOCK_PARAMS\")\n\n        // TODO. This is a hack, no moving blocks that are open\n        block.setMovable(false)\n\n        // place the new input before the input statement field\n        if (block.getInput(LAYER_INPUT))\n            block.moveInputBefore(REMOVABLE_INPUT, LAYER_INPUT)\n    }\n\n    const getBlockFieldType = (blockType: string) => {\n        const currentValue = getCurrentValue()\n        switch (blockType) {\n            case MODEL_BLOCKS + \"dataset\":\n                return new DataSetBlockField(\"\", currentValue)\n            case MODEL_BLOCKS + \"recording\":\n                return new RecordingBlockField(\"\", currentValue)\n            case MODEL_BLOCKS + \"nn\":\n                return new NeuralNetworkBlockField(\"\", currentValue)\n            case MODEL_BLOCKS + \"conv1d_layer\":\n                return new ConvLayerBlockField(\"\", currentValue)\n            case MODEL_BLOCKS + \"conv2d_layer\":\n                return new ConvLayerBlockField(\"\", currentValue)\n            case MODEL_BLOCKS + \"dense_layer\":\n                return new DenseLayerBlockField(\"\", currentValue)\n            case MODEL_BLOCKS + \"dropout_layer\":\n                return new DropoutLayerBlockField(\"\", currentValue)\n            case MODEL_BLOCKS + \"flatten_layer\":\n                return new FlattenLayerBlockField(\"\", currentValue)\n            case MODEL_BLOCKS + \"maxpool1d_layer\":\n                return new PoolingLayerBlockField(\"\", currentValue)\n            case MODEL_BLOCKS + \"maxpool2d_layer\":\n                return new PoolingLayerBlockField(\"\", currentValue)\n            case MODEL_BLOCKS + \"avgpool1d_layer\":\n                return new PoolingLayerBlockField(\"\", currentValue)\n            case MODEL_BLOCKS + \"avgpool2d_layer\":\n                return new PoolingLayerBlockField(\"\", currentValue)\n            default:\n                console.error(\"Got inappropriate input for expanding block\")\n                return null\n        }\n    }\n\n    const [parametersVisible, setParametersVisible] = useState(() => {\n        const fieldValue = getCurrentValue()\n        if (fieldValue) {\n            const paramsVisible = fieldValue[\"parametersVisible\"]\n            if (paramsVisible) appendParamInput(sourceBlock)\n            return paramsVisible\n        }\n        return false\n    })\n\n    const handleExpandBlock = () => {\n        const parameterField = sourceBlock.getField(\n            \"BLOCK_PARAMS\"\n        ) as ReactInlineField\n        if (parameterField) {\n            // save the parameters written to that block\n            const paramValues = JSON.parse(parameterField.getValue())\n            Object.keys(paramValues).forEach(key => {\n                updateCurrentValue(key, paramValues[key])\n            })\n\n            // identify which input to remove and remove it\n            parameterField.getParentInput().name = REMOVABLE_INPUT\n            sourceBlock.removeInput(REMOVABLE_INPUT)\n            // TODO this is a hack. Need to implement textToDom and domToText for these mutator blocks\n            sourceBlock.setMovable(true)\n\n            // update the value of the expand button field\n            updateCurrentValue(\"parametersVisible\", false)\n            setParametersVisible(false)\n        } else {\n            // add a removable field with the appropriate field type\n            appendParamInput(sourceBlock)\n\n            // update the value of the expand button field\n            updateCurrentValue(\"parametersVisible\", true)\n            setParametersVisible(true)\n        }\n    }\n\n    return (\n        <Grid container spacing={1}>\n            <Grid item>\n                <IconButtonWithTooltip\n                    style={{ backgroundColor: \"transparent\" }}\n                    onClick={handleExpandBlock}\n                    title=\"Expand dataset block to see all dataset info\"\n                >\n                    {parametersVisible ? (\n                        <RemoveCircleIcon />\n                    ) : (\n                        <AddCircleIcon />\n                    )}\n                </IconButtonWithTooltip>\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default class ExpandModelBlockField extends ReactInlineField {\n    static KEY = \"model_field_key\"\n\n    constructor(value: string) {\n        super(value)\n    }\n\n    get defaultValue() {\n        return {\n            parametersVisible: false,\n        }\n    }\n\n    protected createContainer(): HTMLDivElement {\n        const c = document.createElement(\"div\")\n        c.style.display = \"inline-block\"\n        c.style.minWidth = \"2rem\"\n        return c\n    }\n\n    static fromJson(options: ReactFieldJSON) {\n        return new ExpandModelBlockField(options?.value)\n    }\n\n    fromXml(fieldElement: Element) {\n        this.setValue(fieldElement.textContent)\n        this.updateBlockName()\n    }\n\n    updateBlockName() {\n        const sourceBlock = this.getSourceBlock()\n\n        const nameField = sourceBlock.inputList[0].fieldRow[0]\n        const name: string = nameField.getValue()\n        const blockName = name.substr(0, name.indexOf(\"(\") - 1)\n\n        if (sourceBlock.type.indexOf(\"conv\") > 0) {\n            // display filters, kernel size, and stride size for convolutional blocks\n            nameField.setValue(\n                `${blockName} (${this.value.numFilters}, ${this.value.kernelSize}, ${this.value.strideSize})`\n            )\n        } else if (sourceBlock.type.indexOf(\"pool\") > 0) {\n            // display kernel size and stride for pooling blocks\n            // update the name of the block\n            nameField.setValue(\n                `${blockName} (${this.value.poolSize}, ${this.value.strideSize})`\n            )\n        } else if (sourceBlock.type.indexOf(\"dense\") > 0) {\n            // display number of units and activation functions for dense blocks\n            nameField.setValue(\n                `${blockName} (${this.value.numUnits}, ${this.value.activation})`\n            )\n        } else if (sourceBlock.type.indexOf(\"drop\") > 0) {\n            // display the dropout rate for dropout layers\n            nameField.setValue(`${blockName} (${this.value.rate})`)\n        }\n        // don't list parameters of other blocks\n    }\n\n    getText_() {\n        return \",\"\n    }\n\n    renderInlineField() {\n        return <ExpandIconWidget />\n    }\n\n    updateFieldValue(msg: any) {\n        this.value = {\n            ...this.value,\n            ...msg,\n        }\n        this.updateBlockName()\n    }\n}\n","import React, { ReactNode, useContext } from \"react\"\nimport { Box, Grid, makeStyles, Theme, createStyles } from \"@material-ui/core\"\n\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport { PointerBoundary } from \"../PointerBoundary\"\n\nimport WorkspaceContext, { resolveBlockServices } from \"../../WorkspaceContext\"\n\nexport interface FlattenLayerFieldValue {\n    percentParams: number\n    percentSize: number\n    runTimeInMs: number\n    outputShape: number[]\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        fieldContainer: {\n            lineHeight: \"2.5rem\",\n            width: \"15rem\",\n        },\n        field: {\n            width: theme.spacing(10),\n        },\n    })\n)\n\nfunction LayerParameterWidget(props: {\n    initFieldValue: FlattenLayerFieldValue\n}) {\n    const { initFieldValue } = props\n\n    const { percentSize, percentParams, outputShape, runTimeInMs } =\n        initFieldValue\n\n    return (\n        <PointerBoundary>\n            <Grid container spacing={1} direction={\"column\"}>\n                <Grid item>\n                    <Box color=\"text.secondary\">\n                        Output shape: [{outputShape.join(\", \")}]<br />\n                        Percent of total size: {percentSize.toPrecision(2)}%\n                        <br />\n                        Percent of total params: {percentParams.toPrecision(2)}%\n                        <br />\n                        Run time: {runTimeInMs.toPrecision(2)} ms <br />\n                    </Box>\n                </Grid>\n            </Grid>\n        </PointerBoundary>\n    )\n}\n\nexport default class FlattenLayerBlockField extends ReactInlineField {\n    static KEY = \"flatten_layer_block_field_key\"\n\n    constructor(value: string, previousValue?: any) {\n        super(value)\n        if (previousValue)\n            this.value = { ...this.defaultValue, ...previousValue }\n    }\n\n    static fromJson(options: ReactFieldJSON) {\n        return new FlattenLayerBlockField(options?.value)\n    }\n\n    /* This default value is specified here and in modelblockdsl.ts */\n    get defaultValue() {\n        return {\n            runTimeInMs: 0,\n            outputShape: [0],\n            percentParams: 0,\n            percentSize: 0,\n            numUnits: 4,\n            activation: \"relu\",\n        }\n    }\n\n    getText_() {\n        return ``\n    }\n\n    renderInlineField(): ReactNode {\n        return <LayerParameterWidget initFieldValue={this.value} />\n    }\n}\n","import React, { ReactNode, useContext } from \"react\"\nimport { Button, createStyles, Grid, Tooltip } from \"@material-ui/core\"\nimport { makeStyles, Theme } from \"@material-ui/core/styles\"\nimport AutorenewIcon from \"@material-ui/icons/Autorenew\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DownloadIcon from \"@material-ui/icons/GetApp\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\n\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport WorkspaceContext from \"../../WorkspaceContext\"\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        numberField: {\n            marginBottom: theme.spacing(1),\n        },\n        buttonContainer: {\n            display: \"inline-flex\",\n            width: 300,\n        },\n    })\n)\n\nfunction NeuralNetworkButtonWidget() {\n    const classes = useStyles()\n\n    const { workspace, sourceBlock } = useContext(WorkspaceContext)\n\n    const handleTrainModel = () => {\n        console.log(\"Open NN classifier modal\")\n        sourceBlock.data = \"click.train\"\n    }\n\n    const handleDownloadModel = () => {\n        console.log(\"Download model\")\n        sourceBlock.data = \"click.download\"\n    }\n\n    return (\n        <Grid container spacing={1} direction={\"row\"}>\n            <Grid item className={classes.buttonContainer}>\n                <Tooltip title=\"Open modal to view and run classifier\">\n                    <Button\n                        onClick={handleTrainModel}\n                        startIcon={<AutorenewIcon />}\n                        variant=\"outlined\"\n                        size=\"small\"\n                    >\n                        Train\n                    </Button>\n                </Tooltip>\n                &ensp;\n                <Tooltip title=\"Download model JSON and weights file\">\n                    <Button\n                        onClick={handleDownloadModel}\n                        startIcon={<DownloadIcon />}\n                        variant=\"outlined\"\n                        size=\"small\"\n                    >\n                        Download\n                    </Button>\n                </Tooltip>\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default class NeuralNetworkBlockButtons extends ReactInlineField {\n    static KEY = \"nn_block_buttons_key\"\n\n    constructor(value: string) {\n        super(value)\n    }\n\n    static fromJson(options: ReactFieldJSON) {\n        return new NeuralNetworkBlockButtons(options?.value)\n    }\n\n    getText_() {\n        return `nn`\n    }\n\n    renderInlineField(): ReactNode {\n        return <NeuralNetworkButtonWidget />\n    }\n}\n","import React, { ReactNode, useContext, useEffect, useState } from \"react\"\nimport {\n    Box,\n    Grid,\n    MenuItem,\n    Select,\n    TextField,\n    Tooltip,\n    makeStyles,\n    Theme,\n    createStyles,\n} from \"@material-ui/core\"\n\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport { PointerBoundary } from \"../PointerBoundary\"\n\nimport WorkspaceContext, { resolveBlockServices } from \"../../WorkspaceContext\"\n\nimport { useId } from \"react-use-id-hook\"\nimport ExpandModelBlockField from \"./ExpandModelBlockField\"\n\nexport interface NeuralNetworkBlockFieldValue {\n    totalLayers: number\n    totalParams: number\n    totalSize: number\n    runTimeInMs: number\n    inputShape: number[]\n    optimizer: string\n    numEpochs: number\n    lossFn: string\n    metrics: string\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        fieldContainer: {\n            lineHeight: \"2.5rem\",\n            width: \"15rem\",\n        },\n        field: {\n            width: theme.spacing(10),\n        },\n    })\n)\n\nfunction NNParameterWidget(props: {\n    initFieldValue: NeuralNetworkBlockFieldValue\n}) {\n    const { initFieldValue } = props\n    const { sourceBlock } = useContext(WorkspaceContext)\n    const classes = useStyles()\n\n    const { totalLayers, totalSize, totalParams, runTimeInMs, inputShape } =\n        initFieldValue\n    const [optimizer, setOptimizer] = useState<string>(initFieldValue.optimizer)\n    const [numEpochs, setNumEpochs] = useState(initFieldValue.numEpochs)\n    const [lossFn, setLossFn] = useState(initFieldValue.lossFn)\n    const [metrics, setMetrics] = useState(initFieldValue.metrics)\n\n    useEffect(() => {\n        // push changes to source block after state values update\n        updateParameters()\n    }, [optimizer, numEpochs, lossFn, metrics])\n\n    const updateParameters = () => {\n        // push changes to field values to the parent\n        const updatedValue = {\n            optimizer: optimizer,\n            numEpochs: numEpochs,\n            lossFn: lossFn,\n            metrics: metrics,\n        }\n\n        // send new value to the parameter holder\n        const expandField = sourceBlock.getField(\n            \"EXPAND_BUTTON\"\n        ) as ExpandModelBlockField\n        expandField.updateFieldValue(updatedValue)\n    }\n\n    const handleChangedEpochs = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        const newValue = event.target.valueAsNumber\n        if (newValue && !isNaN(newValue)) {\n            setNumEpochs(newValue)\n        }\n    }\n\n    const handleChangedOptimizer = event => {\n        const newValue = event.target.value\n        if (newValue) setOptimizer(newValue)\n    }\n\n    const handleChangedLossFn = event => {\n        const newValue = event.target.value\n        if (newValue) setLossFn(newValue)\n    }\n\n    return (\n        <PointerBoundary>\n            <Grid container spacing={1} direction={\"column\"}>\n                <Grid item className={classes.fieldContainer}>\n                    <Box color=\"text.secondary\">\n                        optimizer&ensp;\n                        <Tooltip title=\"Update the optimizer\">\n                            <Select\n                                id={useId() + \"optimizer\"}\n                                variant=\"outlined\"\n                                value={optimizer}\n                                onChange={handleChangedOptimizer}\n                            >\n                                <MenuItem value=\"adam\">adam</MenuItem>\n                                <MenuItem value=\"sgd\">SGD</MenuItem>\n                                <MenuItem value=\"adagrad\">adagrad</MenuItem>\n                                <MenuItem value=\"adadelta\">adadelta</MenuItem>\n                            </Select>\n                        </Tooltip>\n                    </Box>\n                    <Box color=\"text.secondary\">\n                        loss&ensp;\n                        <Tooltip title=\"Update the loss function\">\n                            <Select\n                                id={useId() + \"lossFn\"}\n                                variant=\"outlined\"\n                                value={lossFn}\n                                onChange={handleChangedLossFn}\n                            >\n                                <MenuItem value=\"categoricalCrossentropy\">\n                                    CCE\n                                </MenuItem>\n                                <MenuItem value=\"meanSquaredError\">\n                                    MSE\n                                </MenuItem>\n                                <MenuItem value=\"hinge\">hinge</MenuItem>\n                            </Select>\n                        </Tooltip>\n                    </Box>\n                    <Box color=\"text.secondary\">\n                        epochs&ensp;\n                        <Tooltip title=\"Update the batch size to train on\">\n                            <TextField\n                                id={useId() + \"epochs\"}\n                                type=\"number\"\n                                size=\"small\"\n                                variant=\"outlined\"\n                                value={numEpochs}\n                                onChange={handleChangedEpochs}\n                                className={classes.field}\n                            />\n                        </Tooltip>\n                    </Box>\n                </Grid>\n                <Grid item>\n                    <Box color=\"text.secondary\">\n                        Input shape: [{inputShape.join(\", \")}]<br />\n                        No. of layers: {totalLayers} <br />\n                        No. of parameters: {totalParams} <br />\n                        Total size: {(totalSize / 1000).toPrecision(2)} KB{\" \"}\n                        <br />\n                        Run time: {runTimeInMs.toPrecision(2)}ms @ 64MHz <br />\n                    </Box>\n                </Grid>\n            </Grid>\n        </PointerBoundary>\n    )\n}\n\nexport default class NeuralNetworkBlockField extends ReactInlineField {\n    static KEY = \"nn_block_field_key\"\n\n    constructor(value: string, previousValue?: any) {\n        super(value)\n        if (previousValue)\n            this.value = { ...this.defaultValue, ...previousValue }\n    }\n\n    static fromJson(options: ReactFieldJSON) {\n        return new NeuralNetworkBlockField(options?.value)\n    }\n\n    /* This default value is specified here and in modelblockdsl.ts */\n    get defaultValue() {\n        return {\n            totalLayers: 0,\n            totalParams: 0,\n            totalSize: 0,\n            runTimeInMs: 0,\n            inputShape: [0, 0],\n            optimizer: \"adam\",\n            numEpochs: 200,\n            lossFn: \"categoricalCrossentropy\",\n            metrics: \"acc\",\n        }\n    }\n\n    getText_() {\n        const { totalLayers } = this.value\n\n        return `${totalLayers} layer(s)`\n    }\n\n    renderInlineField(): ReactNode {\n        return <NNParameterWidget initFieldValue={this.value} />\n    }\n}\n","import React, { ReactNode, useContext } from \"react\"\nimport {\n    Box,\n    Grid,\n    TextField,\n    Tooltip,\n    makeStyles,\n    Theme,\n    createStyles,\n} from \"@material-ui/core\"\n\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport { PointerBoundary } from \"../PointerBoundary\"\n\nimport WorkspaceContext from \"../../WorkspaceContext\"\n\nimport { useId } from \"react-use-id-hook\"\nimport ExpandModelBlockField from \"./ExpandModelBlockField\"\n\nexport interface PoolingLayerFieldValue {\n    percentParams: number\n    percentSize: number\n    runTimeInMs: number\n    outputShape: number[]\n    poolSize: number\n    strideSize: number\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        fieldContainer: {\n            lineHeight: \"2.5rem\",\n            width: \"15rem\",\n        },\n        field: {\n            width: theme.spacing(10),\n        },\n    })\n)\n\nfunction LayerParameterWidget(props: {\n    initFieldValue: PoolingLayerFieldValue\n}) {\n    const { initFieldValue } = props\n    const { sourceBlock } = useContext(WorkspaceContext)\n    const classes = useStyles()\n\n    const { percentSize, percentParams, outputShape, runTimeInMs } =\n        initFieldValue\n    let { poolSize, strideSize } = initFieldValue\n\n    const updateParameters = () => {\n        // push changes to field values to the parent\n        const updatedValue = {\n            poolSize: poolSize,\n            strideSize: strideSize,\n        }\n\n        // send new value to the parameter holder\n        const expandField = sourceBlock.getField(\n            \"EXPAND_BUTTON\"\n        ) as ExpandModelBlockField\n        expandField.updateFieldValue(updatedValue)\n    }\n\n    const handleChangedPoolSize = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        const newValue = event.target.valueAsNumber\n        if (newValue && !isNaN(newValue)) {\n            poolSize = newValue\n            updateParameters()\n        }\n    }\n\n    const handleChangedStrides = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        const newValue = event.target.valueAsNumber\n        if (newValue && !isNaN(newValue)) {\n            strideSize = newValue\n            updateParameters()\n        }\n    }\n\n    return (\n        <PointerBoundary>\n            <Grid container spacing={1} direction={\"column\"}>\n                <Grid item className={classes.fieldContainer}>\n                    <Box color=\"text.secondary\">\n                        pool size&emsp;\n                        <Tooltip title=\"Update the pool size\">\n                            <TextField\n                                id={useId() + \"poolSize\"}\n                                type=\"number\"\n                                size=\"small\"\n                                variant=\"outlined\"\n                                defaultValue={poolSize}\n                                onChange={handleChangedPoolSize}\n                                className={classes.field}\n                            />\n                        </Tooltip>\n                    </Box>\n                    <Box color=\"text.secondary\">\n                        stride&emsp;\n                        <Tooltip title=\"Update the stride\">\n                            <TextField\n                                id={useId() + \"stride\"}\n                                type=\"number\"\n                                size=\"small\"\n                                variant=\"outlined\"\n                                defaultValue={strideSize}\n                                onChange={handleChangedStrides}\n                                className={classes.field}\n                            />\n                        </Tooltip>\n                    </Box>\n                </Grid>\n                <Grid item>\n                    <Box color=\"text.secondary\">\n                        Output shape: [{outputShape.join(\", \")}]<br />\n                        Percent of total size: {percentSize.toPrecision(2)}%\n                        <br />\n                        Percent of total params: {percentParams.toPrecision(2)}%\n                        <br />\n                        Run time: {runTimeInMs.toPrecision(2)} ms <br />\n                    </Box>\n                </Grid>\n            </Grid>\n        </PointerBoundary>\n    )\n}\n\nexport default class PoolingLayerBlockField extends ReactInlineField {\n    static KEY = \"pooling_layer_block_field_key\"\n\n    constructor(value: string, previousValue?: any) {\n        super(value)\n        if (previousValue)\n            this.value = { ...this.defaultValue, ...previousValue }\n    }\n\n    static fromJson(options: ReactFieldJSON) {\n        return new PoolingLayerBlockField(options?.value)\n    }\n\n    /* This default value is specified here and in modelblockdsl.ts */\n    get defaultValue() {\n        return {\n            percentParams: 0,\n            percentSize: 0,\n            runTimeInMs: 0,\n            outputShape: [0, 0],\n            poolSize: 2,\n            strideSize: 1,\n        }\n    }\n\n    getText_() {\n        return ``\n    }\n\n    renderInlineField(): ReactNode {\n        return <LayerParameterWidget initFieldValue={this.value} />\n    }\n}\n","import React, { ReactNode, useContext, useEffect, useState } from \"react\"\nimport {\n    Box,\n    Grid,\n    Tooltip,\n    makeStyles,\n    Theme,\n    createStyles,\n    Button,\n} from \"@material-ui/core\"\nimport DownloadIcon from \"@material-ui/icons/GetApp\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\n\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport { PointerBoundary } from \"../PointerBoundary\"\n\nimport WorkspaceContext, { resolveBlockServices } from \"../../WorkspaceContext\"\nimport ServiceManagerContext from \"../../../ServiceManagerContext\"\nimport FieldDataSet from \"../../../FieldDataSet\"\n\nexport interface RecordingBlockFieldValue {\n    numSamples: number\n    timestamp: number\n    inputTypes: string[]\n}\n\nfunction RecordingParameterWidget(props: {\n    initFieldValue: RecordingBlockFieldValue\n}) {\n    const { initFieldValue } = props\n    const { sourceBlock } = useContext(WorkspaceContext)\n\n    const { numSamples, inputTypes } = initFieldValue\n\n    const handleDownloadDataSet = () => {\n        console.log(\"Download recording\")\n        sourceBlock.data = \"click.download\"\n    }\n\n    return (\n        <PointerBoundary>\n            <Grid container spacing={1} direction={\"column\"}>\n                <Grid item>\n                    <Box color=\"text.secondary\">\n                        Total samples: {numSamples} <br />\n                        Input type(s):{\" \"}\n                        {inputTypes.length ? inputTypes.join(\", \") : \"none\"}\n                    </Box>\n                </Grid>\n                <Grid item style={{ display: \"inline-flex\" }}>\n                    <Tooltip title=\"Download recording as csv file\">\n                        <Button\n                            onClick={handleDownloadDataSet}\n                            startIcon={<DownloadIcon />}\n                            variant=\"outlined\"\n                            size=\"small\"\n                        >\n                            Download\n                        </Button>\n                    </Tooltip>\n                </Grid>\n            </Grid>\n        </PointerBoundary>\n    )\n}\n\nexport default class RecordingBlockField extends ReactInlineField {\n    static KEY = \"recording_block_field_key\"\n\n    constructor(value: string, previousValue?: any) {\n        super(value)\n        if (previousValue)\n            this.value = { ...this.defaultValue, ...previousValue }\n    }\n\n    static fromJson(options: ReactFieldJSON) {\n        return new RecordingBlockField(options?.value)\n    }\n\n    /* This default value is specified here and in modelblockdsl.ts */\n    get defaultValue() {\n        return {\n            numSamples: 0,\n            timestamp: 0,\n            inputTypes: [],\n        }\n    }\n\n    getText_() {\n        const { numSamples } = this.value\n\n        return `${numSamples} sample(s)`\n    }\n\n    renderInlineField(): ReactNode {\n        return <RecordingParameterWidget initFieldValue={this.value} />\n    }\n}\n","import React, { lazy, ReactNode, useContext, useEffect, useState } from \"react\"\nimport {\n    Box,\n    Button,\n    Grid,\n    Tooltip,\n    makeStyles,\n    Theme,\n    createStyles,\n} from \"@material-ui/core\"\nimport Suspense from \"../../../ui/Suspense\"\n\nimport { ReactFieldJSON } from \"../ReactField\"\nimport ReactInlineField from \"../ReactInlineField\"\nimport { PointerBoundary } from \"../PointerBoundary\"\n\nimport ViewIcon from \"@material-ui/icons/Visibility\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DownloadIcon from \"@material-ui/icons/GetApp\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\n\nimport { predictRequest } from \"../../dsl/workers/tf.proxy\"\nimport type { TFModelPredictRequest } from \"../../../../workers/tf/dist/node_modules/tf.worker\"\n\nimport WorkspaceContext, { resolveBlockServices } from \"../../WorkspaceContext\"\nimport { CHANGE } from \"../../../../../jacdac-ts/src/jdom/constants\"\n\nimport MBDataSet, { arraysEqual } from \"../../../model-editor/MBDataSet\"\nimport MBModel from \"../../../model-editor/MBModel\"\n\nconst ConfusionMatrixHeatMap = lazy(\n    () => import(\"../../../model-editor/components/ConfusionMatrixHeatMap\")\n)\nconst DataSetPlot = lazy(\n    () => import(\"../../../model-editor/components/DataSetPlot\")\n)\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        fieldContainer: {\n            lineHeight: \"2.5rem\",\n            width: \"15rem\",\n        },\n        field: {\n            width: theme.spacing(10),\n        },\n        inlineItem: {\n            height: theme.spacing(30),\n            overflowY: \"scroll\",\n        },\n    })\n)\n\nfunction TrainedModelDisplayWidget() {\n    const classes = useStyles()\n    const chartProps = {\n        CHART_WIDTH: 150,\n        CHART_HEIGHT: 150,\n        MARK_SIZE: 75,\n        TOOLTIP_NUM_FORMAT: \"0.2f\",\n        PALETTE: [\n            \"#003f5c\",\n            \"#ffa600\",\n            \"#665191\",\n            \"#a05195\",\n            \"#ff7c43\",\n            \"#d45087\",\n            \"#f95d6a\",\n            \"#2f4b7c\",\n        ],\n    }\n\n    const [chartType, setChartType] = useState<\n        \"confusion matrix\" | \"dataset plot\"\n    >(\"confusion matrix\")\n\n    const { sourceBlock } = useContext(WorkspaceContext)\n    const services = resolveBlockServices(sourceBlock)\n\n    const [dataSet, setDataSet] = useState(undefined)\n    const [model, setModel] = useState(undefined)\n    const [trainingPredictionResult, setTrainingPredictionResult] =\n        useState(undefined)\n    const [trainTimestamp, setTrainTimestamp] = useState(Date.now())\n    const [errorMsg, setErrorMsg] = useState(\"\")\n\n    // track workspace changes and re-render\n    useEffect(\n        () =>\n            services?.subscribe(CHANGE, () => {\n                sourceBlock.data = \"click.refreshdisplay\"\n\n                if (!services.data) {\n                    setErrorMsg(\"Please select a valid dataset\")\n                    return\n                }\n                setErrorMsg(\"\")\n\n                // grab the model and dataset to test with\n                const updatedDataSet = services.data[0] as MBDataSet\n                const updatedModel = services.data[1] as MBModel\n\n                if (!updatedModel || !updatedDataSet) return\n\n                // make sure dataset and model are compatible (same input data)\n                if (\n                    !arraysEqual(\n                        updatedDataSet.inputTypes,\n                        updatedModel.inputTypes\n                    ) ||\n                    updatedDataSet.length != updatedModel.inputShape[0] ||\n                    updatedDataSet.width != updatedModel.inputShape[1]\n                ) {\n                    setErrorMsg(\n                        \"The selected dataset does not have the same input/output type as the trained model\"\n                    )\n                    return\n                }\n                setErrorMsg(\"\")\n\n                // get selected chart\n                const selectedChart = sourceBlock\n                    .getField(\"SELECTED_CHART\")\n                    .getText()\n\n                // for confusion matrix and dataset plot predict on dataset\n                if (\n                    selectedChart == \"confusion matrix\" ||\n                    selectedChart == \"dataset plot\"\n                ) {\n                    const predictMsg = {\n                        worker: \"tf\",\n                        type: \"predict\",\n                        data: {\n                            zData: updatedDataSet.xs,\n                            model: updatedModel.toJSON(),\n                        },\n                    } as TFModelPredictRequest\n                    predictRequest(predictMsg).then(result => {\n                        if (result) {\n                            // Save probability for each class in model object\n                            setTrainingPredictionResult(result.data.predictTop)\n                            setTrainTimestamp(Date.now())\n                        }\n                    })\n                }\n\n                setDataSet(updatedDataSet)\n                setModel(updatedModel)\n                setChartType(selectedChart)\n            }),\n        [services]\n    )\n\n    const handleViewTrainedModel = () => {\n        // open modal to view model\n        sourceBlock.data = \"click.view\"\n    }\n    const handleDownloadModel = () => {\n        // set the model name to what the user typed into the box\n        const trainedModelName = sourceBlock\n            .getField(\"TRAINED_MODEL_NAME\")\n            .getText()\n        if (model) model.name = trainedModelName\n\n        sourceBlock.data = \"click.download\"\n    }\n\n    if (errorMsg.length)\n        return (\n            <Grid container spacing={1} direction={\"column\"}>\n                <Grid item>\n                    <Box color=\"text.secondary\">\n                        Error: {errorMsg}\n                        <br />\n                    </Box>\n                    {!!model && (\n                        <Box color=\"text.secondary\">\n                            Input Types: {model.inputTypes.join(\", \")}\n                            <br />\n                            Input Shape: [{model.inputShape.join(\", \")}]<br />\n                            Classes: {model.labels.join(\", \")}\n                        </Box>\n                    )}\n                </Grid>\n                <Grid item style={{ display: \"inline-flex\" }}>\n                    <Tooltip title=\"View this model and perform actions like testing with live data\">\n                        <Button\n                            onClick={handleViewTrainedModel}\n                            startIcon={<ViewIcon />}\n                            variant=\"outlined\"\n                            size=\"small\"\n                        >\n                            View\n                        </Button>\n                    </Tooltip>\n                    &ensp;\n                    <Tooltip title=\"Download trained model file\">\n                        <Button\n                            onClick={handleDownloadModel}\n                            startIcon={<DownloadIcon />}\n                            variant=\"outlined\"\n                            size=\"small\"\n                        >\n                            Download\n                        </Button>\n                    </Tooltip>\n                </Grid>\n            </Grid>\n        )\n    else if (chartType == \"confusion matrix\")\n        return (\n            <Grid container spacing={1} direction={\"column\"}>\n                {!!model && !!dataSet && (\n                    <Grid item>\n                        <PointerBoundary>\n                            <Suspense>\n                                <ConfusionMatrixHeatMap\n                                    chartProps={chartProps}\n                                    yActual={dataSet.ys}\n                                    yPredicted={trainingPredictionResult}\n                                    labels={model.labels}\n                                    timestamp={trainTimestamp}\n                                />\n                            </Suspense>\n                        </PointerBoundary>\n                    </Grid>\n                )}\n                <Grid item style={{ display: \"inline-flex\" }}>\n                    <Tooltip title=\"View this model and perform actions like testing with live data\">\n                        <Button\n                            onClick={handleViewTrainedModel}\n                            startIcon={<ViewIcon />}\n                            variant=\"outlined\"\n                            size=\"small\"\n                        >\n                            View\n                        </Button>\n                    </Tooltip>\n                    &ensp;\n                    <Tooltip title=\"Download trained model file\">\n                        <Button\n                            onClick={handleDownloadModel}\n                            startIcon={<DownloadIcon />}\n                            variant=\"outlined\"\n                            size=\"small\"\n                        >\n                            Download\n                        </Button>\n                    </Tooltip>\n                </Grid>\n            </Grid>\n        )\n    else if (chartType == \"dataset plot\")\n        return (\n            <Grid container spacing={1} direction={\"column\"}>\n                {!!model && !!dataSet && (\n                    <Grid item>\n                        <PointerBoundary>\n                            <Suspense>\n                                <DataSetPlot\n                                    chartProps={chartProps}\n                                    reactStyle={classes}\n                                    dataset={dataSet}\n                                    predictedLabels={trainingPredictionResult}\n                                    timestamp={trainTimestamp}\n                                />\n                            </Suspense>\n                        </PointerBoundary>\n                    </Grid>\n                )}\n                <Grid item style={{ display: \"inline-flex\" }}>\n                    <Tooltip title=\"View this model and perform actions like testing with live data\">\n                        <Button\n                            onClick={handleViewTrainedModel}\n                            startIcon={<ViewIcon />}\n                            variant=\"outlined\"\n                            size=\"small\"\n                        >\n                            View\n                        </Button>\n                    </Tooltip>\n                    &ensp;\n                    <Tooltip title=\"Download trained model file\">\n                        <Button\n                            onClick={handleDownloadModel}\n                            startIcon={<DownloadIcon />}\n                            variant=\"outlined\"\n                            size=\"small\"\n                        >\n                            Download\n                        </Button>\n                    </Tooltip>\n                </Grid>\n            </Grid>\n        )\n}\n\nexport default class TrainedModelBlockField extends ReactInlineField {\n    static KEY = \"trained_model_block_field_key\"\n\n    constructor(value: string) {\n        super(value)\n    }\n\n    static fromJson(options: ReactFieldJSON) {\n        return new TrainedModelBlockField(options?.value)\n    }\n\n    getText_() {\n        return ``\n    }\n\n    renderInlineField(): ReactNode {\n        return <TrainedModelDisplayWidget />\n    }\n\n    updateFieldValue(msg: any) {\n        this.value = {\n            ...this.value,\n            ...msg,\n        }\n    }\n}\n","import { Block } from \"blockly\"\nimport type {\n    DataSliceOptions,\n    DataSliceRequest,\n} from \"../../../workers/data/dist/node_modules/data.worker\"\nimport postTransformData from \"../dsl/workers/data.proxy\"\nimport { setBlockDataWarning } from \"../WorkspaceContext\"\n\n/* eslint-disable @typescript-eslint/ban-types */\nexport function tidyHeaders(\n    data: object[],\n    type?: \"string\" | \"number\" | \"boolean\"\n) {\n    const row = data?.[0] || {}\n    let headers = Object.keys(row)\n    if (type) headers = headers.filter(header => type === typeof row[header])\n    const types = headers.map(header => typeof row[header])\n    return { headers, types }\n}\n\nexport function tidyFindLastValue(data: object[], column: string) {\n    if (!data?.length) return undefined\n    return data[data.length - 1][column]\n}\n\nexport function tidyResolveHeader(\n    data: object[],\n    name: string,\n    type?: \"string\" | \"number\" | \"boolean\"\n) {\n    if (!data || !name) return undefined\n\n    const { headers } = tidyHeaders(data, type)\n    return headers.indexOf(name) > -1 ? name : undefined\n}\n\nexport function tidyResolveFieldColumn(\n    data: object[],\n    b: Block,\n    fieldName: string,\n    options?: {\n        type?: \"string\" | \"number\" | \"boolean\"\n        required?: boolean\n    }\n) {\n    const name = b.getFieldValue(fieldName)\n    const { type, required } = options || {}\n    const column = tidyResolveHeader(data, name, type)\n    if (!column) {\n        if (required && !name) setBlockDataWarning(b, `missing columns`)\n        else if (name) setBlockDataWarning(b, `${name} not found in dataset`)\n    }\n    return column\n}\n\nexport function tidyResolveFieldColumns(\n    data: object[],\n    b: Block,\n    fieldName: string,\n    type?: \"string\" | \"number\" | \"boolean\"\n): string[] {\n    const name = b.getFieldValue(fieldName)\n    if (!name) return tidyHeaders(data, type)?.headers\n    else {\n        const header = tidyResolveHeader(data, name, type)\n        if (header) return [header]\n        else return []\n    }\n}\n\nexport function tidySlice(\n    data: object[],\n    options: DataSliceOptions\n): Promise<object[]> {\n    if (!options || !data?.length) return Promise.resolve(data)\n\n    const { length } = data\n    const {\n        sliceMin = Infinity,\n        sliceMax = Infinity,\n        sliceHead = Infinity,\n        sliceTail = Infinity,\n        sliceSample = Infinity,\n    } = options\n\n    // shortcut\n    if (\n        length < sliceMin &&\n        length < sliceMax &&\n        length < sliceHead &&\n        length < sliceTail &&\n        length < sliceSample\n    )\n        return Promise.resolve(data)\n\n    // crunch in webworker\n    console.debug(`slice data`, { data, options })\n    return postTransformData(<DataSliceRequest>{\n        type: \"slice\",\n        data,\n        ...options,\n    })\n}\n","import { SMap } from \"../../../jacdac-ts/src/jdom/utils\"\nimport Blockly, { Block, Workspace } from \"blockly\"\nimport { BlockWithServices } from \"./WorkspaceContext\"\nimport { paletteColorByIndex } from \"./dsl/palette\"\n\nexport const NEW_PROJET_XML = '<xml xmlns=\"http://www.w3.org/1999/xhtml\"></xml>'\n\nexport interface InputDefinition {\n    type: string\n    name?: string\n}\n\nexport interface ValueInputDefinition extends InputDefinition {\n    type: \"input_value\"\n    check?: string | string[]\n}\n\nexport interface DummyInputDefinition extends InputDefinition {\n    type: \"input_dummy\"\n}\n\nexport interface StatementInputDefinition extends InputDefinition {\n    type: \"input_statement\"\n    check?: string | string[]\n}\n\nexport interface VariableInputDefinition extends InputDefinition {\n    type: \"field_variable\"\n    variable?: string\n    variableTypes?: string[]\n    defaultType?: string\n}\n\nexport interface TextInputDefinition extends InputDefinition {\n    type: \"field_input\"\n    text?: string\n    spellcheck?: boolean\n}\n\nexport interface OptionsInputDefinition extends InputDefinition {\n    type: \"field_dropdown\"\n    options?: [string, string][]\n}\n\nexport interface NumberInputDefinition extends InputDefinition {\n    type: \"field_number\"\n    min?: number\n    max?: number\n    precision?: number\n}\n\nexport interface ColorInputDefinition extends InputDefinition {\n    color?: string\n}\n\nexport interface DataColumnInputDefinition extends InputDefinition {\n    dataType?: \"string\" | \"number\" | \"boolean\"\n    parentData?: boolean\n}\n\nexport interface DataPreviewInputDefinition extends InputDefinition {\n    compare?: boolean\n}\n\nexport type EventTemplate = \"event\"\n\nexport type EventFieldTemplate = \"event_field\"\n\nexport type RegisterValueTemplate = \"register_value\"\n\nexport type RegisterTemplate =\n    // client blocks\n    | \"register_change_event\"\n    | \"register_set\"\n    | \"register_get\"\n    // server blocks\n    | \"register_set_server\" // register name, expr hole for return value\n    | \"register_get_server\" // register name, special expr block\n\nexport type CommandTemplate = \"command\" | \"server\" | \"raiseNo\" | \"raiseArgs\"\n\nexport type BlockTemplate =\n    | EventTemplate\n    | EventFieldTemplate\n    | RegisterTemplate\n    | RegisterValueTemplate\n    | CommandTemplate\n    | \"shadow\"\n    | \"meta\"\n    | string\n\nexport interface BlockDefinition extends BlockReference {\n    message0?: string\n    args0?: InputDefinition[]\n    colour?: number | string\n    inputsInline?: boolean\n    previousStatement?: string | string[]\n    nextStatement?: string | string[]\n    tooltip?: string\n    helpUrl?: string\n    style?: string\n    output?: string\n    extensions?: string[]\n    template?: BlockTemplate\n    dsl?: string\n\n    // js implementation to be called by VM\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    vm?: (...args: any[]) => any\n\n    // data transformation\n    transformData?: (\n        block: BlockWithServices,\n        // eslint-disable-next-line @typescript-eslint/ban-types\n        data: object[],\n        // eslint-disable-next-line @typescript-eslint/ban-types\n        previousData: object[]\n        // eslint-disable-next-line @typescript-eslint/ban-types\n    ) => Promise<object[]>\n\n    // show data preview field\n    dataPreviewField?: boolean | \"after\"\n\n    // pass original data to the next node, ignoring transformed data\n    passthroughData?: boolean\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const identityTransformData = async (block: Block, data: object[]) =>\n    data\n\nexport interface ServiceBlockDefinition extends BlockDefinition {\n    template: BlockTemplate\n    service: jdspec.ServiceSpec\n}\n\nexport interface ServiceBlockDefinitionFactory<T extends BlockDefinition> {\n    jacdacDefinition: T\n    init: () => void\n}\n\nexport function resolveBlockDefinition<T extends BlockDefinition>(\n    type: string\n) {\n    const b = Blockly.Blocks[type] as ServiceBlockDefinitionFactory<T>\n    return b?.jacdacDefinition\n}\n\nexport interface EventBlockDefinition extends ServiceBlockDefinition {\n    template: EventTemplate\n    events: jdspec.PacketInfo[]\n}\n\nexport interface EventFieldDefinition extends ServiceBlockDefinition {\n    template: EventFieldTemplate\n    event: jdspec.PacketInfo\n}\n\nexport interface RegisterBlockDefinition extends ServiceBlockDefinition {\n    template: RegisterTemplate\n    register: jdspec.PacketInfo\n    field?: jdspec.PacketMember\n}\n\nexport interface CommandBlockDefinition extends ServiceBlockDefinition {\n    kind: \"block\"\n    template: CommandTemplate\n    command: jdspec.PacketInfo\n}\n\nexport interface CustomBlockDefinition extends ServiceBlockDefinition {\n    kind: \"block\"\n    template: \"custom\"\n    expression?: string\n}\n\nexport const JSON_TYPE = \"JSON\"\nexport const STRING_TYPE = \"String\"\nexport const BOOLEAN_TYPE = \"Boolean\"\nexport const NUMBER_TYPE = \"Number\"\nexport const PRIMITIVE_TYPES = [STRING_TYPE, BOOLEAN_TYPE, NUMBER_TYPE]\nexport const BUILTIN_TYPES = [\"\", ...PRIMITIVE_TYPES]\n\nexport const CODE_STATEMENT_TYPE = \"Code\"\nexport const DATA_SCIENCE_STATEMENT_TYPE = \"DataScienceStatement\"\n\nexport const MODEL_BLOCK_CLASS_STATEMENT_TYPE = \"ModelBlockClassStatement\"\nexport const MODEL_BLOCK_PREPROCESS_STATEMENT_TYPE =\n    \"ModelBlockPreprocessStatement\"\nexport const MODEL_BLOCK_LAYER_STATEMENT_TYPE = \"ModelBlockLayerStatement\"\n\nexport const TWIN_BLOCK = \"jacdac_tools_twin\"\n\nexport const toolsColour = paletteColorByIndex(-1)\n\nexport const CHART_WIDTH = 468\nexport const CHART_HEIGHT = 240\nexport const CHART_SVG_MAX_ITEMS = 256\nexport const BAR_MAX_ITEMS = 1 << 10\nexport const SCATTER_MAX_ITEMS = 1 << 13\nexport const LINE_MAX_ITEMS = 1 << 10\nexport const BAR_CORNER_RADIUS = 2\n\nexport const TABLE_WIDTH = CHART_WIDTH\nexport const TABLE_HEIGHT = 480\nexport const SMALL_TABLE_HEIGHT = 136\nexport const TABLE_PREVIEW_MAX_ITEMS = 48\n\nexport const VM_WARNINGS_CATEGORY = \"vm\"\nexport const JSON_WARNINGS_CATEGORY = \"json\"\nexport const MB_WARNINGS_CATEGORY = \"mb\"\n\nexport const WORKSPACE_FILENAME = `blocks.json`\n\nexport interface ContentDefinition {\n    kind: \"category\" | \"sep\" | \"button\" | \"label\" | \"block\"\n    order?: number\n    hidden?: boolean\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport interface BlockReference extends ContentDefinition {\n    kind: \"block\"\n    type: string\n    values?: SMap<BlockReference>\n    blockxml?: string\n\n    value?: number\n    min?: number\n    max?: number\n}\n\nexport interface CategoryDefinition extends ContentDefinition {\n    kind: \"category\"\n    name: string\n    custom?: \"VARIABLE\" | \"PROCEDURE\"\n    expanded?: boolean\n    colour?: string\n    categorystyle?: string\n    contents?: ContentDefinition[]\n}\n\nexport interface ButtonDefinition extends ContentDefinition {\n    kind: \"button\"\n    text: string\n    callbackKey: string\n    callback: (workspace: Workspace) => void\n}\n\nexport interface SeparatorDefinition extends ContentDefinition {\n    kind: \"sep\"\n    gap?: number\n}\n\nexport interface LabelDefinition extends ContentDefinition {\n    kind: \"label\"\n    text: string\n}\n\nexport interface ToolboxConfiguration {\n    kind: \"categoryToolbox\"\n    contents: ContentDefinition[]\n}\n\nexport function visitToolbox(\n    node: ToolboxConfiguration,\n    visitor: {\n        visitButton?: (button: ButtonDefinition) => void\n    }\n) {\n    const visitContents = (contents: ContentDefinition[]) => {\n        contents?.forEach(content => {\n            const { kind } = content\n            switch (kind) {\n                case \"button\":\n                    visitor.visitButton?.(content as ButtonDefinition)\n                    break\n                case \"category\": {\n                    const cat = content as CategoryDefinition\n                    visitContents(cat.contents)\n                    break\n                }\n            }\n        })\n    }\n    visitContents(node.contents)\n}\n","import useDebouncedCallback from './useDebouncedCallback';\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds (or once per browser frame). The throttled function\n * comes with a `cancel` method to cancel delayed `func` invocations and a\n * `flush` method to immediately invoke them. Provide `options` to indicate\n * whether `func` should be invoked on the leading and/or trailing edge of the\n * `wait` timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * If `wait` is omitted in an environment with `requestAnimationFrame`, `func`\n * invocation will be deferred until the next frame is drawn (typically about\n * 16ms).\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `throttle` and `debounce`.\n *\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0]\n *  The number of milliseconds to throttle invocations to; if omitted,\n *  `requestAnimationFrame` is used (if available, otherwise it will be setTimeout(...,0)).\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * const scrollHandler = useThrottledCallback(updatePosition, 100)\n * window.addEventListener('scroll', scrollHandler)\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * const { callback } = useThrottledCallback(renewToken, 300000, { 'trailing': false })\n * <button onClick={callback}>click</button>\n *\n * // Cancel the trailing throttled invocation.\n * window.addEventListener('popstate', throttled.cancel);\n */\n\nexport default function useThrottledCallback(func, wait, _a) {\n  var _b = _a === void 0 ? {} : _a,\n      _c = _b.leading,\n      leading = _c === void 0 ? true : _c,\n      _d = _b.trailing,\n      trailing = _d === void 0 ? true : _d;\n\n  return useDebouncedCallback(func, wait, {\n    maxWait: wait,\n    leading: leading,\n    trailing: trailing\n  });\n}","import { useState, useEffect } from \"react\"\nimport { CHANGE } from \"../../jacdac-ts/src/jdom/constants\"\nimport { IEventSource } from \"../../jacdac-ts/src/jdom/eventsource\"\nimport { useThrottledCallback } from \"use-debounce\"\n\nconst DEFAULT_THROTTLE = 200\nexport default function useChangeThrottled<TNode extends IEventSource, TValue>(\n    node: TNode,\n    query?: (n: TNode) => TValue,\n    time?: number,\n    deps?: React.DependencyList\n): TValue {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const [version, setVersion] = useState(node?.changeId || 0)\n    const value = query ? query(node) : undefined\n    const throttledSetVersion = useThrottledCallback(\n        setVersion,\n        time || DEFAULT_THROTTLE\n    )\n\n    useEffect(\n        () => node?.subscribe(CHANGE, () => throttledSetVersion(node.changeId)),\n        [node, ...(deps || [])]\n    )\n\n    return value\n}\n","import { useContext, useEffect, useState } from \"react\"\nimport { useDebounce } from \"use-debounce\"\nimport WorkspaceContext from \"./WorkspaceContext\"\n\nexport default function useDragDebounce<T>(value: T, delay?: number): T {\n    const { dragging } = useContext(WorkspaceContext)\n    const [debounced] = useDebounce(value, delay)\n    const [valueAtDragging, setValueAtDragging] = useState(debounced)\n\n    // record value when starting to drag\n    useEffect(() => {\n        if (dragging) setValueAtDragging(value)\n    }, [dragging])\n\n    // return value at dragging until drag is completed\n    return dragging ? valueAtDragging : debounced\n}\n","import { BlockServices, BlockWithServices } from \"./WorkspaceContext\"\nimport { Block } from \"blockly\"\nimport { useCallback, useEffect } from \"react\"\nimport useChangeThrottled from \"../../jacdac/useChangeThrottled\"\nimport useDragDebounce from \"./useDragDebounce\"\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport default function useBlockData<T extends object>(\n    block: Block,\n    initialValue?: T[]\n) {\n    const services = (block as unknown as BlockWithServices)?.jacdacServices\n    // data on the current node\n    const { data, transformedData } = useChangeThrottled<\n        BlockServices,\n        { data: T[]; transformedData: T[] }\n    >(services, _ => ({\n        data: _?.data as T[],\n        transformedData: _?.transformedData as T[],\n    }))\n    const setData = useCallback(\n        (value: T[]) => {\n            if (services) services.data = value\n        },\n        [services]\n    )\n\n    // set initial value\n    useEffect(() => {\n        if (\n            services &&\n            initialValue !== undefined &&\n            services.data === undefined\n        )\n            services.data = initialValue\n    }, [services])\n\n    // debounce with dragging\n    const debounced = useDragDebounce(data)\n    const debouncedTransformedData = useDragDebounce(transformedData)\n\n    return {\n        data: debounced,\n        transformedData: debouncedTransformedData,\n        setData,\n    }\n}\n","import { Events, Workspace } from \"blockly\"\nimport { useEffect } from \"react\"\n\nexport default function useWorkspaceEvent(\n    workspace: Workspace,\n    handler: (event: Events.Abstract & { type: string }) => void\n) {\n    // register hook\n    useEffect(() => {\n        workspace?.addChangeListener(handler)\n        return () => workspace?.removeChangeListener(handler)\n    }, [workspace, handler])\n}\n","import { Chip } from \"@material-ui/core\"\nimport React, { useContext } from \"react\"\nimport OpenInBrowserIcon from \"@material-ui/icons/OpenInBrowser\"\nimport FileSystemContext from \"../FileSystemContext\"\nimport useChange from \"../../jacdac/useChange\"\n\nexport default function FileSystemChip() {\n    const { fileSystem, showDirectoryPicker } = useContext(FileSystemContext)\n    const root = useChange(fileSystem, _ => _?.root)\n    const handleOpenDirectory = showDirectoryPicker\n    const handleCloseDirectory = () => (fileSystem.root = undefined)\n\n    if (!fileSystem) return null\n\n    return (\n        <Chip\n            clickable\n            avatar={<OpenInBrowserIcon />}\n            label={root?.name || \"open directory\"}\n            onClick={handleOpenDirectory}\n            onDelete={root ? handleCloseDirectory : undefined}\n        />\n    )\n}\n","import {\n    Chip,\n    Dialog,\n    DialogContent,\n    DialogContentText,\n    TextField,\n    DialogActions,\n    Button,\n} from \"@material-ui/core\"\nimport React, { ChangeEvent, useContext, useState } from \"react\"\nimport AddIcon from \"@material-ui/icons/Add\"\nimport { useId } from \"react-use-id-hook\"\nimport FileSystemContext from \"../FileSystemContext\"\n\nexport default function FileNewFileChip(props: {\n    name?: string\n    content: string\n    label?: string\n    extension?: string\n}) {\n    const {\n        name: newFileName,\n        content: newFileContent,\n        label,\n        extension,\n    } = props\n    const { fileSystem } = useContext(FileSystemContext)\n    const [open, setOpen] = useState(false)\n    const [value, setValue] = useState(\"\")\n    const valueId = useId()\n\n    const handleOpen = () => {\n        setValue(\"\")\n        setOpen(true)\n    }\n    const handleOk = async () => {\n        setOpen(false)\n        let name = value.toLocaleLowerCase().replace(/\\s+/g, \"\")\n        if (newFileName)\n            await fileSystem.createWorkingDirectory(\n                name,\n                newFileName,\n                newFileContent\n            )\n        else {\n            if (extension) name += `.${extension}`\n            const d = fileSystem.workingDirectory || fileSystem.root\n            const f = await d.fileAsync(name, { create: true })\n            await f.write(newFileContent)\n            fileSystem.workingFile = f\n        }\n    }\n    const handleCancel = () => setOpen(false)\n    const handleValueChange = (event: ChangeEvent<HTMLInputElement>) => {\n        setValue(event.target.value)\n    }\n\n    return (\n        <>\n            <Chip\n                clickable\n                label={label || \"new...\"}\n                icon={<AddIcon />}\n                onClick={handleOpen}\n            />\n            <Dialog open={open} fullWidth={true}>\n                <DialogContent>\n                    <DialogContentText>Choose a project name</DialogContentText>\n                    <TextField\n                        id={valueId}\n                        value={value}\n                        label=\"Value\"\n                        fullWidth={true}\n                        onChange={handleValueChange}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button variant=\"contained\" onClick={handleCancel}>\n                        Cancel\n                    </Button>\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        disabled={!value}\n                        onClick={handleOk}\n                    >\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    )\n}\n","import { Chip } from \"@material-ui/core\"\nimport React from \"react\"\nimport { FileSystemNode } from \"./fsdom\"\n\nexport default function FileSystemNodeChip(props: {\n    node: FileSystemNode\n    selected?: boolean\n    onClick: () => void\n}) {\n    const { node, selected, onClick } = props\n    const { name } = node\n    return (\n        <Chip\n            clickable\n            label={name.replace(/\\.json$/i, \"\")}\n            color={selected ? \"primary\" : undefined}\n            onClick={onClick}\n        />\n    )\n}\n","import { Grid } from \"@material-ui/core\"\nimport React, { useContext, useRef } from \"react\"\nimport useKeyboardNavigationProps from \"../hooks/useKeyboardNavigationProps\"\nimport FileSystemContext from \"../FileSystemContext\"\nimport useChange from \"../../jacdac/useChange\"\nimport FileSystemChip from \"./FileSystemChip\"\nimport FileNewFileChip from \"./FileNewFileChip\"\nimport FileSystemNodeChip from \"./FileSystemNodeChip\"\n\nexport default function FileTabs(props: {\n    newFileName?: string\n    newFileExtension?: string\n    newFileContent?: string\n    newFileLabel?: string\n    hideDirectories?: boolean\n    hideFiles?: boolean\n    directoryFilter?: (directory: string) => boolean\n    fileFilter?: (file: string) => boolean\n}) {\n    const {\n        newFileName,\n        newFileContent,\n        hideDirectories,\n        hideFiles,\n        directoryFilter,\n        fileFilter,\n        newFileLabel,\n        newFileExtension\n    } = props\n    const { fileSystem } = useContext(FileSystemContext)\n    const root = useChange(fileSystem, _ => _?.root)\n    const workingDirectory = useChange(fileSystem, _ => _?.workingDirectory)\n    const workingFile = useChange(fileSystem, _ => _?.workingFile)\n    const directories = useChange(root, _ =>\n        _?.directories?.filter(d => !directoryFilter || directoryFilter(d.name))\n    )\n    const files = useChange(root, _ =>\n        _?.files?.filter(d => !fileFilter || fileFilter(d.name))\n    )\n    const gridRef = useRef()\n    const keyboardProps = useKeyboardNavigationProps(gridRef.current)\n    const handleDirectorySelected = handle => () =>\n        (fileSystem.workingDirectory = handle)\n    const handleFileSelected = handle => () => (fileSystem.workingFile = handle)\n\n    if (!fileSystem) return null\n\n    return (\n        <Grid ref={gridRef} container spacing={1} {...keyboardProps}>\n            <Grid item>\n                <FileSystemChip />\n            </Grid>\n            {!hideDirectories &&\n                directories?.map(node => (\n                    <Grid item key={node.name}>\n                        <FileSystemNodeChip\n                            node={node}\n                            selected={node === workingDirectory}\n                            onClick={handleDirectorySelected(node)}\n                        />\n                    </Grid>\n                ))}\n            {!hideFiles &&\n                files?.map(node => (\n                    <Grid item key={node.name}>\n                        <FileSystemNodeChip\n                            node={node}\n                            selected={node === workingFile}\n                            onClick={handleFileSelected(node)}\n                        />\n                    </Grid>\n                ))}\n            {root && newFileContent && (\n                <Grid item>\n                    <FileNewFileChip\n                        name={newFileName}\n                        content={newFileContent}\n                        label={newFileLabel}\n                        extension={newFileExtension}\n                    />\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n","import React, { KeyboardEvent } from \"react\"\nimport { keyCodeFromEvent } from \"./useFireKey\";\n\nconst LEFT_KEY = 37;\nconst UP_KEY = 38;\nconst RIGHT_KEY = 39;\nconst DOWN_KEY = 40;\n\nexport default function useArrowKeys(options: {\n    onLeft?: () => void,\n    onRight?: () => void,\n    onUp?: () => void,\n    onDown?: () => void,\n    symmetric?: boolean;\n}) {\n    const { onLeft, onUp, onRight, onDown, symmetric } = options;\n\n    if (!onLeft && !onUp && !onRight && !onDown)\n        return undefined;\n\n    const handlers = {\n        [LEFT_KEY]: onLeft,\n        [RIGHT_KEY]: onRight,\n        [UP_KEY]: onUp || (symmetric && onRight),\n        [DOWN_KEY]: onDown || (symmetric && onLeft)\n    }\n\n    return (e: KeyboardEvent<Element>) => {\n        const charCode = keyCodeFromEvent(e);\n        const handler = handlers[charCode];\n        if (handler) {\n            e.preventDefault();\n            handler();\n        }\n    }\n}\n","import React from \"react\"\n\nexport default function useKeyboardNavigation(parentRef: Element) {\n    const query = '[tabindex=\"0\"]';\n    const onMove = (offset: number) => () => {\n        console.log('keyboard move', { offset })\n        const focusable = Array.from<SVGElement>(parentRef?.querySelectorAll(query) || []);\n        if (focusable.length) {\n            const me = focusable.findIndex(f => f === document.activeElement);\n            const next = ((me + offset) + focusable.length) % focusable.length;\n            focusable[next].focus();\n        }\n    }\n    return onMove;\n}","import useArrowKeys from \"./useArrowKeys\";\nimport useKeyboardNavigation from \"./useKeyboardNavigation\";\n\nexport default function useKeyboardNavigationProps(parentRef: Element, vertical?: boolean) {\n    const onMove = useKeyboardNavigation(parentRef);\n\n    const onKeyDown = useArrowKeys({\n        onLeft: !vertical && onMove(-1),\n        onRight: !vertical && onMove(1),\n        onDown: vertical && onMove(1),\n        onUp: vertical && onMove(-1),\n    });\n\n    return {\n        onKeyDown: parentRef && onKeyDown\n    }\n}","import { useContext } from \"react\"\nimport DeviceFilter from \"../../../jacdac-ts/src/jdom/filters/devicefilter\"\nimport ServiceFilter from \"../../../jacdac-ts/src/jdom/filters/servicefilter\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport useChange from \"../../jacdac/useChange\"\n\nexport default function useServices(options?: ServiceFilter & DeviceFilter) {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const services = useChange(bus, _ => _?.services(options) || [], [\n        JSON.stringify(options),\n    ])\n    return services\n}\n","import {\n    BlockDefinition,\n    CategoryDefinition,\n    MODEL_BLOCK_CLASS_STATEMENT_TYPE,\n    MODEL_BLOCK_LAYER_STATEMENT_TYPE,\n} from \"../blockly/toolbox\"\nimport BlockDomainSpecificLanguage from \"../blockly/dsl/dsl\"\n\nimport ExpandModelBlockField from \"../blockly/fields/mb/ExpandModelBlockField\"\nimport DataSetBlockButton from \"../blockly/fields/mb/DataSetBlockButton\"\nimport NeuralNetworkBlockButton from \"../blockly/fields/mb/NeuralNetworkBlockButtons\"\nimport TrainedModelBlockField from \"../blockly/fields/mb/TrainedModelBlockField\"\n\nexport const MODEL_BLOCKS = \"model_block_\"\nexport const MB_DATASET_VAR_TYPE = \"ModelBlockDataSet\"\nexport const MB_CLASS_VAR_TYPE = \"ModelBlockClass\"\nexport const MB_CLASSIFIER_VAR_TYPE = \"ModelBlockClassifier\"\n\nconst dataset_color = \"#123456\"\nconst class_color = \"#2466A8\"\nconst learning_color = \"#561234\"\nconst layer_color = \"#97207a\"\n\nexport class ModelBlockDomainSpecificLanguage\n    implements BlockDomainSpecificLanguage\n{\n    id = \"modelBlocks\"\n    createBlocks() {\n        const blocks: BlockDefinition[] = [\n            /* DataSet blocks */\n            {\n                kind: \"block\",\n                type: MODEL_BLOCKS + \"dataset\",\n                message0: \"dataset %1 %2\",\n                args0: [\n                    {\n                        type: \"field_variable\",\n                        name: \"DATASET_NAME\",\n                        variable: \"dataset1\",\n                        variableTypes: [MB_DATASET_VAR_TYPE],\n                        defaultType: MB_DATASET_VAR_TYPE,\n                    },\n                    {\n                        type: ExpandModelBlockField.KEY,\n                        name: \"EXPAND_BUTTON\",\n                    },\n                ],\n                message1: \"%1\",\n                args1: [\n                    {\n                        type: DataSetBlockButton.KEY,\n                        name: \"DATASET_BUTTONS\",\n                    },\n                ],\n                message2: \"%1\",\n                args2: [\n                    {\n                        type: \"input_statement\",\n                        name: \"LAYER_INPUTS\",\n                        check: [MODEL_BLOCK_CLASS_STATEMENT_TYPE],\n                    },\n                ],\n                inputsInline: false,\n                colour: dataset_color,\n                tooltip:\n                    \"Use this block to define a dataset; it only takes class blocks. Add more information to datasets by creating new classes and stacking them inside dataset blocks. Click on the inspector icon to view more details about this dataset or to generate a new dataset from this one\",\n                helpUrl: \"\",\n                hat: true,\n            } as BlockDefinition,\n            {\n                kind: \"block\",\n                type: MODEL_BLOCKS + \"recording\",\n                message0: \"recording %1 %2 %3\",\n                args0: [\n                    {\n                        type: \"field_input\",\n                        name: \"RECORDING_NAME\",\n                        text: \"recording0\",\n                    },\n                    {\n                        type: \"field_variable\",\n                        name: \"CLASS_NAME\",\n                        variable: \"class1\",\n                        variableTypes: [MB_CLASS_VAR_TYPE],\n                        defaultType: MB_CLASS_VAR_TYPE,\n                    },\n                    {\n                        type: ExpandModelBlockField.KEY,\n                        name: \"EXPAND_BUTTON\",\n                    },\n                ],\n                inputsInline: false,\n                previousStatement: MODEL_BLOCK_CLASS_STATEMENT_TYPE,\n                nextStatement: MODEL_BLOCK_CLASS_STATEMENT_TYPE,\n                colour: class_color,\n                tooltip:\n                    \"Use this recording block to define your classes. Click on the plus icon to download this recording\",\n                helpUrl: \"\",\n            } as BlockDefinition,\n            /* Classifier Blocks */\n            {\n                kind: \"block\",\n                type: MODEL_BLOCKS + \"nn\",\n                message0: \"neural network classifier %1\",\n                args0: [\n                    {\n                        type: \"field_variable\",\n                        name: \"CLASSIFIER_NAME\",\n                        variable: \"classifier1\",\n                        variableTypes: [MB_CLASSIFIER_VAR_TYPE],\n                        defaultType: MB_CLASSIFIER_VAR_TYPE,\n                    },\n                ],\n                message1: \" training data %1 %2\",\n                args1: [\n                    {\n                        type: \"field_variable\",\n                        name: \"NN_TRAINING\",\n                        variable: \"dataset1\",\n                        variableTypes: [MB_DATASET_VAR_TYPE],\n                        defaultType: MB_DATASET_VAR_TYPE,\n                    },\n                    {\n                        type: ExpandModelBlockField.KEY,\n                        name: \"EXPAND_BUTTON\",\n                    },\n                ],\n                message2: \"%1\",\n                args2: [\n                    {\n                        type: NeuralNetworkBlockButton.KEY,\n                        name: \"NN_BUTTONS\",\n                    },\n                ],\n                message3: \"%1\",\n                args3: [\n                    {\n                        type: \"input_statement\",\n                        name: \"LAYER_INPUTS\",\n                        check: [MODEL_BLOCK_LAYER_STATEMENT_TYPE],\n                    },\n                ],\n                inputsInline: false,\n                colour: learning_color,\n                tooltip:\n                    \"Use this block to define a neural network classifier; it only takes layer blocks.\",\n                helpUrl: \"\",\n            } as BlockDefinition,\n            {\n                kind: \"block\",\n                type: MODEL_BLOCKS + \"trained_nn\",\n                message0: \"trained model %1\",\n                args0: [\n                    {\n                        type: \"field_input\",\n                        name: \"TRAINED_MODEL_NAME\",\n                        text: \"classifier1.t\",\n                    },\n                ],\n                message1: \"testing data %1\",\n                args1: [\n                    {\n                        type: \"field_variable\",\n                        name: \"MODEL_TEST_SET\",\n                        variable: \"dataset1\",\n                        variableTypes: [MB_DATASET_VAR_TYPE],\n                        defaultType: MB_DATASET_VAR_TYPE,\n                    },\n                ],\n                message2: \"display %1\",\n                args2: [\n                    {\n                        type: \"field_dropdown\",\n                        options: [\"confusion matrix\", \"dataset plot\"].map(s => [\n                            s,\n                            s,\n                        ]),\n                        name: \"SELECTED_CHART\",\n                    },\n                ],\n                message3: \"%1\",\n                args3: [\n                    {\n                        type: TrainedModelBlockField.KEY,\n                        name: \"TRAINED_MODEL_DISPLAY\",\n                    },\n                ],\n                inputsInline: false,\n                colour: learning_color,\n                tooltip:\n                    \"Use this block to test a trained model with different datasets.\",\n                helpUrl: \"\",\n            } as BlockDefinition,\n            {\n                kind: \"block\",\n                type: MODEL_BLOCKS + \"conv1d_layer\",\n                message0: \"convolution1d (16, 2, 1) %1\",\n                args0: [\n                    {\n                        type: ExpandModelBlockField.KEY,\n                        name: \"EXPAND_BUTTON\",\n                    },\n                ],\n                inputsInline: false,\n                previousStatement: [MODEL_BLOCK_LAYER_STATEMENT_TYPE],\n                nextStatement: MODEL_BLOCK_LAYER_STATEMENT_TYPE,\n                colour: layer_color,\n                tooltip:\n                    \"Use this block to add a 1D convolutional layer to a neural network classifier. Convolutional layers are often used to summarize key features from input data.\",\n                helpUrl: \"\",\n            } as BlockDefinition,\n            {\n                kind: \"block\",\n                type: MODEL_BLOCKS + \"maxpool1d_layer\",\n                message0: \"max pool1d (2, 1) %1\",\n                args0: [\n                    {\n                        type: ExpandModelBlockField.KEY,\n                        name: \"EXPAND_BUTTON\",\n                    },\n                ],\n                inputsInline: false,\n                previousStatement: [MODEL_BLOCK_LAYER_STATEMENT_TYPE],\n                nextStatement: MODEL_BLOCK_LAYER_STATEMENT_TYPE,\n                colour: layer_color,\n                tooltip: \"\",\n                helpUrl: \"\",\n            } as BlockDefinition,\n            {\n                kind: \"block\",\n                type: MODEL_BLOCKS + \"avgpool1d_layer\",\n                message0: \"average pool1d (2, 1) %1\",\n                args0: [\n                    {\n                        type: ExpandModelBlockField.KEY,\n                        name: \"EXPAND_BUTTON\",\n                    },\n                ],\n                inputsInline: false,\n                previousStatement: [MODEL_BLOCK_LAYER_STATEMENT_TYPE],\n                nextStatement: MODEL_BLOCK_LAYER_STATEMENT_TYPE,\n                colour: layer_color,\n                tooltip: \"\",\n                helpUrl: \"\",\n            } as BlockDefinition,\n\n            {\n                kind: \"block\",\n                type: MODEL_BLOCKS + \"conv2d_layer\",\n                message0: \"convolution2d (16, 2, 1) %1\",\n                args0: [\n                    {\n                        type: ExpandModelBlockField.KEY,\n                        name: \"EXPAND_BUTTON\",\n                    },\n                ],\n                inputsInline: false,\n                previousStatement: [MODEL_BLOCK_LAYER_STATEMENT_TYPE],\n                nextStatement: MODEL_BLOCK_LAYER_STATEMENT_TYPE,\n                colour: layer_color,\n                tooltip:\n                    \"Use this block to add a 2D convolutional layer to a neural network classifier. Convolutional layers are often used to summarize key features from input data.\",\n                helpUrl: \"\",\n            } as BlockDefinition,\n            {\n                kind: \"block\",\n                type: MODEL_BLOCKS + \"maxpool2d_layer\",\n                message0: \"max pool2d (2, 1) %1\",\n                args0: [\n                    {\n                        type: ExpandModelBlockField.KEY,\n                        name: \"EXPAND_BUTTON\",\n                    },\n                ],\n                inputsInline: false,\n                previousStatement: [MODEL_BLOCK_LAYER_STATEMENT_TYPE],\n                nextStatement: MODEL_BLOCK_LAYER_STATEMENT_TYPE,\n                colour: layer_color,\n                tooltip: \"\",\n                helpUrl: \"\",\n            } as BlockDefinition,\n            {\n                kind: \"block\",\n                type: MODEL_BLOCKS + \"avgpool2d_layer\",\n                message0: \"average pool2d (2, 1) %1\",\n                args0: [\n                    {\n                        type: ExpandModelBlockField.KEY,\n                        name: \"EXPAND_BUTTON\",\n                    },\n                ],\n                inputsInline: false,\n                previousStatement: [MODEL_BLOCK_LAYER_STATEMENT_TYPE],\n                nextStatement: MODEL_BLOCK_LAYER_STATEMENT_TYPE,\n                colour: layer_color,\n                tooltip: \"\",\n                helpUrl: \"\",\n            } as BlockDefinition,\n            {\n                kind: \"block\",\n                type: MODEL_BLOCKS + \"dropout_layer\",\n                message0: \"dropout (0.1) %1\",\n                args0: [\n                    {\n                        type: ExpandModelBlockField.KEY,\n                        name: \"EXPAND_BUTTON\",\n                    },\n                ],\n                inputsInline: false,\n                previousStatement: [MODEL_BLOCK_LAYER_STATEMENT_TYPE],\n                nextStatement: MODEL_BLOCK_LAYER_STATEMENT_TYPE,\n                colour: layer_color,\n                tooltip: \"\",\n                helpUrl: \"\",\n            } as BlockDefinition,\n            {\n                kind: \"block\",\n                type: MODEL_BLOCKS + \"flatten_layer\",\n                message0: \"flatten %1\",\n                args0: [\n                    {\n                        type: ExpandModelBlockField.KEY,\n                        name: \"EXPAND_BUTTON\",\n                    },\n                ],\n                inputsInline: false,\n                previousStatement: [MODEL_BLOCK_LAYER_STATEMENT_TYPE],\n                nextStatement: MODEL_BLOCK_LAYER_STATEMENT_TYPE,\n                colour: layer_color,\n                tooltip: \"\",\n                helpUrl: \"\",\n            } as BlockDefinition,\n            {\n                kind: \"block\",\n                type: MODEL_BLOCKS + \"dense_layer\",\n                message0: \"dense (4, relu) %1\",\n                args0: [\n                    {\n                        type: ExpandModelBlockField.KEY,\n                        name: \"EXPAND_BUTTON\",\n                    },\n                ],\n                inputsInline: false,\n                previousStatement: [MODEL_BLOCK_LAYER_STATEMENT_TYPE],\n                nextStatement: MODEL_BLOCK_LAYER_STATEMENT_TYPE,\n                colour: layer_color,\n                tooltip: \"\",\n                helpUrl: \"\",\n            } as BlockDefinition,\n        ]\n        return blocks\n    }\n\n    createCategory() {\n        return [<CategoryDefinition>(<unknown>{\n                kind: \"category\",\n                name: \"Data sets\",\n                colour: dataset_color,\n                contents: [\n                    {\n                        kind: \"label\",\n                        text: \"Recordings\",\n                    },\n                    {\n                        kind: \"button\",\n                        text: \"Create new recording...\",\n                        callbackKey: \"createNewRecordingButton\",\n                    },\n                    {\n                        kind: \"label\",\n                        text: \"Datasets\",\n                    },\n                    {\n                        kind: \"button\",\n                        text: \"Create new dataset variable...\",\n                        callbackKey: \"createNewDataSetButton\",\n                    },\n                    {\n                        kind: \"block\",\n                        type: MODEL_BLOCKS + \"dataset\",\n                    },\n                ],\n            }), <CategoryDefinition>(<unknown>{\n                kind: \"category\",\n                name: \"Models\",\n                colour: learning_color,\n                contents: [\n                    {\n                        kind: \"label\",\n                        text: \"Classifiers\",\n                    },\n                    {\n                        kind: \"button\",\n                        text: \"Create new classifier variable...\",\n                        callbackKey: \"createNewClassifierButton\",\n                    },\n                    {\n                        kind: \"block\",\n                        blockxml: `<block type=\"model_block_nn\"><field name=\"CLASSIFIER_NAME\" variabletype=\"ModelBlockClassifier\">classifier1</field><field name=\"NN_TRAINING\" variabletype=\"ModelBlockDataSet\">dataset1</field><field name=\"EXPAND_BUTTON\">{\"parametersVisible\":false,\"totalParams\":0,\"totalLayers\":0,\"totalSize\":0,\"runTimeInMs\":0,\"inputShape\":[0,0],\"optimizer\":\"adam\",\"numEpochs\":200,\"lossFn\":\"categoricalCrossentropy\",\"metrics\":\"acc\"}</field><field name=\"NN_BUTTONS\">{}</field></block>`,\n                    },\n                    {\n                        kind: \"label\",\n                        text: \"Layers\",\n                    },\n                    {\n                        kind: \"block\",\n                        blockxml: `<block type=\"model_block_conv1d_layer\"><field name=\"EXPAND_BUTTON\">{\"parametersVisible\":false,\"percentSize\":0,\"percentParams\":0,\"runTimeInMs\":0,\"outputShape\":[0,0],\"numFilters\":16,\"kernelSize\":2,\"strideSize\":1,\"activation\":\"relu\"}</field></block>`,\n                    },\n                    {\n                        kind: \"block\",\n                        blockxml: `<block type=\"model_block_maxpool1d_layer\"><field name=\"EXPAND_BUTTON\">{\"parametersVisible\":false,\"percentSize\":0,\"percentParams\":0,\"runTimeInMs\":0,\"outputShape\":[0,0],\"poolSize\":2,\"strideSize\":1}</field></block>`,\n                    },\n                    {\n                        kind: \"block\",\n                        blockxml: `<block type=\"model_block_avgpool1d_layer\"><field name=\"EXPAND_BUTTON\">{\"parametersVisible\":false,\"percentSize\":0,\"percentParams\":0,\"runTimeInMs\":0,\"outputShape\":[0,0],\"poolSize\":2,\"strideSize\":1}</field></block>`,\n                    },\n                    {\n                        kind: \"block\",\n                        blockxml: `<block type=\"model_block_conv2d_layer\"><field name=\"EXPAND_BUTTON\">{\"parametersVisible\":false,\"percentSize\":0,\"percentParams\":0,\"runTimeInMs\":0,\"outputShape\":[0,0,0],\"numFilters\":16,\"kernelSize\":2,\"strideSize\":1,\"activation\":\"relu\"}</field></block>`,\n                    },\n                    {\n                        kind: \"block\",\n                        blockxml: `<block type=\"model_block_maxpool2d_layer\"><field name=\"EXPAND_BUTTON\">{\"parametersVisible\":false,\"percentSize\":0,\"percentParams\":0,\"runTimeInMs\":0,\"outputShape\":[0,0,0],\"poolSize\":2,\"strideSize\":1}</field></block>`,\n                    },\n                    {\n                        kind: \"block\",\n                        blockxml: `<block type=\"model_block_avgpool2d_layer\"><field name=\"EXPAND_BUTTON\">{\"parametersVisible\":false,\"percentSize\":0,\"percentParams\":0,\"runTimeInMs\":0,\"outputShape\":[0,0,0],\"poolSize\":2,\"strideSize\":1}</field></block>`,\n                    },\n                    {\n                        kind: \"block\",\n                        blockxml: `<block type=\"model_block_dropout_layer\"><field name=\"EXPAND_BUTTON\">{\"parametersVisible\":false,\"percentSize\":0,\"percentParams\":0,\"runTimeInMs\":0,\"outputShape\":[0,0],\"rate\":0.1}</field></block>`,\n                    },\n                    {\n                        kind: \"block\",\n                        blockxml: `<block type=\"model_block_flatten_layer\"><field name=\"EXPAND_BUTTON\">{\"parametersVisible\":false,\"percentSize\":0,\"percentParams\":0,\"runTimeInMs\":0,\"outputShape\":[0]}</field></block>`,\n                    },\n                    {\n                        kind: \"block\",\n                        blockxml: `<block type=\"model_block_dense_layer\"><field name=\"EXPAND_BUTTON\">{\"parametersVisible\":false,\"percentSize\":0,\"percentParams\":0,\"runTimeInMs\":0,\"outputShape\":[0],\"numUnits\":4,\"activation\":\"relu\"}</field></block>`,\n                    },\n                    {\n                        kind: \"label\",\n                        text: \"Visualizations\",\n                    },\n                    {\n                        kind: \"block\",\n                        type: MODEL_BLOCKS + \"trained_nn\",\n                    },\n                ],\n            })]\n    }\n}\n\nconst modelBlockDsl = new ModelBlockDomainSpecificLanguage()\nexport default modelBlockDsl\n","import {\n    createTheme,\n    responsiveFontSizes,\n    ThemeOptions,\n    ThemeProvider,\n} from \"@material-ui/core\"\nimport React, { useContext } from \"react\"\nimport DarkModeContext from \"./DarkModeContext\"\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport default function AppTheme(props: any) {\n    const { darkMode } = useContext(DarkModeContext)\n    const isDark = darkMode === \"dark\"\n    const themeDef: ThemeOptions = {\n        palette: {\n            primary: {\n                main: isDark ? \"#56d364\" : \"#2e7d32\",\n            },\n            secondary: {\n                main: \"#ffc400\",\n            },\n            contrastThreshold: isDark ? 5.1 : 3.1,\n            type: darkMode,\n        },\n    }\n    const rawTheme = createTheme(themeDef)\n    const theme = responsiveFontSizes(rawTheme)\n    return <ThemeProvider theme={theme} {...props} />\n}\n","import React, { useState } from \"react\"\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\"\nimport DoneIcon from \"@material-ui/icons/Done\"\nimport ReportProblemIcon from \"@material-ui/icons/ReportProblem\"\nimport IconButtonWithTooltip from \"./IconButtonWithTooltip\"\nimport { Button } from \"@material-ui/core\"\nimport useMounted from \"../hooks/useMounted\"\nimport { delay } from \"../../../jacdac-ts/src/jdom/utils\"\n\ndeclare class ClipboardItem {\n    constructor(input: { [contentType: string]: Blob })\n}\n\ndeclare type AsyncClipboardWriteFunction = (\n    input: ClipboardItem\n) => Promise<void>\n\ndeclare global {\n    interface Window {\n        ClipboardItem: ClipboardItem | undefined\n    }\n\n    interface Clipboard {\n        write?: AsyncClipboardWriteFunction\n    }\n}\n\nexport default function CopyButton(props: {\n    label?: string\n    title?: string\n    onCopy: () => Promise<string | HTMLCanvasElement>\n    className?: string\n    size?: \"small\"\n}) {\n    const { label, title = \"copy data to clipboard\", onCopy, ...rest } = props\n    const [copied, setCopied] = useState<boolean>(undefined)\n    const mounted = useMounted()\n    const handleClick = async (ev: React.MouseEvent<HTMLButtonElement>) => {\n        ev.stopPropagation()\n        ev.preventDefault()\n\n        try {\n            setCopied(null)\n            const copied = await onCopy()\n            if (typeof copied === \"string\") {\n                const text = copied as string\n                await navigator.clipboard.writeText(text)\n            } else {\n                const canvas = copied as HTMLCanvasElement\n                const blob = await new Promise<Blob>(resolve =>\n                    canvas.toBlob(blob => resolve(blob))\n                )\n                const item = new ClipboardItem({ \"image/png\": blob })\n                navigator.clipboard.write([item])\n            }\n            if (mounted()) setCopied(true)\n        } catch (e) {\n            console.debug(e)\n            if (mounted()) setCopied(false)\n        } finally {\n            await delay(1000)\n            if (mounted()) setCopied(undefined)\n        }\n    }\n    const disabled = copied !== undefined\n    const text =\n        copied === true\n            ? \"Copied!\"\n            : copied === false\n            ? \"Copy failed\"\n            : label || \"copy to clipboard\"\n    return label ? (\n        <Button\n            title={title}\n            {...rest}\n            onClick={disabled ? undefined : handleClick}\n        >\n            {text}\n        </Button>\n    ) : (\n        <IconButtonWithTooltip\n            title={text}\n            {...rest}\n            onClick={disabled ? undefined : handleClick}\n        >\n            {copied === true ? (\n                <DoneIcon />\n            ) : copied === false ? (\n                <ReportProblemIcon />\n            ) : (\n                <FileCopyIcon />\n            )}\n        </IconButtonWithTooltip>\n    )\n}\n","import { Box, BoxProps, Paper, PaperProps, useTheme } from \"@material-ui/core\";\nimport React from \"react\";\n\nexport default function PaperBox(props: { padding?: number; elevation?: number; bgcolor?: string } & BoxProps) {\n    const { children, padding, elevation, bgcolor, ...others } = props;\n    const theme = useTheme();\n\n    return <Box {...others} bgcolor={bgcolor} mb={theme.spacing(0.25)}>\n        <Paper square elevation={elevation}>\n            {padding !== 0 && <Box p={theme.spacing(padding || 0.25)}>\n                {children}\n            </Box>}\n            {padding === 0 && children}\n        </Paper>\n    </Box>\n}","/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction mkTitle(txt: string): SVGTitleElement {\n    const t = <SVGTitleElement>elt(\"title\")\n    t.textContent = txt\n    return t\n}\nexport function title(el: SVGElement, txt: string): SVGTitleElement {\n    const t = mkTitle(txt)\n    el.appendChild(t)\n    return t\n}\n\nexport function hydrate(el: SVGElement, props: any) {\n    for (const k in props) {\n        if (k == \"title\") {\n            title(el, props[k])\n        } else el.setAttributeNS(null, k, props[k])\n    }\n}\n\nexport function elt(name: string, props?: any): SVGElement {\n    const el = document.createElementNS(\"http://www.w3.org/2000/svg\", name)\n    if (props) hydrate(el, props)\n    return el\n}\n\nexport function child(parent: Element, name: string, props?: any): SVGElement {\n    const el = elt(name, props)\n    parent.appendChild(el)\n    return el\n}\n"],"names":["VM_WATCH_CHANGE","VM_BREAKPOINT","VM_COMMAND_FAILED","VM_ROLE_MISSING","VM_GLOBAL_CHANGE","VM_GLOBAL_TYPE_MISMATCH","VM_INTERNAL_ERROR","VM_LOG_ENTRY","useEffect","useWindowEvent","type","listener","passive","deps","window","undefined","addEventListener","removeEventListener","concat","useMemo","useContext","unique","makeCodeServices","MakeCodeSnippetContext","parseMakeCodeSnippet","source","ghost","code","meta","dependencies","test","front","parts","replace","split","length","m","name","value","push","snippet","mkcds","filter","info","src","indexOf","client","qName","default","map","repo","forEach","dep","useMakeCodeRenderer","target","rendererUrl","lang","iframeId","pendingRequests","sendRequest","req","iframe","document","getElementById","dataset","ready","contentWindow","postMessage","render","console","log","f","createElement","id","style","position","left","bottom","width","height","body","appendChild","Math","random","options","snippetMode","Promise","resolve","reject","handleMessage","ev","msg","data","Object","keys","k","r","createStyles","makeStyles","React","useRef","PACKET_PROCESS","PACKET_SEND","JacdacContext","PaperBox","useStyles","root","root2","paddingTop","top","border","MakeCodeSimulator","props","simUrl","bus","frameRef","classes","url","encodeURIComponent","join","origin","URL","subscribe","pkt","packetSent","channel","broadcast","toBuffer","sender","current","useState","Tab","Tabs","CodeBlock","TabPanel","withPrefix","MakeCodeSnippet","renderedSource","rendered","JSON","parse","tabs","editor","setEditor","tab","setTab","handleTabChange","event","newValue","lazy","Highlight","defaultProps","LIGHT_THEME","DARK_THEME","DarkModeContext","IconButton","Link","GetAppIcon","LaunchIcon","Tooltip","Suspense","TraceSnippet","CodeSandboxButton","HighlightedCode","children","codeSandbox","className","downloadName","downloadText","actions","darkMode","language","theme","valueUri","tokens","getLineProps","getTokenProps","float","line","index","lineProps","key","token","rest","js","html","BOUND","CHANGE","DEVICE_ANNOUNCE","DEVICE_DISCONNECT","ROLE_BOUND","ROLE_UNBOUND","UNBOUND","serviceSpecificationFromClassIdentifier","JDClient","RoleManager","_roles","mount","addServices","bind","removeServices","bindServices","roles","bound","service","slice","updateRoles","newRoles","oldBound","isBound","changed","supportedNewRoles","serviceClass","i","role","find","splice","emit","newRole","existingRole","emitBoundEvents","updateRole","preferredDeviceId","binding","bindRole","ret","services","ignoreSelf","s","theOne","newOne","device","deviceId","dev","selfDevice","toString","every","trackRoles","bindings","onUpdate","incomplete","roleManager","srv","update","unsubscribe","useRoleManager","visitWorkspace","collectWarnings","workspace","warnings","visitBlock","b","warning","sourceId","message","identityTransformData","resolveBlockDefinition","resolveBlockServices","registerDataSolver","block","jacdacServices","transformData","applyTransform","isEnabled","isInFlyout","nextServices","nextConnection","targetBlock","setDataWarning","newData","transformedData","def","passthroughData","e","debug","then","on","Blockly","Flags","toMap","resolveDsl","ReactFieldBase","domToJSON","dsls","clean","o","builtins","logic_null","text","getFieldValue","math_number","Number","logic_boolean","variableToJSON","variable","getId","fieldsToJSON","fields","field","toLowerCase","fieldToJSON","xmlToJSON","xml","j","diagnostics","outerHTML","getAttributeNames","v","getAttribute","child","childNodes","nodeType","Node","TEXT_NODE","textContent","ELEMENT_NODE","isSerializable","container","utils","fieldXml","toXml","flattenNext","next","blockToJSON","blockToJSONHidden","isInsertionMarker","getChildren","dsl","blockToValue","element","inputs","inputList","input","fieldRow","connection","getNextBlock","variables","Variables","allUsedVarModels","sort","l","localeCompare","blocks","getTopBlocks","json","visitWorkspaceJSON","error","useCallback","useWorkspaceEvent","useBlocklyEvents","handleChange","Events","BLOCK_CHANGE","change","getBlockById","blockId","twinInput","twinField","emitChange","ContextMenuRegistry","DisableTopBlocks","useBlocklyPlugins","registry","getItem","unregister","addChangeListener","disableOrphans","disableTopBlocksPlugin","init","removeChangeListener","arrayConcatMany","useServices","useTheme","registerFields","visitToolbox","addDataPreviewField","BlockSvg","prototype","setHighlighted","highlighted","addSelect","removeSelect","loadBlocks","createBlocks","Blocks","jacdacDefinition","jsonInit","patchCategoryJSONtoXML","cat","contents","node","kind","exists","warn","values","blockxml","shadow","useToolbox","liveServices","specification","toolboxConfiguration","dslsCategories","createCategory","order","shift","pop","useToolboxButtons","buttons","visitButton","btn","button","registerButtonCallback","callbackKey","callback","removeButtonCallback","Xml","createContext","useLocalStorage","JSON_WARNINGS_CATEGORY","NEW_PROJET_XML","WORKSPACE_FILENAME","BlockServices","resolveWorkspaceServices","WorkspaceServices","AppContext","useEffectAsync","useChange","FileSystemContext","resolveBlockWarnings","BlockContext","editorId","setEditorId","workspaceXml","workspaceJSON","dragging","setWarnings","setWorkspace","setWorkspaceXml","displayName","DEFAULT_XML","BlockProvider","storageKey","onBeforeSaveWorkspaceFile","setError","fileSystem","workspaceDirectory","_","workingDirectory","workspaceFile","file","create","storedXml","setStoredXml","_setWorkspaceXml","setWorkspaceJSON","_setWarnings","setDragging","category","entries","findIndex","w","initializeBlockServices","initialized","notifyServicesChanged","handleBlockChange","clearData","handleWorkspaceEvent","workspaceId","BLOCK_DRAG","dragEvent","isStart","FINISHED_LOADING","getAllBlocks","BLOCK_CREATE","bev","BLOCK_MOVE","cev","parentId","newParentId","wws","newWorkspaceJSON","newWarnings","mounted","textAsync","Error","dom","textToDom","clear","domToWorkspace","fileContent","stringify","write","allErrors","setWarningText","handlers","createWorkspaceChangeListener","c","handler","backgroundRefreshRegisters","unmounnts","u","Grid","Typography","BlockDiagnostics","Dialog","DialogActions","DialogContent","DialogContentText","TextField","Button","useId","BlocklyModalDialogs","dialogType","setDialogType","setMessage","setValue","valueId","showDialog","previous","alert","confirm","prompt","cb","defaultValue","handleCloseConfirm","handleCancel","handleOk","handleValueChange","TOOLBOX_AT_LEFT","Scrollbar","ComponentManager","ReactDOM","svgPointerPoint","MINI_RADIUS","MARGIN_VERTICAL_","MARGIN_HORIZONTAL_","MIN_SCALE","MAX_WIDTH","MAX_HEIGHT","MiniBlock","x","y","color","MiniViewport","view","palette","vx","vy","primary","grey","BlockMiniMap","onSizeUpdate","svgRef","metrics","setMetrics","setView","handleMetrics","metricsManager","getMetricsManager","getViewMetrics","getContentMetrics","scroll","getScrollMetrics","tops","childBlocks_","rect","getBoundingRectangle","getColour","handleView","BLOCK_DELETE","VIEWPORT_CHANGE","handleCenterView","preventDefault","stopPropagation","pos","halfViewWidth","halfViewHeight","scrollToCenterX","scrollToCenterY","cleft","ctop","cwidth","cheight","right","MinimapPlugin","workspace_","top_","left_","width_","height_","scale_","componentManager","getComponentManager","addComponent","component","weight","capabilities","Capability","POSITIONABLE","createDom_","resize","svgGroup_","createSvgElement","Svg","G","class","insertAfter","getBubbleCanvas","handleSizeUpdate","hasVerticalScrollbars","scrollbar","canScrollHorizontally","toolboxMetrics","horizontalLayout","RTL","absoluteMetrics","viewMetrics","scrollbarThickness","positionSvgGroup","setAttribute","Rect","min","dw","useBlockMinimap","getParser","Alert","AlertTitle","BrowserCompatibilityAlert","label","compatible","browser","navigator","userAgent","satisfies","useBlocklyWorkspace","Theme","DarkTheme","clsx","fontFamily","typography","fontWeight","opacity","cursor","fill","BlockEditor","blocklyRef","ref","workspaceConfiguration","collapse","disable","comments","css","trashcan","sounds","renderer","oneBasedIndex","move","scrollbars","vertical","horizontal","media","zoom","controls","wheel","startScale","maxScale","minScale","scaleSpeed","pinch","initialXml","onImportXmlError","observer","ResizeObserver","observe","disconnect","chrome","edge","firefox","FieldVariable","JDEventSource","_workspaceJSON","WORKSPACE_CHANGE","_runner","_roleManager","_directory","workspaceWithServices","DATA_WARNING_KEY","cache","setWarning","_warnings","_data","_transformedData","blockWithServices","setBlockWarning","setBlockDataWarning","WorkspaceContext","sourceBlock","flyout","roleServiceClass","roleService","runner","WorkspaceProvider","setSourceBlock","getSourceBlock","isDragging","resolveRole","newSourceBlock","roleInput","roleField","getVariable","resolveRoleService","newRoleService","setRole","setRoleService","setFlyout","events","drag","ScatterPlotField","DATA_SCIENCE_STATEMENT_TYPE","DataColumnChooserField","LinePlotField","BarChartField","HistogramField","DataTableField","paletteColorByIndex","BoxPlotField","VegaChartField","tidyHeaders","tidyResolveFieldColumn","JSONSettingsField","HeatMapPlotField","SCATTERPLOT_BLOCK","LINEPLOT_BLOCK","HEATMAP_BLOCK","BARCHART_BLOCK","HISTOGRAM_BLOCK","BOX_PLOT_BLOCK","CHART_SHOW_TABLE_BLOCK","VEGA_LAYER_BLOCK","VEGA_ENCODING_BLOCK","VEGA_STATEMENT_TYPE","chartSettingsSchema","properties","title","axisSchema","scaleSchema","domainMin","description","domainMax","encodingSettingsSchema","axis","encodingNumberSettingsSchema","scale","char2DSettingsSchema","encoding","charMapSettingsSchema","colour","chartDsl","tooltip","message0","args0","KEY","selectColumns","previousStatement","nextStatement","template","inputsInline","dataPreviewField","dataType","schema","check","parentData","blockToVisualizationSpec","headers","types","mark","spec","getInputTargetBlock","fieldType","dslName","fieldShadows","fieldsDsl","_palette","workerProxy","downloadCSV","worker","res","saveCSV","fileHandle","unparseCSV","resp","parseCSV","postTransformData","visitor","visitInput","visitField","FieldDropdown","cereal","penguins","BuiltinDataSetField","fromJson","updateData","getValue","marker","errors","doValueUpdate_","humanify","SERIALIZABLE","fromXml","fieldElement","getOptions","getSurroundParent","h","doClassValidation_","ReactField","DataTablePreviewWidget","DataPreviewField","validator","compare","initCustomView","group","fieldGroup_","classList","add","getText_","renderField","preview","lastIndexOf","parseInt","substr","identity","ReactInlineField","DataTableWidget","SMALL_TABLE_HEIGHT","MAX_ITEMS","EDITABLE","transformed","small","createContainer","display","minWidth","maxWidth","maxHeight","renderInlineField","tableHeight","useBlockData","TABLE_HEIGHT","TABLE_WIDTH","PointerBoundary","CopyButton","roundWithPrecision","tidyResolveHeader","empty","paddingLeft","paddingRight","background","borderRadius","marginTop","overflow","table","margin","fontSize","lineHeight","backgroundClip","borderColor","borderRightStyle","maxItems","raw","selectedColumns","n","columns","renderCell","handleCopy","FileOpenField","resolveFiles","parseSource","dispose","unmount","directory","files","filename","csv","value_","blockServices","wsServices","_unmount","Field","FileSaveField","fileType","showEditor_","openFileHandle","accept","excludeAcceptAllOption","showSaveFilePicker","tidyFindLastValue","tidy","tidyMin","max","tidyMax","summarize","GaugeWidget","GaugeWidgetView","isNaN","step","ceil","abs","precision","log10","GaugeWidgetField","NoServiceAlert","JDomServiceTreeView","JDomTreeWidget","onPointerStopPropagation","JDomTreeField","UNMOUNT","assert","JSONSchemaForm","JSONSettingsWidget","editValue","setEditValue","minHeight","padding","renderKeyboardKey","KeyboardKeyInput","KeyboardKeyField","selector","modifiers","newSelector","newModifiers","toShadowDefinition","rgbToHtmlColor","ValueContext","LEDWidget","LEDColorFieldWidget","onValueChange","LEDColorField","size_","cx","cy","strokeWidth","stroke","updateView","circle","SHADOW","ReactImageField","setSize","Size","img","imgUri","renderValue","setAttributeNS","getText","alt","fromHex","toHex","VALUE_CHANGE","LEDMatrixWidget","LEDMatrixField","rows","leds","columnspadded","ledsBytes","cvs","pw","ph","ctx","getContext","fillStyle","fillRect","bitindex","byte","bit","dataUri","toDataURL","onChange","newLeds","Uint8Array","LogViewWidget","LogViewField","AddIcon","startServiceProviderFromServiceClass","handleStartSimulator","classIdentifier","createToneContext","PianoWidget","NoteField","handlePlayTone","newFrequency","toneContext","playTone","JacdacProvider","IdProvider","DarkModeProvider","AppTheme","Box","ValueProvider","WebAudioProvider","SOURCE_BLOCK_CHANGE","MOUNT","sourceBlock_","bs","initView","updateSize_","div_","DropDownDiv","getContentDiv","getColourTertiary","setColour","setTimeout","showPositionedByField","dropdownDispose_","hide","hideIfOwner","unmountComponentAtNode","output","size","fo","resizeObserver","entry","contentRect","forceRerender","get","fire","renderBlock","bindEvents_","bindMouseEvents","getClickTarget_","Slider","FieldWithSlider","nv","round","SliderField","renderWidget","ServoWidget","ServiceFieldWidget","ServoAngleField","TwinWidget","TwinField","UseModelField","_models","populateModels","model","status","getModel","selectedModel","initialValue","onFieldValueChange","VariablesWidget","setVariables","globals","VariablesField","SwitchWithLabel","HORIZON","WatchValueWidget","setData","lookupWatch","watchSourceId","time","timestamp","valueNumber","paper","spacing","WatchValueField","VegaLiteWidget","BAR_CORNER_RADIUS","BAR_MAX_ITEMS","BarWidget","sliceOptions","sliceMax","cornerRadius","BarField","BoxPlotWidget","zero","LINE_MAX_ITEMS","HeatMapWidget","sliceHead","HistogramWidget","bin","aggregate","LinePlotWidget","SCATTER_MAX_ITEMS","ScatterPlotWidget","linearRegression","sliceSample","filled","slope","intercept","layer","transform","regression","VegaChartWidget","NoSsr","CHART_HEIGHT","CHART_SVG_MAX_ITEMS","CHART_WIDTH","tidySlice","JSONTryParse","FullscreenIcon","IconButtonWithTooltip","VegaLite","clone","isKV","Array","isArray","jsonMergeFrom","trg","vegaData","setVegaData","viewRef","settings","handleNewView","fullSpec","some","clip","strokeDash","sliced","canvas","toCanvas","handleFullScreen","svg","firstElementChild","removeAttribute","requestFullscreen","navigationUI","ExpandModelBlockField","DataSetBlockField","DataSetBlockButton","RecordingBlockField","NeuralNetworkBlockField","NeuralNetworkBlockButton","ConvLayerBlockField","PoolingLayerBlockField","DropoutLayerBlockField","FlattenLayerBlockField","DenseLayerBlockField","TrainedModelBlockField","reactFieldShadows","registerType","fieldRegistry","register","fieldTypes","MenuItem","Select","fieldContainer","LayerParameterWidget","initFieldValue","percentSize","percentParams","outputShape","runTimeInMs","numFilters","kernelSize","strideSize","activation","updateParameters","updatedValue","expandField","getField","updateFieldValue","handleChangedFilters","valueAsNumber","handleChangedKernelSize","handleChangedStrides","handleChangedActivation","toPrecision","previousValue","ViewIcon","DownloadIcon","DataSetButtonWidget","handleViewDataSet","handleDownloadDataSet","DataSetBlockButtons","DataSetParameterWidget","inputClasses","inputTypes","setBlockData","totalRecordings","numRecordings","numSamples","numUnits","handleChangedUnits","rate","rateAsNum","parseFloat","handleChangedRate","valueAsNum","AddCircleIcon","RemoveCircleIcon","MODEL_BLOCKS","REMOVABLE_INPUT","LAYER_INPUT","ExpandIconWidget","getCurrentValue","updateCurrentValue","paramName","paramValue","appendParamInput","appendDummyInput","appendField","getBlockFieldType","setMovable","getInput","moveInputBefore","blockType","currentValue","parametersVisible","setParametersVisible","fieldValue","paramsVisible","handleExpandBlock","parameterField","paramValues","getParentInput","removeInput","backgroundColor","updateBlockName","nameField","blockName","poolSize","AutorenewIcon","numberField","marginBottom","buttonContainer","NeuralNetworkButtonWidget","handleTrainModel","handleDownloadModel","NeuralNetworkBlockButtons","NNParameterWidget","totalLayers","totalSize","totalParams","inputShape","optimizer","setOptimizer","numEpochs","setNumEpochs","lossFn","setLossFn","handleChangedEpochs","handleChangedOptimizer","handleChangedLossFn","handleChangedPoolSize","RecordingParameterWidget","predictRequest","arraysEqual","ConfusionMatrixHeatMap","DataSetPlot","inlineItem","overflowY","TrainedModelDisplayWidget","chartProps","MARK_SIZE","TOOLTIP_NUM_FORMAT","PALETTE","chartType","setChartType","dataSet","setDataSet","setModel","trainingPredictionResult","setTrainingPredictionResult","trainTimestamp","setTrainTimestamp","Date","now","errorMsg","setErrorMsg","updatedDataSet","updatedModel","selectedChart","predictMsg","zData","xs","toJSON","result","predictTop","handleViewTrainedModel","trainedModelName","labels","ys","row","header","column","fieldName","required","tidyResolveFieldColumns","sliceMin","Infinity","sliceTail","JSON_TYPE","STRING_TYPE","BOOLEAN_TYPE","NUMBER_TYPE","PRIMITIVE_TYPES","BUILTIN_TYPES","CODE_STATEMENT_TYPE","MODEL_BLOCK_CLASS_STATEMENT_TYPE","MODEL_BLOCK_PREPROCESS_STATEMENT_TYPE","MODEL_BLOCK_LAYER_STATEMENT_TYPE","TWIN_BLOCK","toolsColour","TABLE_PREVIEW_MAX_ITEMS","VM_WARNINGS_CATEGORY","MB_WARNINGS_CATEGORY","visitContents","content","useThrottledCallback","DEFAULT_THROTTLE","useChangeThrottled","query","version","setVersion","changeId","throttledSetVersion","useDebounce","useDragDebounce","delay","debounced","valueAtDragging","setValueAtDragging","debouncedTransformedData","Chip","OpenInBrowserIcon","FileSystemChip","showDirectoryPicker","handleOpenDirectory","handleCloseDirectory","FileNewFileChip","newFileName","newFileContent","extension","open","setOpen","handleOpen","toLocaleLowerCase","createWorkingDirectory","d","fileAsync","workingFile","FileSystemNodeChip","selected","onClick","useKeyboardNavigationProps","FileTabs","hideDirectories","hideFiles","directoryFilter","fileFilter","newFileLabel","newFileExtension","directories","gridRef","keyboardProps","handleDirectorySelected","handle","handleFileSelected","keyCodeFromEvent","LEFT_KEY","UP_KEY","RIGHT_KEY","DOWN_KEY","useArrowKeys","onLeft","onUp","onRight","onDown","symmetric","charCode","useKeyboardNavigation","parentRef","onMove","offset","focusable","from","querySelectorAll","me","activeElement","focus","onKeyDown","MB_DATASET_VAR_TYPE","MB_CLASS_VAR_TYPE","MB_CLASSIFIER_VAR_TYPE","dataset_color","class_color","learning_color","layer_color","ModelBlockDomainSpecificLanguage","variableTypes","defaultType","message1","args1","message2","args2","helpUrl","hat","message3","args3","modelBlockDsl","createTheme","responsiveFontSizes","ThemeProvider","isDark","themeDef","main","secondary","contrastThreshold","rawTheme","FileCopyIcon","DoneIcon","ReportProblemIcon","useMounted","onCopy","copied","setCopied","handleClick","clipboard","writeText","blob","toBlob","item","ClipboardItem","disabled","Paper","elevation","bgcolor","others","mkTitle","txt","t","elt","el","hydrate","createElementNS","parent"],"sourceRoot":""}